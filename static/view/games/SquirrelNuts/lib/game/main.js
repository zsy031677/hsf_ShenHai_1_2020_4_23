ig.module("game.main").requires("impact.game","impact.font","game.levels.levela","game.levels.startscreen","game.levels.comics","game.levels.canon","game.levels.shop","game.levels.rotate","game.levels.howtoplay","game.levels.credits","game.entities.canon.canonPlayer","game.entities.canon.speedMeasure","game.entities.canon.pointerMeasure","game.entities.canon.buttonMeasure","game.entities.canon.boom","game.entities.canon.metalicCanon","plugins.director.playerController","plugins.director.gameSettings","plugins.director.director","plugins.director.gameController","plugins.screenshaker.screenshaker","plugins.spawnSystem.spawnSystem","plugins.pause.pause","plugins.touch.touch-button","plugins.screen.screen-fader","game.entities.player","game.entities.slash","game.entities.gameScreen.gameInterface","game.entities.gameScreen.pauseScreen","game.entities.gameScreen.deadScreen","game.entities.shop.textShop","game.entities.shop.shopButton","game.entities.startscreen.mainButtons","game.entities.enemies.ballSpikes","game.entities.enemies.hammer","game.entities.enemies.yellowBird","game.entities.enemies.pinkBird","game.entities.enemies.blueBird","game.entities.enemies.blackBird","game.entities.good.nut1","game.entities.good.nut2","game.entities.good.nut3","game.entities.good.bagNuts","game.entities.good.goldStar").defines(function(){MyGame=ig.Game.extend({gravity:150,font:new ig.Font("media/04b03black.font.png"),mapDirector:null,myScreenShaker:null,playerVar:null,spawnSystem:null,fadeScreen:null,buttons:null,init:function(){ig.input.bind(ig.KEY.LEFT_ARROW,"left"),ig.input.bind(ig.KEY.RIGHT_ARROW,"right"),ig.input.bind(ig.KEY.A,"left"),ig.input.bind(ig.KEY.D,"right"),ig.global.gameSettings.initControls(),this.mapDirector=new ig.Director(this,[LevelLevela]),this.myScreenShaker=new ScreenShaker,this.updatePlayerPos(),this.spawnSystem=new ig.SpawnSystem},update:function(){this.parent(),this.updatePlayerPos(),this.spawnSystem.update(),this.myScreenShaker.update(this.playerVar,this.screen)},draw:function(){ig.system.context.save(),ig.system.context.scale(ig.global.gameSettings.screenRatio,ig.global.gameSettings.screenRatio),this.parent(),ig.system.context.restore(),null!=this.fadeScreen&&this.fadeScreen.draw(),this.buttons&&this.buttons.draw()},updatePlayerPos:function(){var e=ig.game.getEntitiesByType(EntityPlayer)[0];e&&(this.playerVar=e)}}),StartScreen=ig.Game.extend({mapDirector:null,buttons:null,font:new ig.Font("media/04b03black.font.png"),init:function(){ig.global.gameSettings.initControls(),this.mapDirector=new ig.Director(this,[LevelStartscreen,LevelComics,LevelHowtoplay,LevelCredits]),this.positionScreen()},positionScreen:function(){this.screen.x=0,this.screen.y=0},update:function(){this.positionScreen(),this.parent()},draw:function(){ig.system.context.save(),ig.system.context.scale(ig.global.gameSettings.screenRatio,ig.global.gameSettings.screenRatio),this.parent(),ig.system.context.restore()}}),CanonScreen=ig.Game.extend({buttons:null,mapDirector:null,fadeScreen:null,init:function(){ig.global.gameSettings.initControls(),this.mapDirector=new ig.Director(this,[LevelCanon]),this.positionScreen()},positionScreen:function(){this.screen.x=0,this.screen.y=0},update:function(){this.parent(),this.positionScreen()},draw:function(){ig.system.context.save(),ig.system.context.scale(ig.global.gameSettings.screenRatio,ig.global.gameSettings.screenRatio),this.parent(),ig.system.context.restore(),null!=this.fadeScreen&&this.fadeScreen.draw()}}),ShopScreen=ig.Game.extend({buttons:null,mapDirector:null,init:function(){ig.global.gameSettings.initControls(),this.mapDirector=new ig.Director(this,[LevelShop]),this.positionScreen()},positionScreen:function(){this.screen.x=0,this.screen.y=0},update:function(){this.parent(),this.positionScreen()},draw:function(){ig.system.context.save(),ig.system.context.scale(ig.global.gameSettings.screenRatio,ig.global.gameSettings.screenRatio),this.parent(),ig.system.context.restore()}}),RotateScreen=ig.Game.extend({buttons:null,mapDirector:null,init:function(){if(ig.global.playerController.loadData(ig.global.playerController),ig.ua.mobile)if(window.innerWidth>window.innerHeight){(e=document.getElementById("canvas")).style.width=window.innerWidth+"px",e.style.height=window.innerHeight+"px",ig.system.resize(window.innerWidth*ig.global.gameSettings.scale,window.innerHeight*ig.global.gameSettings.scale),this.mapDirector=new ig.Director(this,[LevelRotate])}else{var e=document.getElementById("canvas");e.style.width=window.innerWidth+"px",e.style.height=window.innerHeight+"px",ig.system.resize(window.innerWidth*ig.global.gameSettings.scale,window.innerHeight*ig.global.gameSettings.scale),ig.system.setGame(StartScreen),this.addAutoResize()}else ig.system.setGame(StartScreen),this.addAutoResize();this.positionScreen()},addAutoResize:function(){window.addEventListener("resize",function(){ig.system&&(ig.global.gameSettings.screenRatio=Math.round(window.innerHeight/480*100)/100,ig.global.gameSettings.mScreenSize.y=Math.round(window.innerHeight/ig.global.gameSettings.scale),ig.global.gameSettings.mScreenSize.x=Math.round(320*ig.global.gameSettings.screenRatio/ig.global.gameSettings.scale),canvas.style.width=ig.global.gameSettings.mScreenSize.x+"px",canvas.style.height=ig.global.gameSettings.mScreenSize.y+"px",ig.system.resize(ig.global.gameSettings.mScreenSize.x*ig.global.gameSettings.scale,ig.global.gameSettings.mScreenSize.y*ig.global.gameSettings.scale))},!1)},positionScreen:function(){this.screen.x=0-ig.system.width/2+ig.game.collisionMap.width*ig.game.collisionMap.tilesize/2,this.screen.y=0-ig.system.height/2+ig.game.collisionMap.height*ig.game.collisionMap.tilesize/2},update:function(){if(ig.ua.mobile)if(window.innerWidth>window.innerHeight);else{var e=document.getElementById("canvas");e.style.width=window.innerWidth+"px",e.style.height=window.innerHeight+"px",ig.system.resize(window.innerWidth*ig.global.gameSettings.scale,window.innerHeight*ig.global.gameSettings.scale),ig.system.setGame(StartScreen),this.addAutoResize()}else ig.system.setGame(StartScreen),this.addAutoResize();this.parent()}}),ig.global.gameController=new ig.GameController,ig.global.playerController=new ig.PlayerController,ig.global.gameSettings=new ig.GameSettings,ig.main("#canvas",RotateScreen,60,ig.global.gameSettings.mScreenSize.x,ig.global.gameSettings.mScreenSize.y,ig.global.gameSettings.scale)});