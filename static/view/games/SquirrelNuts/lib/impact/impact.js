!function(e){"use strict";if(Number.prototype.map=function(e,t,i,n){return i+(this-e)/(t-e)*(n-i)},Number.prototype.limit=function(e,t){return Math.min(t,Math.max(e,this))},Number.prototype.round=function(e){return e=Math.pow(10,e||0),Math.round(this*e)/e},Number.prototype.floor=function(){return Math.floor(this)},Number.prototype.ceil=function(){return Math.ceil(this)},Number.prototype.toInt=function(){return 0|this},Number.prototype.toRad=function(){return this/180*Math.PI},Number.prototype.toDeg=function(){return 180*this/Math.PI},Array.prototype.erase=function(e){for(var t=this.length;t--;)this[t]===e&&this.splice(t,1);return this},Array.prototype.random=function(){return this[Math.floor(Math.random()*this.length)]},Function.prototype.bind=Function.prototype.bind||function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),i=this,n=function(){},o=function(){return i.apply(this instanceof n&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,o.prototype=new n,o},e.ig={game:null,debug:null,version:"1.23",global:e,modules:{},resources:[],ready:!1,baked:!1,nocache:"",ua:{},prefix:e.ImpactPrefix||"",lib:"lib/",_current:null,_loadQueue:[],_waitForOnload:0,$:function(e){return"#"==e.charAt(0)?document.getElementById(e.substr(1)):document.getElementsByTagName(e)},$new:function(e){return document.createElement(e)},copy:function(e){if(!e||"object"!=typeof e||e instanceof HTMLElement||e instanceof ig.Class)return e;if(e instanceof Array){for(var t=[],i=0,n=e.length;i<n;i++)t[i]=ig.copy(e[i]);return t}t={};for(var i in e)t[i]=ig.copy(e[i]);return t},merge:function(e,t){for(var i in t){var n=t[i];"object"!=typeof n||n instanceof HTMLElement||n instanceof ig.Class||null===n?e[i]=n:(e[i]&&"object"==typeof e[i]||(e[i]=n instanceof Array?[]:{}),ig.merge(e[i],n))}return e},ksort:function(e){if(!e||"object"!=typeof e)return[];var t=[],i=[];for(var n in e)t.push(n);t.sort();for(n=0;n<t.length;n++)i.push(e[t[n]]);return i},setVendorAttribute:function(e,t,i){var n=t.charAt(0).toUpperCase()+t.substr(1);e[t]=e["ms"+n]=e["moz"+n]=e["webkit"+n]=e["o"+n]=i},getVendorAttribute:function(e,t){var i=t.charAt(0).toUpperCase()+t.substr(1);return e[t]||e["ms"+i]||e["moz"+i]||e["webkit"+i]||e["o"+i]},normalizeVendorAttribute:function(e,t){var i=ig.getVendorAttribute(e,t);!e[t]&&i&&(e[t]=i)},getImagePixels:function(e,t,i,n,o){var r=ig.$new("canvas");r.width=e.width,r.height=e.height;var a=r.getContext("2d");ig.System.SCALE.CRISP(r,a);var u=ig.getVendorAttribute(a,"backingStorePixelRatio")||1;ig.normalizeVendorAttribute(a,"getImageDataHD");var s=e.width/u,c=e.height/u;return r.width=Math.ceil(s),r.height=Math.ceil(c),a.drawImage(e,0,0,s,c),1===u?a.getImageData(t,i,n,o):a.getImageDataHD(t,i,n,o)},module:function(e){if(ig._current)throw"Module '"+ig._current.name+"' defines nothing";if(ig.modules[e]&&ig.modules[e].body)throw"Module '"+e+"' is already defined";return ig._current={name:e,requires:[],loaded:!1,body:null},ig.modules[e]=ig._current,ig._loadQueue.push(ig._current),ig},requires:function(){return ig._current.requires=Array.prototype.slice.call(arguments),ig},defines:function(e){ig._current.body=e,ig._current=null,ig._initDOMReady()},addResource:function(e){ig.resources.push(e)},setNocache:function(e){ig.nocache=e?"?"+Date.now():""},log:function(){},assert:function(e,t){},show:function(e,t){},mark:function(e,t){},_loadScript:function(e,t){ig.modules[e]={name:e,requires:[],loaded:!1,body:null},ig._waitForOnload++;var i=ig.prefix+ig.lib+e.replace(/\./g,"/")+".js"+ig.nocache,n=ig.$new("script");n.type="text/javascript",n.src=i,n.onload=function(){ig._waitForOnload--,ig._execModules()},n.onerror=function(){throw"Failed to load module "+e+" at "+i+" required from "+t},ig.$("head")[0].appendChild(n)},_execModules:function(){for(var e=!1,t=0;t<ig._loadQueue.length;t++){for(var i=ig._loadQueue[t],n=!0,o=0;o<i.requires.length;o++){var r=i.requires[o];ig.modules[r]?ig.modules[r].loaded||(n=!1):(n=!1,ig._loadScript(r,i.name))}n&&i.body&&(ig._loadQueue.splice(t,1),i.loaded=!0,i.body(),e=!0,t--)}if(e)ig._execModules();else if(!ig.baked&&0==ig._waitForOnload&&0!=ig._loadQueue.length){for(var a=[],t=0;t<ig._loadQueue.length;t++){for(var u=[],s=ig._loadQueue[t].requires,o=0;o<s.length;o++){(i=ig.modules[s[o]])&&i.loaded||u.push(s[o])}a.push(ig._loadQueue[t].name+" (requires: "+u.join(", ")+")")}throw"Unresolved (or circular?) dependencies. Most likely there's a name/path mismatch for one of the listed modules or a previous syntax error prevents a module from loading:\n"+a.join("\n")}},_DOMReady:function(){if(!ig.modules["dom.ready"].loaded){if(!document.body)return setTimeout(ig._DOMReady,13);ig.modules["dom.ready"].loaded=!0,ig._waitForOnload--,ig._execModules()}return 0},_boot:function(){document.location.href.match(/\?nocache/)&&ig.setNocache(!0),ig.ua.pixelRatio=e.devicePixelRatio||1,ig.ua.viewport={width:e.innerWidth,height:e.innerHeight},ig.ua.screen={width:e.screen.availWidth*ig.ua.pixelRatio,height:e.screen.availHeight*ig.ua.pixelRatio},ig.ua.iPhone=/iPhone/i.test(navigator.userAgent),ig.ua.iPhone4=ig.ua.iPhone&&2==ig.ua.pixelRatio,ig.ua.iPad=/iPad/i.test(navigator.userAgent),ig.ua.android=/android/i.test(navigator.userAgent),ig.ua.winPhone=/Windows Phone/i.test(navigator.userAgent),ig.ua.iOS=ig.ua.iPhone||ig.ua.iPad,ig.ua.mobile=ig.ua.iOS||ig.ua.android||ig.ua.winPhone||/mobile/i.test(navigator.userAgent),ig.ua.touchDevice="ontouchstart"in e||e.navigator.msMaxTouchPoints},_initDOMReady:function(){ig.modules["dom.ready"]?ig._execModules():(ig._boot(),ig.modules["dom.ready"]={requires:[],loaded:!1,body:null},ig._waitForOnload++,"complete"===document.readyState?ig._DOMReady():(document.addEventListener("DOMContentLoaded",ig._DOMReady,!1),e.addEventListener("load",ig._DOMReady,!1)))}},ig.normalizeVendorAttribute(e,"requestAnimationFrame"),e.requestAnimationFrame){var t=1,i={};e.ig.setAnimation=function(n,o){var r=t++;i[r]=!0;var a=function(){i[r]&&(e.requestAnimationFrame(a,o),n())};return e.requestAnimationFrame(a,o),r},e.ig.clearAnimation=function(e){delete i[e]}}else e.ig.setAnimation=function(t,i){return e.setInterval(t,1e3/60)},e.ig.clearAnimation=function(t){e.clearInterval(t)};var n=!1,o=/xyz/.test(function(){xyz})?/\bparent\b/:/.*/,r=0;e.ig.Class=function(){};var a=function(e){var t=this.prototype,i={};for(var n in e)"function"==typeof e[n]&&"function"==typeof t[n]&&o.test(e[n])?(i[n]=t[n],t[n]=function(e,t){return function(){var n=this.parent;this.parent=i[e];var o=t.apply(this,arguments);return this.parent=n,o}}(n,e[n])):t[n]=e[n]};e.ig.Class.extend=function(t){function i(){if(!n){if(this.staticInstantiate){var e=this.staticInstantiate.apply(this,arguments);if(e)return e}for(var t in this)"object"==typeof this[t]&&(this[t]=ig.copy(this[t]));this.init&&this.init.apply(this,arguments)}return this}var u=this.prototype;n=!0;var s=new this;n=!1;for(var c in t)"function"==typeof t[c]&&"function"==typeof u[c]&&o.test(t[c])?s[c]=function(e,t){return function(){var i=this.parent;this.parent=u[e];var n=t.apply(this,arguments);return this.parent=i,n}}(c,t[c]):s[c]=t[c];return i.prototype=s,i.prototype.constructor=i,i.extend=e.ig.Class.extend,i.inject=a,i.classId=s.classId=++r,i},e.ImpactMixin&&ig.merge(ig,e.ImpactMixin)}(window),ig.module("impact.impact").requires("dom.ready","impact.loader","impact.system","impact.input","impact.sound").defines(function(){"use strict";ig.main=function(e,t,i,n,o,r,a){ig.system=new ig.System(e,i,n,o,r||1),ig.input=new ig.Input,ig.soundManager=new ig.SoundManager,ig.music=new ig.Music,ig.ready=!0;new(a||ig.Loader)(t,ig.resources).load()}});