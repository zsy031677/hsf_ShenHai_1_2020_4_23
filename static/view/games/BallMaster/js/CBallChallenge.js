function CBallChallenge(e){var t,a,i,c,r,n,s,o,_=!1,E=GRAVITY_INCREASE,L=new CVector2(0,INIT_GRAVITY_CHALLENGE),A=INIT_BALLMASS_CHALLENGE,g=0,l=0,S=FRICTION_CHALLENGE,I=EDGEFRICTION_CHALLENGE,C=ROTATIONSPEED_CHALLENGE,h=HORIZ_KICKFORCE_CHALLENGE,d=VERT_KICKFORCE_CHALLENGE,u=RESTITUTION_KICKFORCE_CHALLENGE;this._init=function(e){this._initForces();var c="ball_"+Math.floor(3*Math.random()+1);(r=new createjs.Bitmap(s_oSpriteLibrary.getSprite(c))).regX=BALL_SIZE/2,r.regY=BALL_SIZE/2,r.x=CANVAS_WIDTH/2,r.y=CANVAS_HEIGHT/2,(n=new createjs.Bitmap(s_oSpriteLibrary.getSprite("shadow"))).regX=SHADOW_WIDTH/2,n.regY=SHADOW_HEIGHT/2,n.x=r.x,n.y=CANVAS_HEIGHT-BALL_BOUNCE_YOFFSET,n.alpha=.65,(s=new createjs.Bitmap(s_oSpriteLibrary.getSprite("ball_hit"))).regX=BALL_SIZE/2,s.regY=BALL_SIZE/2,s.x=CANVAS_WIDTH/2,s.y=CANVAS_HEIGHT/2,s.alpha=0,s_oStage.addChild(n),s_oStage.addChild(r),s_oStage.addChild(s),r.on("mousedown",this.clicked,this),t=new CVector2(r.x,r.y),a=new CVector2(0,0),i=new CVector2(0,0),o=e},this._initForces=function(){c=new CVector2(L.getX(),L.getY()),h=50,d=50},this._updateForces=function(){c.set(0,c.getY()+E),d+=4*E,h+=4*E/2},this.getInitialScoringdata=function(){return{tick:E,initGravity:L.getY()}},this.unload=function(){s_oStage.removeChild(r,n,s),r=void 0},this.update=function(){i.addV(c),this._friction(),a.addV(i),t.addV(a),i._init(0,0),r.x=t.getX(),r.y=t.getY(),l=a.getX(),g+=l,r.rotation=g*C,n.x=r.x,n.scaleX=n.scaleY=r.y/(CANVAS_HEIGHT-BALL_SIZE/2-BALL_BOUNCE_YOFFSET),s.x=r.x,s.y=r.y,s.rotation=g*C},this.checkEdges=function(){if(t.getX()<BALL_SIZE/2?(t.set(BALL_SIZE/2,t.getY()),a.set(-(1-I)*a.getX(),a.getY())):t.getX()>CANVAS_WIDTH-BALL_SIZE/2&&(t.set(CANVAS_WIDTH-BALL_SIZE/2,t.getY()),a.set(-(1-I)*a.getX(),a.getY())),t.getY()>CANVAS_HEIGHT-BALL_SIZE/2-BALL_BOUNCE_YOFFSET)return t.set(t.getX(),CANVAS_HEIGHT-BALL_SIZE/2-BALL_BOUNCE_YOFFSET),a.set(a.getX(),-(1-I)*a.getY()),this._initForces(),!0},this.applyForce=function(e){var t=new CVector2(e.getX(),e.getY());t.scalarDivision(A),i.addV(t)},this.clicked=function(e){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||createjs.Sound.play("tap"),this._updateForces(),o.increaseScore(),o.playerAnim(t.getX(),t.getY()),a.set(-u*a.getX(),-u*a.getY());var i=new CVector2(-e.rawX+t.getX(),-1*(e.rawY-(t.getY()-BALL_SIZE/2)));i.normalize();var c=new CVector2(i.getX()*h,i.getY()*d-0);this.applyForce(c),!1===_&&(_=!0,createjs.Tween.get(r).to({scaleX:1.15,scaleY:.85},100,createjs.Ease.cubicIn).call(function(){createjs.Tween.get(r).to({scaleX:1,scaleY:1},100,createjs.Ease.cubicOut).call(function(){})}),createjs.Tween.get(s).to({scaleX:1.15,scaleY:.85,alpha:.4},100,createjs.Ease.cubicIn).call(function(){createjs.Tween.get(s).to({scaleX:1,scaleY:1,alpha:0},100,createjs.Ease.cubicOut).call(function(){_=!1})}))},this._friction=function(){var e=new CVector2(a.getX(),a.getY());e.scalarProduct(-1),e.normalize(),e.scalarProduct(S),this.applyForce(e)},this._v2Limit=function(e,t){e.length()>=t&&(e.normalize(),e.scalarProduct(t))},this._init(e)}