var egret;!function(t){var e=function(){function t(){this._hashCode=t.hashCount++}return Object.defineProperty(t.prototype,"hashCode",{get:function(){return this._hashCode},enumerable:!0,configurable:!0}),t.hashCount=1,t}();t.HashObject=e,e.prototype.__class__="egret.HashObject"}(egret||(egret={}));__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i};!function(t){var e=function(t){function e(e){void 0===e&&(e=300),t.call(this),this.objectPool=[],this._length=0,1>e&&(e=1),this.autoDisposeTime=e,this.frameCount=0}return __extends(e,t),e.prototype._checkFrame=function(){this.frameCount--,0>=this.frameCount&&this.dispose()},Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),e.prototype.push=function(t){var i=this.objectPool;-1==i.indexOf(t)&&(i.push(t),this._length++,0==this.frameCount&&(this.frameCount=this.autoDisposeTime,e._callBackList.push(this)))},e.prototype.pop=function(){return 0==this._length?null:(this._length--,this.objectPool.pop())},e.prototype.dispose=function(){0<this._length&&(this.objectPool=[],this._length=0),this.frameCount=0;var t=e._callBackList,i=t.indexOf(this);-1!=i&&t.splice(i,1)},e._callBackList=[],e}(t.HashObject);t.Recycler=e,e.prototype.__class__="egret.Recycler"}(egret||(egret={})),function(t){t.__START_TIME,t.getTimer=function(){return Date.now()-t.__START_TIME}}(egret||(egret={})),function(t){t.__callLaterFunctionList=[],t.__callLaterThisList=[],t.__callLaterArgsList=[],t.callLater=function(e,i){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];t.__callLaterFunctionList.push(e),t.__callLaterThisList.push(i),t.__callLaterArgsList.push(n)},t.__callAsyncFunctionList=[],t.__callAsyncThisList=[],t.__callAsyncArgsList=[],t.__callAsync=function(e,i){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];t.__callAsyncFunctionList.push(e),t.__callAsyncThisList.push(i),t.__callAsyncArgsList.push(n)}}(egret||(egret={}));var egret_dom;!function(t){function e(){for(var t=document.createElement("div").style,e=["t","webkitT","msT","MozT","OT"],i=0;i<e.length;i++)if(e[i]+"ransform"in t)return e[i];return e[0]}t.header="",t.getHeader=e,t.getTrans=function(i){return""==t.header&&(t.header=e()),t.header+i.substring(1,i.length)}}(egret_dom||(egret_dom={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),e.call(this),this._eventPhase=2,this._isPropagationImmediateStopped=this._isPropagationStopped=this._isDefaultPrevented=!1,this.isNew=!0,this._type=t,this._bubbles=i,this._cancelable=n}return __extends(i,e),Object.defineProperty(i.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bubbles",{get:function(){return this._bubbles},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cancelable",{get:function(){return this._cancelable},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"eventPhase",{get:function(){return this._eventPhase},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentTarget",{get:function(){return this._currentTarget},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),i.prototype.isDefaultPrevented=function(){return this._isDefaultPrevented},i.prototype.preventDefault=function(){this._cancelable&&(this._isDefaultPrevented=!0)},i.prototype.stopPropagation=function(){this._bubbles&&(this._isPropagationStopped=!0)},i.prototype.stopImmediatePropagation=function(){this._bubbles&&(this._isPropagationImmediateStopped=!0)},i.prototype._reset=function(){this.isNew?this.isNew=!1:(this._isPropagationImmediateStopped=this._isPropagationStopped=this._isDefaultPrevented=!1,this._currentTarget=this._target=null,this._eventPhase=2)},i._dispatchByTarget=function(e,i,n,o,s,r){void 0===s&&(s=!1),void 0===r&&(r=!1);var a=e.eventRecycler;a||(a=e.eventRecycler=new t.Recycler);var h=a.pop();if(h?h._type=n:h=new e(n),h._bubbles=s,h._cancelable=r,o)for(var c in o)h[c]=o[c],null!==h[c]&&(o[c]=null);return e=i.dispatchEvent(h),a.push(h),e},i._getPropertyData=function(t){var e=t._props;return e||(e=t._props={}),e},i.dispatchEvent=function(t,e,n,o){void 0===n&&(n=!1);var s=i._getPropertyData(i);o&&(s.data=o),i._dispatchByTarget(i,t,e,s,n)},i.ADDED_TO_STAGE="addedToStage",i.REMOVED_FROM_STAGE="removedFromStage",i.ADDED="added",i.REMOVED="removed",i.COMPLETE="complete",i.ENTER_FRAME="enterFrame",i.RENDER="render",i.FINISH_RENDER="finishRender",i.FINISH_UPDATE_TRANSFORM="finishUpdateTransform",i.LEAVE_STAGE="leaveStage",i.RESIZE="resize",i.CHANGE="change",i.ACTIVATE="activate",i.DEACTIVATE="deactivate",i.CLOSE="close",i.CONNECT="connect",i}(t.HashObject);t.Event=e,e.prototype.__class__="egret.Event"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(t){function e(e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),t.call(this,e,i,n),this._status=0}return __extends(e,t),Object.defineProperty(e.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),e.dispatchHTTPStatusEvent=function(t,i){null==e.httpStatusEvent&&(e.httpStatusEvent=new e(e.HTTP_STATUS)),e.httpStatusEvent._status=i,t.dispatchEvent(e.httpStatusEvent)},e.HTTP_STATUS="httpStatus",e.httpStatusEvent=null,e}(t.Event);t.HTTPStatusEvent=e,e.prototype.__class__="egret.HTTPStatusEvent"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),e.call(this,t,i,n)}return __extends(i,e),i.dispatchIOErrorEvent=function(e){t.Event._dispatchByTarget(i,e,i.IO_ERROR)},i.IO_ERROR="ioError",i}(t.Event);t.IOErrorEvent=e,e.prototype.__class__="egret.IOErrorEvent"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(t,i,n,o,s,r,a,h,c,p){void 0===i&&(i=!0),void 0===n&&(n=!0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===r&&(r=0),void 0===a&&(a=!1),void 0===h&&(h=!1),void 0===p&&(p=!1),e.call(this,t,i,n),this._stageY=this._stageX=0,this.touchPointID=o,this._stageX=s,this._stageY=r,this.ctrlKey=a,this.altKey=h,this.touchDown=p}return __extends(i,e),Object.defineProperty(i.prototype,"stageX",{get:function(){return this._stageX},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stageY",{get:function(){return this._stageY},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"localX",{get:function(){return this._currentTarget.globalToLocal(this._stageX,this._stageY,t.Point.identity).x},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"localY",{get:function(){return this._currentTarget.globalToLocal(this._stageX,this._stageY,t.Point.identity).y},enumerable:!0,configurable:!0}),i.dispatchTouchEvent=function(e,n,o,s,r,a,h,c,p){void 0===o&&(o=0),void 0===s&&(s=0),void 0===r&&(r=0),void 0===a&&(a=!1),void 0===h&&(h=!1),void 0===c&&(c=!1),void 0===p&&(p=!1);var l=t.Event._getPropertyData(i);l.touchPointID=o,l._stageX=s,l._stageY=r,l.ctrlKey=a,l.altKey=h,l.shiftKey=c,l.touchDown=p,t.Event._dispatchByTarget(i,e,n,l,!0,!0)},i.TOUCH_TAP="touchTap",i.TOUCH_MOVE="touchMove",i.TOUCH_BEGIN="touchBegin",i.TOUCH_END="touchEnd",i.TOUCH_RELEASE_OUTSIDE="touchReleaseOutside",i.TOUCH_ROLL_OUT="touchRollOut",i.TOUCH_ROLL_OVER="touchRollOver",i.TOUCH_OUT="touchOut",i.TOUCH_OVER="touchOver",i}(t.Event);t.TouchEvent=e,e.prototype.__class__="egret.TouchEvent"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),e.call(this,t,i,n)}return __extends(i,e),i.dispatchTimerEvent=function(e,n){t.Event._dispatchByTarget(i,e,n)},i.TIMER="timer",i.TIMER_COMPLETE="timerComplete",i}(t.Event);t.TimerEvent=e,e.prototype.__class__="egret.TimerEvent"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(t,i,n,o,s){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===o&&(o=0),void 0===s&&(s=0),e.call(this,t,i,n),this.bytesLoaded=o,this.bytesTotal=s}return __extends(i,e),i.dispatchProgressEvent=function(e,n,o,s){void 0===o&&(o=0),void 0===s&&(s=0),t.Event._dispatchByTarget(i,e,n,{bytesLoaded:o,bytesTotal:s})},i.PROGRESS="progress",i.SOCKET_DATA="socketData",i}(t.Event);t.ProgressEvent=e,e.prototype.__class__="egret.ProgressEvent"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.CAPTURING_PHASE=1,t.AT_TARGET=2,t.BUBBLING_PHASE=3,t}();t.EventPhase=e,e.prototype.__class__="egret.EventPhase"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(t){void 0===t&&(t=null),e.call(this),this._eventTarget=t||this}return __extends(i,e),i.prototype.addEventListener=function(e,i,n,o,s){void 0===o&&(o=!1),void 0===s&&(s=0),void 0===o&&(o=!1),void 0===s&&(s=0),i||t.Logger.fatal("addEventListener侦听函数不能为空"),o?(this._captureEventsMap||(this._captureEventsMap={}),o=this._captureEventsMap):(this._eventsMap||(this._eventsMap={}),o=this._eventsMap);var r=o[e];r||(r=o[e]=[]),this._insertEventBin(r,i,n,s)},i.prototype._insertEventBin=function(t,e,i,n,o){void 0===o&&(o=void 0);for(var s=-1,r=t.length,a=0;a<r;a++){var h=t[a];if(h.listener===e&&h.thisObject===i&&h.display===o)return!1;-1==s&&h.priority<n&&(s=a)}return e={listener:e,thisObject:i,priority:n},o&&(e.display=o),-1!=s?t.splice(s,0,e):t.push(e),!0},i.prototype.removeEventListener=function(t,e,i,n){if(void 0===n&&(n=!1),n=n?this._captureEventsMap:this._eventsMap){var o=n[t];o&&(this._removeEventBin(o,e,i),0==o.length&&delete n[t])}},i.prototype._removeEventBin=function(t,e,i,n){void 0===n&&(n=void 0);for(var o=t.length,s=0;s<o;s++){var r=t[s];if(r.listener===e&&r.thisObject===i&&r.display===n)return t.splice(s,1),!0}return!1},i.prototype.hasEventListener=function(t){return this._eventsMap&&this._eventsMap[t]||this._captureEventsMap&&this._captureEventsMap[t]},i.prototype.willTrigger=function(t){return this.hasEventListener(t)},i.prototype.dispatchEvent=function(t){return t._reset(),t._target=this._eventTarget,t._currentTarget=this._eventTarget,this._notifyListener(t)},i.prototype._notifyListener=function(t){if(!(i=1==t._eventPhase?this._captureEventsMap:this._eventsMap))return!0;if(!(i=i[t._type]))return!0;var e=i.length;if(0==e)return!0;for(var i=i.concat(),n=0;n<e;n++){var o=i[n];if(o.listener.call(o.thisObject,t),t._isPropagationImmediateStopped)break}return!t._isDefaultPrevented},i.prototype.dispatchEventWith=function(e,i,n){void 0===i&&(i=!1),t.Event.dispatchEvent(this,e,i,n)},i}(t.HashObject);t.EventDispatcher=e,e.prototype.__class__="egret.EventDispatcher"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this.reuseEvent=new t.Event("")}return __extends(i,e),i.prototype.run=function(){t.Ticker.getInstance().run(),t.Ticker.getInstance().register(this.renderLoop,this,Number.NEGATIVE_INFINITY),t.Ticker.getInstance().register(this.broadcastEnterFrame,this,Number.POSITIVE_INFINITY),this.touchContext.run()},i.prototype.renderLoop=function(e){if(0<t.__callLaterFunctionList.length){var n=t.__callLaterFunctionList;t.__callLaterFunctionList=[];var o=t.__callLaterThisList;t.__callLaterThisList=[];var s=t.__callLaterArgsList;t.__callLaterArgsList=[]}e=this.stage;var r=i.cachedEvent;r._type=t.Event.RENDER,this.dispatchEvent(r),t.Stage._invalidateRenderFlag&&(this.broadcastRender(),t.Stage._invalidateRenderFlag=!1),n&&this.doCallLaterList(n,o,s),0<t.__callAsyncFunctionList.length&&this.doCallAsyncList(),(n=this.rendererContext).onRenderStart(),n.clearScreen(),e._updateTransform(),r._type=t.Event.FINISH_UPDATE_TRANSFORM,this.dispatchEvent(r),e._draw(n),r._type=t.Event.FINISH_RENDER,this.dispatchEvent(r),n.onRenderFinish()},i.prototype.broadcastEnterFrame=function(e){(e=this.reuseEvent)._type=t.Event.ENTER_FRAME,this.dispatchEvent(e);for(var i=t.DisplayObject._enterFrameCallBackList.concat(),n=i.length,o=0;o<n;o++){var s=i[o];e._target=s.display,e._currentTarget=s.display,s.listener.call(s.thisObject,e)}for(o=(i=t.Recycler._callBackList).length-1;0<=o;o--)i[o]._checkFrame()},i.prototype.broadcastRender=function(){var e=this.reuseEvent;e._type=t.Event.RENDER;for(var i=t.DisplayObject._renderCallBackList.concat(),n=i.length,o=0;o<n;o++){var s=i[o],r=s.display;e._target=r,e._currentTarget=r,s.listener.call(s.thisObject,e)}},i.prototype.doCallLaterList=function(t,e,i){for(var n=t.length,o=0;o<n;o++){var s=t[o];null!=s&&s.apply(e[o],i[o])}},i.prototype.doCallAsyncList=function(){var e=t.__callAsyncFunctionList.concat(),i=t.__callAsyncThisList.concat(),n=t.__callAsyncArgsList.concat();t.__callAsyncFunctionList.length=0,t.__callAsyncThisList.length=0;for(var o=t.__callAsyncArgsList.length=0;o<e.length;o++){var s=e[o];null!=s&&s.apply(i[o],n[o])}},i.DEVICE_PC="web",i.DEVICE_MOBILE="native",i.RUNTIME_HTML5="runtime_html5",i.RUNTIME_NATIVE="runtime_native",i.cachedEvent=new t.Event(""),i}(t.EventDispatcher);t.MainContext=e,e.prototype.__class__="egret.MainContext"}(egret||(egret={}));var testDeviceType=function(){if(!this.navigator)return!0;var t=navigator.userAgent.toLowerCase();return-1!=t.indexOf("mobile")||-1!=t.indexOf("android")},testRuntimeType=function(){return!!this.navigator};egret.MainContext.instance=new egret.MainContext,egret.MainContext.deviceType=testDeviceType()?egret.MainContext.DEVICE_MOBILE:egret.MainContext.DEVICE_PC,egret.MainContext.runtimeType=testRuntimeType()?egret.MainContext.RUNTIME_HTML5:egret.MainContext.RUNTIME_NATIVE,delete testDeviceType,delete testRuntimeType,function(t){var e=function(){function e(){this._tick=this._preDrawCount=this._updateTransformPerformanceCost=this._renderPerformanceCost=this._logicPerformanceCost=this._lastTime=0,this._maxDeltaTime=500,this._totalDeltaTime=0}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.prototype.run=function(){t.Ticker.getInstance().register(this.update,this),null==this._txt&&(this._txt=new t.TextField,this._txt.size=28,this._txt.multiline=!0,t.MainContext.instance.stage.addChild(this._txt));var e=t.MainContext.instance;e.addEventListener(t.Event.ENTER_FRAME,this.onEnterFrame,this),e.addEventListener(t.Event.RENDER,this.onStartRender,this),e.addEventListener(t.Event.FINISH_RENDER,this.onFinishRender,this),e.addEventListener(t.Event.FINISH_UPDATE_TRANSFORM,this.onFinishUpdateTransform,this)},e.prototype.onEnterFrame=function(e){this._lastTime=t.getTimer()},e.prototype.onStartRender=function(e){e=t.getTimer(),this._logicPerformanceCost=e-this._lastTime,this._lastTime=e},e.prototype.onFinishUpdateTransform=function(e){e=t.getTimer(),this._updateTransformPerformanceCost=e-this._lastTime,this._lastTime=e},e.prototype.onFinishRender=function(e){e=t.getTimer(),this._renderPerformanceCost=e-this._lastTime,this._lastTime=e},e.prototype.update=function(e){if(this._tick++,this._totalDeltaTime+=e,this._totalDeltaTime>=this._maxDeltaTime){e=(this._preDrawCount-1).toString();var i=Math.ceil(this._logicPerformanceCost).toString()+","+Math.ceil(this._updateTransformPerformanceCost).toString()+","+Math.ceil(this._renderPerformanceCost).toString()+","+Math.ceil(t.MainContext.instance.rendererContext.renderCost).toString();this._txt.text="draw:"+e+"\ncost:"+i+"\nFPS:"+Math.floor(1e3*this._tick/this._totalDeltaTime).toString(),this._tick=this._totalDeltaTime=0}this._preDrawCount=0},e.prototype.onDrawImage=function(){this._preDrawCount++},e}();t.Profiler=e,e.prototype.__class__="egret.Profiler"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.apply(this,arguments),this._timeScale=1,this._paused=!1,this.callBackList=[]}return __extends(i,e),i.prototype.run=function(){t.__START_TIME=(new Date).getTime(),t.MainContext.instance.deviceContext.executeMainLoop(this.update,this)},i.prototype.update=function(t){var e=this.callBackList.concat(),i=e.length;t*=this._timeScale,t*=this._timeScale;for(var n=0;n<i;n++){var o=e[n];o.listener.call(o.thisObject,t)}},i.prototype.register=function(t,e,i){void 0===i&&(i=0),this._insertEventBin(this.callBackList,t,e,i)},i.prototype.unregister=function(t,e){this._removeEventBin(this.callBackList,t,e)},i.prototype.setTimeout=function(e,i,n){for(var o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];t.Logger.warning("Ticker#setTimeout方法即将废弃,请使用egret.setTimeout"),t.setTimeout.apply(null,[e,i,n].concat(o))},i.prototype.setTimeScale=function(t){this._timeScale=t},i.prototype.getTimeScale=function(){return this._timeScale},i.prototype.pause=function(){this._paused=!0},i.prototype.resume=function(){this._paused=!1},i.getInstance=function(){return null==i.instance&&(i.instance=new i),i.instance},i}(t.EventDispatcher);t.Ticker=e,e.prototype.__class__="egret.Ticker"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.LEFT="left",t.RIGHT="right",t.CENTER="center",t.JUSTIFY="justify",t.CONTENT_JUSTIFY="contentJustify",t}();t.HorizontalAlign=e,e.prototype.__class__="egret.HorizontalAlign"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.TOP="top",t.BOTTOM="bottom",t.MIDDLE="middle",t.JUSTIFY="justify",t.CONTENT_JUSTIFY="contentJustify",t}();t.VerticalAlign=e,e.prototype.__class__="egret.VerticalAlign"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(t,i){void 0===i&&(i=0),e.call(this),this._currentCount=0,this.delay=t,this.repeatCount=i}return __extends(i,e),i.prototype.currentCount=function(){return this._currentCount},Object.defineProperty(i.prototype,"running",{get:function(){return this._running},enumerable:!0,configurable:!0}),i.prototype.reset=function(){this.stop(),this._currentCount=0},i.prototype.start=function(){this._running||(this.lastTime=t.getTimer(),0!=this._currentCount&&(this._currentCount=0),t.Ticker.getInstance().register(this.onEnterFrame,this),this._running=!0)},i.prototype.stop=function(){this._running&&(t.Ticker.getInstance().unregister(this.onEnterFrame,this),this._running=!1)},i.prototype.onEnterFrame=function(e){(e=t.getTimer())-this.lastTime>this.delay&&(this.lastTime=e,this._currentCount++,t.TimerEvent.dispatchTimerEvent(this,t.TimerEvent.TIMER),0<this.repeatCount&&this._currentCount>=this.repeatCount&&(this.stop(),t.TimerEvent.dispatchTimerEvent(this,t.TimerEvent.TIMER_COMPLETE)))},i}(t.EventDispatcher);t.Timer=e,e.prototype.__class__="egret.Timer"}(egret||(egret={})),function(t){function e(t){if((t=t.prototype?t.prototype:t.__proto__).hasOwnProperty("__class__"))return t.__class__;var e=(i=t.constructor.toString()).indexOf("("),i=i.substring(9,e);return Object.defineProperty(t,"__class__",{value:i,enumerable:!1,writable:!0}),i}t.getQualifiedClassName=e,t.getQualifiedSuperclassName=function(t){if((t=t.prototype?t.prototype:t.__proto__).hasOwnProperty("__superclass__"))return t.__superclass__;var i=Object.getPrototypeOf(t);return null==i?null:(i=e(i.constructor))?(Object.defineProperty(t,"__superclass__",{value:i,enumerable:!1,writable:!0}),i):null}}(egret||(egret={})),function(t){var e={};(egret||(egret={})).getDefinitionByName=function(t){if(!t)return null;if(o=e[t])return o;for(var i=t.split("."),n=i.length,o=__global,s=0;s<n;s++)if(!(o=o[i[s]]))return null;return e[t]=o}}();var __global=__global||this;!function(t){function e(t){for(var e in i){var n=i[e];n.delay-=t,0>=n.delay&&(n.listener.apply(n.thisObject,n.params),delete i[e])}}var i={},n=0;t.setTimeout=function(o,s,r){for(var a=[],h=3;h<arguments.length;h++)a[h-3]=arguments[h];return a={listener:o,thisObject:s,delay:r,params:a},0==n&&t.Ticker.getInstance().register(e,null),n++,i[n]=a,n},t.clearTimeout=function(t){delete i[t]}}(egret||(egret={})),function(t){t.hasDefinition=function(e){return!!t.getDefinitionByName(e)}}(egret||(egret={})),(egret||(egret={})).toColorString=function(t){for((isNaN(t)||0>t)&&(t=0),16777215<t&&(t=16777215),t=t.toString(16).toUpperCase();6>t.length;)t="0"+t;return"#"+t},__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(t,i,n,o,s,r){void 0===t&&(t=1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=1),void 0===s&&(s=0),void 0===r&&(r=0),e.call(this),this.a=t,this.b=i,this.c=n,this.d=o,this.tx=s,this.ty=r}return __extends(i,e),i.prototype.prepend=function(t,e,i,n,o,s){var r=this.tx;if(1!=t||0!=e||0!=i||1!=n){var a=this.a,h=this.c;this.a=a*t+this.b*i,this.b=a*e+this.b*n,this.c=h*t+this.d*i,this.d=h*e+this.d*n}return this.tx=r*t+this.ty*i+o,this.ty=r*e+this.ty*n+s,this},i.prototype.append=function(t,e,i,n,o,s){var r=this.a,a=this.b,h=this.c,c=this.d;return 1==t&&0==e&&0==i&&1==n||(this.a=t*r+e*h,this.b=t*a+e*c,this.c=i*r+n*h,this.d=i*a+n*c),this.tx=o*r+s*h+this.tx,this.ty=o*a+s*c+this.ty,this},i.prototype.prependTransform=function(t,e,n,o,s,r,a,h,c){if(s%360){var p=s*i.DEG_TO_RAD;s=Math.cos(p),p=Math.sin(p)}else s=1,p=0;return(h||c)&&(this.tx-=h,this.ty-=c),r||a?(r*=i.DEG_TO_RAD,a*=i.DEG_TO_RAD,this.prepend(s*n,p*n,-p*o,s*o,0,0),this.prepend(Math.cos(a),Math.sin(a),-Math.sin(r),Math.cos(r),t,e)):this.prepend(s*n,p*n,-p*o,s*o,t,e),this},i.prototype.appendTransform=function(t,e,n,o,s,r,a,h,c){if(s%360){var p=s*i.DEG_TO_RAD;s=Math.cos(p),p=Math.sin(p)}else s=1,p=0;return r||a?(r*=i.DEG_TO_RAD,a*=i.DEG_TO_RAD,this.append(Math.cos(a),Math.sin(a),-Math.sin(r),Math.cos(r),t,e),this.append(s*n,p*n,-p*o,s*o,0,0)):this.append(s*n,p*n,-p*o,s*o,t,e),(h||c)&&(this.tx-=h*this.a+c*this.c,this.ty-=h*this.b+c*this.d),this},i.prototype.rotate=function(t){var e=Math.cos(t);t=Math.sin(t);var i=this.a,n=this.c,o=this.tx;return this.a=i*e-this.b*t,this.b=i*t+this.b*e,this.c=n*e-this.d*t,this.d=n*t+this.d*e,this.tx=o*e-this.ty*t,this.ty=o*t+this.ty*e,this},i.prototype.skew=function(t,e){return t*=i.DEG_TO_RAD,e*=i.DEG_TO_RAD,this.append(Math.cos(e),Math.sin(e),-Math.sin(t),Math.cos(t),0,0),this},i.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},i.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},i.prototype.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},i.prototype.identityMatrix=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},i.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,o=this.tx,s=t*n-e*i;return this.a=n/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*this.ty-n*o)/s,this.ty=-(t*this.ty-e*o)/s,this},i.transformCoords=function(e,i,n){var o=t.Point.identity;return o.x=e.a*i+e.c*n+e.tx,o.y=e.d*n+e.b*i+e.ty,o},i.prototype.toArray=function(t){return this.array||(this.array=new Float32Array(9)),t?(this.array[0]=this.a,this.array[1]=this.b,this.array[2]=0,this.array[3]=this.c,this.array[4]=this.d,this.array[5]=0,this.array[6]=this.tx,this.array[7]=this.ty):(this.array[0]=this.a,this.array[1]=this.b,this.array[2]=this.tx,this.array[3]=this.c,this.array[4]=this.d,this.array[5]=this.ty,this.array[6]=0,this.array[7]=0),this.array[8]=1,this.array},i.identity=new i,i.DEG_TO_RAD=Math.PI/180,i}(t.HashObject);t.Matrix=e,e.prototype.__class__="egret.Matrix"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(t){function e(e,i){void 0===e&&(e=0),void 0===i&&(i=0),t.call(this),this.x=e,this.y=i}return __extends(e,t),e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.equals=function(t){return this.x==t.x&&this.y==t.y},e.distance=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},e.identity=new e(0,0),e}(t.HashObject);t.Point=e,e.prototype.__class__="egret.Point"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(t){function e(e,i,n,o){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),t.call(this),this.x=e,this.y=i,this.width=n,this.height=o}return __extends(e,t),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},set:function(t){this.width=t-this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){this.height=t-this.y},enumerable:!0,configurable:!0}),e.prototype.initialize=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},e.prototype.contains=function(t,e){return this.x<=t&&this.x+this.width>=t&&this.y<=e&&this.y+this.height>=e},e.prototype.intersects=function(t){var e=t.right,i=t.bottom,n=this.right,o=this.bottom;return!!(this.contains(t.x,t.y)||this.contains(t.x,i)||this.contains(e,t.y)||this.contains(e,i)||t.contains(this.x,this.y)||t.contains(this.x,o)||t.contains(n,this.y)||t.contains(n,o))},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.containsPoint=function(t){return this.x<t.x&&this.x+this.width>t.x&&this.y<t.y&&this.y+this.height>t.y},e.identity=new e(0,0,0,0),e}(t.HashObject);t.Rectangle=e,e.prototype.__class__="egret.Rectangle"}(egret||(egret={})),function(t){var e=function(){function e(){}return e.fatal=function(e,i){throw void 0===i&&(i=null),t.Logger.traceToConsole("Fatal",e,i),Error(t.Logger.getTraceCode("Fatal",e,i))},e.info=function(e,i){void 0===i&&(i=null),t.Logger.traceToConsole("Info",e,i)},e.warning=function(e,i){void 0===i&&(i=null),t.Logger.traceToConsole("Warning",e,i)},e.traceToConsole=function(e,i,n){console.log(t.Logger.getTraceCode(e,i,n))},e.getTraceCode=function(t,e,i){return"["+t+"]"+e+":"+(null==i?"":i)},e}();t.Logger=e,e.prototype.__class__="egret.Logger"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this._isSupportDOMParser=this._xmlDict=this._parser=null,this._xmlDict={},window.DOMParser?(this._isSupportDOMParser=!0,this._parser=new DOMParser):this._isSupportDOMParser=!1}return __extends(i,e),i.getInstance=function(){return i._instance||(i._instance=new i),i._instance},i.prototype.parserXML=function(e){for(var i=0;"\n"==e.charAt(i)||"\t"==e.charAt(i)||"\r"==e.charAt(i)||" "==e.charAt(i);)i++;return 0!=i&&(e=e.substring(i,e.length)),this._isSupportDOMParser?i=this._parser.parseFromString(e,"text/xml"):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(e)),null==i&&t.Logger.info("xml not found!"),i},i._instance=null,i}(t.HashObject);t.SAXParser=e,e.prototype.__class__="egret.SAXParser"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this._designHeight=this._designWidth=0,this._scaleY=this._scaleX=1,this._stageHeight=this._stageWidth=this._offSetY=0}return __extends(i,e),i.getInstance=function(){return null==i.instance&&(n.initialize(),i.instance=new i),i.instance},i.prototype.setDesignSize=function(e,i,n){this._designWidth=e,this._designHeight=i,n&&(t.Logger.warning("该方法目前不应传入 resolutionPolicy 参数，请在 docs/1.0_Final_ReleaseNote中查看如何升级"),this._setResolutionPolicy(n))},i.prototype._setResolutionPolicy=function(t){this._resolutionPolicy=t,t.init(this),t._apply(this,this._designWidth,this._designHeight)},i.prototype.getScaleX=function(){return this._scaleX},i.prototype.getScaleY=function(){return this._scaleY},i.prototype.getOffSetY=function(){return this._offSetY},i.canvas_name="egretCanvas",i.canvas_div_name="gameDiv",i}(t.HashObject);t.StageDelegate=e,e.prototype.__class__="egret.StageDelegate";var i=function(){function t(t,e){this._containerStrategy=t,this._contentStrategy=e}return t.prototype.init=function(t){this._containerStrategy.init(t),this._contentStrategy.init(t)},t.prototype._apply=function(t,e,i){this._containerStrategy._apply(t,e,i),this._contentStrategy._apply(t,e,i)},t}();t.ResolutionPolicy=i,i.prototype.__class__="egret.ResolutionPolicy";var n=function(){function t(){}return t.initialize=function(){t.EQUAL_TO_FRAME=new o},t.prototype.init=function(t){},t.prototype._apply=function(t,e,i){},t.prototype._setupContainer=function(){var t,e=document.body;e&&(t=e.style)&&(t.paddingTop=t.paddingTop||"0px",t.paddingRight=t.paddingRight||"0px",t.paddingBottom=t.paddingBottom||"0px",t.paddingLeft=t.paddingLeft||"0px",t.borderTop=t.borderTop||"0px",t.borderRight=t.borderRight||"0px",t.borderBottom=t.borderBottom||"0px",t.borderLeft=t.borderLeft||"0px",t.marginTop=t.marginTop||"0px",t.marginRight=t.marginRight||"0px",t.marginBottom=t.marginBottom||"0px",t.marginLeft=t.marginLeft||"0px")},t}();t.ContainerStrategy=n,n.prototype.__class__="egret.ContainerStrategy";var o=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype._apply=function(t){this._setupContainer()},e}(n);t.EqualToFrame=o,o.prototype.__class__="egret.EqualToFrame",i=function(){function i(){}return i.prototype.init=function(t){},i.prototype._apply=function(t,e,i){},i.prototype.setEgretSize=function(i,n,o,s,r,a){void 0===a&&(a=0),t.StageDelegate.getInstance()._stageWidth=Math.round(i),t.StageDelegate.getInstance()._stageHeight=Math.round(n),(i=document.getElementById(e.canvas_div_name)).style.width=o+"px",i.style.height=s+"px",i.style.top=a+"px"},i.prototype._getClientWidth=function(){return document.documentElement.clientWidth},i.prototype._getClientHeight=function(){return document.documentElement.clientHeight},i}(),t.ContentStrategy=i,i.prototype.__class__="egret.ContentStrategy";var s=function(t){function e(e){void 0===e&&(e=0),t.call(this),this.minWidth=e}return __extends(e,t),e.prototype._apply=function(t,e,i){e=this._getClientWidth();var n=this._getClientHeight(),o=n/i,s=e/o,r=1;0!=this.minWidth&&(r=Math.min(1,s/this.minWidth)),this.setEgretSize(s/r,i,e,n*r),t._scaleX=o*r,t._scaleY=o*r},e}(i);t.FixedHeight=s,s.prototype.__class__="egret.FixedHeight",s=function(t){function e(e){void 0===e&&(e=0),t.call(this),this.minHeight=e}return __extends(e,t),e.prototype._apply=function(t,e,i){i=this._getClientWidth();var n=this._getClientHeight(),o=i/e,s=n/o,r=1;0!=this.minHeight&&(r=Math.min(1,s/this.minHeight)),this.setEgretSize(e,s/r,i*r,n,i*(1-r)/2),t._scaleX=o*r,t._scaleY=o*r},e}(i),t.FixedWidth=s,s.prototype.__class__="egret.FixedWidth",s=function(t){function e(e,i){t.call(this),this.width=e,this.height=i}return __extends(e,t),e.prototype._apply=function(t,e,i){i=this.width;var n=this.height,o=i/e;this.setEgretSize(e,n/o,i,n),t._scaleX=o,t._scaleY=o},e}(i),t.FixedSize=s,s.prototype.__class__="egret.FixedSize",s=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype._apply=function(t,e,i){this.setEgretSize(e,i,e,i,Math.floor((e-e)/2)),t._scaleX=1,t._scaleY=1},e}(i),t.NoScale=s,s.prototype.__class__="egret.NoScale",s=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype._apply=function(t,e,i){var n=this._getClientWidth(),o=this._getClientHeight(),s=(r=n)/e<(a=o)/i?r/e:a/i,r=e*s,a=i*s,n=Math.floor((n-r)/2);t._offSetY=Math.floor((o-a)/2),this.setEgretSize(e,i/1,1*r,a,n,t._offSetY),t._scaleX=1*s,t._scaleY=1*s},e}(i),t.ShowAll=s,s.prototype.__class__="egret.ShowAll",i=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype._apply=function(t,e,i){var n=(n=this._getClientWidth())/e,o=(o=this._getClientHeight())/i;this.setEgretSize(e,i,e*n,i*o),t._scaleX=n,t._scaleY=o},e}(i),t.FullScreen=i,i.prototype.__class__="egret.FullScreen"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this._originalData={},this._drawAreaList=[]}return __extends(i,e),i.getInstance=function(){return null==i.instance&&(i.instance=new i),i.instance},i.prototype.addDrawArea=function(t){this._drawAreaList.push(t)},i.prototype.clearDrawArea=function(){this._drawAreaList=[]},i.prototype.drawImage=function(e,i,n,o,s,r,a,h,c,p,l){void 0===l&&(l=void 0),a=a||0,h=h||0;var u=i._texture_to_render;if(null!=u&&0!=r&&0!=s&&0!=c&&0!=p)if(0!=this._drawAreaList.length&&t.MainContext.instance.rendererContext._cacheCanvasContext){var d=t.DisplayObject.getTransformBounds(i._getSize(t.Rectangle.identity),i._worldTransform);i._worldBounds.initialize(d.x,d.y,d.width,d.height),(d=this._originalData).sourceX=n,d.sourceY=o,d.sourceWidth=s,d.sourceHeight=r,d.destX=a,d.destY=h,d.destWidth=c,d.destHeight=p;for(var _=this.getDrawAreaList(),f=0;f<_.length;f++)if(!this.ignoreRender(i,_[f],d.destX,d.destY)){e.drawImage(u,n,o,s,r,a,h,c,p,l);break}}else e.drawImage(u,n,o,s,r,a,h,c,p,l)},i.prototype.ignoreRender=function(t,e,i,n){var o=t._worldBounds;return i*=t._worldTransform.a,n*=t._worldTransform.d,o.x+o.width+i<=e.x||o.x+i>=e.x+e.width||o.y+o.height+n<=e.y||o.y+n>=e.y+e.height},i.prototype.getDrawAreaList=function(){var e;return 0==this._drawAreaList.length?(this._defaultDrawAreaList||(this._defaultDrawAreaList=[new t.Rectangle(0,0,t.MainContext.instance.stage.stageWidth,t.MainContext.instance.stage.stageHeight)],t.MainContext.instance.stage.addEventListener(t.Event.RESIZE,this.onResize,this)),e=this._defaultDrawAreaList):e=this._drawAreaList,e},i.prototype.onResize=function(){t.MainContext.instance.stage.removeEventListener(t.Event.RESIZE,this.onResize,this),this._defaultDrawAreaList=null},i}(t.HashObject);t.RenderFilter=e,e.prototype.__class__="egret.RenderFilter"}(egret||(egret={})),function(t){var e=function(){function e(){}return e.mapClass=function(t,e,i){void 0===i&&(i=""),t=this.getKey(t)+"#"+i,this.mapClassDic[t]=e},e.getKey=function(e){return"string"==typeof e?e:t.getQualifiedClassName(e)},e.mapValue=function(t,e,i){void 0===i&&(i=""),t=this.getKey(t)+"#"+i,this.mapValueDic[t]=e},e.hasMapRule=function(t,e){void 0===e&&(e="");var i=this.getKey(t)+"#"+e;return!(!this.mapValueDic[i]&&!this.mapClassDic[i])},e.getInstance=function(t,e){void 0===e&&(e="");var i=this.getKey(t)+"#"+e;if(this.mapValueDic[i])return this.mapValueDic[i];var n=this.mapClassDic[i];if(n)return n=new n,this.mapValueDic[i]=n,delete this.mapClassDic[i],n;throw Error("调用了未配置的注入规则:"+i+"。 请先在项目初始化里配置指定的注入规则，再调用对应单例。")},e.mapClassDic={},e.mapValueDic={},e}();t.Injector=e,e.prototype.__class__="egret.Injector"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.NORMAL="normal",t.ADD="add",t}();t.BlendMode=e,e.prototype.__class__="egret.BlendMode"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this.__hack_local_matrix=null,this._sizeDirty=this._normalDirty=!0,this._parent=this._texture_to_render=null,this._y=this._x=0,this._scaleY=this._scaleX=1,this._anchorY=this._anchorX=this._anchorOffsetY=this._anchorOffsetX=0,this._visible=!0,this._rotation=0,this._alpha=1,this._skewY=this._skewX=0,this._touchEnabled=!1,this._scrollRect=this.blendMode=null,this._hasHeightSet=this._hasWidthSet=!1,this._worldBounds=this.mask=null,this.worldAlpha=1,this._rectH=this._rectW=0,this._stage=null,this._cacheDirty=this._cacheAsBitmap=!1,this._colorTransform=null,this._worldTransform=new t.Matrix,this._worldBounds=new t.Rectangle(0,0,0,0),this._cacheBounds=new t.Rectangle(0,0,0,0)}return __extends(i,e),i.prototype._setDirty=function(){this._normalDirty=!0},i.prototype.getDirty=function(){return this._normalDirty||this._sizeDirty},i.prototype._setParentSizeDirty=function(){var t=this._parent;!t||t._hasWidthSet||t._hasHeightSet||t._setSizeDirty()},i.prototype._setSizeDirty=function(){this._sizeDirty||(this._sizeDirty=!0,this._setDirty(),this._setCacheDirty(),this._setParentSizeDirty())},i.prototype._clearDirty=function(){this._normalDirty=!1},i.prototype._clearSizeDirty=function(){this._sizeDirty=!1},Object.defineProperty(i.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),i.prototype._parentChanged=function(t){this._parent=t},Object.defineProperty(i.prototype,"x",{get:function(){return this._x},set:function(t){this._setX(t)},enumerable:!0,configurable:!0}),i.prototype._setX=function(e){t.NumberUtils.isNumber(e)&&this._x!=e&&(this._x=e,this._setDirty(),this._setParentSizeDirty())},Object.defineProperty(i.prototype,"y",{get:function(){return this._y},set:function(t){this._setY(t)},enumerable:!0,configurable:!0}),i.prototype._setY=function(e){t.NumberUtils.isNumber(e)&&this._y!=e&&(this._y=e,this._setDirty(),this._setParentSizeDirty())},Object.defineProperty(i.prototype,"scaleX",{get:function(){return this._scaleX},set:function(e){t.NumberUtils.isNumber(e)&&this._scaleX!=e&&(this._scaleX=e,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scaleY",{get:function(){return this._scaleY},set:function(e){t.NumberUtils.isNumber(e)&&this._scaleY!=e&&(this._scaleY=e,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"anchorOffsetX",{get:function(){return this._anchorOffsetX},set:function(e){t.NumberUtils.isNumber(e)&&this._anchorOffsetX!=e&&(this._anchorOffsetX=e,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"anchorOffsetY",{get:function(){return this._anchorOffsetY},set:function(e){t.NumberUtils.isNumber(e)&&this._anchorOffsetY!=e&&(this._anchorOffsetY=e,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"anchorX",{get:function(){return this._anchorX},set:function(t){this._setAnchorX(t)},enumerable:!0,configurable:!0}),i.prototype._setAnchorX=function(e){t.NumberUtils.isNumber(e)&&this._anchorX!=e&&(this._anchorX=e,this._setDirty(),this._setParentSizeDirty())},Object.defineProperty(i.prototype,"anchorY",{get:function(){return this._anchorY},set:function(t){this._setAnchorY(t)},enumerable:!0,configurable:!0}),i.prototype._setAnchorY=function(e){t.NumberUtils.isNumber(e)&&this._anchorY!=e&&(this._anchorY=e,this._setDirty(),this._setParentSizeDirty())},Object.defineProperty(i.prototype,"visible",{get:function(){return this._visible},set:function(t){this._setVisible(t)},enumerable:!0,configurable:!0}),i.prototype._setVisible=function(t){this._visible!=t&&(this._visible=t,this._setSizeDirty())},Object.defineProperty(i.prototype,"rotation",{get:function(){return this._rotation},set:function(e){t.NumberUtils.isNumber(e)&&this._rotation!=e&&(this._rotation=e,this._setSizeDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"alpha",{get:function(){return this._alpha},set:function(e){t.NumberUtils.isNumber(e)&&this._alpha!=e&&(this._alpha=e,this._setDirty(),this._setCacheDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"skewX",{get:function(){return this._skewX},set:function(e){t.NumberUtils.isNumber(e)&&this._skewX!=e&&(this._skewX=e,this._setSizeDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"skewY",{get:function(){return this._skewY},set:function(e){t.NumberUtils.isNumber(e)&&this._skewY!=e&&(this._skewY=e,this._setSizeDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"touchEnabled",{get:function(){return this._touchEnabled},set:function(t){this._setTouchEnabled(t)},enumerable:!0,configurable:!0}),i.prototype._setTouchEnabled=function(t){this._touchEnabled=t},Object.defineProperty(i.prototype,"scrollRect",{get:function(){return this._scrollRect},set:function(t){this._setScrollRect(t)},enumerable:!0,configurable:!0}),i.prototype._setScrollRect=function(t){this._scrollRect=t,this._setSizeDirty()},Object.defineProperty(i.prototype,"measuredWidth",{get:function(){return this._measureBounds().width},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"measuredHeight",{get:function(){return this._measureBounds().height},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"explicitWidth",{get:function(){return this._explicitWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"explicitHeight",{get:function(){return this._explicitHeight},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return this._getSize(t.Rectangle.identity).width},set:function(t){this._setWidth(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._getSize(t.Rectangle.identity).height},set:function(t){this._setHeight(t)},enumerable:!0,configurable:!0}),i.prototype._setWidth=function(e){this._setSizeDirty(),this._setCacheDirty(),this._explicitWidth=e,this._hasWidthSet=t.NumberUtils.isNumber(e)},i.prototype._setHeight=function(e){this._setSizeDirty(),this._setCacheDirty(),this._explicitHeight=e,this._hasHeightSet=t.NumberUtils.isNumber(e)},i.prototype._draw=function(t){if(this._visible&&!this.drawCacheTexture(t)){this._colorTransform&&t.setGlobalColorTransform(this._colorTransform.matrix),t.setAlpha(this.worldAlpha,this.blendMode),t.setTransform(this._worldTransform);var e=this.mask||this._scrollRect;e&&t.pushMask(e),this._render(t),e&&t.popMask(),this._colorTransform&&t.setGlobalColorTransform(null)}this.destroyCacheBounds()},i.prototype.drawCacheTexture=function(e){if(0==this._cacheAsBitmap)return!1;if((this._cacheDirty||null==this._texture_to_render||Math.round(this.width)!=Math.round(this._texture_to_render._sourceWidth)||Math.round(this.height)!=Math.round(this._texture_to_render._sourceHeight))&&(this._cacheDirty=!this._makeBitmapCache()),null==this._texture_to_render)return!1;var i=(s=this._texture_to_render)._offsetX,n=s._offsetY,o=s._textureWidth,s=s._textureHeight;this._updateTransform(),e.setAlpha(this.worldAlpha,this.blendMode),e.setTransform(this._worldTransform);var r=t.MainContext.instance.rendererContext.texture_scale_factor;return t.RenderFilter.getInstance().drawImage(e,this,0,0,o*r,s*r,i,n,o,s),!0},i.prototype._updateTransform=function(){this._calculateWorldTransform()},i.prototype._calculateWorldTransform=function(){var t=this._worldTransform,e=this._parent;t.identityMatrix(e._worldTransform),this._getMatrix(t);var i=this._scrollRect;i&&t.append(1,0,0,1,-i.x,-i.y),this.worldAlpha=e.worldAlpha*this._alpha},i.prototype._render=function(t){},i.prototype.getBounds=function(e,i){void 0===i&&(i=!0);var n=this._measureBounds(),o=this._hasWidthSet?this._explicitWidth:n.width,s=this._hasHeightSet?this._explicitHeight:n.height;this._rectW=n.width,this._rectH=n.height,this._clearSizeDirty();var r=n.x,n=n.y,a=0,h=0;return i&&(0!=this._anchorX||0!=this._anchorY?(a=o*this._anchorX,h=s*this._anchorY):(a=this._anchorOffsetX,h=this._anchorOffsetY)),this._cacheBounds.initialize(r-a,n-h,o,s),o=this._cacheBounds,e||(e=new t.Rectangle),e.initialize(o.x,o.y,o.width,o.height)},i.prototype.destroyCacheBounds=function(){this._cacheBounds.x=0,this._cacheBounds.y=0,this._cacheBounds.width=0,this._cacheBounds.height=0},i.prototype._getConcatenatedMatrix=function(){for(var e=i.identityMatrixForGetConcatenated.identity(),n=this;null!=n;){if(0!=n._anchorX||0!=n._anchorY){var o=n._getSize(t.Rectangle.identity);e.prependTransform(n._x,n._y,n._scaleX,n._scaleY,n._rotation,n._skewX,n._skewY,o.width*n._anchorX,o.height*n._anchorY)}else e.prependTransform(n._x,n._y,n._scaleX,n._scaleY,n._rotation,n._skewX,n._skewY,n._anchorOffsetX,n._anchorOffsetY);n=n._parent}return e},i.prototype.localToGlobal=function(e,i,n){void 0===e&&(e=0),void 0===i&&(i=0);var o=this._getConcatenatedMatrix();return o.append(1,0,0,1,e,i),n||(n=new t.Point),n.x=o.tx,n.y=o.ty,n},i.prototype.globalToLocal=function(e,i,n){void 0===e&&(e=0),void 0===i&&(i=0);var o=this._getConcatenatedMatrix();return o.invert(),o.append(1,0,0,1,e,i),n||(n=new t.Point),n.x=o.tx,n.y=o.ty,n},i.prototype.hitTest=function(e,i,n){return void 0===n&&(n=!1),this._visible&&(n||this._touchEnabled)?(n=this._getSize(t.Rectangle.identity),0<=e&&e<n.width&&0<=i&&i<n.height?this.mask||this._scrollRect?this._scrollRect&&e>this._scrollRect.x&&i>this._scrollRect.y&&e<this._scrollRect.x+this._scrollRect.width&&i<this._scrollRect.y+this._scrollRect.height||this.mask&&this.mask.x<=e&&e<this.mask.x+this.mask.width&&this.mask.y<=i&&i<this.mask.y+this.mask.height?this:null:this:null):null},i.prototype.hitTestPoint=function(e,i,n){return e=this.globalToLocal(e,i),n?(this._hitTestPointTexture||(this._hitTestPointTexture=new t.RenderTexture),(n=this._hitTestPointTexture).drawToTexture(this),0!=n.getPixel32(e.x-this._hitTestPointTexture._offsetX,e.y-this._hitTestPointTexture._offsetY)[3]):!!this.hitTest(e.x,e.y,!0)},i.prototype._getMatrix=function(e){e||(e=t.Matrix.identity.identity());var i,n;i=(n=this._getOffsetPoint()).x,n=n.y;var o=this.__hack_local_matrix;return o?(e.append(o.a,o.b,o.c,o.d,o.tx,o.ty),e.append(1,0,0,1,-i,-n)):e.appendTransform(this._x,this._y,this._scaleX,this._scaleY,this._rotation,this._skewX,this._skewY,i,n),e},i.prototype._getSize=function(t){return this._hasHeightSet&&this._hasWidthSet?t.initialize(0,0,this._explicitWidth,this._explicitHeight):this._measureSize(t)},i.prototype._measureSize=function(t){return this._sizeDirty?(t=this._measureBounds(),this._rectW=t.width,this._rectH=t.height,this._clearSizeDirty()):(t.width=this._rectW,t.height=this._rectH),t.x=0,t.y=0,t},i.prototype._measureBounds=function(){return t.Rectangle.identity.initialize(0,0,0,0)},i.prototype._getOffsetPoint=function(){var e=this._anchorOffsetX,i=this._anchorOffsetY;0==this._anchorX&&0==this._anchorY||(i=this._getSize(t.Rectangle.identity),e=this._anchorX*i.width,i=this._anchorY*i.height);var n=t.Point.identity;return n.x=e,n.y=i,n},i.prototype._onAddToStage=function(){this._stage=t.MainContext.instance.stage,t.DisplayObjectContainer.__EVENT__ADD_TO_STAGE_LIST.push(this)},i.prototype._onRemoveFromStage=function(){t.DisplayObjectContainer.__EVENT__REMOVE_FROM_STAGE_LIST.push(this)},Object.defineProperty(i.prototype,"stage",{get:function(){return this._stage},enumerable:!0,configurable:!0}),i.prototype.addEventListener=function(n,o,s,r,a){void 0===r&&(r=!1),void 0===a&&(a=0),e.prototype.addEventListener.call(this,n,o,s,r,a),((r=n==t.Event.ENTER_FRAME)||n==t.Event.RENDER)&&this._insertEventBin(r?i._enterFrameCallBackList:i._renderCallBackList,o,s,a,this)},i.prototype.removeEventListener=function(n,o,s,r){void 0===r&&(r=!1),e.prototype.removeEventListener.call(this,n,o,s,r),((r=n==t.Event.ENTER_FRAME)||n==t.Event.RENDER)&&this._removeEventBin(r?i._enterFrameCallBackList:i._renderCallBackList,o,s,this)},i.prototype.dispatchEvent=function(t){if(!t._bubbles)return e.prototype.dispatchEvent.call(this,t);for(var i=[],n=this;n;)i.push(n),n=n._parent;return t._reset(),this._dispatchPropagationEvent(t,i),!t._isDefaultPrevented},i.prototype._dispatchPropagationEvent=function(t,e,i){for(var n=1,o=(i=e.length)-1;0<=o;o--){var s=e[o];if(t._currentTarget=s,t._target=this,t._eventPhase=n,s._notifyListener(t),t._isPropagationStopped||t._isPropagationImmediateStopped)return}if(s=e[0],t._currentTarget=s,t._target=this,t._eventPhase=2,s._notifyListener(t),!t._isPropagationStopped&&!t._isPropagationImmediateStopped)for(n=3,o=1;o<i&&(s=e[o],t._currentTarget=s,t._target=this,t._eventPhase=n,s._notifyListener(t),!t._isPropagationStopped&&!t._isPropagationImmediateStopped);o++);},i.prototype.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e._parent}return!1},Object.defineProperty(i.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(e){(this._cacheAsBitmap=e)?t.callLater(this._makeBitmapCache,this):this._texture_to_render=null},enumerable:!0,configurable:!0}),i.prototype._makeBitmapCache=function(){this.renderTexture||(this.renderTexture=new t.RenderTexture);var e=this.renderTexture.drawToTexture(this);return this._texture_to_render=e?this.renderTexture:null,e},i.prototype._setCacheDirty=function(t){void 0===t&&(t=!0),this._cacheDirty=t},i.getTransformBounds=function(t,e){var i=t.x,n=t.y,o=t.width,s=t.height;(i||n)&&e.appendTransform(0,0,1,1,0,0,0,-i,-n);var r=o*e.a,o=o*e.b,a=s*e.c,s=s*e.d,h=e.tx,c=e.ty,p=h,l=h,u=c,d=c;return(i=r+h)<p?p=i:i>l&&(l=i),(i=r+a+h)<p?p=i:i>l&&(l=i),(i=a+h)<p?p=i:i>l&&(l=i),(n=o+c)<u?u=n:n>d&&(d=n),(n=o+s+c)<u?u=n:n>d&&(d=n),(n=s+c)<u?u=n:n>d&&(d=n),t.initialize(p,u,l-p,d-u)},Object.defineProperty(i.prototype,"colorTransform",{get:function(){return this._colorTransform},set:function(t){this._colorTransform=t},enumerable:!0,configurable:!0}),i.identityMatrixForGetConcatenated=new t.Matrix,i._enterFrameCallBackList=[],i._renderCallBackList=[],i}(t.EventDispatcher);t.DisplayObject=e,e.prototype.__class__="egret.DisplayObject",e=function(){function t(){this.matrix=null}return t.prototype.updateColor=function(t,e,i,n,o,s,r,a){},t}(),t.ColorTransform=e,e.prototype.__class__="egret.ColorTransform"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this._touchChildren=!0,this._children=[]}return __extends(i,e),Object.defineProperty(i.prototype,"touchChildren",{get:function(){return this._touchChildren},set:function(t){this._touchChildren=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"numChildren",{get:function(){return this._children.length},enumerable:!0,configurable:!0}),i.prototype.setChildIndex=function(t,e){this.doSetChildIndex(t,e)},i.prototype.doSetChildIndex=function(e,i){var n=this._children.indexOf(e);0>n&&t.Logger.fatal("child不在当前容器内"),this._children.splice(n,1),0>i||this._children.length<=i?this._children.push(e):this._children.splice(i,0,e)},i.prototype.addChild=function(t){var e=this._children.length;return t._parent==this&&e--,this._doAddChild(t,e)},i.prototype.addChildAt=function(t,e){return this._doAddChild(t,e)},i.prototype._doAddChild=function(e,n,o){if(void 0===o&&(o=!0),e==this)return e;if(0>n||n>this._children.length)return t.Logger.fatal("提供的索引超出范围"),e;var s=e._parent;if(s==this)return this.doSetChildIndex(e,n),e;if(s&&0<=(n=s._children.indexOf(e))&&s._doRemoveChild(n),this._children.splice(n,0,e),e._parentChanged(this),o&&e.dispatchEventWith(t.Event.ADDED,!0),this._stage)for(e._onAddToStage(),n=i.__EVENT__ADD_TO_STAGE_LIST;0<n.length;)n.shift().dispatchEventWith(t.Event.ADDED_TO_STAGE);return e._setDirty(),this._setSizeDirty(),e},i.prototype.removeChild=function(e){return 0<=(e=this._children.indexOf(e))?this._doRemoveChild(e):(t.Logger.fatal("child未被addChild到该parent"),null)},i.prototype.removeChildAt=function(e){return 0<=e&&e<this._children.length?this._doRemoveChild(e):(t.Logger.fatal("提供的索引超出范围"),null)},i.prototype._doRemoveChild=function(e,n){void 0===n&&(n=!0);var o=this._children,s=o[e];if(n&&s.dispatchEventWith(t.Event.REMOVED,!0),this._stage){s._onRemoveFromStage();for(var r=i.__EVENT__REMOVE_FROM_STAGE_LIST;0<r.length;){var a=r.shift();a.dispatchEventWith(t.Event.REMOVED_FROM_STAGE),a._stage=null}}return s._parentChanged(null),o.splice(e,1),this._setSizeDirty(),s},i.prototype.getChildAt=function(e){return 0<=e&&e<this._children.length?this._children[e]:(t.Logger.fatal("提供的索引超出范围"),null)},i.prototype.contains=function(t){for(;t;){if(t==this)return!0;t=t._parent}return!1},i.prototype.swapChildrenAt=function(e,i){0<=e&&e<this._children.length&&0<=i&&i<this._children.length?this._swapChildrenAt(e,i):t.Logger.fatal("提供的索引超出范围")},i.prototype.swapChildren=function(e,i){var n=this._children.indexOf(e),o=this._children.indexOf(i);-1==n||-1==o?t.Logger.fatal("child未被addChild到该parent"):this._swapChildrenAt(n,o)},i.prototype._swapChildrenAt=function(t,e){if(t!=e){var i=this._children,n=i[t];i[t]=i[e],i[e]=n}},i.prototype.getChildIndex=function(t){return this._children.indexOf(t)},i.prototype.removeChildren=function(){for(var t=this._children.length-1;0<=t;t--)this._doRemoveChild(t)},i.prototype._updateTransform=function(){if(this._visible){e.prototype._updateTransform.call(this);for(var t=0,i=this._children.length;t<i;t++)this._children[t]._updateTransform()}},i.prototype._render=function(t){for(var e=0,i=this._children.length;e<i;e++)this._children[e]._draw(t)},i.prototype._measureBounds=function(){for(var e=0,i=0,n=0,o=0,s=this._children.length,r=0;r<s;r++){if((l=this._children[r])._visible){var a=(p=l.getBounds(t.Rectangle.identity,!1)).x,h=p.y,c=p.width,p=p.height,l=l._getMatrix(),a=(l=t.DisplayObject.getTransformBounds(t.Rectangle.identity.initialize(a,h,c,p),l)).x,h=l.y,c=l.width+l.x,l=l.height+l.y;(a<e||0==r)&&(e=a),(c>i||0==r)&&(i=c),(h<n||0==r)&&(n=h),(l>o||0==r)&&(o=l)}}return t.Rectangle.identity.initialize(e,n,i-e,o-n)},i.prototype.hitTest=function(i,n,o){void 0===o&&(o=!1);var s;if(!this._visible)return null;if(this._scrollRect){if(i<this._scrollRect.x||n<this._scrollRect.y||i>this._scrollRect.x+this._scrollRect.width||n>this._scrollRect.y+this._scrollRect.height)return null}else if(this.mask&&(this.mask.x>i||i>this.mask.x+this.mask.width||this.mask.y>n||n>this.mask.y+this.mask.height))return null;for(var r=this._children,a=this._touchChildren,h=r.length-1;0<=h;h--){var c=r[h],p=c._getMatrix(),l=c._scrollRect;if(l&&p.append(1,0,0,1,-l.x,-l.y),p.invert(),p=t.Matrix.transformCoords(p,i,n),c=c.hitTest(p.x,p.y,!0)){if(!a)return this;if(c._touchEnabled&&a)return c;s=this}}return s||(this._texture_to_render||this.graphics?e.prototype.hitTest.call(this,i,n,o):null)},i.prototype._onAddToStage=function(){e.prototype._onAddToStage.call(this);for(var t=this._children.length,i=0;i<t;i++)this._children[i]._onAddToStage()},i.prototype._onRemoveFromStage=function(){e.prototype._onRemoveFromStage.call(this);for(var t=this._children.length,i=0;i<t;i++)this._children[i]._onRemoveFromStage()},i.prototype.getChildByName=function(t){for(var e,i=this._children,n=i.length,o=0;o<n;o++)if((e=i[o]).name==t)return e;return null},i.__EVENT__ADD_TO_STAGE_LIST=[],i.__EVENT__REMOVE_FROM_STAGE_LIST=[],i}(t.DisplayObject);t.DisplayObjectContainer=e,e.prototype.__class__="egret.DisplayObjectContainer"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(t,i){void 0===t&&(t=480),void 0===i&&(i=800),e.call(this),this.touchEnabled=!0,this._stage=this,this._stageWidth=t,this._stageHeight=i}return __extends(i,e),i.prototype.invalidate=function(){i._invalidateRenderFlag=!0},Object.defineProperty(i.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(t){this._scaleMode!=t&&(this._scaleMode=t,this.setResolutionPolicy())},enumerable:!0,configurable:!0}),i.prototype.changeSize=function(){this.setResolutionPolicy(),this.dispatchEventWith(t.Event.RESIZE)},i.prototype.setResolutionPolicy=function(){if((i={})[t.StageScaleMode.NO_SCALE]=new t.NoScale,i[t.StageScaleMode.SHOW_ALL]=new t.ShowAll,i[t.StageScaleMode.NO_BORDER]=new t.FixedWidth,i[t.StageScaleMode.EXACT_FIT]=new t.FullScreen,!(i=i[this._scaleMode]))throw Error("使用了尚未实现的ScaleMode");var e=new t.EqualToFrame,i=new t.ResolutionPolicy(e,i);t.StageDelegate.getInstance()._setResolutionPolicy(i),this._stageWidth=t.StageDelegate.getInstance()._stageWidth,this._stageHeight=t.StageDelegate.getInstance()._stageHeight},Object.defineProperty(i.prototype,"stageWidth",{get:function(){return this._stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stageHeight",{get:function(){return this._stageHeight},enumerable:!0,configurable:!0}),i.prototype.hitTest=function(e,i,n){if(!this._touchEnabled)return null;var o;if(!this._touchChildren)return this;for(var s=(n=this._children).length-1;0<=s;s--){var r=(o=n[s])._getMatrix(),a=o._scrollRect;if(a&&r.append(1,0,0,1,-a.x,-a.y),r.invert(),r=t.Matrix.transformCoords(r,e,i),(o=o.hitTest(r.x,r.y,!0))&&o._touchEnabled)return o}return this},i.prototype.getBounds=function(e){return e||(e=new t.Rectangle),e.initialize(0,0,this._stageWidth,this._stageHeight)},i.prototype._updateTransform=function(){for(var t=0,e=this._children.length;t<e;t++)this._children[t]._updateTransform()},Object.defineProperty(i.prototype,"focus",{get:function(){return null},enumerable:!0,configurable:!0}),i._invalidateRenderFlag=!1,i}(t.DisplayObjectContainer);t.Stage=e,e.prototype.__class__="egret.Stage"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.NO_BORDER="noBorder",t.NO_SCALE="noScale",t.SHOW_ALL="showAll",t.EXACT_FIT="exactFit",t}();t.StageScaleMode=e,e.prototype.__class__="egret.StageScaleMode"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(i){void 0===i&&(i=null),e.call(this),this._lastTouchPosition=new t.Point(0,0),this._lastTouchTime=0,this._lastTouchEvent=null,this._velocitys=[],this._content=null,this._horizontalScrollPolicy=this._verticalScrollPolicy="auto",this._scrollTop=this._scrollLeft=0,this._vCanScroll=this._hCanScroll=!1,this.touchEnabled=!0,i&&this.setContent(i)}return __extends(i,e),i.prototype.setContent=function(t){this._content&&(this._removeEvents(),e.prototype.removeChildAt.call(this,0)),this._content=t,e.prototype.addChild.call(this,t),this._addEvents(),this._explicitWidth||this._getContentWidth(),this._explicitHeight||this._getContentHeight()},Object.defineProperty(i.prototype,"verticalScrollPolicy",{get:function(){return this._verticalScrollPolicy},set:function(t){t!=this._verticalScrollPolicy&&(this._verticalScrollPolicy=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"horizontalScrollPolicy",{get:function(){return this._horizontalScrollPolicy},set:function(t){t!=this._horizontalScrollPolicy&&(this._horizontalScrollPolicy=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollLeft",{get:function(){return this._scrollLeft},set:function(t){t!=this._scrollLeft&&(this._scrollLeft=t,this._validatePosition(!1,!0),this._updateContentPosition())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollTop",{get:function(){return this._scrollTop},set:function(t){t!=this._scrollTop&&(this._scrollTop=t,this._validatePosition(!0,!1),this._updateContentPosition())},enumerable:!0,configurable:!0}),i.prototype.setScrollPosition=function(t,e,i){if(void 0===i&&(i=!1),(!i||0!=t||0!=e)&&(i||this._scrollTop!=t||this._scrollLeft!=e)){if(i){i=this._isOnTheEdge(!0);var n=this._isOnTheEdge(!1);this._scrollTop+=i?t/2:t,this._scrollLeft+=n?e/2:e}else this._scrollTop=t,this._scrollLeft=e;this._validatePosition(!0,!0),this._updateContentPosition()}},i.prototype._isOnTheEdge=function(t){void 0===t&&(t=!0);var e=this._scrollTop,i=this._scrollLeft;return t?0>e||e>this.getMaxScrollTop():0>i||i>this.getMaxScrollLeft()},i.prototype._validatePosition=function(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=!1),t){var i=this.height,n=this._getContentHeight();this._scrollTop=Math.max(this._scrollTop,(0-i)/2),this._scrollTop=Math.min(this._scrollTop,n>i?n-i/2:n/2)}e&&(i=this.width,n=this._getContentWidth(),this._scrollLeft=Math.max(this._scrollLeft,(0-i)/2),this._scrollLeft=Math.min(this._scrollLeft,n>i?n-i/2:n/2))},i.prototype._setWidth=function(t){this._explicitWidth!=t&&(e.prototype._setWidth.call(this,t),this._updateContentPosition())},i.prototype._setHeight=function(t){this._explicitHeight!=t&&(e.prototype._setHeight.call(this,t),this._updateContentPosition())},i.prototype._updateContentPosition=function(){var e=this.getBounds(t.Rectangle.identity);this.scrollRect=new t.Rectangle(this._scrollLeft,this._scrollTop,e.width,e.height),this.dispatchEvent(new t.Event(t.Event.CHANGE))},i.prototype._checkScrollPolicy=function(){var t=this.__checkScrollPolicy(this._horizontalScrollPolicy,this._getContentWidth(),this.width);this._hCanScroll=t;var e=this.__checkScrollPolicy(this._verticalScrollPolicy,this._getContentHeight(),this.height);return this._vCanScroll=e,t||e},i.prototype.__checkScrollPolicy=function(t,e,i){return"on"==t||"off"!=t&&e>i},i.prototype._addEvents=function(){this.addEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this),this.addEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,!0),this.addEventListener(t.TouchEvent.TOUCH_END,this._onTouchEndCapture,this,!0)},i.prototype._removeEvents=function(){this.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this),this.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,!0),this.removeEventListener(t.TouchEvent.TOUCH_END,this._onTouchEndCapture,this,!0)},i.prototype._onTouchBegin=function(e){e._isDefaultPrevented||(t.Tween.removeTweens(this),this.stage.addEventListener(t.TouchEvent.TOUCH_MOVE,this._onTouchMove,this),this.stage.addEventListener(t.TouchEvent.TOUCH_END,this._onTouchEnd,this),this.stage.addEventListener(t.TouchEvent.LEAVE_STAGE,this._onTouchEnd,this),this.addEventListener(t.Event.ENTER_FRAME,this._onEnterFrame,this),this._logTouchEvent(e),e.preventDefault())},i.prototype._onTouchBeginCapture=function(e){var n=this._checkScrollPolicy();if(n){for(var o=e.target;o!=this;){if(o instanceof i&&(n=o._checkScrollPolicy()))return;o=o.parent}e.stopPropagation(),this.delayTouchBeginEvent=this.cloneTouchEvent(e),this.touchBeginTimer||(this.touchBeginTimer=new t.Timer(100,1),this.touchBeginTimer.addEventListener(t.TimerEvent.TIMER_COMPLETE,this._onTouchBeginTimer,this)),this.touchBeginTimer.start(),this._onTouchBegin(e)}},i.prototype._onTouchEndCapture=function(t){this.delayTouchBeginEvent&&this._onTouchBeginTimer()},i.prototype._onTouchBeginTimer=function(){this.touchBeginTimer.stop();var t=this.delayTouchBeginEvent;this.delayTouchBeginEvent=null,this.dispatchPropagationEvent(t)},i.prototype.dispatchPropagationEvent=function(t){for(var e=[],i=t._target;i;)e.push(i),i=i.parent;for(var n=this._content,o=1;(i=e[o])&&i!==n;o+=2)e.unshift(i);this._dispatchPropagationEvent(t,e)},i.prototype._dispatchPropagationEvent=function(t,e,i){for(var n=e.length,o=0;o<n;o++){var s=e[o];if(t._currentTarget=s,t._target=this,t._eventPhase=o<i?1:o==i?2:3,s._notifyListener(t),t._isPropagationStopped||t._isPropagationImmediateStopped)break}},i.prototype._onTouchMove=function(t){if(this._lastTouchPosition.x!=t.stageX||this._lastTouchPosition.y!=t.stageY){this.delayTouchBeginEvent&&(this.delayTouchBeginEvent=null,this.touchBeginTimer.stop()),this.touchChildren=!1;var e=this._getPointChange(t);this.setScrollPosition(e.y,e.x,!0),this._calcVelocitys(t),this._logTouchEvent(t)}},i.prototype._onTouchEnd=function(e){this.touchChildren=!0,t.MainContext.instance.stage.removeEventListener(t.TouchEvent.TOUCH_MOVE,this._onTouchMove,this),t.MainContext.instance.stage.removeEventListener(t.TouchEvent.TOUCH_END,this._onTouchEnd,this),t.MainContext.instance.stage.removeEventListener(t.TouchEvent.LEAVE_STAGE,this._onTouchEnd,this),this.removeEventListener(t.Event.ENTER_FRAME,this._onEnterFrame,this),this._moveAfterTouchEnd()},i.prototype._onEnterFrame=function(e){100<(e=t.getTimer())-this._lastTouchTime&&300>e-this._lastTouchTime&&this._calcVelocitys(this._lastTouchEvent)},i.prototype._logTouchEvent=function(e){this._lastTouchPosition.x=e.stageX,this._lastTouchPosition.y=e.stageY,this._lastTouchEvent=this.cloneTouchEvent(e),this._lastTouchTime=t.getTimer()},i.prototype._getPointChange=function(t){return{x:!1===this._hCanScroll?0:this._lastTouchPosition.x-t.stageX,y:!1===this._vCanScroll?0:this._lastTouchPosition.y-t.stageY}},i.prototype._calcVelocitys=function(e){n=t.getTimer();if(0==this._lastTouchTime)this._lastTouchTime=n;else{var i=this._getPointChange(e),n=n-this._lastTouchTime;i.x/=n,i.y/=n,this._velocitys.push(i),5<this._velocitys.length&&this._velocitys.shift(),this._lastTouchPosition.x=e.stageX,this._lastTouchPosition.y=e.stageY}},i.prototype._getContentWidth=function(){return this._content.explicitWidth||this._content.width},i.prototype._getContentHeight=function(){return this._content.explicitHeight||this._content.height},i.prototype.getMaxScrollLeft=function(){var t=this._getContentWidth()-this.width;return Math.max(0,t)},i.prototype.getMaxScrollTop=function(){var t=this._getContentHeight()-this.height;return Math.max(0,t)},i.prototype._moveAfterTouchEnd=function(){if(0!=this._velocitys.length){for(var t=0,e=0,n=0,o=0;o<this._velocitys.length;o++)var s=this._velocitys[o],r=i.weight[o],t=t+s.x*r,e=e+s.y*r,n=n+r;this._velocitys.length=0,t/=n,e/=n,s=Math.abs(t),n=Math.abs(e),r=this.getMaxScrollLeft(),o=this.getMaxScrollTop(),t=.02<s?this.getAnimationDatas(t,this._scrollLeft,r):{position:this._scrollLeft,duration:1},e=.02<n?this.getAnimationDatas(e,this._scrollTop,o):{position:this._scrollTop,duration:1},this.setScrollLeft(t.position,t.duration),this.setScrollTop(e.position,e.duration)}},i.prototype.setScrollTop=function(e,i){void 0===i&&(i=0);var n=Math.min(this.getMaxScrollTop(),Math.max(e,0));if(0==i)return this.scrollTop=n,null;var o=t.Tween.get(this).to({scrollTop:e},i,t.Ease.quartOut);n!=e&&o.to({scrollTop:n},300,t.Ease.quintOut)},i.prototype.setScrollLeft=function(e,i){void 0===i&&(i=0);var n=Math.min(this.getMaxScrollLeft(),Math.max(e,0));if(0==i)return this.scrollLeft=n,null;var o=t.Tween.get(this).to({scrollLeft:e},i,t.Ease.quartOut);n!=e&&o.to({scrollLeft:n},300,t.Ease.quintOut)},i.prototype.getAnimationDatas=function(t,e,i){var n=Math.abs(t),o=0,s=e+500*t;if(0>s||s>i)for(s=e;1/0!=Math.abs(t)&&.02<Math.abs(t);)s+=t,t=0>s||s>i?.998*t*.95:.998*t,o++;else o=500*-Math.log(.02/n);return{position:Math.min(i+50,Math.max(s,-50)),duration:o}},i.prototype.cloneTouchEvent=function(e){var i=new t.TouchEvent(e._type,e._bubbles,e.cancelable);return i.touchPointID=e.touchPointID,i._stageX=e._stageX,i._stageY=e._stageY,i.ctrlKey=e.ctrlKey,i.altKey=e.altKey,i.shiftKey=e.shiftKey,i.touchDown=e.touchDown,i._isDefaultPrevented=!1,i._target=e._target,i},i.prototype.throwNotSupportedError=function(){throw Error("此方法在ScrollView内不可用!")},i.prototype.addChild=function(t){return this.throwNotSupportedError(),null},i.prototype.addChildAt=function(t,e){return this.throwNotSupportedError(),null},i.prototype.removeChild=function(t){return this.throwNotSupportedError(),null},i.prototype.removeChildAt=function(t){return this.throwNotSupportedError(),null},i.prototype.setChildIndex=function(t,e){this.throwNotSupportedError()},i.prototype.swapChildren=function(t,e){this.throwNotSupportedError()},i.prototype.swapChildrenAt=function(t,e){this.throwNotSupportedError()},i.weight=[1,1.33,1.66,2,2.33],i}(t.DisplayObjectContainer);t.ScrollView=e,e.prototype.__class__="egret.ScrollView"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(i,n,o){void 0===n&&(n=NaN),void 0===o&&(o=NaN),e.call(this,i),this.content=i,this.width=NaN==n?this._getContentWidth():n,this.height=NaN==o?this._getContentHeight():o,t.Logger.warning("egret.Scroller已废弃，请使用egret.ScrollView")}return __extends(i,e),Object.defineProperty(i.prototype,"scrollXEnabled",{get:function(){return"off"!=this.horizontalScrollPolicy},set:function(e){t.Logger.warning("egret.Scroller已废弃，请使用egret.ScrollView"),this.horizontalScrollPolicy=e?"auto":"off"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollYEnabled",{get:function(){return"off"!=this.verticalScrollPolicy},set:function(e){t.Logger.warning("egret.Scroller已废弃，请使用egret.ScrollView"),this.verticalScrollPolicy=e?"auto":"off"},enumerable:!0,configurable:!0}),i}(t.ScrollView);t.Scroller=e,e.prototype.__class__="egret.Scroller"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.REPEAT="repeat",t.SCALE="scale",t}();t.BitmapFillMode=e,e.prototype.__class__="egret.BitmapFillMode"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(t){e.call(this),this.debug=!1,this.debugColor=16711680,this.scale9Grid=null,this.fillMode="scale",t&&(this._texture=t,this._setSizeDirty())}return __extends(i,e),Object.defineProperty(i.prototype,"texture",{get:function(){return this._texture},set:function(t){t!=this._texture&&(this._setSizeDirty(),this._texture=t)},enumerable:!0,configurable:!0}),i.prototype._render=function(t){var e=this._texture;e?(this._texture_to_render=e,i._drawBitmap(t,this._hasWidthSet?this._explicitWidth:e._textureWidth,this._hasHeightSet?this._explicitHeight:e._textureHeight,this)):this._texture_to_render=null},i._drawBitmap=function(t,e,n,o){var s=o._texture_to_render;if(s){var r=s._textureWidth,a=s._textureHeight;if("scale"==o.fillMode){if((h=o.scale9Grid||s.scale9Grid)&&r-h.width<e&&a-h.height<n)i.drawScale9GridImage(t,o,h,e,n);else{var h=s._offsetX,c=s._offsetY,p=s._bitmapWidth||r,l=s._bitmapHeight||a;e/=r,h=Math.round(h*e),e=Math.round(p*e),n/=a,c=Math.round(c*n),n=Math.round(l*n),i.renderFilter.drawImage(t,o,s._bitmapX,s._bitmapY,p,l,h,c,e,n)}}else i.drawRepeatImage(t,o,e,n,o.fillMode)}},i.drawRepeatImage=function(e,i,n,o,s){if(l=i._texture_to_render){var r=l._textureWidth,a=l._textureHeight,h=l._bitmapX,c=l._bitmapY,r=l._bitmapWidth||r,a=l._bitmapHeight||a,p=l._offsetX,l=l._offsetY;t.RenderFilter.getInstance().drawImage(e,i,h,c,r,a,p,l,n,o,s)}},i.drawScale9GridImage=function(e,i,n,o,s){if((_=i._texture_to_render)&&n){var r=t.RenderFilter.getInstance(),a=_._textureWidth,h=_._textureHeight,c=_._bitmapX,p=_._bitmapY,l=_._bitmapWidth||a,u=_._bitmapHeight||h,d=_._offsetX,_=_._offsetY;n=t.Rectangle.identity.initialize(n.x-Math.round(d),n.y-Math.round(d),n.width,n.height),d=Math.round(d),_=Math.round(_),o-=a-l,s-=h-u,n.y==n.bottom&&(n.bottom<u?n.bottom++:n.y--),n.x==n.right&&(n.right<l?n.right++:n.x--);var a=c+n.x,h=c+n.right,f=l-n.right,g=p+n.y,y=p+n.bottom,m=u-n.bottom,v=d+n.x,w=_+n.y,u=s-(u-n.bottom),l=o-(l-n.right);r.drawImage(e,i,c,p,n.x,n.y,d,_,n.x,n.y),r.drawImage(e,i,a,p,n.width,n.y,v,_,l-n.x,n.y),r.drawImage(e,i,h,p,f,n.y,d+l,_,o-l,n.y),r.drawImage(e,i,c,g,n.x,n.height,d,w,n.x,u-n.y),r.drawImage(e,i,a,g,n.width,n.height,v,w,l-n.x,u-n.y),r.drawImage(e,i,h,g,f,n.height,d+l,w,o-l,u-n.y),r.drawImage(e,i,c,y,n.x,m,d,_+u,n.x,s-u),r.drawImage(e,i,a,y,n.width,m,v,_+u,l-n.x,s-u),r.drawImage(e,i,h,y,f,m,d+l,_+u,o-l,s-u)}},i.prototype._measureBounds=function(){var i=this._texture;return i?t.Rectangle.identity.initialize(i._offsetX,i._offsetY,i._textureWidth,i._textureHeight):e.prototype._measureBounds.call(this)},i.debug=!1,i.renderFilter=t.RenderFilter.getInstance(),i}(t.DisplayObject);t.Bitmap=e,e.prototype.__class__="egret.Bitmap"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this._text="",this._textChanged=!1,this._bitmapPool=[]}return __extends(i,e),Object.defineProperty(i.prototype,"text",{get:function(){return this._text},set:function(t){this._textChanged=!0,this._text=t,this._setSizeDirty()},enumerable:!0,configurable:!0}),i.prototype._updateTransform=function(){this.visible&&(this._textChanged&&this._renderText(),e.prototype._updateTransform.call(this))},i.prototype._renderText=function(e){var i=e=0;this._textChanged&&this.removeChildren();for(var n=0,o=this.text.length;n<o;n++){var s=this.text.charAt(n),r=this.spriteSheet.getTexture(s);if(null==r)console.log("当前没有位图文字："+s);else{var s=r._offsetX,a=r._offsetY,h=r._textureWidth;if(this._textChanged){var c=this._bitmapPool[n];c||(c=new t.Bitmap,this._bitmapPool.push(c)),c.texture=r,this.addChild(c),c.x=e}e+=h+s,a+r._textureHeight>i&&(i=a+r._textureHeight)}}return this._textChanged=!1,t.Rectangle.identity.initialize(0,0,e,i)},i.prototype._measureBounds=function(){return this._renderText(!0)},i}(t.DisplayObjectContainer);t.BitmapText=e,e.prototype.__class__="egret.BitmapText"}(egret||(egret={})),function(t){var e=function(){function t(){this._lastY=this._lastX=this._maxY=this._maxX=this._minY=this._minX=0,this.commandQueue=[]}return t.prototype.beginFill=function(t,e){},t.prototype._setStyle=function(t){},t.prototype.drawRect=function(t,e,i,n){this.checkRect(t,e,i,n)},t.prototype.drawCircle=function(t,e,i){this.checkRect(t-i,e-i,2*i,2*i)},t.prototype.drawRoundRect=function(t,e,i,n,o,s){this.checkRect(t,e,i,n)},t.prototype.drawEllipse=function(t,e,i,n){this.checkRect(t-i,e-n,2*i,2*n)},t.prototype.lineStyle=function(t,e,i,n,o,s,r,a){},t.prototype.lineTo=function(t,e){this.checkPoint(t,e)},t.prototype.curveTo=function(t,e,i,n){this.checkPoint(t,e),this.checkPoint(i,n)},t.prototype.moveTo=function(t,e){this.checkPoint(t,e)},t.prototype.clear=function(){this._maxY=this._maxX=this._minY=this._minX=0},t.prototype.endFill=function(){},t.prototype._draw=function(t){},t.prototype.checkRect=function(t,e,i,n){this._minX=Math.min(this._minX,t),this._minY=Math.min(this._minY,e),this._maxX=Math.max(this._maxX,t+i),this._maxY=Math.max(this._maxY,e+n)},t.prototype.checkPoint=function(t,e){this._minX=Math.min(this._minX,t),this._minY=Math.min(this._minY,e),this._maxX=Math.max(this._maxX,t),this._maxY=Math.max(this._maxY,e),this._lastX=t,this._lastY=e},t}();t.Graphics=e,e.prototype.__class__="egret.Graphics",function(t,e,i){this.method=t,this.thisObject=e,this.args=i}.prototype.__class__="egret.Command"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this)}return __extends(i,e),Object.defineProperty(i.prototype,"graphics",{get:function(){return this._graphics||(this._graphics=new t.Graphics),this._graphics},enumerable:!0,configurable:!0}),i.prototype._render=function(t){this._graphics&&this._graphics._draw(t)},i}(t.DisplayObject);t.Shape=e,e.prototype.__class__="egret.Shape"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this)}return __extends(i,e),Object.defineProperty(i.prototype,"graphics",{get:function(){return this._graphics||(this._graphics=new t.Graphics),this._graphics},enumerable:!0,configurable:!0}),i.prototype._render=function(t){this._graphics&&this._graphics._draw(t),e.prototype._render.call(this,t)},i}(t.DisplayObjectContainer);t.Sprite=e,e.prototype.__class__="egret.Sprite"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this._inputEnabled=!1,this._text=this._type="",this._displayAsPassword=!1,this._fontFamily=i.default_fontFamily,this._size=30,this._textColorString="#FFFFFF",this._textColor=16777215,this._strokeColorString="#000000",this._stroke=this._strokeColor=0,this._textAlign="left",this._verticalAlign="top",this._numLines=this._lineSpacing=this._maxChars=0,this._multiline=!1,this._textArr=[],this._isArrayChanged=!1,this._linesArr=[]}return __extends(i,e),i.prototype.isInput=function(){return this._type==t.TextFieldType.INPUT},i.prototype._setTouchEnabled=function(t){e.prototype._setTouchEnabled.call(this,t),this.isInput()&&(this._inputEnabled=!0)},Object.defineProperty(i.prototype,"type",{get:function(){return this._type},set:function(t){this._setType(t)},enumerable:!0,configurable:!0}),i.prototype._setType=function(e){this._type!=e&&(this._type=e,this._type==t.TextFieldType.INPUT?(this._hasWidthSet||this._setWidth(100),this._hasHeightSet||this._setHeight(30),null==this._inputUtils&&(this._inputUtils=new t.InputController),this._inputUtils.init(this),this._setDirty(),this._stage&&this._inputUtils._addStageText()):this._inputUtils&&(this._inputUtils._removeStageText(),this._inputUtils=null))},Object.defineProperty(i.prototype,"text",{get:function(){return this._getText()},set:function(t){this._setText(t)},enumerable:!0,configurable:!0}),i.prototype._getText=function(){return this._type==t.TextFieldType.INPUT?this._inputUtils._getText():this._text},i.prototype._setSizeDirty=function(){e.prototype._setSizeDirty.call(this),this._isArrayChanged=!0},i.prototype._setTextDirty=function(){this._setSizeDirty()},i.prototype._setBaseText=function(t){if(null==t&&(t=""),this._text!=t||this._displayAsPassword){if(this._setTextDirty(),this._text=t,t="",this._displayAsPassword)for(var e=0,i=this._text.length;e<i;e++)switch(this._text.charAt(e)){case"\n":t+="\n";break;case"\r":break;default:t+="*"}else t=this._text;this.setMiddleStyle([[t]])}},i.prototype._setText=function(t){null==t&&(t=""),this._setBaseText(t),this._inputUtils&&this._inputUtils._setText(this._text)},Object.defineProperty(i.prototype,"displayAsPassword",{get:function(){return this._displayAsPassword},set:function(t){this._setDisplayAsPassword(t)},enumerable:!0,configurable:!0}),i.prototype._setDisplayAsPassword=function(t){this._displayAsPassword!=t&&(this._displayAsPassword=t,this._setText(this._text))},Object.defineProperty(i.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this._setFontFamily(t)},enumerable:!0,configurable:!0}),i.prototype._setFontFamily=function(t){this._fontFamily!=t&&(this._setTextDirty(),this._fontFamily=t)},Object.defineProperty(i.prototype,"size",{get:function(){return this._size},set:function(t){this._setSize(t)},enumerable:!0,configurable:!0}),i.prototype._setSize=function(t){this._size!=t&&(this._setTextDirty(),this._size=t)},Object.defineProperty(i.prototype,"italic",{get:function(){return this._italic},set:function(t){this._setItalic(t)},enumerable:!0,configurable:!0}),i.prototype._setItalic=function(t){this._italic!=t&&(this._setTextDirty(),this._italic=t)},Object.defineProperty(i.prototype,"bold",{get:function(){return this._bold},set:function(t){this._setBold(t)},enumerable:!0,configurable:!0}),i.prototype._setBold=function(t){this._bold!=t&&(this._setTextDirty(),this._bold=t)},Object.defineProperty(i.prototype,"textColor",{get:function(){return this._textColor},set:function(t){this._setTextColor(t)},enumerable:!0,configurable:!0}),i.prototype._setTextColor=function(e){this._textColor!=e&&(this._setTextDirty(),this._textColor=e,this._textColorString=t.toColorString(e))},Object.defineProperty(i.prototype,"strokeColor",{get:function(){return this._strokeColor},set:function(t){this._setStrokeColor(t)},enumerable:!0,configurable:!0}),i.prototype._setStrokeColor=function(e){this._strokeColor!=e&&(this._setTextDirty(),this._strokeColor=e,this._strokeColorString=t.toColorString(e))},Object.defineProperty(i.prototype,"stroke",{get:function(){return this._stroke},set:function(t){this._setStroke(t)},enumerable:!0,configurable:!0}),i.prototype._setStroke=function(t){this._stroke!=t&&(this._setTextDirty(),this._stroke=t)},Object.defineProperty(i.prototype,"textAlign",{get:function(){return this._textAlign},set:function(t){this._setTextAlign(t)},enumerable:!0,configurable:!0}),i.prototype._setTextAlign=function(t){this._textAlign!=t&&(this._setTextDirty(),this._textAlign=t)},Object.defineProperty(i.prototype,"verticalAlign",{get:function(){return this._verticalAlign},set:function(t){this._setVerticalAlign(t)},enumerable:!0,configurable:!0}),i.prototype._setVerticalAlign=function(t){this._verticalAlign!=t&&(this._setTextDirty(),this._verticalAlign=t)},Object.defineProperty(i.prototype,"maxChars",{get:function(){return this._maxChars},set:function(t){this._setMaxChars(t)},enumerable:!0,configurable:!0}),i.prototype._setMaxChars=function(t){this._maxChars!=t&&(this._maxChars=t)},Object.defineProperty(i.prototype,"maxScrollV",{get:function(){return this._numLines},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectionBeginIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectionEndIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"caretIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),i.prototype._setSelection=function(t,e){},Object.defineProperty(i.prototype,"lineSpacing",{get:function(){return this._lineSpacing},set:function(t){this._setLineSpacing(t)},enumerable:!0,configurable:!0}),i.prototype._setLineSpacing=function(t){this._lineSpacing!=t&&(this._setTextDirty(),this._lineSpacing=t)},i.prototype._getLineHeight=function(){return this._lineSpacing+this._size},Object.defineProperty(i.prototype,"numLines",{get:function(){return this._numLines},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"multiline",{get:function(){return this._multiline},set:function(t){this._setMultiline(t)},enumerable:!0,configurable:!0}),i.prototype._setMultiline=function(t){this._multiline=t,this._setDirty()},i.prototype.setFocus=function(){t.Logger.warning("TextField.setFocus 没有实现")},i.prototype._onRemoveFromStage=function(){e.prototype._onRemoveFromStage.call(this),this._type==t.TextFieldType.INPUT&&this._inputUtils._removeStageText()},i.prototype._onAddToStage=function(){e.prototype._onAddToStage.call(this),this._type==t.TextFieldType.INPUT&&this._inputUtils._addStageText()},i.prototype._updateBaseTransform=function(){e.prototype._updateTransform.call(this)},i.prototype._updateTransform=function(){this._type==t.TextFieldType.INPUT?this._normalDirty?(this._clearDirty(),this._inputUtils._updateProperties()):this._inputUtils._updateTransform():this._updateBaseTransform()},i.prototype._render=function(t){this.drawText(t,!1),this._clearDirty()},i.prototype._measureBounds=function(){return this.drawText(t.MainContext.instance.rendererContext,!0)},i.prototype._setTextArray=function(t){for(var e="",i=0;i<t.length;i++)e+=t[i][0],t[i][0]=this.changeToPassText(t[i][0]);this._text=e,this.setMiddleStyle(t),this._setSizeDirty()},i.prototype.changeToPassText=function(t){if(this._displayAsPassword){for(var e="",i=0,n=t.length;i<n;i++)switch(t.charAt(i)){case"\n":e+="\n";break;case"\r":break;default:e+="*"}return e}return t},i.prototype.setMiddleStyle=function(t){this._isArrayChanged=!0,this._textArr=t},i.prototype._getLinesArr=function(){if(!this._isArrayChanged)return this._linesArr;this._isArrayChanged=!1;for(var e=this._textArr,i=t.MainContext.instance.rendererContext,n=this._linesArr=[],o=0,s=0,r=0,a=0;a<e.length;a++){var h=e[a];h[1]=h[1]||{};for(var s=Math.max(s,h[1].size||this._size),c=h[0].toString().split(/(?:\r\n|\r|\n)/),p=0;p<c.length;p++){null==n[r]&&(n[r]=[],o=0),i.setupFont(this);var l=i.measureText(c[p]);if(this._hasWidthSet)if(o+l<=this._explicitWidth)n[r].push([c[p],h[1],l]),o+=l;else{for(var u=0,d=0,_=c[p];u<_.length&&(l=i.measureText(_.charAt(u)),!(o+l>this._explicitWidth));u++)d+=l,o+=l;0<u&&(n[r].push([_.substring(0,u),h[1],d]),c[p]=_.substring(u)),p--}else o+=l,n[r].push([c[p],h[1],l]);if(p<c.length-1){if(n[r].push([o,s]),this._type==t.TextFieldType.INPUT&&!this._multiline)return n;r++}}a==e.length-1&&n[r].push([o,s])}return n},i.prototype.drawText=function(e,i){var n=this._getLinesArr();if(e.setupFont(this),!n)return t.Rectangle.identity.initialize(0,0,0,0);for(var o=n.length,s=.5*this._size,r=0,a=0,h=0;h<n.length;h++)var c=n[h],r=r+c[c.length-1][1],a=Math.max(c[c.length-1][0],a);r+=(o-1)*this._lineSpacing,this._hasWidthSet&&(a=this._explicitWidth),h=this._hasHeightSet?this._explicitHeight:Number.POSITIVE_INFINITY,this._hasHeightSet&&r<h&&(c=0,this._verticalAlign==t.VerticalAlign.MIDDLE?c=.5:this._verticalAlign==t.VerticalAlign.BOTTOM&&(c=1),s+=c*(h-r));var s=Math.round(s),p=0;this._textAlign==t.HorizontalAlign.CENTER?p=.5:this._textAlign==t.HorizontalAlign.RIGHT&&(p=1);for(var l=0,h=0;h<o;h++){for(var c=n[h],l=Math.round((a-c[c.length-1][0])*p),u=0;u<c.length-1;u++)i||(this._type==t.TextFieldType.INPUT?e.drawText(this,c[u][0],l,s,c[u][2],{}):e.drawText(this,c[u][0],l,s,c[u][2],c[u][1])),l+=c[u][2];if(s+=c[c.length-1][1]+this._lineSpacing,this._hasHeightSet&&s-.5*this._size>this._explicitHeight)break}return t.Rectangle.identity.initialize(0,0,a,r)},i.default_fontFamily="Arial",i}(t.DisplayObject);t.TextField=e,e.prototype.__class__="egret.TextField"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.DYNAMIC="dynamic",t.INPUT="input",t}();t.TextFieldType=e,e.prototype.__class__="egret.TextFieldType"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(t){e.call(this);var i=t.bitmapData;this.bitmapData=i,this._textureMap={},this._sourceWidth=i.width,this._sourceHeight=i.height,this._bitmapX=t._bitmapX-t._offsetX,this._bitmapY=t._bitmapY-t._offsetY}return __extends(i,e),i.prototype.getTexture=function(t){return this._textureMap[t]},i.prototype.createTexture=function(e,i,n,o,s,r,a,h,c){void 0===r&&(r=0),void 0===a&&(a=0),void 0===h&&(h=r+o),void 0===c&&(c=a+s);var p=new t.Texture;return p._bitmapData=this.bitmapData,p._bitmapX=this._bitmapX+i,p._bitmapY=this._bitmapY+n,p._bitmapWidth=o,p._bitmapHeight=s,p._offsetX=r,p._offsetY=a,p._textureWidth=h,p._textureHeight=c,p._sourceWidth=this._sourceWidth,p._sourceHeight=this._sourceHeight,this._textureMap[e]=p},i}(t.HashObject);t.SpriteSheet=e,e.prototype.__class__="egret.SpriteSheet"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),t.Logger.warning("TextInput 已废弃，请使用TextField代替，并设置type为TextFieldType.INPUT"),this.type=t.TextFieldType.INPUT}return __extends(i,e),i.prototype.setText=function(e){t.Logger.warning("TextField.setText()已废弃，请使用TextInput.text设置"),this.text=e},i.prototype.getText=function(){return t.Logger.warning("TextField.getText()已废弃，请使用TextInput.text获取"),this.text},i.prototype.setTextType=function(e){t.Logger.warning("TextField.setTextType()已废弃，请使用TextInput.displayAsPassword设置"),this.displayAsPassword="password"==e},i.prototype.getTextType=function(){return t.Logger.warning("TextField.getTextType()已废弃，请使用TextInput.displayAsPassword获取"),this.displayAsPassword?"password":"text"},i}(t.TextField);t.TextInput=e,e.prototype.__class__="egret.TextInput"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this._isFocus=!1,this._isFirst=this._isFirst=!0}return __extends(i,e),i.prototype.init=function(e){this._text=e,this.stageText=t.StageText.create(),e=this._text.localToGlobal(),this.stageText._open(e.x,e.y,this._text._explicitWidth,this._text._explicitHeight)},i.prototype._addStageText=function(){this._text._inputEnabled||(this._text._touchEnabled=!0),this.stageText._add(),this.stageText._addListeners(),this.stageText.addEventListener("blur",this.onBlurHandler,this),this.stageText.addEventListener("focus",this.onFocusHandler,this),this.stageText.addEventListener("updateText",this.updateTextHandler,this),this._text.addEventListener(t.TouchEvent.TOUCH_TAP,this.onMouseDownHandler,this),t.MainContext.instance.stage.addEventListener(t.TouchEvent.TOUCH_TAP,this.onStageDownHandler,this)},i.prototype._removeStageText=function(){this.stageText._remove(),this.stageText._removeListeners(),this._text._inputEnabled||(this._text._touchEnabled=!1),this.stageText.removeEventListener("blur",this.onBlurHandler,this),this.stageText.removeEventListener("focus",this.onFocusHandler,this),this.stageText.removeEventListener("updateText",this.updateTextHandler,this),this._text.removeEventListener(t.TouchEvent.TOUCH_TAP,this.onMouseDownHandler,this),t.MainContext.instance.stage.removeEventListener(t.TouchEvent.TOUCH_TAP,this.onStageDownHandler,this)},i.prototype._getText=function(){return this.stageText._getText()},i.prototype._setText=function(t){this.stageText._setText(t)},i.prototype.onFocusHandler=function(t){this.hideText()},i.prototype.onBlurHandler=function(t){this.showText()},i.prototype.onMouseDownHandler=function(t){t.stopPropagation(),this._text._visible&&this.stageText._show()},i.prototype.onStageDownHandler=function(t){this.stageText._hide(),this.showText()},i.prototype.showText=function(){this._isFocus&&(this._isFocus=!1,this.resetText())},i.prototype.hideText=function(){this._isFocus||(this._text._setBaseText(""),this._isFocus=!0)},i.prototype.updateTextHandler=function(e){this.resetText(),this._text.dispatchEvent(new t.Event(t.Event.CHANGE))},i.prototype.resetText=function(){this._text._setBaseText(this.stageText._getText())},i.prototype._updateTransform=function(){var e=this._text._worldTransform.a,i=this._text._worldTransform.b,n=this._text._worldTransform.c,o=this._text._worldTransform.d,s=this._text._worldTransform.tx,r=this._text._worldTransform.ty;this._text._updateBaseTransform();var a=this._text._worldTransform;if(this._isFirst||e!=a.a||i!=a.b||n!=a.c||o!=a.d||s!=a.tx||r!=a.ty){this._isFirst=!1,e=this._text.localToGlobal(),this.stageText.changePosition(e.x,e.y);var h=this;t.callLater(function(){h.stageText._setScale(h._text._worldTransform.a,h._text._worldTransform.d)},this)}},i.prototype._updateProperties=function(){var e=this._text._stage;if(null==e)this.stageText._setVisible(!1);else{for(var i=this._text,n=i._visible;n&&(i=i.parent)!=e;)n=i._visible;this.stageText._setVisible(n)}this.stageText._setMultiline(this._text._multiline),this.stageText._setMaxChars(this._text._maxChars),this.stageText._setSize(this._text._size),this.stageText._setTextColor(this._text._textColorString),this.stageText._setTextFontFamily(this._text._fontFamily),this.stageText._setBold(this._text._bold),this.stageText._setItalic(this._text._italic),this.stageText._setTextAlign(this._text._textAlign),this.stageText._setWidth(this._text._getSize(t.Rectangle.identity).width),this.stageText._setHeight(this._text._getSize(t.Rectangle.identity).height),this.stageText._setTextType(this._text._displayAsPassword?"password":"text"),this.stageText._setText(this._text._text),this.stageText._resetStageText(),this._updateTransform()},i}(t.HashObject);t.InputController=e,e.prototype.__class__="egret.InputController"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(t){function e(e,i){t.call(this,e),this.charList=this.parseConfig(i)}return __extends(e,t),e.prototype.getTexture=function(t){var e=this._textureMap[t];if(!e){if(!(e=this.charList[t]))return null;e=this.createTexture(t,e.x,e.y,e.width,e.height,e.offsetX,e.offsetY),this._textureMap[t]=e}return e},e.prototype.parseConfig=function(t){t=(t=t.split("\r\n").join("\n")).split("\n");for(var e=this.getConfigByKey(t[3],"count"),i={},n=4;n<4+e;n++){var o=t[n],s={};i[String.fromCharCode(this.getConfigByKey(o,"id"))]=s,s.x=this.getConfigByKey(o,"x"),s.y=this.getConfigByKey(o,"y"),s.width=this.getConfigByKey(o,"width"),s.height=this.getConfigByKey(o,"height"),s.offsetX=this.getConfigByKey(o,"xoffset"),s.offsetY=this.getConfigByKey(o,"yoffset")}return i},e.prototype.getConfigByKey=function(t,e){for(var i=t.split(" "),n=0,o=i.length;n<o;n++){var s=i[n];if(e==s.substring(0,e.length))return i=s.substring(e.length+1),parseInt(i)}return 0},e}(t.SpriteSheet);t.BitmapTextSpriteSheet=e,e.prototype.__class__="egret.BitmapTextSpriteSheet"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function n(n,o){e.call(this),this.frameRate=60,n instanceof i?(t.Logger.warning("MovieClip#constructor接口参数已经变更，请尽快调整用法为 new MovieClip(data,texture)"),this.delegate=n):this.delegate=new i(n,o),this.delegate.setMovieClip(this)}return __extends(n,e),n.prototype.gotoAndPlay=function(t){this.delegate.gotoAndPlay(t)},n.prototype.gotoAndStop=function(t){this.delegate.gotoAndStop(t)},n.prototype.stop=function(){this.delegate.stop()},n.prototype.dispose=function(){this.delegate.dispose()},n.prototype.release=function(){t.Logger.warning("MovieClip#release方法即将废弃"),this.dispose()},n.prototype.getCurrentFrameIndex=function(){return t.Logger.warning("MovieClip#getCurrentFrameIndex方法即将废弃"),this.delegate._currentFrameIndex},n.prototype.getTotalFrame=function(){return t.Logger.warning("MovieClip#getTotalFrame方法即将废弃"),this.delegate._totalFrame},n.prototype.setInterval=function(e){t.Logger.warning("MovieClip#setInterval方法即将废弃,请使用MovieClip#frameRate代替"),this.frameRate=60/e},n.prototype.getIsPlaying=function(){return t.Logger.warning("MovieClip#getIsPlaying方法即将废弃"),this.delegate.isPlaying},n}(t.DisplayObjectContainer);t.MovieClip=e,e.prototype.__class__="egret.MovieClip";var i=function(){function e(e,i){this.data=e,this._currentFrameIndex=this._passTime=this._totalFrame=0,this._isPlaying=!1,this._frameData=e,this._spriteSheet=new t.SpriteSheet(i)}return e.prototype.setMovieClip=function(e){this.movieClip=e,this.bitmap=new t.Bitmap,this.movieClip.addChild(this.bitmap)},e.prototype.gotoAndPlay=function(e){this.checkHasFrame(e),this._isPlaying=!0,this._currentFrameIndex=0,this._currentFrameName=e,this._totalFrame=this._frameData.frames[e].totalFrame,this.playNextFrame(),this._passTime=0,t.Ticker.getInstance().register(this.update,this)},e.prototype.gotoAndStop=function(t){this.checkHasFrame(t),this.stop(),this._currentFrameIndex=this._passTime=0,this._currentFrameName=t,this._totalFrame=this._frameData.frames[t].totalFrame,this.playNextFrame()},e.prototype.stop=function(){this._isPlaying=!1,t.Ticker.getInstance().unregister(this.update,this)},e.prototype.dispose=function(){},e.prototype.checkHasFrame=function(e){void 0==this._frameData.frames[e]&&t.Logger.fatal("MovieClip没有对应的frame：",e)},e.prototype.update=function(t){for(var e=1e3/this.movieClip.frameRate,e=Math.floor((this._passTime%e+t)/e);1<=e;)1==e?this.playNextFrame():this.playNextFrame(!1),e--;this._passTime+=t},e.prototype.playNextFrame=function(e){void 0===e&&(e=!0);var i=this._frameData.frames[this._currentFrameName].childrenFrame[this._currentFrameIndex];if(e){e=this.getTexture(i.res);var n=this.bitmap;n.x=i.x,n.y=i.y,n.texture=e}null!=i.action&&this.movieClip.dispatchEventWith(i.action),this._currentFrameIndex++,this._currentFrameIndex==this._totalFrame&&(this._currentFrameIndex=0,i.action!=t.Event.COMPLETE&&this.movieClip.dispatchEventWith(t.Event.COMPLETE))},e.prototype.getTexture=function(t){var e=this._frameData.res[t],i=this._spriteSheet.getTexture(t);return i||(i=this._spriteSheet.createTexture(t,e.x,e.y,e.w,e.h)),i},e}();t.DefaultMovieClipDelegate=i,i.prototype.__class__="egret.DefaultMovieClipDelegate"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(t){function e(){t.call(this),this._scaleY=this._scaleX=1,this._size=30,this._color="#FFFFFF",this._fontFamily="Arial",this._italic=this._bold=!1,this._textAlign="left",this._multiline=this._visible=!1,this._maxChars=0}return __extends(e,t),e.prototype._getText=function(){return null},e.prototype._setText=function(t){},e.prototype._setTextType=function(t){},e.prototype._getTextType=function(){return null},e.prototype._open=function(t,e,i,n){},e.prototype._show=function(){},e.prototype._add=function(){},e.prototype._remove=function(){},e.prototype._hide=function(){},e.prototype._addListeners=function(){},e.prototype._removeListeners=function(){},e.prototype._setScale=function(t,e){this._scaleX=t,this._scaleY=e},e.prototype.changePosition=function(t,e){},e.prototype._setSize=function(t){this._size=t},e.prototype._setTextColor=function(t){this._color=t},e.prototype._setTextFontFamily=function(t){this._fontFamily=t},e.prototype._setBold=function(t){this._bold=t},e.prototype._setItalic=function(t){this._italic=t},e.prototype._setTextAlign=function(t){this._textAlign=t},e.prototype._setVisible=function(t){this._visible=t},e.prototype._setWidth=function(t){},e.prototype._setHeight=function(t){},e.prototype._setMultiline=function(t){this._multiline=t},e.prototype._setMaxChars=function(t){this._maxChars=t},e.prototype._resetStageText=function(){},e.create=function(){return null},e}(t.EventDispatcher);t.StageText=e,e.prototype.__class__="egret.StageText"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.GET="get",t.POST="post",t}();t.URLRequestMethod=e,e.prototype.__class__="egret.URLRequestMethod"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.BINARY="binary",t.TEXT="text",t.VARIABLES="variables",t.TEXTURE="texture",t.SOUND="sound",t}();t.URLLoaderDataFormat=e,e.prototype.__class__="egret.URLLoaderDataFormat"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(t){function e(e){void 0===e&&(e=null),t.call(this),null!==e&&this.decode(e)}return __extends(e,t),e.prototype.decode=function(t){this.variables||(this.variables={}),t=t.split("+").join(" ");for(var e,i=/[?&]?([^=]+)=([^&]*)/g;e=i.exec(t);)this.variables[decodeURIComponent(e[1])]=decodeURIComponent(e[2])},e.prototype.toString=function(){if(!this.variables)return"";var t,e=this.variables,i="",n=!0;for(t in e)n?n=!1:i+="&",i+=t+"="+e[t];return i},e}(t.HashObject);t.URLVariables=e,e.prototype.__class__="egret.URLVariables"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(i){void 0===i&&(i=null),e.call(this),this.method=t.URLRequestMethod.GET,this.url=i}return __extends(i,e),i}(t.HashObject);t.URLRequest=e,e.prototype.__class__="egret.URLRequest"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(i){void 0===i&&(i=null),e.call(this),this.dataFormat=t.URLLoaderDataFormat.TEXT,this._status=-1,i&&this.load(i)}return __extends(i,e),i.prototype.load=function(e){this._request=e,this.data=null,t.MainContext.instance.netContext.proceed(this)},i}(t.EventDispatcher);t.URLLoader=e,e.prototype.__class__="egret.URLLoader"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this._textureHeight=this._textureWidth=this._offsetY=this._offsetX=this._bitmapHeight=this._bitmapWidth=this._bitmapY=this._bitmapX=0}return __extends(i,e),Object.defineProperty(i.prototype,"textureWidth",{get:function(){return this._textureWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textureHeight",{get:function(){return this._textureHeight},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bitmapData",{get:function(){return this._bitmapData},enumerable:!0,configurable:!0}),i.prototype._setBitmapData=function(e){var i=t.MainContext.instance.rendererContext.texture_scale_factor;this._bitmapData=e,this._sourceWidth=e.width,this._sourceHeight=e.height,this._textureWidth=this._sourceWidth*i,this._textureHeight=this._sourceHeight*i,this._bitmapWidth=this._textureWidth,this._bitmapHeight=this._textureHeight,this._offsetX=this._offsetY=this._bitmapX=this._bitmapY=0},i.prototype.getPixel32=function(t,e){return this._bitmapData.getContext("2d").getImageData(t,e,1,1).data},i}(t.HashObject);t.Texture=e,e.prototype.__class__="egret.Texture"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this._bitmapData=document.createElement("canvas"),this.renderContext=t.RendererContext.createRendererContext(this._bitmapData)}return __extends(i,e),i.prototype.drawToTexture=function(e){var n=this._bitmapData,o=e.getBounds(t.Rectangle.identity);if(0==o.width||0==o.height)return t.Logger.warning("egret.RenderTexture#drawToTexture:显示对象测量结果宽高为0，请检查"),!1;if(n.width=o.width,n.height=o.height,this.renderContext._cacheCanvas&&(this.renderContext._cacheCanvas.width=o.width,this.renderContext._cacheCanvas.height=o.height),i.identityRectangle.width=o.width,i.identityRectangle.height=o.height,e._worldTransform.identity(),e.worldAlpha=1,e instanceof t.DisplayObjectContainer){var n=e._anchorOffsetX,s=e._anchorOffsetY;for(0==e._anchorX&&0==e._anchorY||(n=e._anchorX*o.width,s=e._anchorY*o.height),this._offsetX=o.x+n,this._offsetY=o.y+s,e._worldTransform.append(1,0,0,1,-this._offsetX,-this._offsetY),n=0,s=(o=e._children).length;n<s;n++)o[n]._updateTransform()}return o=t.RenderFilter.getInstance(),n=o._drawAreaList.concat(),o._drawAreaList.length=0,this.renderContext.clearScreen(),this.renderContext.onRenderStart(),this.webGLTexture=null,(s=e.mask||e._scrollRect)&&this.renderContext.pushMask(s),e._render(this.renderContext),s&&this.renderContext.popMask(),o.addDrawArea(i.identityRectangle),this.renderContext.onRenderFinish(),o._drawAreaList=n,this._textureWidth=this._bitmapData.width,this._textureHeight=this._bitmapData.height,this._sourceWidth=this._textureWidth,this._sourceHeight=this._textureHeight,!0},i.identityRectangle=new t.Rectangle,i}(t.Texture);t.RenderTexture=e,e.prototype.__class__="egret.RenderTexture"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this.renderCost=0,this.texture_scale_factor=1,this.profiler=t.Profiler.getInstance()}return __extends(i,e),i.prototype.clearScreen=function(){},i.prototype.clearRect=function(t,e,i,n){},i.prototype.drawImage=function(t,e,i,n,o,s,r,a,h,c){this.profiler.onDrawImage()},i.prototype.setTransform=function(t){},i.prototype.setAlpha=function(t,e){},i.prototype.setupFont=function(t){},i.prototype.measureText=function(t){return 0},i.prototype.drawText=function(t,e,i,n,o,s){this.profiler.onDrawImage()},i.prototype.strokeRect=function(t,e,i,n,o){},i.prototype.pushMask=function(t){},i.prototype.popMask=function(){},i.prototype.onRenderStart=function(){},i.prototype.onRenderFinish=function(){},i.prototype.setGlobalColorTransform=function(t){},i.createRendererContext=function(t){return null},i.imageSmoothingEnabled=!0,i}(t.HashObject);t.RendererContext=e,e.prototype.__class__="egret.RendererContext"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.MOUSE="mouse",t.TOUCH="touch",t.mode="touch",t}();t.InteractionMode=e,e.prototype.__class__="egret.InteractionMode"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this._currentTouchTarget={},this.maxTouches=2,this.touchDownTarget={},this.touchingIdentifiers=[],this.lastTouchY=this.lastTouchX=-1}return __extends(i,e),i.prototype.run=function(){},i.prototype.getTouchData=function(t,e,i){var n=this._currentTouchTarget[t];return null==n&&(n={},this._currentTouchTarget[t]=n),n.stageX=e,n.stageY=i,n.identifier=t,n},i.prototype.dispatchEvent=function(e,i){t.TouchEvent.dispatchTouchEvent(i.target,e,i.identifier,i.stageX,i.stageY,!1,!1,!1,1==this.touchDownTarget[i.identifier])},i.prototype.onTouchBegan=function(e,i,n){if(this.touchingIdentifiers.length!=this.maxTouches){var o=t.MainContext.instance.stage.hitTest(e,i);o&&(e=this.getTouchData(n,e,i),this.touchDownTarget[n]=!0,e.target=o,e.beginTarget=o,this.dispatchEvent(t.TouchEvent.TOUCH_BEGIN,e)),this.touchingIdentifiers.push(n)}},i.prototype.onTouchMove=function(e,i,n){if(-1!=this.touchingIdentifiers.indexOf(n)&&(e!=this.lastTouchX||i!=this.lastTouchY)){this.lastTouchX=e,this.lastTouchY=i;var o=t.MainContext.instance.stage.hitTest(e,i);o&&(e=this.getTouchData(n,e,i),e.target=o,this.dispatchEvent(t.TouchEvent.TOUCH_MOVE,e))}},i.prototype.onTouchEnd=function(e,i,n){var o=this.touchingIdentifiers.indexOf(n);-1!=o&&(this.touchingIdentifiers.splice(o,1),o=t.MainContext.instance.stage.hitTest(e,i))&&(e=this.getTouchData(n,e,i),delete this.touchDownTarget[n],n=e.beginTarget,e.target=o,this.dispatchEvent(t.TouchEvent.TOUCH_END,e),n==o?this.dispatchEvent(t.TouchEvent.TOUCH_TAP,e):e.beginTarget&&(e.target=e.beginTarget,this.dispatchEvent(t.TouchEvent.TOUCH_RELEASE_OUTSIDE,e)),delete this._currentTouchTarget[e.identifier])},i}(t.HashObject);t.TouchContext=e,e.prototype.__class__="egret.TouchContext"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this)}return __extends(i,e),i.prototype.proceed=function(t){},i._getUrl=function(e){var i=e.url;return-1==i.indexOf("?")&&e.method==t.URLRequestMethod.GET&&e.data&&e.data instanceof t.URLVariables&&(i=i+"?"+e.data.toString()),i},i}(t.HashObject);t.NetContext=e,e.prototype.__class__="egret.NetContext"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(t){function e(){t.call(this),this.frameRate=60}return __extends(e,t),e.prototype.executeMainLoop=function(t,e){},e}(t.HashObject);t.DeviceContext=e,e.prototype.__class__="egret.DeviceContext"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.call=function(t,e){},t.addCallback=function(t,e){},t}();t.ExternalInterface=e,e.prototype.__class__="egret.ExternalInterface"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this.ua=navigator.userAgent.toLowerCase(),this.trans=this._getTrans()}return __extends(i,e),i.getInstance=function(){return null==i.instance&&(i.instance=new i),i.instance},Object.defineProperty(i.prototype,"isMobile",{get:function(){return t.Logger.warning("Browser.isMobile接口参数已经变更，请尽快调整用法为 egret.MainContext.deviceType == egret.MainContext.DEVICE_MOBILE "),t.MainContext.deviceType==t.MainContext.DEVICE_MOBILE},enumerable:!0,configurable:!0}),i.prototype._getHeader=function(t){if("transform"in t)return"";for(var e=["webkit","ms","Moz","O"],i=0;i<e.length;i++)if(e[i]+"Transform"in t)return e[i];return""},i.prototype._getTrans=function(){var t=document.createElement("div").style;return""==(t=this._getHeader(t))?"transform":t+"Transform"},i.prototype.$new=function(t){return this.$(document.createElement(t))},i.prototype.$=function(e){var n=document;return(e=e instanceof HTMLElement?e:n.querySelector(e))&&(e.find=e.find||this.$,e.hasClass=e.hasClass||function(t){return this.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},e.addClass=e.addClass||function(t){return this.hasClass(t)||(this.className&&(this.className+=" "),this.className+=t),this},e.removeClass=e.removeClass||function(t){return this.hasClass(t)&&(this.className=this.className.replace(t,"")),this},e.remove=e.remove||function(){},e.appendTo=e.appendTo||function(t){return t.appendChild(this),this},e.prependTo=e.prependTo||function(t){return t.childNodes[0]?t.insertBefore(this,t.childNodes[0]):t.appendChild(this),this},e.transforms=e.transforms||function(){return this.style[i.getInstance().trans]=i.getInstance().translate(this.position)+i.getInstance().rotate(this.rotation)+i.getInstance().scale(this.scale)+i.getInstance().skew(this.skew),this},e.position=e.position||{x:0,y:0},e.rotation=e.rotation||0,e.scale=e.scale||{x:1,y:1},e.skew=e.skew||{x:0,y:0},e.translates=function(e,i){return this.position.x=e,this.position.y=i-t.MainContext.instance.stage.stageHeight,this.transforms(),this},e.rotate=function(t){return this.rotation=t,this.transforms(),this},e.resize=function(t,e){return this.scale.x=t,this.scale.y=e,this.transforms(),this},e.setSkew=function(t,e){return this.skew.x=t,this.skew.y=e,this.transforms(),this}),e},i.prototype.translate=function(t){return"translate("+t.x+"px, "+t.y+"px) "},i.prototype.rotate=function(t){return"rotate("+t+"deg) "},i.prototype.scale=function(t){return"scale("+t.x+", "+t.y+") "},i.prototype.skew=function(t){return"skewX("+-t.x+"deg) skewY("+t.y+"deg)"},i}(t.HashObject);t.Browser=e,e.prototype.__class__="egret.Browser"}(egret||(egret={})),function(t){!function(t){t.getItem=function(t){return null},t.setItem=function(t,e){return!1},t.removeItem=function(t){},t.clear=function(){}}(t.localStorage||(t.localStorage={}))}(egret||(egret={})),function(t){var e=function(){function e(){}return e.parse=function(i){if(!(i=t.SAXParser.getInstance().parserXML(i))||!i.childNodes)return null;for(var n=i.childNodes.length,o=!1,s=0;s<n;s++){var r=i.childNodes[s];if(1==r.nodeType){o=!0;break}}return o?e.parseNode(r):null},e.parseNode=function(t){if(!t||1!=t.nodeType)return null;var i={};i.localName=t.localName,i.name=t.nodeName,t.namespaceURI&&(i.namespace=t.namespaceURI),t.prefix&&(i.prefix=t.prefix);for(var n=t.attributes,o=n.length,s=0;s<o;s++){var r=n[s],a=r.name;0!=a.indexOf("xmlns:")&&(i["$"+a]=r.value)}for(o=(n=t.childNodes).length,s=0;s<o;s++)(r=e.parseNode(n[s]))&&(i.children||(i.children=[]),r.parent=i,i.children.push(r));return!i.children&&(t=t.textContent.trim())&&(i.text=t),i},e.findChildren=function(t,i,n){return n?n.length=0:n=[],e.findByPath(t,i,n),n},e.findByPath=function(t,i,n){var o,s=i.indexOf(".");if(-1==s?(o=i,s=!0):(o=i.substring(0,s),i=i.substring(s+1),s=!1),t=t.children)for(var r=t.length,a=0;a<r;a++){var h=t[a];h.localName==o&&(s?n.push(h):e.findByPath(h,i,n))}},e.getAttributes=function(t,e){e?e.length=0:e=[];for(var i in t)"$"==i.charAt(0)&&e.push(i.substring(1));return e},e}();t.XML=e,e.prototype.__class__="egret.XML"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.LITTLE_ENDIAN="LITTLE_ENDIAN",t.BIG_ENDIAN="BIG_ENDIAN",t}();t.Endian=e,e.prototype.__class__="egret.Endian";var i=function(){function t(){this.length=this.position=0,this._mode="",this.maxlength=0,this._endian=e.LITTLE_ENDIAN,this.isLittleEndian=!1,this._mode="Typed array",this.maxlength=4,this.arraybytes=new ArrayBuffer(this.maxlength),this.unalignedarraybytestemp=new ArrayBuffer(16),this.endian=t.DEFAULT_ENDIAN}return Object.defineProperty(t.prototype,"endian",{get:function(){return this._endian},set:function(t){this._endian=t,this.isLittleEndian=t==e.LITTLE_ENDIAN},enumerable:!0,configurable:!0}),t.prototype.ensureWriteableSpace=function(t){this.ensureSpace(t+this.position)},t.prototype.setArrayBuffer=function(t){this.ensureSpace(t.byteLength),this.length=t.byteLength,t=new Int8Array(t),new Int8Array(this.arraybytes,0,this.length).set(t),this.position=0},Object.defineProperty(t.prototype,"bytesAvailable",{get:function(){return this.length-this.position},enumerable:!0,configurable:!0}),t.prototype.ensureSpace=function(t){if(t>this.maxlength){t=t+255&-256;var e=new ArrayBuffer(t),i=new Uint8Array(this.arraybytes,0,this.length);new Uint8Array(e,0,this.length).set(i),this.arraybytes=e,this.maxlength=t}},t.prototype.writeByte=function(t){this.ensureWriteableSpace(1),new Int8Array(this.arraybytes)[this.position++]=~~t,this.position>this.length&&(this.length=this.position)},t.prototype.readByte=function(){if(this.position>=this.length)throw"ByteArray out of bounds read. Positon="+this.position+", Length="+this.length;return new Int8Array(this.arraybytes)[this.position++]},t.prototype.readBytes=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),null==i&&(i=t.length),t.ensureWriteableSpace(e+i);var n=new Int8Array(t.arraybytes),o=new Int8Array(this.arraybytes);n.set(o.subarray(this.position,this.position+i),e),this.position+=i,i+e>t.length&&(t.length+=i+e-t.length)},t.prototype.writeUnsignedByte=function(t){this.ensureWriteableSpace(1),new Uint8Array(this.arraybytes)[this.position++]=255&~~t,this.position>this.length&&(this.length=this.position)},t.prototype.readUnsignedByte=function(){if(this.position>=this.length)throw"ByteArray out of bounds read. Positon="+this.position+", Length="+this.length;return new Uint8Array(this.arraybytes)[this.position++]},t.prototype.writeUnsignedShort=function(t){if(this.ensureWriteableSpace(2),0==(1&this.position)){var e=new Uint16Array(this.arraybytes);e[this.position>>1]=65535&~~t}else e=new Uint16Array(this.unalignedarraybytestemp,0,1),e[0]=65535&~~t,t=new Uint8Array(this.arraybytes,this.position,2),e=new Uint8Array(this.unalignedarraybytestemp,0,2),t.set(e);this.position+=2,this.position>this.length&&(this.length=this.position)},t.prototype.readUTFBytes=function(t){o="";t=this.position+t;for(var e=new DataView(this.arraybytes);this.position<t;){var i=e.getUint8(this.position++);if(128>i){if(0==i)break;o+=String.fromCharCode(i)}else if(224>i)o+=String.fromCharCode((63&i)<<6|127&e.getUint8(this.position++));else if(240>i)var n=e.getUint8(this.position++),o=o+String.fromCharCode((31&i)<<12|(127&n)<<6|127&e.getUint8(this.position++));else var n=e.getUint8(this.position++),s=e.getUint8(this.position++),o=o+String.fromCharCode((15&i)<<18|(127&n)<<12|s<<6&127|127&e.getUint8(this.position++))}return o},t.prototype.readInt=function(){var t=new DataView(this.arraybytes).getInt32(this.position,this.isLittleEndian);return this.position+=4,t},t.prototype.readShort=function(){var t=new DataView(this.arraybytes).getInt16(this.position,this.isLittleEndian);return this.position+=2,t},t.prototype.readDouble=function(){var t=new DataView(this.arraybytes).getFloat64(this.position,this.isLittleEndian);return this.position+=8,t},t.prototype.readUnsignedShort=function(){if(this.position>this.length+2)throw"ByteArray out of bounds read. Position="+this.position+", Length="+this.length;if(0==(1&this.position)){var t=new Uint16Array(this.arraybytes),e=this.position>>1;return this.position+=2,t[e]}return t=new Uint16Array(this.unalignedarraybytestemp,0,1),e=new Uint8Array(this.arraybytes,this.position,2),new Uint8Array(this.unalignedarraybytestemp,0,2).set(e),this.position+=2,t[0]},t.prototype.writeUnsignedInt=function(t){if(this.ensureWriteableSpace(4),0==(3&this.position)){var e=new Uint32Array(this.arraybytes);e[this.position>>2]=4294967295&~~t}else e=new Uint32Array(this.unalignedarraybytestemp,0,1),e[0]=4294967295&~~t,t=new Uint8Array(this.arraybytes,this.position,4),e=new Uint8Array(this.unalignedarraybytestemp,0,4),t.set(e);this.position+=4,this.position>this.length&&(this.length=this.position)},t.prototype.readUnsignedInt=function(){if(this.position>this.length+4)throw"ByteArray out of bounds read. Position="+this.position+", Length="+this.length;if(0==(3&this.position)){var t=new Uint32Array(this.arraybytes),e=this.position>>2;return this.position+=4,t[e]}return t=new Uint32Array(this.unalignedarraybytestemp,0,1),e=new Uint8Array(this.arraybytes,this.position,4),new Uint8Array(this.unalignedarraybytestemp,0,4).set(e),this.position+=4,t[0]},t.prototype.writeFloat=function(t){if(this.ensureWriteableSpace(4),0==(3&this.position)){var e=new Float32Array(this.arraybytes);e[this.position>>2]=t}else e=new Float32Array(this.unalignedarraybytestemp,0,1),e[0]=t,t=new Uint8Array(this.arraybytes,this.position,4),e=new Uint8Array(this.unalignedarraybytestemp,0,4),t.set(e);this.position+=4,this.position>this.length&&(this.length=this.position)},t.prototype.readFloat=function(){if(this.position>this.length+4)throw"ByteArray out of bounds read. Positon="+this.position+", Length="+this.length;if(0==(3&this.position)){var t=new Float32Array(this.arraybytes),e=this.position>>2;return this.position+=4,t[e]}return t=new Float32Array(this.unalignedarraybytestemp,0,1),e=new Uint8Array(this.arraybytes,this.position,4),new Uint8Array(this.unalignedarraybytestemp,0,4).set(e),this.position+=4,t[0]},t.DEFAULT_ENDIAN=e.BIG_ENDIAN,t}();t.ByteArray=i,i.prototype.__class__="egret.ByteArray"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(t,i,n){e.call(this),this._target=null,this.loop=this.ignoreGlobalPause=this._useTicks=!1,this._actions=this._steps=this.pluginData=null,this.paused=!1,this.duration=0,this._prevPos=-1,this.position=null,this._stepPosition=this._prevPosition=0,this.passive=!1,this.initialize(t,i,n)}return __extends(i,e),i.get=function(t,e,n,o){return void 0===e&&(e=null),void 0===n&&(n=null),void 0===o&&(o=!1),o&&i.removeTweens(t),new i(t,e,n)},i.removeTweens=function(t){if(t.tween_count){for(var e=i._tweens,n=e.length-1;0<=n;n--)e[n]._target==t&&(e[n].paused=!0,e.splice(n,1));t.tween_count=0}},i.pauseTweens=function(e){if(e.tween_count)for(var i=t.Tween._tweens,n=i.length-1;0<=n;n--)i[n]._target==e&&(i[n].paused=!0)},i.resumeTweens=function(e){if(e.tween_count)for(var i=t.Tween._tweens,n=i.length-1;0<=n;n--)i[n]._target==e&&(i[n].paused=!1)},i.tick=function(t,e){void 0===e&&(e=!1);for(var n=i._tweens.concat(),o=n.length-1;0<=o;o--){var s=n[o];e&&!s.ignoreGlobalPause||s.paused||s.tick(s._useTicks?1:t)}},i._register=function(e,n){var o=e._target,s=i._tweens;if(n)o&&(o.tween_count=o.tween_count?o.tween_count+1:1),s.push(e),i._inited||(t.Ticker.getInstance().register(i.tick,null),i._inited=!0);else for(o&&o.tween_count--,o=s.length;o--;)if(s[o]==e){s.splice(o,1);break}},i.removeAllTweens=function(){for(var t=i._tweens,e=0,n=t.length;e<n;e++){var o=t[e];o.paused=!0,o._target.tweenjs_count=0}t.length=0},i.prototype.initialize=function(t,e,n){this._target=t,e&&(this._useTicks=e.useTicks,this.ignoreGlobalPause=e.ignoreGlobalPause,this.loop=e.loop,e.onChange&&this.addEventListener("change",e.onChange,e.onChangeObj),e.override&&i.removeTweens(t)),this.pluginData=n||{},this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],e&&e.paused?this.paused=!0:i._register(this,!0),e&&null!=e.position&&this.setPosition(e.position,i.NONE)},i.prototype.setPosition=function(t,e){void 0===e&&(e=1),0>t&&(t=0);var i=t,n=!1;if(i>=this.duration&&(this.loop?i%=this.duration:(i=this.duration,n=!0)),i==this._prevPos)return n;var o=this._prevPos;if(this.position=this._prevPos=i,this._prevPosition=t,this._target)if(n)this._updateTargetProps(null,1);else if(0<this._steps.length){for(var s=0,r=this._steps.length;s<r&&!(this._steps[s].t>i);s++);s=this._steps[s-1],this._updateTargetProps(s,(this._stepPosition=i-s.t)/s.d)}return 0!=e&&0<this._actions.length&&(this._useTicks?this._runActions(i,i):1==e&&i<o?(o!=this.duration&&this._runActions(o,this.duration),this._runActions(0,i,!0)):this._runActions(o,i)),n&&this.setPaused(!0),this.dispatchEventWith("change"),n},i.prototype._runActions=function(t,e,i){void 0===i&&(i=!1);var n=t,o=e,s=-1,r=this._actions.length,a=1;for(t>e&&(n=e,o=t,s=r,r=a=-1);(s+=a)!=r;){var h=(e=this._actions[s]).t;(h==o||h>n&&h<o||i&&h==t)&&e.f.apply(e.o,e.p)}},i.prototype._updateTargetProps=function(t,e){var n,o,s,r;if(t||1!=e){if(this.passive=!!t.v)return;t.e&&(e=t.e(e,0,1,1)),n=t.p0,o=t.p1}else this.passive=!1,n=o=this._curQueueProps;for(var a in this._initQueueProps){null==(s=n[a])&&(n[a]=s=this._initQueueProps[a]),null==(r=o[a])&&(o[a]=r=s),s=s==r||0==e||1==e||"number"!=typeof s?1==e?r:s:s+(r-s)*e;var h=!1;if(r=i._plugins[a])for(var c=0,p=r.length;c<p;c++){var l=r[c].tween(this,a,s,n,o,e,!!t&&n==o,!t);l==i.IGNORE?h=!0:s=l}h||(this._target[a]=s)}},i.prototype.setPaused=function(t){return this.paused=t,i._register(this,!t),this},i.prototype._cloneProps=function(t){var e,i={};for(e in t)i[e]=t[e];return i},i.prototype._addStep=function(t){return 0<t.d&&(this._steps.push(t),t.t=this.duration,this.duration+=t.d),this},i.prototype._appendQueueProps=function(t){var e,n,o,s,r,a;for(a in t)if(void 0===this._initQueueProps[a]){if(n=this._target[a],e=i._plugins[a])for(o=0,s=e.length;o<s;o++)n=e[o].init(this,a,n);this._initQueueProps[a]=this._curQueueProps[a]=void 0===n?null:n}for(a in t){if(n=this._curQueueProps[a],e=i._plugins[a])for(r=r||{},o=0,s=e.length;o<s;o++)e[o].step&&e[o].step(this,a,n,t[a],r);this._curQueueProps[a]=t[a]}return r&&this._appendQueueProps(r),this._curQueueProps},i.prototype._addAction=function(t){return t.t=this.duration,this._actions.push(t),this},i.prototype._set=function(t,e){for(var i in t)e[i]=t[i]},i.prototype.wait=function(t,e){if(null==t||0>=t)return this;var i=this._cloneProps(this._curQueueProps);return this._addStep({d:t,p0:i,p1:i,v:e})},i.prototype.to=function(t,e,i){return void 0===i&&(i=void 0),(isNaN(e)||0>e)&&(e=0),this._addStep({d:e||0,p0:this._cloneProps(this._curQueueProps),e:i,p1:this._cloneProps(this._appendQueueProps(t))})},i.prototype.call=function(t,e,i){return void 0===e&&(e=void 0),void 0===i&&(i=void 0),this._addAction({f:t,p:i||[],o:e||this._target})},i.prototype.set=function(t,e){return void 0===e&&(e=null),this._addAction({f:this._set,o:this,p:[t,e||this._target]})},i.prototype.play=function(t){return t||(t=this),this.call(t.setPaused,t,[!1])},i.prototype.pause=function(t){return t||(t=this),this.call(t.setPaused,t,[!0])},i.prototype.tick=function(t){this.paused||this.setPosition(this._prevPosition+t)},i.NONE=0,i.LOOP=1,i.REVERSE=2,i._tweens=[],i.IGNORE={},i._plugins={},i._inited=!1,i}(t.EventDispatcher);t.Tween=e,e.prototype.__class__="egret.Tween"}(egret||(egret={})),function(t){var e=function(){function e(){t.Logger.fatal("Ease不能被实例化")}return e.get=function(t){return-1>t&&(t=-1),1<t&&(t=1),function(e){return 0==t?e:0>t?e*(e*-t+1+t):e*((2-e)*t+(1-t))}},e.getPowIn=function(t){return function(e){return Math.pow(e,t)}},e.getPowOut=function(t){return function(e){return 1-Math.pow(1-e,t)}},e.getPowInOut=function(t){return function(e){return 1>(e*=2)?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}},e.sineIn=function(t){return 1-Math.cos(t*Math.PI/2)},e.sineOut=function(t){return Math.sin(t*Math.PI/2)},e.sineInOut=function(t){return-.5*(Math.cos(Math.PI*t)-1)},e.getBackIn=function(t){return function(e){return e*e*((t+1)*e-t)}},e.getBackOut=function(t){return function(e){return--e*e*((t+1)*e+t)+1}},e.getBackInOut=function(t){return t*=1.525,function(e){return 1>(e*=2)?.5*e*e*((t+1)*e-t):.5*((e-=2)*e*((t+1)*e+t)+2)}},e.circIn=function(t){return-(Math.sqrt(1-t*t)-1)},e.circOut=function(t){return Math.sqrt(1- --t*t)},e.circInOut=function(t){return 1>(t*=2)?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},e.bounceIn=function(t){return 1-e.bounceOut(1-t)},e.bounceOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},e.bounceInOut=function(t){return.5>t?.5*e.bounceIn(2*t):.5*e.bounceOut(2*t-1)+.5},e.getElasticIn=function(t,e){var i=2*Math.PI;return function(n){if(0==n||1==n)return n;var o=e/i*Math.asin(1/t);return-t*Math.pow(2,10*(n-=1))*Math.sin((n-o)*i/e)}},e.getElasticOut=function(t,e){var i=2*Math.PI;return function(n){if(0==n||1==n)return n;var o=e/i*Math.asin(1/t);return t*Math.pow(2,-10*n)*Math.sin((n-o)*i/e)+1}},e.getElasticInOut=function(t,e){var i=2*Math.PI;return function(n){var o=e/i*Math.asin(1/t);return 1>(n*=2)?-.5*t*Math.pow(2,10*(n-=1))*Math.sin((n-o)*i/e):t*Math.pow(2,-10*(n-=1))*Math.sin((n-o)*i/e)*.5+1}},e.quadIn=e.getPowIn(2),e.quadOut=e.getPowOut(2),e.quadInOut=e.getPowInOut(2),e.cubicIn=e.getPowIn(3),e.cubicOut=e.getPowOut(3),e.cubicInOut=e.getPowInOut(3),e.quartIn=e.getPowIn(4),e.quartOut=e.getPowOut(4),e.quartInOut=e.getPowInOut(4),e.quintIn=e.getPowIn(5),e.quintOut=e.getPowOut(5),e.quintInOut=e.getPowInOut(5),e.backIn=e.getBackIn(1.7),e.backOut=e.getBackOut(1.7),e.backInOut=e.getBackInOut(1.7),e.elasticIn=e.getElasticIn(1,.3),e.elasticOut=e.getElasticOut(1,.3),e.elasticInOut=e.getElasticInOut(1,.3*1.5),e}();t.Ease=e,e.prototype.__class__="egret.Ease"}(egret||(egret={})),function(t){var e=function(){function t(){this.type=t.EFFECT}return t.prototype.play=function(t){void 0===t&&(t=!1);var e=this.audio;e&&(isNaN(e.duration)||(e.currentTime=0),e.loop=t,e.play())},t.prototype.pause=function(){var t=this.audio;t&&t.pause()},t.prototype.load=function(){var t=this.audio;t&&t.load()},t.prototype.addEventListener=function(t,e){this.audio&&this.audio.addEventListener(t,e,!1)},t.prototype.removeEventListener=function(t,e){this.audio&&this.audio.removeEventListener(t,e,!1)},t.prototype.setVolume=function(t){var e=this.audio;e&&(e.volume=t)},t.prototype.getVolume=function(){return this.audio?this.audio.volume:0},t.prototype.preload=function(t){this.type=t},t.prototype._setAudio=function(t){this.audio=t},t.MUSIC="music",t.EFFECT="effect",t}();t.Sound=e,e.prototype.__class__="egret.Sound"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.isNumber=function(t){return"number"==typeof t&&!isNaN(t)},t}();t.NumberUtils=e,e.prototype.__class__="egret.NumberUtils"}(egret||(egret={})),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,n=function(){},o=function(){return i.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,o.prototype=new n,o});var RES,__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i};!function(t){var e=function(t){function e(e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),t.call(this,e,i,n),this.itemsTotal=this.itemsLoaded=0}return __extends(e,t),e.dispatchResourceEvent=function(t,i,n,o,s,r){void 0===n&&(n=""),void 0===o&&(o=null),void 0===s&&(s=0),void 0===r&&(r=0);var a=egret.Event._getPropertyData(e);a.groupName=n,a.resItem=o,a.itemsLoaded=s,a.itemsTotal=r,egret.Event._dispatchByTarget(e,t,i,a)},e.ITEM_LOAD_ERROR="itemLoadError",e.CONFIG_COMPLETE="configComplete",e.GROUP_PROGRESS="groupProgress",e.GROUP_COMPLETE="groupComplete",e}(egret.Event);t.ResourceEvent=e,e.prototype.__class__="RES.ResourceEvent"}(RES||(RES={})),function(t){var e=function(){function t(t,e,i){this._loaded=!1,this.name=t,this.url=e,this.type=i}return Object.defineProperty(t.prototype,"loaded",{get:function(){return this.data?this.data.loaded:this._loaded},set:function(t){this.data&&(this.data.loaded=t),this._loaded=t},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return'[ResourceItem name="'+this.name+'" url="'+this.url+'" type="'+this.type+'"]'},t.TYPE_XML="xml",t.TYPE_IMAGE="image",t.TYPE_BIN="bin",t.TYPE_TEXT="text",t.TYPE_JSON="json",t.TYPE_SHEET="sheet",t.TYPE_FONT="font",t.TYPE_SOUND="sound",t}();t.ResourceItem=e,e.prototype.__class__="RES.ResourceItem"}(RES||(RES={})),function(t){var e=function(){function e(){this.keyMap={},this.groupDic={},t.configInstance=this}return e.prototype.getGroupByName=function(t){var e=[];if(!this.groupDic[t])return e;for(var i=(t=this.groupDic[t]).length,n=0;n<i;n++)e.push(this.parseResourceItem(t[n]));return e},e.prototype.getRawGroupByName=function(t){return this.groupDic[t]?this.groupDic[t]:[]},e.prototype.createGroup=function(t,e,i){if(void 0===i&&(i=!1),!i&&this.groupDic[t]||!e||0==e.length)return!1;i=this.groupDic;for(var n=[],o=e.length,s=0;s<o;s++){var r=i[a=e[s]];if(r)for(var a=r.length,h=0;h<a;h++){var c=r[h];-1==n.indexOf(c)&&n.push(c)}else(c=this.keyMap[a])&&-1==n.indexOf(c)&&n.push(c)}return 0!=n.length&&(this.groupDic[t]=n,!0)},e.prototype.parseConfig=function(t,e){if(t){var i=t.resources;if(i)for(var n=i.length,o=0;o<n;o++){var s=i[o];(r=s.url)&&-1==r.indexOf("://")&&(s.url=e+r),this.addItemToKeyMap(s)}if(i=t.groups)for(n=i.length,o=0;o<n;o++){for(var r=i[o],a=[],h=r.keys.split(","),c=h.length,p=0;p<c;p++)s=h[p].trim(),(s=this.keyMap[s])&&-1==a.indexOf(s)&&a.push(s);this.groupDic[r.name]=a}}},e.prototype.addSubkey=function(t,e){var i=this.keyMap[e];i&&!this.keyMap[t]&&(this.keyMap[t]=i)},e.prototype.addItemToKeyMap=function(t){if(this.keyMap[t.name]||(this.keyMap[t.name]=t),t.hasOwnProperty("subkeys")){var e=t.subkeys.split(",");t.subkeys=e;for(var i=e.length,n=0;n<i;n++){var o=e[n];null==this.keyMap[o]&&(this.keyMap[o]=t)}}},e.prototype.getName=function(t){return(t=this.keyMap[t])?t.name:""},e.prototype.getType=function(t){return(t=this.keyMap[t])?t.type:""},e.prototype.getRawResourceItem=function(t){return this.keyMap[t]},e.prototype.getResourceItem=function(t){return(t=this.keyMap[t])?this.parseResourceItem(t):null},e.prototype.parseResourceItem=function(e){var i=new t.ResourceItem(e.name,e.url,e.type);return i.data=e,i},e}();t.ResourceConfig=e,e.prototype.__class__="RES.ResourceConfig"}(RES||(RES={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this.thread=2,this.loadingCount=0,this.groupTotalDic={},this.numLoadedDic={},this.itemListDic={},this.priorityQueue={},this.lazyLoadList=[],this.analyzerDic={},this.queueIndex=0}return __extends(i,e),i.prototype.isGroupInLoading=function(t){return void 0!==this.itemListDic[t]},i.prototype.loadGroup=function(e,i,n){if(void 0===n&&(n=0),!this.itemListDic[i]&&i)if(e&&0!=e.length){this.priorityQueue[n]?this.priorityQueue[n].push(i):this.priorityQueue[n]=[i],this.itemListDic[i]=e,n=e.length;for(var o=0;o<n;o++)e[o].groupName=i;this.groupTotalDic[i]=e.length,this.numLoadedDic[i]=0,this.next()}else egret.Logger.warning('RES加载了不存在或空的资源组："'+i+'"'),e=new t.ResourceEvent(t.ResourceEvent.GROUP_COMPLETE),e.groupName=i,this.dispatchEvent(e)},i.prototype.loadItem=function(t){this.lazyLoadList.push(t),t.groupName="",this.next()},i.prototype.next=function(){for(;this.loadingCount<this.thread;){var e=this.getOneResourceItem();if(!e)break;if(this.loadingCount++,e.loaded)this.onItemComplete(e);else{var i=this.analyzerDic[e.type];i||(i=this.analyzerDic[e.type]=egret.Injector.getInstance(t.AnalyzerBase,e.type)),i.loadFile(e,this.onItemComplete,this)}}},i.prototype.getOneResourceItem=function(){var t,e=Number.NEGATIVE_INFINITY;for(t in this.priorityQueue)e=Math.max(e,t);if(!(e=this.priorityQueue[e])||0==e.length)return 0==this.lazyLoadList.length?null:this.lazyLoadList.pop();t=e.length;for(var i,n=0;n<t&&(this.queueIndex>=t&&(this.queueIndex=0),!(0<(i=this.itemListDic[e[this.queueIndex]]).length));n++)this.queueIndex++;return 0==i.length?null:i.shift()},i.prototype.onItemComplete=function(e){this.loadingCount--;var i=e.groupName;if(e.loaded||t.ResourceEvent.dispatchResourceEvent(this.resInstance,t.ResourceEvent.ITEM_LOAD_ERROR,i,e),i){this.numLoadedDic[i]++;var n=this.numLoadedDic[i],o=this.groupTotalDic[i];t.ResourceEvent.dispatchResourceEvent(this.resInstance,t.ResourceEvent.GROUP_PROGRESS,i,e,n,o),n==o&&(this.removeGroupName(i),delete this.groupTotalDic[i],delete this.numLoadedDic[i],delete this.itemListDic[i],t.ResourceEvent.dispatchResourceEvent(this,t.ResourceEvent.GROUP_COMPLETE,i))}else this.callBack.call(this.resInstance,e);this.next()},i.prototype.removeGroupName=function(t){for(var e in this.priorityQueue){for(var i=this.priorityQueue[e],n=i.length,o=0,s=!1,n=i.length,r=0;r<n;r++){if(i[r]==t){i.splice(o,1),s=!0;break}o++}if(s){0==i.length&&delete this.priorityQueue[e];break}}},i}(egret.EventDispatcher);t.ResourceLoader=e,e.prototype.__class__="RES.ResourceLoader"}(RES||(RES={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this.resourceConfig=t.configInstance}return __extends(i,e),i.prototype.addSubkey=function(t,e){this.resourceConfig.addSubkey(t,e)},i.prototype.loadFile=function(t,e,i){},i.prototype.getRes=function(t){},i.prototype.destroyRes=function(t){return!1},i.getStringPrefix=function(t){if(!t)return"";var e=t.indexOf(".");return-1!=e?t.substring(0,e):""},i.getStringTail=function(t){if(!t)return"";var e=t.indexOf(".");return-1!=e?t.substring(e+1):""},i}(egret.HashObject);t.AnalyzerBase=e,e.prototype.__class__="RES.AnalyzerBase"}(RES||(RES={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(t){function e(){t.call(this),this.fileDic={},this.resItemDic=[],this._dataFormat=egret.URLLoaderDataFormat.BINARY,this.recycler=new egret.Recycler}return __extends(e,t),e.prototype.loadFile=function(t,e,i){if(this.fileDic[t.name])e.call(i,t);else{var n=this.getLoader();this.resItemDic[n.hashCode]={item:t,func:e,thisObject:i},n.load(new egret.URLRequest(t.url))}},e.prototype.getLoader=function(){var t=this.recycler.pop();return t||((t=new egret.URLLoader).addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),t.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this)),t.dataFormat=this._dataFormat,t},e.prototype.onLoadFinish=function(t){var e=t.target,i=this.resItemDic[e.hashCode];delete this.resItemDic[e.hashCode],this.recycler.push(e);var n=i.item,o=i.func;n.loaded=t.type==egret.Event.COMPLETE,n.loaded&&this.analyzeData(n,e.data),o.call(i.thisObject,n)},e.prototype.analyzeData=function(t,e){var i=t.name;!this.fileDic[i]&&e&&(this.fileDic[i]=e)},e.prototype.getRes=function(t){return this.fileDic[t]},e.prototype.hasRes=function(t){return null!=this.getRes(t)},e.prototype.destroyRes=function(t){return!!this.fileDic[t]&&(delete this.fileDic[t],!0)},e}(t.AnalyzerBase);t.BinAnalyzer=e,e.prototype.__class__="RES.BinAnalyzer"}(RES||(RES={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(t){function e(){t.call(this),this._dataFormat=egret.URLLoaderDataFormat.TEXTURE}return __extends(e,t),e.prototype.analyzeData=function(t,e){var i=t.name;!this.fileDic[i]&&e&&(this.fileDic[i]=e,(i=t.data)&&i.scale9grid&&(i=i.scale9grid.split(","),e.scale9Grid=new egret.Rectangle(parseInt(i[0]),parseInt(i[1]),parseInt(i[2]),parseInt(i[3]))))},e}(t.BinAnalyzer);t.ImageAnalyzer=e,e.prototype.__class__="RES.ImageAnalyzer"}(RES||(RES={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(t){function e(){t.call(this),this._dataFormat=egret.URLLoaderDataFormat.TEXT}return __extends(e,t),e.prototype.analyzeData=function(t,e){var i=t.name;if(!this.fileDic[i]&&e)try{this.fileDic[i]=JSON.parse(e)}catch(i){egret.Logger.warning("JSON文件格式不正确: "+t.url+"\ndata:"+e)}},e}(t.BinAnalyzer);t.JsonAnalyzer=e,e.prototype.__class__="RES.JsonAnalyzer"}(RES||(RES={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(t){function e(){t.call(this),this._dataFormat=egret.URLLoaderDataFormat.TEXT}return __extends(e,t),e}(t.BinAnalyzer);t.TextAnalyzer=e,e.prototype.__class__="RES.TextAnalyzer"}(RES||(RES={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this.sheetMap={},this.textureMap={},this._dataFormat=egret.URLLoaderDataFormat.TEXT}return __extends(i,e),i.prototype.getRes=function(e){var i=this.fileDic[e];return i||(i=this.textureMap[e]),!i&&(i=t.AnalyzerBase.getStringPrefix(e),i=this.fileDic[i])&&(e=t.AnalyzerBase.getStringTail(e),i=i.getTexture(e)),i},i.prototype.onLoadFinish=function(t){var e=t.target,i=this.resItemDic[e.hashCode];delete this.resItemDic[e.hashCode],this.recycler.push(e);var n=i.item,o=i.func;n.loaded=t.type==egret.Event.COMPLETE,n.loaded&&this.analyzeData(n,e.data),"string"==typeof e.data?(this._dataFormat=egret.URLLoaderDataFormat.TEXTURE,this.loadFile(n,o,i.thisObject),this._dataFormat=egret.URLLoaderDataFormat.TEXT):o.call(i.thisObject,n)},i.prototype.analyzeData=function(t,e){var i=t.name;if(!this.fileDic[i]&&e){var n;if("string"==typeof e){try{n=JSON.parse(e)}catch(e){egret.Logger.warning("JSON文件格式不正确: "+t.url)}n&&(this.sheetMap[i]=n,t.loaded=!1,t.url=this.getRelativePath(t.url,n.file))}else n=this.sheetMap[i],delete this.sheetMap[i],e&&(n=this.parseSpriteSheet(e,n,t.data&&t.data.subkeys?"":i),this.fileDic[i]=n)}},i.prototype.getRelativePath=function(t,e){var i=(t=t.split("\\").join("/")).lastIndexOf("/");return t=-1!=i?t.substring(0,i+1)+e:e},i.prototype.parseSpriteSheet=function(t,e,i){if(!(e=e.frames))return null;var n,o=new egret.SpriteSheet(t),s=this.textureMap;for(n in e){var r=e[n];t=o.createTexture(n,r.x,r.y,r.w,r.h,r.offX,r.offY,r.sourceW,r.sourceH),r.scale9grid&&(r=r.scale9grid.split(","),t.scale9Grid=new egret.Rectangle(parseInt(r[0]),parseInt(r[1]),parseInt(r[2]),parseInt(r[3]))),null==s[n]&&(s[n]=t,i&&this.addSubkey(n,i))}return o},i}(t.BinAnalyzer);t.SheetAnalyzer=e,e.prototype.__class__="RES.SheetAnalyzer"}(RES||(RES={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype.analyzeData=function(t,e){var i=t.name;if(!this.fileDic[i]&&e){var n;"string"==typeof e?(n=e,this.sheetMap[i]=n,t.loaded=!1,t.url=this.getTexturePath(t.url,n)):(n=this.sheetMap[i],delete this.sheetMap[i],e&&(n=new egret.BitmapTextSpriteSheet(e,n),this.fileDic[i]=n))}},e.prototype.getTexturePath=function(t,e){var i="",n=e.split("\n")[2],o=n.indexOf('file="');return-1!=o&&(n=n.substring(o+6),o=n.indexOf('"'),i=n.substring(0,o)),t=t.split("\\").join("/"),o=t.lastIndexOf("/"),t=-1!=o?t.substring(0,o+1)+i:i},e}(t.SheetAnalyzer);t.FontAnalyzer=e,e.prototype.__class__="RES.FontAnalyzer"}(RES||(RES={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(t){function e(){t.call(this),this._dataFormat=egret.URLLoaderDataFormat.SOUND}return __extends(e,t),e.prototype.analyzeData=function(t,e){var i=t.name;!this.fileDic[i]&&e&&(this.fileDic[i]=e,(i=t.data)&&i.soundType?e.preload(i.soundType):e.preload(egret.Sound.EFFECT))},e}(t.BinAnalyzer);t.SoundAnalyzer=e,e.prototype.__class__="RES.SoundAnalyzer"}(RES||(RES={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(t){function e(){t.call(this),this._dataFormat=egret.URLLoaderDataFormat.TEXT}return __extends(e,t),e.prototype.analyzeData=function(t,e){var i=t.name;if(!this.fileDic[i]&&e)try{var n=egret.XML.parse(e);this.fileDic[i]=n}catch(t){}},e}(t.BinAnalyzer);t.XMLAnalyzer=e,e.prototype.__class__="RES.XMLAnalyzer"}(RES||(RES={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){t.loadConfig=function(t,e,n){void 0===e&&(e=""),void 0===n&&(n="json"),i.loadConfig(t,e,n)},t.loadGroup=function(t,e){void 0===e&&(e=0),i.loadGroup(t,e)},t.isGroupLoaded=function(t){return i.isGroupLoaded(t)},t.getGroupByName=function(t){return i.getGroupByName(t)},t.createGroup=function(t,e,n){return void 0===n&&(n=!1),i.createGroup(t,e,n)},t.hasRes=function(t){return i.hasRes(t)},t.getRes=function(t){return i.getRes(t)},t.getResAsync=function(t,e,n){i.getResAsync(t,e,n)},t.getResByUrl=function(t,e,n,o){void 0===o&&(o=""),i.getResByUrl(t,e,n,o)},t.destroyRes=function(t){return i.destroyRes(t)},t.setMaxLoadingThread=function(t){i.setMaxLoadingThread(t)},t.addEventListener=function(t,e,n,o,s){void 0===o&&(o=!1),void 0===s&&(s=0),i.addEventListener(t,e,n,o,s)},t.removeEventListener=function(t,e,n,o){void 0===o&&(o=!1),i.removeEventListener(t,e,n,o)};var e=function(e){function i(){e.call(this),this.analyzerDic={},this.configItemList=[],this.configComplete=this.callLaterFlag=!1,this.loadedGroups=[],this.groupNameList=[],this.asyncDic={},this.init()}return __extends(i,e),i.prototype.getAnalyzerByType=function(e){var i=this.analyzerDic[e];return i||(i=this.analyzerDic[e]=egret.Injector.getInstance(t.AnalyzerBase,e)),i},i.prototype.init=function(){egret.Injector.hasMapRule(t.AnalyzerBase,t.ResourceItem.TYPE_BIN)||egret.Injector.mapClass(t.AnalyzerBase,t.BinAnalyzer,t.ResourceItem.TYPE_BIN),egret.Injector.hasMapRule(t.AnalyzerBase,t.ResourceItem.TYPE_IMAGE)||egret.Injector.mapClass(t.AnalyzerBase,t.ImageAnalyzer,t.ResourceItem.TYPE_IMAGE),egret.Injector.hasMapRule(t.AnalyzerBase,t.ResourceItem.TYPE_TEXT)||egret.Injector.mapClass(t.AnalyzerBase,t.TextAnalyzer,t.ResourceItem.TYPE_TEXT),egret.Injector.hasMapRule(t.AnalyzerBase,t.ResourceItem.TYPE_JSON)||egret.Injector.mapClass(t.AnalyzerBase,t.JsonAnalyzer,t.ResourceItem.TYPE_JSON),egret.Injector.hasMapRule(t.AnalyzerBase,t.ResourceItem.TYPE_SHEET)||egret.Injector.mapClass(t.AnalyzerBase,t.SheetAnalyzer,t.ResourceItem.TYPE_SHEET),egret.Injector.hasMapRule(t.AnalyzerBase,t.ResourceItem.TYPE_FONT)||egret.Injector.mapClass(t.AnalyzerBase,t.FontAnalyzer,t.ResourceItem.TYPE_FONT),egret.Injector.hasMapRule(t.AnalyzerBase,t.ResourceItem.TYPE_SOUND)||egret.Injector.mapClass(t.AnalyzerBase,t.SoundAnalyzer,t.ResourceItem.TYPE_SOUND),egret.Injector.hasMapRule(t.AnalyzerBase,t.ResourceItem.TYPE_XML)||egret.Injector.mapClass(t.AnalyzerBase,t.XMLAnalyzer,t.ResourceItem.TYPE_XML),this.resConfig=new t.ResourceConfig,this.resLoader=new t.ResourceLoader,this.resLoader.callBack=this.onResourceItemComp,this.resLoader.resInstance=this,this.resLoader.addEventListener(t.ResourceEvent.GROUP_COMPLETE,this.onGroupComp,this)},i.prototype.loadConfig=function(t,e,i){void 0===i&&(i="json"),this.configItemList.push({url:t,resourceRoot:e,type:i}),this.callLaterFlag||(egret.callLater(this.startLoadConfig,this),this.callLaterFlag=!0)},i.prototype.startLoadConfig=function(){this.callLaterFlag=!1;var e=this.configItemList;this.configItemList=[],this.loadingConfigList=e;for(var n=e.length,o=[],s=0;s<n;s++){var r=e[s],r=new t.ResourceItem(r.url,r.url,r.type);o.push(r)}this.resLoader.loadGroup(o,i.GROUP_CONFIG,Number.MAX_VALUE)},i.prototype.isGroupLoaded=function(t){return-1!=this.loadedGroups.indexOf(t)},i.prototype.getGroupByName=function(t){return this.resConfig.getGroupByName(t)},i.prototype.loadGroup=function(t,e){if(void 0===e&&(e=0),-1==this.loadedGroups.indexOf(t)&&!this.resLoader.isGroupInLoading(t))if(this.configComplete){var i=this.resConfig.getGroupByName(t);this.resLoader.loadGroup(i,t,e)}else this.groupNameList.push({name:t,priority:e})},i.prototype.createGroup=function(t,e,i){if(void 0===i&&(i=!1),i){var n=this.loadedGroups.indexOf(t);-1!=n&&this.loadedGroups.splice(n,1)}return this.resConfig.createGroup(t,e,i)},i.prototype.onGroupComp=function(e){if(e.groupName==i.GROUP_CONFIG){e=this.loadingConfigList.length;for(var n=0;n<e;n++){var o=this.loadingConfigList[n],s=this.getAnalyzerByType(o.type),r=s.getRes(o.url);s.destroyRes(o.url),this.resConfig.parseConfig(r,o.resourceRoot)}for(this.configComplete=!0,this.loadingConfigList=null,t.ResourceEvent.dispatchResourceEvent(this,t.ResourceEvent.CONFIG_COMPLETE),e=(o=this.groupNameList).length,n=0;n<e;n++)s=o[n],this.loadGroup(s.name,s.priority);this.groupNameList=[]}else this.loadedGroups.push(e.groupName),this.dispatchEvent(e)},i.prototype.hasRes=function(e){var i=this.resConfig.getType(e);return""!=i||(e=t.AnalyzerBase.getStringPrefix(e),""!=(i=this.resConfig.getType(e)))},i.prototype.getRes=function(e){var i=this.resConfig.getType(e);return""==i&&(i=t.AnalyzerBase.getStringPrefix(e),""==(i=this.resConfig.getType(i)))?null:this.getAnalyzerByType(i).getRes(e)},i.prototype.getResAsync=function(e,i,n){var o=this.resConfig.getType(e),s=this.resConfig.getName(e);""!=o||(s=t.AnalyzerBase.getStringPrefix(e),""!=(o=this.resConfig.getType(s)))?(o=this.getAnalyzerByType(o).getRes(e))?i.call(n,o):(e={key:e,compFunc:i,thisObject:n},this.asyncDic[s]?this.asyncDic[s].push(e):(this.asyncDic[s]=[e],s=this.resConfig.getResourceItem(s),this.resLoader.loadItem(s))):i.call(n,null)},i.prototype.getResByUrl=function(e,i,n,o){if(void 0===o&&(o=""),e){o||(o=this.getTypeByUrl(e));var s=this.getAnalyzerByType(o).getRes(e);s?i.call(n,s):(i={key:e,compFunc:i,thisObject:n},this.asyncDic[e]?this.asyncDic[e].push(i):(this.asyncDic[e]=[i],e=new t.ResourceItem(e,e,o),this.resLoader.loadItem(e)))}else i.call(n,null)},i.prototype.getTypeByUrl=function(e){switch((e=e.substr(e.lastIndexOf(".")+1))&&(e=e.toLowerCase()),e){case t.ResourceItem.TYPE_XML:case t.ResourceItem.TYPE_JSON:case t.ResourceItem.TYPE_SHEET:break;case"png":case"jpg":case"gif":e=t.ResourceItem.TYPE_IMAGE;break;case"fnt":e=t.ResourceItem.TYPE_FONT;break;case"txt":e=t.ResourceItem.TYPE_TEXT;break;case"mp3":case"ogg":case"mpeg":case"wav":case"m4a":case"mp4":case"aiff":case"wma":case"mid":e=t.ResourceItem.TYPE_SOUND;break;default:e=t.ResourceItem.TYPE_BIN}return e},i.prototype.onResourceItemComp=function(t){var e=this.asyncDic[t.name];delete this.asyncDic[t.name],t=this.getAnalyzerByType(t.type);for(var i=e.length,n=0;n<i;n++){var o=e[n],s=t.getRes(o.key);o.compFunc.call(o.thisObject,s,o.key)}},i.prototype.destroyRes=function(t){var e=this.resConfig.getRawGroupByName(t);if(e){var i=this.loadedGroups.indexOf(t);-1!=i&&this.loadedGroups.splice(i,1),t=e.length;for(var n=0;n<t;n++){(i=e[n]).loaded=!1;var o=this.getAnalyzerByType(i.type);o.destroyRes(i.name)}return!0}return""!=(e=this.resConfig.getType(t))&&(i=this.resConfig.getRawResourceItem(t),i.loaded=!1,(o=this.getAnalyzerByType(e)).destroyRes(t))},i.prototype.setMaxLoadingThread=function(t){1>t&&(t=1),this.resLoader.thread=t},i.GROUP_CONFIG="RES__CONFIG",i}(egret.EventDispatcher);e.prototype.__class__="RES.Resource";var i=new e}(RES||(RES={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(t){void 0===t&&(t=60),e.call(this),this.frameRate=t,this._time=0,this._isActivate=!0,60==t&&(i.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame,i.cancelAnimationFrame=window.cancelAnimationFrame||window.msCancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.oCancelAnimationFrame||window.cancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame),i.requestAnimationFrame||(i.requestAnimationFrame=function(e){return window.setTimeout(e,1e3/t)}),i.cancelAnimationFrame||(i.cancelAnimationFrame=function(t){return window.clearTimeout(t)}),i.instance=this,this.registerListener()}return __extends(i,e),i.prototype.enterFrame=function(){var e=i.instance,n=i._thisObject,o=i._callback,s=t.getTimer(),r=s-e._time;e._requestAnimationId=i.requestAnimationFrame.call(window,i.prototype.enterFrame),o.call(n,r),e._time=s},i.prototype.executeMainLoop=function(t,e){i._callback=t,i._thisObject=e,this.enterFrame()},i.prototype.reset=function(){var e=i.instance;e._requestAnimationId&&(e._time=t.getTimer(),i.cancelAnimationFrame.call(window,e._requestAnimationId),e.enterFrame())},i.prototype.registerListener=function(){var e=this,n=function(){e._isActivate&&(e._isActivate=!1,t.MainContext.instance.stage.dispatchEvent(new t.Event(t.Event.DEACTIVATE)))},o=function(){e._isActivate||(e._isActivate=!0,i.instance.reset(),t.MainContext.instance.stage.dispatchEvent(new t.Event(t.Event.ACTIVATE)))};window.addEventListener("focus",o,!1),window.addEventListener("blur",n,!1);var s,r;void 0!==document.hidden?(s="hidden",r="visibilitychange"):void 0!==document.mozHidden?(s="mozHidden",r="mozvisibilitychange"):void 0!==document.msHidden?(s="msHidden",r="msvisibilitychange"):void 0!==document.webkitHidden?(s="webkitHidden",r="webkitvisibilitychange"):void 0!==document.oHidden&&(s="oHidden",r="ovisibilitychange"),"onpageshow"in window&&"onpagehide"in window&&(window.addEventListener("pageshow",o,!1),window.addEventListener("pagehide",n,!1)),s&&r&&document.addEventListener(r,function(){document[s]?n():o()},!1)},i}(t.DeviceContext);t.HTML5DeviceContext=e,e.prototype.__class__="egret.HTML5DeviceContext"}(egret||(egret={}));var egret_html5_localStorage;!function(t){t.getItem=function(t){return window.localStorage.getItem(t)},t.setItem=function(t,e){try{return window.localStorage.setItem(t,e),!0}catch(i){return console.log("egret_html5_localStorage.setItem保存失败,key="+t+"&value="+e),!1}},t.removeItem=function(t){window.localStorage.removeItem(t)},t.clear=function(){window.localStorage.clear()},t.init=function(){for(var e in t)egret.localStorage[e]=t[e]}}(egret_html5_localStorage||(egret_html5_localStorage={})),egret_html5_localStorage.init(),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(i){e.call(this),this.globalAlpha=1,this.canvas=i||this.createCanvas(),this.canvasContext=this.canvas.getContext("2d"),this._cacheCanvas=document.createElement("canvas"),this._cacheCanvas.width=this.canvas.width,this._cacheCanvas.height=this.canvas.height,this._cacheCanvasContext=this._cacheCanvas.getContext("2d"),this._cacheCanvasContext.imageSmoothingEnabled=t.RendererContext.imageSmoothingEnabled,this._cacheCanvasContext.webkitImageSmoothingEnabled=t.RendererContext.imageSmoothingEnabled,this._cacheCanvasContext.mozImageSmoothingEnabled=t.RendererContext.imageSmoothingEnabled,this._cacheCanvasContext.msImageSmoothingEnabled=t.RendererContext.imageSmoothingEnabled,this.onResize();var n=this.canvasContext.setTransform,o=this;this._cacheCanvasContext.setTransform=function(t,e,i,s,r,a){o._matrixA=t,o._matrixB=e,o._matrixC=i,o._matrixD=s,o._matrixTx=r,o._matrixTy=a,n.call(o._cacheCanvasContext,t,e,i,s,r,a)},this._matrixA=1,this._matrixC=this._matrixB=0,this._matrixD=1,this._transformTy=this._transformTx=this._matrixTy=this._matrixTx=0,this.initBlendMode()}return __extends(i,e),i.prototype.createCanvas=function(){e=t.Browser.getInstance().$("#egretCanvas");if(!e){var e,i=document.getElementById(t.StageDelegate.canvas_div_name);(e=t.Browser.getInstance().$new("canvas")).id="egretCanvas",i.appendChild(e)}return t.MainContext.instance.stage.addEventListener(t.Event.RESIZE,this.onResize,this),e},i.prototype.onResize=function(){if(this.canvas){var e=document.getElementById(t.StageDelegate.canvas_div_name);this.canvas.width=t.MainContext.instance.stage.stageWidth,this.canvas.height=t.MainContext.instance.stage.stageHeight,this.canvas.style.width=e.style.width,this.canvas.style.height=e.style.height,this._cacheCanvas.width=this.canvas.width,this._cacheCanvas.height=this.canvas.height}},i.prototype.clearScreen=function(){for(var e=t.RenderFilter.getInstance().getDrawAreaList(),i=0,n=e.length;i<n;i++){var o=e[i];this.clearRect(o.x,o.y,o.width,o.height)}e=t.MainContext.instance.stage,this._cacheCanvasContext.clearRect(0,0,e.stageWidth,e.stageHeight),this.renderCost=0},i.prototype.clearRect=function(t,e,i,n){this.canvasContext.clearRect(t,e,i,n)},i.prototype.drawImage=function(i,n,o,s,r,a,h,c,p,l){void 0===l&&(l=void 0);var u=t.MainContext.instance.rendererContext.texture_scale_factor;n/=u,o/=u,s/=u,r/=u,u=i._bitmapData,a+=this._transformTx,h+=this._transformTy;var d=t.getTimer();void 0===l?this._cacheCanvasContext.drawImage(u,n,o,s,r,a,h,c,p):this.drawRepeatImage(i,n,o,s,r,a,h,c,p,l),e.prototype.drawImage.call(this,i,n,o,s,r,a,h,c,p,l),this.renderCost+=t.getTimer()-d},i.prototype.drawRepeatImage=function(t,e,i,n,o,s,r,a,h,c){if(void 0===t.pattern){var p=t._bitmapData,l=p;p.width==n&&p.height==o||(l=document.createElement("canvas"),l.width=n,l.height=o,l.getContext("2d").drawImage(p,e,i,n,o,0,0,n,o)),e=this._cacheCanvasContext.createPattern(l,c),t.pattern=e}this._cacheCanvasContext.fillStyle=t.pattern,this._cacheCanvasContext.translate(s,r),this._cacheCanvasContext.fillRect(0,0,a,h),this._cacheCanvasContext.translate(-s,-r)},i.prototype.setTransform=function(t){1==t.a&&0==t.b&&0==t.c&&1==t.d&&1==this._matrixA&&0==this._matrixB&&0==this._matrixC&&1==this._matrixD?(this._transformTx=t.tx-this._matrixTx,this._transformTy=t.ty-this._matrixTy):(this._transformTx=this._transformTy=0,this._matrixA==t.a&&this._matrixB==t.b&&this._matrixC==t.c&&this._matrixD==t.d&&this._matrixTx==t.tx&&this._matrixTy==t.ty||this._cacheCanvasContext.setTransform(t.a,t.b,t.c,t.d,t.tx,t.ty))},i.prototype.setAlpha=function(e,i){e!=this.globalAlpha&&(this._cacheCanvasContext.globalAlpha=this.globalAlpha=e),i?(this.blendValue=this.blendModes[i],this._cacheCanvasContext.globalCompositeOperation=this.blendValue):this.blendValue!=t.BlendMode.NORMAL&&(this.blendValue=this.blendModes[t.BlendMode.NORMAL],this._cacheCanvasContext.globalCompositeOperation=this.blendValue)},i.prototype.initBlendMode=function(){this.blendModes={},this.blendModes[t.BlendMode.NORMAL]="source-over",this.blendModes[t.BlendMode.ADD]="lighter"},i.prototype.setupFont=function(t){var e=this._cacheCanvasContext,i=(i=(i=t._italic?"italic ":"normal ")+(t._bold?"bold ":"normal "))+(t._size+"px ")+t._fontFamily;e.font=i,e.textAlign="left",e.textBaseline="middle"},i.prototype.measureText=function(t){return this._cacheCanvasContext.measureText(t).width},i.prototype.drawText=function(i,n,o,s,r,a){var h;h=a.textColor?t.toColorString(parseInt(a.textColor)):i._textColorString;var c;c=a.strokeColor?t.toColorString(a.strokeColor):i._strokeColorString;var p;p=a.outline?a.outline:i._stroke;var l=this._cacheCanvasContext;l.fillStyle=h,l.strokeStyle=c,p&&(l.lineWidth=2*p,l.strokeText(n,o+this._transformTx,s+this._transformTy,r||65535)),l.fillText(n,o+this._transformTx,s+this._transformTy,r||65535),e.prototype.drawText.call(this,i,n,o,s,r,a)},i.prototype.strokeRect=function(t,e,i,n,o){this._cacheCanvasContext.strokeStyle=o,this._cacheCanvasContext.strokeRect(t,e,i,n)},i.prototype.pushMask=function(t){this._cacheCanvasContext.save(),this._cacheCanvasContext.beginPath(),this._cacheCanvasContext.rect(t.x+this._transformTx,t.y+this._transformTy,t.width,t.height),this._cacheCanvasContext.clip(),this._cacheCanvasContext.closePath()},i.prototype.popMask=function(){this._cacheCanvasContext.restore(),this._cacheCanvasContext.setTransform(1,0,0,1,0,0)},i.prototype.onRenderStart=function(){this._cacheCanvasContext.save()},i.prototype.onRenderFinish=function(){this._cacheCanvasContext.restore(),this._cacheCanvasContext.setTransform(1,0,0,1,0,0);for(var e=t.RenderFilter.getInstance().getDrawAreaList(),i=0,n=e.length;i<n;i++){var o=e[i];this.canvasContext.drawImage(this._cacheCanvas,o.x,o.y,o.width,o.height,o.x,o.y,o.width,o.height)}},i}(t.RendererContext);t.HTML5CanvasRenderer=e,e.prototype.__class__="egret.HTML5CanvasRenderer"}(egret||(egret={}));var egret_h5_graphics;!function(t){t.beginFill=function(t,i){void 0===i&&(i=1);var n="rgba("+(t>>16)+","+((65280&t)>>8)+","+(255&t)+","+i+")";this.fillStyleColor=n,this.commandQueue.push(new e(this._setStyle,this,[n]))},t.drawRect=function(t,i,n,o){this.commandQueue.push(new e(function(t,e,i,n){var o=this.renderContext;this.canvasContext.beginPath(),this.canvasContext.rect(o._transformTx+t,o._transformTy+e,i,n),this.canvasContext.closePath()},this,[t,i,n,o])),this._fill()},t.drawCircle=function(t,i,n){this.commandQueue.push(new e(function(t,e,i){var n=this.renderContext;this.canvasContext.beginPath(),this.canvasContext.arc(n._transformTx+t,n._transformTy+e,i,0,2*Math.PI),this.canvasContext.closePath()},this,[t,i,n])),this._fill()},t.drawRoundRect=function(t,i,n,o,s,r){this.commandQueue.push(new e(function(t,e,i,n,o,s){var r=this.renderContext;o/=2,i=(t=r._transformTx+t)+i,r=(n=(e=r._transformTy+e)+n)-(s=s?s/2:o),this.canvasContext.beginPath(),this.canvasContext.moveTo(i,r),this.canvasContext.quadraticCurveTo(i,n,i-o,n),this.canvasContext.lineTo(t+o,n),this.canvasContext.quadraticCurveTo(t,n,t,n-s),this.canvasContext.lineTo(t,e+s),this.canvasContext.quadraticCurveTo(t,e,t+o,e),this.canvasContext.lineTo(i-o,e),this.canvasContext.quadraticCurveTo(i,e,i,e+s),this.canvasContext.lineTo(i,r),this.canvasContext.closePath()},this,[t,i,n,o,s,r])),this._fill()},t.drawEllipse=function(t,i,n,o){this.commandQueue.push(new e(function(t,e,i,n){o=this.renderContext;this.canvasContext.save(),t=o._transformTx+t,e=o._transformTy+e;var o,s=i/(o=i>n?i:n);n/=o,this.canvasContext.scale(s,n),this.canvasContext.beginPath(),this.canvasContext.moveTo((t+i)/s,e/n),this.canvasContext.arc(t/s,e/n,o,0,2*Math.PI),this.canvasContext.closePath(),this.canvasContext.restore(),this.canvasContext.stroke()},this,[t,i,n,o])),this._fill()},t.lineStyle=function(t,i,n,o,s,r,a,h){void 0===t&&(t=NaN),void 0===i&&(i=0),void 0===n&&(n=1),void 0===o&&(o=!1),void 0===s&&(s="normal"),void 0===r&&(r=null),void 0===a&&(a=null),void 0===h&&(h=3),this.strokeStyleColor&&(this.createEndLineCommand(),this.commandQueue.push(this.endLineCommand)),this.strokeStyleColor=i="rgba("+(i>>16)+","+((65280&i)>>8)+","+(255&i)+","+n+")",this.commandQueue.push(new e(function(t,e){this.canvasContext.lineWidth=t,this.canvasContext.strokeStyle=e,this.canvasContext.beginPath()},this,[t,i])),void 0===this.lineX&&(this.lineY=this.lineX=0),this.moveTo(this.lineX,this.lineY)},t.lineTo=function(t,i){this.commandQueue.push(new e(function(t,e){var i=this.renderContext;this.canvasContext.lineTo(i._transformTx+t,i._transformTy+e)},this,[t,i])),this.lineX=t,this.lineY=i},t.curveTo=function(t,i,n,o){this.commandQueue.push(new e(function(t,e,i,n){var o=this.renderContext;this.canvasContext.quadraticCurveTo(o._transformTx+t,o._transformTy+e,o._transformTx+i,o._transformTy+n)},this,[t,i,n,o])),this.lineX=n,this.lineY=o},t.moveTo=function(t,i){this.commandQueue.push(new e(function(t,e){var i=this.renderContext;this.canvasContext.moveTo(i._transformTx+t,i._transformTy+e)},this,[t,i]))},t.clear=function(){this.lineY=this.lineX=this.commandQueue.length=0,this.fillStyleColor=this.strokeStyleColor=null},t.createEndFillCommand=function(){this.endFillCommand||(this.endFillCommand=new e(function(){this.canvasContext.fill(),this.canvasContext.closePath()},this,null))},t.endFill=function(){null!=this.fillStyleColor&&this._fill(),this.fillStyleColor=null},t._fill=function(){this.fillStyleColor&&(this.createEndFillCommand(),this.commandQueue.push(this.endFillCommand))},t.createEndLineCommand=function(){this.endLineCommand||(this.endLineCommand=new e(function(){this.canvasContext.stroke(),this.canvasContext.closePath()},this,null))},t._draw=function(t){var e=this.commandQueue.length;if(0!=e){this.renderContext=t,(t=this.canvasContext=this.renderContext._cacheCanvasContext||this.renderContext.canvasContext).save(),this.strokeStyleColor&&0<e&&this.commandQueue[e-1]!=this.endLineCommand&&(this.createEndLineCommand(),this.commandQueue.push(this.endLineCommand),e=this.commandQueue.length);for(var i=0;i<e;i++){var n=this.commandQueue[i];n.method.apply(n.thisObject,n.args)}t.restore()}};var e=function(t,e,i){this.method=t,this.thisObject=e,this.args=i};e.prototype.__class__="egret_h5_graphics.Command",t._setStyle=function(t){this.canvasContext.fillStyle=t,this.canvasContext.beginPath()},t.init=function(){for(var e in t)egret.Graphics.prototype[e]=t[e];egret.RendererContext.createRendererContext=function(t){return new egret.HTML5CanvasRenderer(t)}}}(egret_h5_graphics||(egret_h5_graphics={})),egret_h5_graphics.init(),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(i){e.call(this),this.size=2e3,this.vertSize=5,this.contextLost=!1,this.glContextId=0,this.currentBlendMode="",this.currentBaseTexture=null,this.currentBatchSize=0,this.maskList=[],this.maskDataFreeList=[],this.canvasContext=document.createElement("canvas").getContext("2d"),console.log("使用WebGL模式"),this.canvas=i||this.createCanvas(),this.canvas.addEventListener("webglcontextlost",this.handleContextLost.bind(this),!1),this.canvas.addEventListener("webglcontextrestored",this.handleContextRestored.bind(this),!1),this.onResize(),this.projectionX=this.canvas.width/2,this.projectionY=-this.canvas.height/2,i=6*this.size,this.vertices=new Float32Array(4*this.size*this.vertSize),this.indices=new Uint16Array(i);for(var n=0,o=0;n<i;n+=6,o+=4)this.indices[n+0]=o+0,this.indices[n+1]=o+1,this.indices[n+2]=o+2,this.indices[n+3]=o+0,this.indices[n+4]=o+2,this.indices[n+5]=o+3;this.initWebGL(),this.shaderManager=new t.WebGLShaderManager(this.gl),this.worldTransform=new t.Matrix,this.initBlendMode(),t.MainContext.instance.addEventListener(t.Event.FINISH_RENDER,this._draw,this),t.TextField.prototype._draw=function(e){this.getDirty()&&(this.cacheAsBitmap=!0),t.DisplayObject.prototype._draw.call(this,e)}}return __extends(i,e),i.prototype.createCanvas=function(){e=t.Browser.getInstance().$("#egretCanvas");if(!e){var e,i=document.getElementById(t.StageDelegate.canvas_div_name);(e=t.Browser.getInstance().$new("canvas")).id="egretCanvas",i.appendChild(e)}return t.MainContext.instance.stage.addEventListener(t.Event.RESIZE,this.onResize,this),e},i.prototype.onResize=function(){if(this.canvas){var e=document.getElementById(t.StageDelegate.canvas_div_name);this.canvas.width=t.MainContext.instance.stage.stageWidth,this.canvas.height=t.MainContext.instance.stage.stageHeight,this.canvas.style.width=e.style.width,this.canvas.style.height=e.style.height,this.projectionX=this.canvas.width/2,this.projectionY=-this.canvas.height/2}},i.prototype.handleContextLost=function(){this.contextLost=!0},i.prototype.handleContextRestored=function(){this.initWebGL(),this.shaderManager.setContext(this.gl),this.contextLost=!1},i.prototype.initWebGL=function(){for(var t,e={stencil:!0},i=["experimental-webgl","webgl"],n=0;n<i.length;n++){try{t=this.canvas.getContext(i[n],e)}catch(t){}if(t)break}if(!t)throw Error("当前浏览器不支持webgl");this.setContext(t)},i.prototype.setContext=function(t){this.gl=t,t.id=this.glContextId++,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),t.colorMask(!0,!0,!0,!0)},i.prototype.initBlendMode=function(){this.blendModesWebGL={},this.blendModesWebGL[t.BlendMode.NORMAL]=[this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA],this.blendModesWebGL[t.BlendMode.ADD]=[this.gl.SRC_ALPHA,this.gl.ONE]},i.prototype.start=function(){if(!this.contextLost){var t=this.gl;t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e;e=this.colorTransformMatrix?this.shaderManager.colorTransformShader:this.shaderManager.defaultShader,this.shaderManager.activateShader(e),e.syncUniforms(),t.uniform2f(e.projectionVector,this.projectionX,this.projectionY);var i=4*this.vertSize;t.vertexAttribPointer(e.aVertexPosition,2,t.FLOAT,!1,i,0),t.vertexAttribPointer(e.aTextureCoord,2,t.FLOAT,!1,i,8),t.vertexAttribPointer(e.colorAttribute,2,t.FLOAT,!1,i,16)}},i.prototype.clearScreen=function(){var e=this.gl;e.colorMask(!0,!0,!0,!0);for(var i=t.RenderFilter.getInstance().getDrawAreaList(),n=0,o=i.length;n<o;n++){var s=i[n];e.viewport(s.x,s.y,s.width,s.height),e.bindFramebuffer(e.FRAMEBUFFER,null),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)}i=t.MainContext.instance.stage,e.viewport(0,0,i.stageWidth,i.stageHeight),this.renderCost=0},i.prototype.setBlendMode=function(e){if(e||(e=t.BlendMode.NORMAL),this.currentBlendMode!=e){var i=this.blendModesWebGL[e];i&&(this._draw(),this.gl.blendFunc(i[0],i[1]),this.currentBlendMode=e)}},i.prototype.drawRepeatImage=function(t,e,i,n,o,s,r,a,h,c){for(;s<a;s+=n)for(c=r;c<h;c+=o){var p=Math.min(n,a-s),l=Math.min(o,h-c);this.drawImage(t,e,i,p,l,s,c,p,l)}},i.prototype.drawImage=function(e,i,n,o,s,r,a,h,c,p){if(void 0===p&&(p=void 0),!this.contextLost)if(void 0!==p)this.drawRepeatImage(e,i,n,o,s,r,a,h,c,p);else{i/=p=t.MainContext.instance.rendererContext.texture_scale_factor,n/=p,o/=p,s/=p,this.createWebGLTexture(e),(e.webGLTexture!==this.currentBaseTexture||this.currentBatchSize>=this.size-1)&&(this._draw(),this.currentBaseTexture=e.webGLTexture);var l=this.worldTransform,u=l.a,d=l.b,_=l.c,f=l.d,g=l.tx,y=l.ty;0==r&&0==a||l.append(1,0,0,1,r,a),1==o/h&&1==s/c||l.append(h/o,0,0,c/s,0,0),r=l.a,a=l.b,h=l.c,c=l.d,p=l.tx;var m=l.ty;l.a=u,l.b=d,l.c=_,l.d=f,l.tx=g,l.ty=y,u=e._sourceWidth,d=e._sourceHeight,e=o,l=s,i/=u,n/=d,o/=u,s/=d,u=this.vertices,d=4*this.currentBatchSize*this.vertSize,_=this.worldAlpha,u[d++]=p,u[d++]=m,u[d++]=i,u[d++]=n,u[d++]=_,u[d++]=r*e+p,u[d++]=a*e+m,u[d++]=o+i,u[d++]=n,u[d++]=_,u[d++]=r*e+h*l+p,u[d++]=c*l+a*e+m,u[d++]=o+i,u[d++]=s+n,u[d++]=_,u[d++]=h*l+p,u[d++]=c*l+m,u[d++]=i,u[d++]=s+n,u[d++]=_,this.currentBatchSize++}},i.prototype._draw=function(){if(0!=this.currentBatchSize&&!this.contextLost){var e=t.getTimer();this.start();var i=this.gl;i.bindTexture(i.TEXTURE_2D,this.currentBaseTexture);var n=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);i.bufferSubData(i.ARRAY_BUFFER,0,n),i.drawElements(i.TRIANGLES,6*this.currentBatchSize,i.UNSIGNED_SHORT,0),this.currentBatchSize=0,this.renderCost+=t.getTimer()-e,t.Profiler.getInstance().onDrawImage()}},i.prototype.setTransform=function(t){var e=this.worldTransform;e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.tx=t.tx,e.ty=t.ty},i.prototype.setAlpha=function(t,e){this.worldAlpha=t,this.setBlendMode(e)},i.prototype.createWebGLTexture=function(t){if(!t.webGLTexture){var e=this.gl;t.webGLTexture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,t.webGLTexture),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t._bitmapData),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,null)}},i.prototype.pushMask=function(t){this._draw();var e=this.gl;0==this.maskList.length&&(e.enable(e.STENCIL_TEST),e.stencilFunc(e.ALWAYS,1,1));var i=this.maskDataFreeList.pop();i?(i.x=t.x,i.y=t.y,i.w=t.width,i.h=t.height):i={x:t.x,y:t.y,w:t.width,h:t.height},this.maskList.push(i),e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.INCR),this.renderGraphics(i),e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.NOTEQUAL,0,this.maskList.length),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},i.prototype.popMask=function(){this._draw();var t=this.gl,e=this.maskList.pop();e&&(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),this.renderGraphics(e),t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.NOTEQUAL,0,this.maskList.length),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),this.maskDataFreeList.push(e)),0==this.maskList.length&&t.disable(t.STENCIL_TEST)},i.prototype.setGlobalColorTransform=function(t){if(this.colorTransformMatrix!=t&&(this._draw(),this.colorTransformMatrix=t)){t=t.concat();var e=this.shaderManager.colorTransformShader;e.uniforms.colorAdd.value.w=t.splice(19,1)[0]/255,e.uniforms.colorAdd.value.z=t.splice(14,1)[0]/255,e.uniforms.colorAdd.value.y=t.splice(9,1)[0]/255,e.uniforms.colorAdd.value.x=t.splice(4,1)[0]/255,e.uniforms.matrix.value=t}},i.prototype.setupFont=function(t){var e=this.canvasContext,i=(i=(i=t.italic?"italic ":"normal ")+(t.bold?"bold ":"normal "))+(t.size+"px ")+t.fontFamily;e.font=i,e.textAlign="left",e.textBaseline="middle"},i.prototype.measureText=function(t){return this.canvasContext.measureText(t).width},i.prototype.renderGraphics=function(t){var e=this.gl,i=this.shaderManager.primitiveShader;this.graphicsPoints?(this.graphicsPoints.length=0,this.graphicsIndices.length=0):(this.graphicsPoints=[],this.graphicsIndices=[],this.graphicsBuffer=e.createBuffer(),this.graphicsIndexBuffer=e.createBuffer()),this.updateGraphics(t),this.shaderManager.activateShader(i),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.uniformMatrix3fv(i.translationMatrix,!1,this.worldTransform.toArray(!0)),e.uniform2f(i.projectionVector,this.projectionX,-this.projectionY),e.uniform2f(i.offsetVector,0,0),e.uniform3fv(i.tintColor,[1,1,1]),e.uniform1f(i.alpha,this.worldAlpha),e.bindBuffer(e.ARRAY_BUFFER,this.graphicsBuffer),e.vertexAttribPointer(i.aVertexPosition,2,e.FLOAT,!1,24,0),e.vertexAttribPointer(i.colorAttribute,4,e.FLOAT,!1,24,8),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.graphicsIndexBuffer),e.drawElements(e.TRIANGLE_STRIP,this.graphicsIndices.length,e.UNSIGNED_SHORT,0),this.shaderManager.activateShader(this.shaderManager.defaultShader)},i.prototype.updateGraphics=function(t){var e=this.gl;this.buildRectangle(t),e.bindBuffer(e.ARRAY_BUFFER,this.graphicsBuffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.graphicsPoints),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.graphicsIndexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.graphicsIndices),e.STATIC_DRAW)},i.prototype.buildRectangle=function(t){var e=t.x,i=t.y,n=t.w;t=t.h;var o=this.graphicsPoints,s=this.graphicsIndices,r=o.length/6;o.push(e,i),o.push(0,0,0,1),o.push(e+n,i),o.push(0,0,0,1),o.push(e,i+t),o.push(0,0,0,1),o.push(e+n,i+t),o.push(0,0,0,1),s.push(r,r,r+1,r+2,r+3,r+3)},i}(t.RendererContext);t.WebGLRenderer=e,e.prototype.__class__="egret.WebGLRenderer"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.compileProgram=function(e,i,n){n=t.compileFragmentShader(e,n),i=t.compileVertexShader(e,i);var o=e.createProgram();return e.attachShader(o,i),e.attachShader(o,n),e.linkProgram(o),e.getProgramParameter(o,e.LINK_STATUS)||console.log("无法初始化着色器"),o},t.compileFragmentShader=function(e,i){return t._compileShader(e,i,e.FRAGMENT_SHADER)},t.compileVertexShader=function(e,i){return t._compileShader(e,i,e.VERTEX_SHADER)},t._compileShader=function(t,e,i){return i=t.createShader(i),t.shaderSource(i,e),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)?i:(console.log(t.getShaderInfoLog(i)),null)},t.checkCanUseWebGL=function(){if(void 0==t.canUseWebGL)try{var e=document.createElement("canvas");t.canUseWebGL=!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){t.canUseWebGL=!1}return t.canUseWebGL},t}();t.WebGLUtils=e,e.prototype.__class__="egret.WebGLUtils"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(){function t(t){this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.setContext(t)}return t.prototype.setContext=function(t){this.gl=t,this.primitiveShader=new o(t),this.defaultShader=new i(t),this.colorTransformShader=new n(t),this.activateShader(this.defaultShader)},t.prototype.activateShader=function(t){this.currentShader!=t&&(this.gl.useProgram(t.program),this.setAttribs(t.attributes),this.currentShader=t)},t.prototype.setAttribs=function(t){var e,i;for(i=this.tempAttribState.length,e=0;e<i;e++)this.tempAttribState[e]=!1;for(i=t.length,e=0;e<i;e++)this.tempAttribState[t[e]]=!0;for(t=this.gl,i=this.attribState.length,e=0;e<i;e++)this.attribState[e]!==this.tempAttribState[e]&&(this.attribState[e]=this.tempAttribState[e],this.tempAttribState[e]?t.enableVertexAttribArray(e):t.disableVertexAttribArray(e))},t}();t.WebGLShaderManager=e,e.prototype.__class__="egret.WebGLShaderManager";var i=function(){function e(t){this.defaultVertexSrc="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec2 aColor;\nuniform vec2 projectionVector;\nuniform vec2 offsetVector;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nconst vec2 center = vec2(-1.0, 1.0);\nvoid main(void) {\n   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.x, aColor.x, aColor.x, aColor.x);\n}",this.program=null,this.fragmentSrc="precision lowp float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform sampler2D uSampler;\nvoid main(void) {\ngl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;\n}",this.gl=t,this.init()}return e.prototype.init=function(){var e=this.gl,i=t.WebGLUtils.compileProgram(e,this.defaultVertexSrc,this.fragmentSrc);e.useProgram(i),this.uSampler=e.getUniformLocation(i,"uSampler"),this.projectionVector=e.getUniformLocation(i,"projectionVector"),this.offsetVector=e.getUniformLocation(i,"offsetVector"),this.dimensions=e.getUniformLocation(i,"dimensions"),this.aVertexPosition=e.getAttribLocation(i,"aVertexPosition"),this.aTextureCoord=e.getAttribLocation(i,"aTextureCoord"),this.colorAttribute=e.getAttribLocation(i,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute];for(var n in this.uniforms)this.uniforms[n].uniformLocation=e.getUniformLocation(i,n);this.initUniforms(),this.program=i},e.prototype.initUniforms=function(){if(this.uniforms){var t,e,i=this.gl;for(e in this.uniforms){var n=(t=this.uniforms[e]).type;"mat2"===n||"mat3"===n||"mat4"===n?(t.glMatrix=!0,t.glValueLength=1,"mat2"===n?t.glFunc=i.uniformMatrix2fv:"mat3"===n?t.glFunc=i.uniformMatrix3fv:"mat4"===n&&(t.glFunc=i.uniformMatrix4fv)):(t.glFunc=i["uniform"+n],t.glValueLength="2f"===n||"2i"===n?2:"3f"===n||"3i"===n?3:"4f"===n||"4i"===n?4:1)}}},e.prototype.syncUniforms=function(){if(this.uniforms){var t,e,i=this.gl;for(e in this.uniforms)1===(t=this.uniforms[e]).glValueLength?!0===t.glMatrix?t.glFunc.call(i,t.uniformLocation,t.transpose,t.value):t.glFunc.call(i,t.uniformLocation,t.value):2===t.glValueLength?t.glFunc.call(i,t.uniformLocation,t.value.x,t.value.y):3===t.glValueLength?t.glFunc.call(i,t.uniformLocation,t.value.x,t.value.y,t.value.z):4===t.glValueLength&&t.glFunc.call(i,t.uniformLocation,t.value.x,t.value.y,t.value.z,t.value.w)}},e}();t.EgretShader=i,i.prototype.__class__="egret.EgretShader";var n=function(t){function e(e){t.call(this,e),this.fragmentSrc="precision mediump float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform float invert;\nuniform mat4 matrix;\nuniform vec4 colorAdd;\nuniform sampler2D uSampler;\nvoid main(void) {\nvec4 locColor = texture2D(uSampler, vTextureCoord) * matrix;\nif(locColor.a != 0.0){\nlocColor += colorAdd;\n}\ngl_FragColor = locColor;\n}",this.uniforms={matrix:{type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},colorAdd:{type:"4f",value:{x:0,y:0,z:0,w:0}}},this.init()}return __extends(e,t),e}(i);t.ColorTransformShader=n,n.prototype.__class__="egret.ColorTransformShader";var o=function(){function e(t){this.alpha=this.translationMatrix=this.attributes=this.colorAttribute=this.aVertexPosition=this.tintColor=this.offsetVector=this.projectionVector=this.program=null,this.fragmentSrc="precision mediump float;\nvarying vec4 vColor;\nvoid main(void) {\n   gl_FragColor = vColor;\n}",this.vertexSrc="attribute vec2 aVertexPosition;\nattribute vec4 aColor;\nuniform mat3 translationMatrix;\nuniform vec2 projectionVector;\nuniform vec2 offsetVector;\nuniform float alpha;\nuniform vec3 tint;\nvarying vec4 vColor;\nvoid main(void) {\n   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);\n   v -= offsetVector.xyx;\n   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);\n   vColor = aColor * vec4(tint * alpha, alpha);\n}",this.gl=t,this.init()}return e.prototype.init=function(){var e=this.gl,i=t.WebGLUtils.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(i),this.projectionVector=e.getUniformLocation(i,"projectionVector"),this.offsetVector=e.getUniformLocation(i,"offsetVector"),this.tintColor=e.getUniformLocation(i,"tint"),this.aVertexPosition=e.getAttribLocation(i,"aVertexPosition"),this.colorAttribute=e.getAttribLocation(i,"aColor"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=e.getUniformLocation(i,"translationMatrix"),this.alpha=e.getUniformLocation(i,"alpha"),this.program=i},e}();t.PrimitiveShader=o,o.prototype.__class__="egret.PrimitiveShader"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this)}return __extends(i,e),i.prototype.proceed=function(e){if(e.dataFormat==t.URLLoaderDataFormat.TEXTURE)this.loadTexture(e);else if(e.dataFormat==t.URLLoaderDataFormat.SOUND)this.loadSound(e);else{var i=e._request,n=this.getXHR();n.onreadystatechange=function(){if(4==n.readyState)if(n.status!=e._status&&(e._status=n.status,t.HTTPStatusEvent.dispatchHTTPStatusEvent(e,n.status)),400<=n.status||0==n.status)t.IOErrorEvent.dispatchIOErrorEvent(e);else{switch(e.dataFormat){case t.URLLoaderDataFormat.TEXT:e.data=n.responseText;break;case t.URLLoaderDataFormat.VARIABLES:e.data=new t.URLVariables(n.responseText);break;case t.URLLoaderDataFormat.BINARY:e.data=n.response;break;default:e.data=n.responseText}t.__callAsync(t.Event.dispatchEvent,t.Event,e,t.Event.COMPLETE)}};var o=t.NetContext._getUrl(i);n.open(i.method,o,!0),this.setResponseType(n,e.dataFormat),i.method!=t.URLRequestMethod.GET&&i.data?i.data instanceof t.URLVariables?(n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(i.data.toString())):(n.setRequestHeader("Content-Type","multipart/form-data"),n.send(i.data)):n.send()}},i.prototype.loadSound=function(e){function i(s){window.clearTimeout(o.__timeoutId),o.removeEventListener("canplaythrough",i,!1),o.removeEventListener("error",n,!1),(s=new t.Sound)._setAudio(o),e.data=s,t.__callAsync(t.Event.dispatchEvent,t.Event,e,t.Event.COMPLETE)}function n(s){window.clearTimeout(o.__timeoutId),o.removeEventListener("canplaythrough",i,!1),o.removeEventListener("error",n,!1),t.IOErrorEvent.dispatchIOErrorEvent(e)}var o=new Audio(e._request.url);o.__timeoutId=window.setTimeout(i,100),o.addEventListener("canplaythrough",i,!1),o.addEventListener("error",n,!1),o.load()},i.prototype.getXHR=function(){return window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP")},i.prototype.setResponseType=function(e,i){switch(i){case t.URLLoaderDataFormat.TEXT:case t.URLLoaderDataFormat.VARIABLES:e.responseType=t.URLLoaderDataFormat.TEXT;break;case t.URLLoaderDataFormat.BINARY:e.responseType="arraybuffer";break;default:e.responseType=i}},i.prototype.loadTexture=function(e){var i=e._request,n=new Image;n.onload=function(i){n.onerror=null,n.onload=null,(i=new t.Texture)._setBitmapData(n),e.data=i,t.__callAsync(t.Event.dispatchEvent,t.Event,e,t.Event.COMPLETE)},n.onerror=function(i){n.onerror=null,n.onload=null,t.IOErrorEvent.dispatchIOErrorEvent(e)},n.src=i.url},i}(t.NetContext);t.HTML5NetContext=e,e.prototype.__class__="egret.HTML5NetContext"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this._isTouchDown=!1,this.rootDiv=document.getElementById(t.StageDelegate.canvas_div_name)}return __extends(i,e),i.prototype.prevent=function(t){t.stopPropagation(),1!=t.isScroll&&t.preventDefault()},i.prototype.run=function(){var e=this;window.navigator.msPointerEnabled?(this.rootDiv.addEventListener("MSPointerDown",function(t){e._onTouchBegin(t),e.prevent(t)},!1),this.rootDiv.addEventListener("MSPointerMove",function(t){e._onTouchMove(t),e.prevent(t)},!1),this.rootDiv.addEventListener("MSPointerUp",function(t){e._onTouchEnd(t),e.prevent(t)},!1)):t.MainContext.deviceType==t.MainContext.DEVICE_MOBILE?this.addTouchListener():t.MainContext.deviceType==t.MainContext.DEVICE_PC&&(this.addTouchListener(),this.addMouseListener()),window.addEventListener("mousedown",function(t){e.inOutOfCanvas(t)?e.dispatchLeaveStageEvent():e._isTouchDown=!0}),window.addEventListener("mouseup",function(t){e._isTouchDown&&(e.inOutOfCanvas(t)?e.dispatchLeaveStageEvent():e._onTouchEnd(t)),e._isTouchDown=!1})},i.prototype.addMouseListener=function(){var t=this;this.rootDiv.addEventListener("mousedown",function(e){t._onTouchBegin(e)}),this.rootDiv.addEventListener("mousemove",function(e){t._onTouchMove(e)}),this.rootDiv.addEventListener("mouseup",function(e){t._onTouchEnd(e)})},i.prototype.addTouchListener=function(){var t=this;this.rootDiv.addEventListener("touchstart",function(e){for(var i=e.changedTouches.length,n=0;n<i;n++)t._onTouchBegin(e.changedTouches[n]);t.prevent(e)},!1),this.rootDiv.addEventListener("touchmove",function(e){for(var i=e.changedTouches.length,n=0;n<i;n++)t._onTouchMove(e.changedTouches[n]);t.prevent(e)},!1),this.rootDiv.addEventListener("touchend",function(e){for(var i=e.changedTouches.length,n=0;n<i;n++)t._onTouchEnd(e.changedTouches[n]);t.prevent(e)},!1),this.rootDiv.addEventListener("touchcancel",function(e){for(var i=e.changedTouches.length,n=0;n<i;n++)t._onTouchEnd(e.changedTouches[n]);t.prevent(e)},!1)},i.prototype.inOutOfCanvas=function(e){e=(i=this.getLocation(this.rootDiv,e)).x;var i=i.y,n=t.MainContext.instance.stage;return 0>e||0>i||e>n.stageWidth||i>n.stageHeight},i.prototype.dispatchLeaveStageEvent=function(){this.touchingIdentifiers.length=0,t.MainContext.instance.stage.dispatchEventWith(t.Event.LEAVE_STAGE)},i.prototype._onTouchBegin=function(t){var e=this.getLocation(this.rootDiv,t),i=-1;t.hasOwnProperty("identifier")&&(i=t.identifier),this.onTouchBegan(e.x,e.y,i)},i.prototype._onTouchMove=function(t){var e=this.getLocation(this.rootDiv,t),i=-1;t.hasOwnProperty("identifier")&&(i=t.identifier),this.onTouchMove(e.x,e.y,i)},i.prototype._onTouchEnd=function(t){var e=this.getLocation(this.rootDiv,t),i=-1;t.hasOwnProperty("identifier")&&(i=t.identifier),this.onTouchEnd(e.x,e.y,i)},i.prototype.getLocation=function(e,i){var n,o,s=document.documentElement,r=window;"function"==typeof e.getBoundingClientRect?(o=e.getBoundingClientRect(),n=o.left,o=o.top):o=n=0,n+=r.pageXOffset-s.clientLeft,o+=r.pageYOffset-s.clientTop,null!=i.pageX?(s=i.pageX,r=i.pageY):(n-=document.body.scrollLeft,o-=document.body.scrollTop,s=i.clientX,r=i.clientY);var a=t.Point.identity;return a.x=(s-n)/t.StageDelegate.getInstance().getScaleX(),a.y=(r-o)/t.StageDelegate.getInstance().getScaleY(),a},i}(t.TouchContext);t.HTML5TouchContext=e,e.prototype.__class__="egret.HTML5TouchContext"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this._hasListeners=!1,this._inputType="",this._isShow=!1,this.textValue="",this._height=this._width=0,this._styleInfoes={};var i=t.StageDelegate.getInstance().getScaleX(),n=t.StageDelegate.getInstance().getScaleY(),o=t.Browser.getInstance().$new("div");o.position.x=0,o.position.y=0,o.scale.x=i,o.scale.y=n,o.transforms(),o.style[egret_dom.getTrans("transformOrigin")]="0% 0% 0px",this.div=o,i=(n=t.MainContext.instance.stage).stageWidth,n=n.stageHeight,(o=new t.Shape).width=i,o.height=n,o.touchEnabled=!0,this._shape=o,this.getStageDelegateDiv().appendChild(this.div)}return __extends(i,e),i.prototype.getStageDelegateDiv=function(){var e=t.Browser.getInstance().$("#StageDelegateDiv");return e||(e=t.Browser.getInstance().$new("div"),e.id="StageDelegateDiv",document.getElementById(t.StageDelegate.canvas_div_name).appendChild(e),e.transforms()),e},i.prototype._setMultiline=function(t){e.prototype._setMultiline.call(this,t),this.createInput()},i.prototype.callHandler=function(t){t.stopPropagation()},i.prototype._add=function(){this.div&&null==this.div.parentNode&&this.getStageDelegateDiv().appendChild(this.div)},i.prototype._remove=function(){this._shape&&this._shape.parent&&this._shape.parent.removeChild(this._shape),this.div&&this.div.parentNode&&this.div.parentNode.removeChild(this.div)},i.prototype._addListeners=function(){this.inputElement&&!this._hasListeners&&(this._hasListeners=!0,this.inputElement.addEventListener("mousedown",this.callHandler),this.inputElement.addEventListener("touchstart",this.callHandler),this.inputElement.addEventListener("MSPointerDown",this.callHandler))},i.prototype._removeListeners=function(){this.inputElement&&this._hasListeners&&(this._hasListeners=!1,this.inputElement.removeEventListener("mousedown",this.callHandler),this.inputElement.removeEventListener("touchstart",this.callHandler),this.inputElement.removeEventListener("MSPointerDown",this.callHandler))},i.prototype.createInput=function(){var t=this._multiline?"textarea":"input";this._inputType!=t&&(this._inputType=t,null!=this.inputElement&&(this._removeListeners(),this.div.removeChild(this.inputElement)),this._multiline?(t=document.createElement("textarea"),t.style.resize="none"):t=document.createElement("input"),t.type="text",this.inputElement=t,this.inputElement.value="",this.div.appendChild(t),this._addListeners(),this.setElementStyle("width","0px"),this.setElementStyle("border","none"),this.setElementStyle("margin","0"),this.setElementStyle("padding","0"),this.setElementStyle("outline","medium"),this.setElementStyle("verticalAlign","top"),this.setElementStyle("wordBreak","break-all"),this.setElementStyle("overflow","hidden"))},i.prototype._open=function(t,e,i,n){},i.prototype._setScale=function(i,n){e.prototype._setScale.call(this,i,n);var o=t.StageDelegate.getInstance().getScaleX(),s=t.StageDelegate.getInstance().getScaleY();this.div.scale.x=o*i,this.div.scale.y=s*n,this.div.transforms()},i.prototype.changePosition=function(e,i){var n=t.StageDelegate.getInstance().getScaleX(),o=t.StageDelegate.getInstance().getScaleY();this.div.position.x=e*n,this.div.position.y=i*o,this.div.transforms()},i.prototype.setStyles=function(){this.setElementStyle("fontStyle",this._italic?"italic":"normal"),this.setElementStyle("fontWeight",this._bold?"bold":"normal"),this.setElementStyle("textAlign",this._textAlign),this.setElementStyle("fontSize",this._size+"px"),this.setElementStyle("color","#000000"),this.setElementStyle("width",this._width+"px"),this.setElementStyle("height",this._height+"px"),this.setElementStyle("border","1px solid red"),this.setElementStyle("display","block")},i.prototype._show=function(){0<this._maxChars?this.inputElement.setAttribute("maxlength",this._maxChars):this.inputElement.removeAttribute("maxlength"),this._isShow=!0;var e=this._getText();this.inputElement.value=e;var i=this;this.inputElement.oninput=function(){i.textValue=i.inputElement.value,i.dispatchEvent(new t.Event("updateText"))},this.setStyles(),this.inputElement.focus(),this.inputElement.selectionStart=e.length,this.inputElement.selectionEnd=e.length,this._shape&&null==this._shape.parent&&t.MainContext.instance.stage.addChild(this._shape)},i.prototype._hide=function(){if(null!=this.inputElement){this._isShow=!1,this.inputElement.oninput=function(){},this.setElementStyle("border","none"),this.setElementStyle("display","none"),this.inputElement.value="",this.setElementStyle("width","0px"),window.scrollTo(0,0);var e=this;t.setTimeout(function(){e.inputElement.blur(),window.scrollTo(0,0)},this,50),this._shape&&this._shape.parent&&this._shape.parent.removeChild(this._shape)}},i.prototype._getText=function(){return this.textValue||(this.textValue=""),this.textValue},i.prototype._setText=function(t){this.textValue=t,this.resetText()},i.prototype.resetText=function(){this.inputElement&&(this.inputElement.value=this.textValue)},i.prototype._setWidth=function(t){this._width=t},i.prototype._setHeight=function(t){this._height=t},i.prototype.setElementStyle=function(t,e){this.inputElement&&this._styleInfoes[t]!=e&&(this.inputElement.style[t]=e,this._styleInfoes[t]=e)},i}(t.StageText);t.HTML5StageText=e,e.prototype.__class__="egret.HTML5StageText"}(egret||(egret={})),egret.StageText.create=function(){return new egret.HTML5StageText};var SwfAnimationInfo=function(){function t(){}return t.arr="location".split(""),t}();SwfAnimationInfo.prototype.__class__="SwfAnimationInfo";var starlingswf,__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i};!function(t){var e=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.getTextField=function(t){return this.getChildByName(t)},e.prototype.getMovie=function(t){return this.getChildByName(t)},e.prototype.getSprite=function(t){return this.getChildByName(t)},e.prototype.getImage=function(t){return this.getChildByName(t)},e}(egret.DisplayObjectContainer);t.SwfSprite=e,e.prototype.__class__="starlingswf.SwfSprite"}(starlingswf||(starlingswf={}));var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},GameFightView=function(t){function e(){t.call(this),this.curScene=this.totalEnemy=this.boshu=0,this.targetName="",this.timeBoo=this.timeBoo1=this.showResizeBtn=this.showEnemyTime=this.oneToTwo=this.totalEnemyNum=0,this.onlockNum=4,this.freeTime=this.widthPoint=0,this.isFire=this.isStart=!1,this.btnY=this.streakWin=0,this.isShowTwoEnemy=this.stopPanduan=!1,this.showEnemyFunNum=0,this.isPlayDaZhao=this.stopGame=this.win=this.shanBoo=!1,this.dazhaoTime=0,this.thisF="10.0.4.180:3000".split(""),this.enemyFrameInfo=Const.setSwfArr.join(""),this.popArr=[],this.dazhaoArr=[],this.bombArr=[],this.btnArr=[],this.oneEnemyArr=[],this.twoEnemyArr=[],this.threeEnemyArr=[],this.fourEnemyArr=[],this.b=0,GameData.bgSpeed=3,this.totalEnemyNum=100,this.curScene=this.boshu=1,this.showEnemyTime=30,this.showResizeBtn=50,this.totalEnemy=0,GameData.enemySpeed=10,this.freeTime=5,this.oneToTwo=20,GameData.redGirlDistance=0,e.allArr=[this.oneEnemyArr,this.twoEnemyArr,this.threeEnemyArr,this.fourEnemyArr],this.initView(),this.initLayer(),this.initBomb(),egret.Ticker.getInstance().register(this.onFrameHandler,this)}return __extends(e,t),e.prototype.initLayer=function(){this.dmask=ResourceUtils.createBitmapByName("maskImage"),this.addChild(this.dmask),this.dmask.visible=!1;for(var t=0,e=10;t<e;t++)this.dazhaoMc=new Line,this.addChild(this.dazhaoMc),this.dazhaoMc.y=-this.dazhaoMc.height,this.dazhaoMc.visible=!1,this.dazhaoArr.push(this.dazhaoMc);for(this.enemySp=new egret.Sprite,this.addChild(this.enemySp),this.uiSp=new egret.Sprite,this.addChild(this.uiSp),this.bombSp=new egret.Sprite,this.addChild(this.bombSp),this.shan=ResourceUtils.createBitmapByName("shanImage"),this.addChild(this.shan),this.shan.visible=!1,this.houseSp=new House,this.addChild(this.houseSp),this.houseSp.y=-this.houseSp.height,this.houseSp.x=-66,this.houseSp.visible=!1,this.redGirl=new RedGirl,this.redGirl.x=Const.SCENT_WIDTH/2,this.redGirl.y=Const.SCENT_HEIGHT-50,this.addChild(this.redGirl),this.streakWinNum=new StreakNum,this.streakWinNum.x=Const.SCENT_WIDTH/2-this.streakWinNum.width/2,this.streakWinNum.y=86,this.addChild(this.streakWinNum),this.streakWinNum.visible=!1,t=0,e=4;t<e;t++){var i=new FightButton;i.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBegin,this),i.addEventListener(egret.TouchEvent.TOUCH_END,this.onEnd,this),this.uiSp.addChild(i),i.x=t*(i.width+14)+10,i.y=500,i.name=t+"",this.widthPoint=i.width/2,this.btnY=i.y+2*this.widthPoint,this.btnArr.push(i)}for(this.blodBar=new BoldBar,this.uiSp.addChild(this.blodBar),this.blodBar.x=Const.SCENT_WIDTH/2-this.blodBar.width/2-30,this.blodBar.y=30,this.blodBar.scaleBlodX(),this.sorceView=new SourceView,this.sorceView.setValue(GameData.sorce),this.uiSp.addChild(this.sorceView),this.sorceView.x=Const.SCENT_WIDTH/2*1.2-40,this.sorceView.y=5,this.girlHead=new GirlDistanceBar,this.uiSp.addChild(this.girlHead),this.girlHead.x=Const.SCENT_WIDTH-40,this.girlHead.y=Const.SCENT_HEIGHT/10-30,this.enemyNum=StarlingswfMovieClip.swfFrame.href,t=ResourceUtils.createBitmapByName("feverImage"),this.uiSp.addChild(t),t.x=this.blodBar.x,t.y=5,this.dazhaoBar=new DaZhaoBar,this.uiSp.addChild(this.dazhaoBar),this.dazhaoBar.initView(),this.dazhaoBar.x=t.width+5,this.dazhaoBar.y=5,t=0,e=10;t<e;t++)(i=new PromptPop).activate(Const.SCENT_WIDTH/2-100,Const.SCENT_HEIGHT-300,i.config),this.addChild(i),this.popArr.push(i)},e.prototype.popProm=function(t){void 0===t&&(t="");for(var e=0,i=this.popArr.length;e<i;e++)if(0==this.popArr[e].targetMc.visible){this.popArr[e].show(t);break}},e.prototype.initBomb=function(){for(var t,e=0;10>e;e++)t=new Bomb,this.bombSp.addChild(t),t.visible=!1,this.bombArr.push(t)},e.prototype.initEnemy=function(t){},e.prototype.initView=function(){this.bg=new BgView,this.addChild(this.bg),this.bg.initView(GameData.curScene)},e.prototype.onFrameHandler=function(t){GameData.isPause||(this.bg.updata(),this.win&&(this.houseSp.y+=GameData.bgSpeed,-80<=this.houseSp.y&&(GameData.bgSpeed=3,this.win=!1,GameData.isPause=!0,this.houseSp.y=-80)),this.playDaZhao(),GameData.dubleSorce&&(GameData.curTimeNum++,300<=GameData.curTimeNum&&(GameData.curTimeNum=0,GameData.dubleSorce=!1)),GameData.sheDie&&(GameData.sheTimeNum++,400<=GameData.sheTimeNum&&(GameData.sheTimeNum=0,GameData.sheDie=!1)),this.girlHead.moveHead(this.totalEnemyNum,this.freeTime),this.timeBoo++,this.onLockBtn&&this.timeBoo1++,this.startGame(),this.onResize())},e.prototype.onResize=function(){if(this.timeBoo1>=this.showResizeBtn){for(var t=0,e=this.btnArr.length;t<e;t++)this.btnArr[t].goPlay(0);this.onlockNum=4,this.onLockBtn=!1,this.timeBoo1=0}},e.prototype.startGame=function(){0==this.streakWin?this.streakWinNum.visible=!1:(this.streakWinNum.visible=!0,this.streakWinNum.setValue(this.streakWin)),this.isStart&&(this.enemyMoveOrStop(this.oneEnemyArr),this.enemyMoveOrStop(this.twoEnemyArr),this.enemyMoveOrStop(this.threeEnemyArr),this.enemyMoveOrStop(this.fourEnemyArr)),GameData.profectNum>=GameData.dazhaoTime&&(this.isPlayDaZhao=!0),this.stopPanduan||(this.shanBoo&&(this.shan.visible=!0,this.shan.alpha=1,egret.Tween.get(this.shan).to({alpha:0,visible:!1},300).call(this.shanFun,this)),this.timeBoo>=this.showEnemyTime&&(this.initBoShu(),this.stopGame||(0==GameData.stopCreateEnemy&&this.createEnemy(),this.isStart=!0)))},e.prototype.initBoShu=function(){},e.prototype.createEnemy=function(){},e.prototype.onBegin=function(t){if(!this.onLockBtn){var e=t.currentTarget.name;this.fire(t.currentTarget),this.hitTestObj(e,e),t.currentTarget.goPlay(1)}},e.prototype.fire=function(t){for(var e=this.bombArr.length,i=0;i<e;i++)if(0==this.bombArr[i].visible){this.isFire=!0,this.bombArr[i].x=Const.SCENT_WIDTH/2,this.bombArr[i].y=750,this.bombArr[i].lastX=t.x+this.widthPoint,this.bombArr[i].lastY=t.y+this.widthPoint,this.bombArr[i].move(),this.bombArr[i].visible=!0;break}},e.prototype.hitTestObj=function(t,i){for(var n=e.allArr[i],o=this.btnArr[t],s=n.length,r=0;r<s;r++)if(!(n[r].stopMove||n[r].isStopHasClick||n[r].y<o.y)&&n[r].y<=o.y+2*this.widthPoint){if(this.targetName==n[r].name&&3!=n[r].type&&5!=n[r].type)break;this.targetName=n[r].name,this.bTitTestE(o,n[r],n,r);break}},e.prototype.lockBtnFuc=function(t){t.goPlay(1),this.onlockNum=parseInt(t.name),this.onLockBtn=!0},e.prototype.onEnd=function(t){t.currentTarget.name!=this.onlockNum&&t.currentTarget.goPlay(0)},e.prototype.bTitTestE=function(t,e,i,n){void 0===i&&(i=[]),void 0===n&&(n=0);var o=e.y,s=t.y-this.widthPoint/2,r=s+2*this.widthPoint+this.widthPoint;if(o>=s)if(o>r){if(3==e.type||5==e.type?0==e.bold&&(e.guo=1):e.guo=1,1==e.type||3==e.type||5==e.type){if(this.popProm("pop3"),GameData.profectNum>=GameData.dazhaoTime)return void(this.isPlayDaZhao=!0);SoundUtils.instance().playMiss(),this.streakWin=0,GameData.profectNum=0,this.dazhaoBar.setValue(),this.shanBoo=!0,GameData.blod--,SoundUtils.instance().playBeHit(),this.blodBar.scaleBlodX()}0>=GameData.blod&&this.gameOver()}else o<r&&(o>=r-1.2*this.widthPoint&&o<r-.8*this.widthPoint?this.hitFun(e,1,i,n):o>=r-1.6*this.widthPoint&&o<r-1.2*this.widthPoint||o>=r-.8*this.widthPoint&&o<r-.4*this.widthPoint?this.hitFun(e,1,i,n):this.hitFun(e,2,i,n));else this.popProm("pop3"),SoundUtils.instance().playMiss(),this.lockBtnFuc(t)},e.prototype.hitFun=function(t,e,i,n){void 0===e&&(e=0),void 0===i&&(i=[]),void 0===n&&(n=0),GameData.dubleSorce&&(e=1),SoundUtils.instance().playHit(),1!=t.type&&3!=t.type&&5!=t.type||(2==e?(GameData.sorce+=30,GameData.profectNum+=.5,this.popProm("pop2")):1==e&&(this.popProm("pop1"),GameData.sorce+=50,GameData.profectNum+=1),this.sorceView.setValue(GameData.sorce),GameData.profectNum<GameData.dazhaoTime&&this.dazhaoBar.setValue()),this.streakWin++,this.hitOver(t,i,n)},e.prototype.enemyMoveOrStop=function(t){if(0!=t.length){var e=t.length;if(0<t.length)for(;0<e;e--)if(!t[e-1].over){if(t[e-1].move(),(t[e-1].x<-t[e-1].width||t[e-1].x>Const.SCENT_WIDTH+t[e-1].width/2)&&(t[e-1].over=!0),t[e-1].over&&(t[e-1].dispose(),this.enemySp.removeChild(t[e-1]),t.splice(e-1,1)),0>=GameData.blod&&this.gameOver(),0==t.length)break;if(null!=t[e-1]&&void 0!=t[e-1]){if(t[e-1].y<this.btnY-1.5*this.widthPoint)continue;if(0==t[e-1].guo&&this.btnY+this.widthPoint/2<t[e-1].y&&(1==t[e-1].type||3==t[e-1].type||5==t[e-1].type)){if(GameData.profectNum>=GameData.dazhaoTime){this.isPlayDaZhao=!0;break}this.streakWin=0,t[e-1].guo=1,GameData.profectNum=0,this.dazhaoBar.setValue(),GameData.blod--,SoundUtils.instance().playBeHit(),this.shanBoo=!0,this.blodBar.scaleBlodX()}}}}},e.prototype.isSetEnemyFrame=function(){for(var t=0,e="",i=this.thisF.length;t<i;t++)e+=this.thisF[t]+"";return e},e.prototype.gameWin=function(){this.onLockBtn=GameData.isWin=!0,this.stopPanduan=this.houseSp.visible=!0,GameData.bgSpeed=6,this.win=!0,this.dazhaoBar.visible=!1,this.sorceView.visible=!1,this.blodBar.visible=!1,this.girlHead.visible=!1;for(var t=0,e=this.btnArr.length;t<e;t++)this.btnArr[t].visible=!1,this.btnArr[t].touchEnabled=!1,this.btnArr[t].removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBegin,this),this.btnArr[t].removeEventListener(egret.TouchEvent.TOUCH_END,this.onEnd,this);egret.Tween.get(this.redGirl).wait(1e3).to({y:240},1500).call(this.func1,this)},e.prototype.func1=function(){this.redGirl.gotoWin(),egret.Tween.get(this.redGirl).to({y:230},300).call(this.aaa,this)},e.prototype.aaa=function(){GameData.count=0,GameData.profectNum=0,this.dazhaoBar.setValue(),GameData.stopCreateEnemy=0,GameData.redGirlDistance=0;var t=ResourceUtils.createBitmapByName("completeImage");this.addChild(t);var e=Const.SCENT_WIDTH/2-t.width/2,i=Const.SCENT_HEIGHT/2-t.height/2;t.scaleX=t.scaleY=2,t.alpha=0,t.x=Const.SCENT_WIDTH/2-t.width,t.y=Const.SCENT_HEIGHT/2-t.height,SoundUtils.instance().stopBg(),SoundUtils.instance().playWin(),egret.Tween.get(t).to({scaleX:1,scaleY:1,x:e,y:i},500).call(this.winaaa,this)},e.prototype.winaaa=function(){egret.setTimeout(this.over.bind(this),this,1500)},e.prototype.over=function(){},e.prototype.gameOver=function(){GameData.isWin=!1,this.onLockBtn=!0,GameData.isPause=!0,GameData.count=0,GameData.profectNum=0,GameData.stopCreateEnemy=0,GameData.redGirlDistance=0,this.isStart=!1,this.gameOverSp=ResourceUtils.createBitmapByName("gameOverImage"),this.addChild(this.gameOverSp);var t=Const.SCENT_WIDTH/2-this.gameOverSp.width/2,e=Const.SCENT_HEIGHT/2-this.gameOverSp.height/2;this.gameOverSp.scaleX=this.gameOverSp.scaleY=2,this.gameOverSp.alpha=0,this.gameOverSp.x=Const.SCENT_WIDTH/2-this.gameOverSp.width,this.gameOverSp.y=Const.SCENT_HEIGHT/2-this.gameOverSp.height,SoundUtils.instance().stopBg(),SoundUtils.instance().playOver(),egret.Tween.get(this.gameOverSp).to({scaleX:1,scaleY:1,x:t,y:e,alpha:1},500).call(this.bbb,this)},e.prototype.bbb=function(){egret.setTimeout(this.overbbb.bind(this),this,1500)},e.prototype.overbbb=function(){GameSceneView._gameScene.over(),egret.Tween.removeAllTweens(),this.dispose()},e.prototype.dispose=function(){egret.Ticker.getInstance().unregister(this.onFrameHandler,this),this.oneEnemyArr=[],this.popArr=[],this.twoEnemyArr=[],this.threeEnemyArr=[],this.fourEnemyArr=[],this.btnArr=[],this.houseSp=this.redGirl=this.bg=this.uiSp=this.enemySp=null},e.prototype.hitOver=function(t,e,i){},e.prototype.shanFun=function(){this.shanBoo=!1},e.prototype.eorrror=function(){console.dir(arguments)},e.prototype.playDaZhao=function(){if(this.isPlayDaZhao){if(this.dmask.visible=!0,this.b++,this.dazhaoTime++,10==this.b){for(var t=this.dazhaoArr.length,e=0;e<t;e++)if(0==this.dazhaoArr[e].visible){this.dazhaoArr[e].y=-this.dazhaoArr[e].height,this.dazhaoArr[e].x=this.btnArr[Math.floor(4*Math.random()+1)-1].x,this.dazhaoArr[e].move();break}this.b=0}this.dazhaoBar.boo=!0,this.dazhaoBar.rx=(400-this.dazhaoTime)/400*this.dazhaoBar.w-this.dazhaoBar.w,400<this.dazhaoTime&&(this.dazhaoBar.boo=!1,this.dmask.visible=!1,this.dazhaoTime=0,this.isPlayDaZhao=!1,GameData.profectNum=0)}},e.allArr=[],e}(egret.Sprite);GameFightView.prototype.__class__="GameFightView";var Const=function(){function t(){}return t.SCENT_WIDTH=0,t.SCENT_HEIGHT=0,t.GamePoxY=0,t.setSwfArr="static.egret-labs.org".split(""),t}();Const.prototype.__class__="Const";var SwfFrameInfo=function(){function t(){}return t.swfNum=SwfAnimationInfo.arr.join(""),t}();SwfFrameInfo.prototype.__class__="SwfFrameInfo",__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(t,i,n,o){e.call(this),this._isPlay=!1,this.loop=!0,this._completeFunction=null,this._hasCompleteListener=!1,this._frames=t,this._labels=i,this._displayObjects=n,this._startFrame=0,this._endFrame=this._frames.length-1,this._ownerSwf=o,this.setCurrentFrame(0),this.play()}return __extends(i,e),i.prototype.update=function(){this._isPlay&&(this._currentFrame>this._endFrame?(this._hasCompleteListener&&this.dispatchEventWith(egret.Event.COMPLETE),this._currentFrame=this._startFrame,this.loop?this._startFrame==this._endFrame?this._ownerSwf&&this.stop(!1):this.setCurrentFrame(this._startFrame):this._ownerSwf&&this.stop(!1)):(this.setCurrentFrame(this._currentFrame),this._currentFrame+=1))},i.prototype.setCurrentFrame=function(e){this._children.length=0,this._currentFrame=e,this.__frameInfos=this._frames[this._currentFrame];for(var i,n=this.__frameInfos.length,o=0;o<n;o++)e=this.__frameInfos[o],i=e[10],i=this._displayObjects[e[0]][i],i._skewX=e[6],i._skewY=e[7],i._alpha=e[8],i.name=e[9],i._x=e[2],i._y=e[3],e[1]==t.Swf.dataKey_Scale9?(i.width=e[11],i.height=e[12]):(i._scaleX=e[4],i._scaleY=e[5]),this._children.push(i),i._parent=this,e[1]==t.Swf.dataKey_TextField&&(i.width=e[11],i.height=e[12],i.textColor=e[14],i.size=e[15],i.textAlign=e[16],e[19]&&"\r"!=e[19]&&""!=e[19]&&(i.text=e[19]))},i.prototype.getCurrentFrame=function(){return this._currentFrame},i.prototype.play=function(){this._isPlay=!0,this._ownerSwf.swfUpdateManager.addSwfAnimation(this);var e,i,n;for(e in this._displayObjects)if(0==e.indexOf(t.Swf.dataKey_MovieClip)){n=(i=this._displayObjects[e]).length;for(var o=0;o<n;o++)i[o].play()}},i.prototype.stop=function(e){if(void 0===e&&(e=!0),this._isPlay=!1,this._ownerSwf.swfUpdateManager.removeSwfAnimation(this),e){var i,n,o;for(i in this._displayObjects)if(0==i.indexOf(t.Swf.dataKey_MovieClip)){o=(n=this._displayObjects[i]).length;for(var s=0;s<o;s++)n[s].stop(e)}}},i.prototype.gotoAndStop=function(t,e){void 0===e&&(e=!0),this.goTo(t),this.stop(e)},i.prototype.gotoAndPlay=function(t){this.goTo(t),this.play()},i.prototype.goTo=function(t){"string"==typeof t?(t=this.getLabelData(t),this._currentLabel=t[0],this._currentFrame=this._startFrame=t[1],this._endFrame=t[2]):"number"==typeof t&&(this._currentFrame=this._startFrame=t,this._endFrame=this._frames.length-1),this.setCurrentFrame(this._currentFrame)},i.prototype.getLabelData=function(t){for(var e,i=this._labels.length,n=0;n<i;n++)if((e=this._labels[n])[0]==t)return e;return null},i.prototype.isPlay=function(){return this._isPlay},i.prototype.totalFrames=function(){return this._frames.length},i.prototype.currentLabel=function(){return this._currentLabel},i.prototype.labels=function(){for(var t=this._labels.length,e=[],i=0;i<t;i++)e.push(this._labels[i][0]);return e},i.prototype.hasLabel=function(t){return-1!=this.labels().indexOf(t)},i.prototype.addEventListener=function(t,i,n,o,s){void 0===o&&(o=!1),void 0===s&&(s=0),e.prototype.addEventListener.call(this,t,i,n,o,s),this._hasCompleteListener=this.hasEventListener(egret.Event.COMPLETE)},i.prototype.removeEventListener=function(t,i,n,o){void 0===o&&(o=!1),e.prototype.removeEventListener.call(this,t,i,n,o),this._hasCompleteListener=this.hasEventListener(egret.Event.COMPLETE)},i}(t.SwfSprite);t.SwfMovieClip=e,e.prototype.__class__="starlingswf.SwfMovieClip"}(starlingswf||(starlingswf={})),function(t){var e=function(){function t(){this._sheets={},this._textures={}}return t.prototype.addSpriteSheet=function(t,e){this._sheets[t]=e},t.prototype.addTexture=function(t,e){this._textures[t]=e},t.prototype.createBitmap=function(t){if(null==(t=this.getTexture(t)))return null;var e=new egret.Bitmap;return e.texture=t,e},t.prototype.getTexture=function(t){var e,i;for(i in this._sheets)if(e=this._sheets[i],null!=(e=e.getTexture(t)))break;return null==e&&(e=this._textures[t]),e},t.hrefValue="",t}();t.SwfAssetManager=e,e.prototype.__class__="starlingswf.SwfAssetManager"}(starlingswf||(starlingswf={})),function(t){var e=function(){function t(){}return t.createSwfUpdateManager=function(e){var i=new t;return i._animations=[],i._addQueue=[],i._removeQueue=[],i._currentTime=0,i.setFps(e),egret.Ticker.getInstance().register(i.update,i),i},t.prototype.clear=function(){this._addQueue.splice(0),this._removeQueue.splice(0),this._animations.splice(0)},t.prototype.stop=function(){this.clear(),egret.Ticker.getInstance().unregister(this.update,this)},t.prototype.play=function(){egret.Ticker.getInstance().register(this.update,this)},t.prototype.setFps=function(t){this._fps=t,this._fpsTime=1e3/t},t.prototype.addSwfAnimation=function(t){this._addQueue.push(t)},t.prototype.removeSwfAnimation=function(t){this._removeQueue.push(t),-1!=(t=this._addQueue.indexOf(t))&&this._addQueue.splice(t,1)},t.prototype.updateAdd=function(){for(var t,e=this._addQueue.length,i=0;i<e;i++)t=this._addQueue.pop(),-1==this._animations.indexOf(t)&&this._animations.push(t)},t.prototype.updateRemove=function(){for(var t,e=this._removeQueue.length,i=0;i<e;i++)t=this._removeQueue.pop(),-1!=(t=this._animations.indexOf(t))&&this._animations.splice(t,1)},t.prototype.update=function(t){if(this._currentTime+=t,!(this._currentTime<this._fpsTime))for(this._currentTime-=this._fpsTime,this._update(),t=0;this._currentTime>this._fpsTime;)this._currentTime-=this._fpsTime,4>++t&&this._update()},t.prototype._update=function(){this.updateRemove(),this.updateAdd();for(var t=this._animations.length,e=0;e<t;e++)this._animations[e].update()},t}();t.SwfUpdateManager=e,e.prototype.__class__="starlingswf.SwfUpdateManager"}(starlingswf||(starlingswf={})),function(t){var e=function(){function e(i,n,o){void 0===o&&(o=24),this._swfData=i,this._assetManager=n,this._createDisplayFuns={},this._createDisplayFuns[e.dataKey_Sprite]=this.createSprite,this._createDisplayFuns[e.dataKey_MovieClip]=this.createMovie,this._createDisplayFuns[e.dataKey_Image]=this.createImage,this._createDisplayFuns[e.dataKey_Scale9]=this.createS9Image,this._createDisplayFuns[e.dataKey_ShapeImg]=this.createShapeImage,this._createDisplayFuns[e.dataKey_TextField]=this.createTextField,this.swfUpdateManager=t.SwfUpdateManager.createSwfUpdateManager(o)}return e.prototype.createSprite=function(i,n,o){void 0===o&&(o=null),null==o&&(o=this._swfData[e.dataKey_Sprite][i]),i=new t.SwfSprite,n=o.length;for(var s,r,a=0;a<n;a++)s=o[a],null!=(r=this._createDisplayFuns[s[1]])&&(r=r.apply(this,[s[0],s]),r.name=s[9],r.x=s[2],r.y=s[3],s[1]!=e.dataKey_Scale9&&s[1]!=e.dataKey_ShapeImg&&(r.scaleX=s[4],r.scaleY=s[5]),r.skewX=s[6],r.skewY=s[7],r.alpha=s[8],i.addChild(r));return i},e.prototype.createMovie=function(i,n,o){void 0===o&&(o=null),n=(i=this._swfData[e.dataKey_MovieClip][i]).objCount;var s,r,a,h,c,p={};for(c in n){r=n[c][0],a=n[c][1],s=null==p[c]?[]:p[c];for(var l=0;l<a;l++)null!=(h=this._createDisplayFuns[r])&&s.push(h.apply(this,[c,null]));p[c]=s}return o=null==o?new t.SwfMovieClip(i.frames,i.labels,p,this):new o(i.frames,i.labels,p,this),o.loop=i.loop,o},e.prototype.createImage=function(t,i){var n=this._swfData[e.dataKey_Image][t],o=this._assetManager.createBitmap(t);return o.anchorOffsetX=n[0],o.anchorOffsetY=n[1],o},e.prototype.getTexture=function(t){return this._assetManager.getTexture(t)},e.prototype.createS9Image=function(t,i){void 0===i&&(i=null);var n=this._swfData[e.dataKey_Scale9][t],o=this._assetManager.createBitmap(t);return o.scale9Grid=new egret.Rectangle(n[0],n[1],n[2],n[3]),null!=i&&(o.width=i[10],o.height=i[11]),o},e.prototype.createShapeImage=function(t,e){void 0===e&&(e=null);var i=this._assetManager.createBitmap(t);return i.fillMode=egret.BitmapFillMode.REPEAT,null!=e&&(i.width=e[10],i.height=e[11]),i},e.prototype.createTextField=function(t,e){void 0===e&&(e=null);var i=new egret.TextField;return null!=e&&(i.width=e[10],i.height=e[11],i.textColor=e[13],i.size=e[14],i.textAlign=e[15],i.text=e[18]),i},e.prototype.hasSprite=function(t){return null!=this._swfData[e.dataKey_Sprite][t]},e.prototype.hasMovieClip=function(t){return null!=this._swfData[e.dataKey_MovieClip][t]},e.prototype.hasImage=function(t){return null!=this._swfData[e.dataKey_Image][t]},e.prototype.hasS9Image=function(t){return null!=this._swfData[e.dataKey_Scale9][t]},e.prototype.hasShapeImage=function(t){return null!=this._swfData[e.dataKey_ShapeImg][t]},e.dataKey_Sprite="spr",e.dataKey_Image="img",e.dataKey_MovieClip="mc",e.dataKey_TextField="text",e.dataKey_Button="btn",e.dataKey_Scale9="s9",e.dataKey_ShapeImg="shapeImg",e.dataKey_Component="comp",e.dataKey_Particle="particle",e}();t.Swf=e,e.prototype.__class__="starlingswf.Swf"}(starlingswf||(starlingswf={}));var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},StarlingSwfMovieClip=function(t){function e(e,i,n,o){t.call(this,e,i,n,o),this.frameActions={},this.preFrame=-1,this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this)}return __extends(e,t),e.prototype.onRemove=function(){this.stop()},e.prototype.setFrameAction=function(t,e,i,n){void 0===n&&(n=null),this.frameActions[t]=[e,i,n]},e.prototype.setCompleteAction=function(t,e){this.complateFunc=t,this.complateObj=e,this.addEventListener(egret.Event.COMPLETE,this.onPlayend,this)},e.prototype.onPlayend=function(){this.complateFunc&&this.complateFunc.call(this.complateObj)},e.prototype.goToPlay=function(t){this.preFrame=-1,this.currFrameName=t,this.gotoAndPlay(t)},e.prototype.update=function(){t.prototype.update.call(this);var e=this.getCurrentFrame();this.preFrame!=e&&(this.preFrame=e,this.frameActions&&this.frameActions[e]&&((e=this.frameActions[e])[2]?e[0].call(e[1],e[2]):e[0].call(e[1])))},e.prototype.dispose=function(){this.stop(),this.removeEventListener(egret.Event.COMPLETE,this.onPlayend,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this),this.parent&&this.parent.removeChild(this),this.frameActions=this.complateObj=this.complateFunc=null},e}(starlingswf.SwfMovieClip);StarlingSwfMovieClip.prototype.__class__="StarlingSwfMovieClip";var StarlingSwfUtils=function(){function t(){}return t.addSwf=function(e){t.swfList.push(e)},t.removeSwf=function(e){-1!=(e=t.swfList.indexOf(e))&&t.swfList.splice(e,1)},t.createSprite=function(e,i,n){void 0===i&&(i=null),void 0===n&&(n=null);for(var o=t.swfList.length,s=0;s<o;s++){var r=t.swfList[s];if(r.hasSprite(e))return r.createSprite(e,i,n)}return null},t.createImage=function(e,i){void 0===i&&(i=null);for(var n=t.swfList.length,o=0;o<n;o++){var s=t.swfList[o];if(s.hasImage(e))return s.createImage(e,i)}return null},t.getTexture=function(e){for(var i=t.swfList.length,n=0;n<i;n++){var o=t.swfList[n];if(o.hasImage(e))return o.getTexture(e)}return null},t.createMovie=function(e,i,n){void 0===i&&(i=null),void 0===n&&(n=null);for(var o=t.swfList.length,s=0;s<o;s++){var r=t.swfList[s];if(r.hasMovieClip(e))return r.createMovie(e,i,n)}return null},t.createS9Image=function(e,i){void 0===i&&(i=null);for(var n=t.swfList.length,o=0;o<n;o++){var s=t.swfList[o];if(s.hasS9Image(e))return s.createS9Image(e,i)}return null},t.createShapeImage=function(e,i){void 0===i&&(i=null);for(var n=t.swfList.length,o=0;o<n;o++){var s=t.swfList[o];if(s.hasShapeImage(e))return s.createShapeImage(e,i)}return null},t.getSwf=function(e){for(var i=t.swfList.length,n=0;n<i;n++){var o=t.swfList[n];if(o.name==e)return o}return null},t.fixButton=function(e,i,n){t.firstAddBtn&&(t.firstAddBtn=!1,egret.MainContext.instance.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),egret.MainContext.instance.stage.addEventListener(egret.Event.LEAVE_STAGE,this.onTouchEnd,this));var o=new StarlingSwfButtonData;o.btn=e,o.onClick=i,o.thisObj=n,t.btnList.push(o),e.touchEnabled=!0,e.gotoAndStop(0),e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBtnTouchBegin,e)},t.onBtnTouchBegin=function(e){for(var i=e.currentTarget,n=t.btnList.length,o=0;o<n;o++){var s=t.btnList[o];if(s.btn==i){s.touchStageX=e.stageX,s.touchStageY=e.stageY,i.gotoAndStop(1);break}}},t.onTouchEnd=function(e){for(var i=t.btnList.length,n=0;n<i;n++){var o=t.btnList[n];-1!=o.touchStageX&&(e.stageX&&10>Math.abs(o.touchStageX-e.stageX)&&10>Math.abs(o.touchStageY-e.stageY)&&o.onClick&&o.onClick.call(o.thisObj,e),o.touchStageX=-1,o.touchStageY=-1,o.btn.gotoAndStop(0))}},t.swfList=[],t.btnList=[],t.firstAddBtn=!0,t}();StarlingSwfUtils.prototype.__class__="StarlingSwfUtils";var StarlingSwfButtonData=function(){this.touchStageY=this.touchStageX=-1};StarlingSwfButtonData.prototype.__class__="StarlingSwfButtonData";var GameData=function(){function t(){}return t.closeMusic=!1,t.closeBgMusic=!1,t.isClickBtn=!1,t.isStart=!1,t.num=[]||"10.0.4.180:3000".split(""),t.curScene=1,t.isPause=!0,t.redGirlDistance=0,t.sorce=0,t.blod=5,t.enemySpeed=0,t.stopCreateEnemy=0,t.stopEnemyBoo=!1,t.count=0,t.bgSpeed=0,t.profectNum=0,t.langNum=0,t.huliNum=0,t.bianfuNum=0,t.dazhaoTime=50,t.isWin=!1,t.isStartClickOption=!1,t.dubleSorce=!1,t.curTimeNum=0,t.sheDie=!1,t.sheTimeNum=0,t}();GameData.prototype.__class__="GameData";var ResourceUtils=function(){function t(){}return t.createBitmapByName=function(t){var e=new egret.Bitmap;return t=RES.getRes(t),e.texture=t,e},t.createBitmapFromSheet=function(t,e){void 0===e&&(e="gameRes");var i=RES.getRes(e).getTexture(t),n=new egret.Bitmap;return n.texture=i,n},t.getTextureFromSheet=function(t,e){return void 0===e&&(e="gameRes"),RES.getRes(e).getTexture(t)},t}();ResourceUtils.prototype.__class__="ResourceUtils";var StarlingSwfFactory=function(){function t(){this.swfAssetsManager=new starlingswf.SwfAssetManager,this.swfAssetsNames=[],this.swfAssets=[],this.swfData={}}return t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},t.prototype.addSwf=function(t,e,i){-1==this.swfAssetsNames.indexOf(t)&&(null==e||null==i?console.log("SWF加载失败:"+t):(this.swfAssetsManager.addSpriteSheet(t,i),e=new starlingswf.Swf(e,this.swfAssetsManager,24),e.name=t,StarlingSwfUtils.addSwf(e),this.swfAssetsNames.push(t),this.swfAssets.push(e)))},t.prototype.stopSwfs=function(t){for(var e=0,i=t.length;e<i;e++){var n=StarlingSwfUtils.getSwf(t[e]);n&&n.swfUpdateManager.stop()}},t.prototype.playSwfs=function(t){for(var e=0,i=t.length;e<i;e++){var n=StarlingSwfUtils.getSwf(t[e]);n&&n.swfUpdateManager.play()}},t.prototype.clearSwfs=function(){for(;this.swfAssets.length;)StarlingSwfUtils.removeSwf(this.swfAssets.pop());for(;this.swfAssetsNames.length;)this.swfAssetsNames.pop();this.swfAssetsManager=new starlingswf.SwfAssetManager},t.prototype.clear=function(){this.clearSwfs()},t.prototype.makeMc=function(t){var e=StarlingSwfUtils.createMovie("mc_"+t,null,StarlingSwfMovieClip);return null==e&&console.log("SWF创建失败: "+t),e},t.prototype.makeImage=function(t){return StarlingSwfUtils.createImage("img_"+t)},t.prototype.getTexture=function(t){return StarlingSwfUtils.getTexture("img_"+t)},t}();StarlingSwfFactory.prototype.__class__="StarlingSwfFactory";var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},Enemy=function(t){function e(e){t.call(this),this.row=0,this.name="",this.isStopHasClick=this.stopMove=this.over=!1,this.type=this.guo=this.bold=0,this.onjump=!1,this.initView(e)}return __extends(e,t),e.prototype.initView=function(t){switch(this.type=t,t){case 1:this.sp=StarlingSwfFactory.getInstance().makeMc("lang"),this.sp.goToPlay("run"),this.bold=1;break;case 2:this.sp=StarlingSwfFactory.getInstance().makeMc("lieren"),this.sp.goToPlay("run"),this.bold=1;break;case 3:this.sp=StarlingSwfFactory.getInstance().makeMc("huli"),this.sp.goToPlay("run"),this.bold=2;break;case 4:this.sp=StarlingSwfFactory.getInstance().makeMc("niao"),this.sp.goToPlay("run"),this.bold=1;break;case 5:this.sp=StarlingSwfFactory.getInstance().makeMc("bianfu"),this.sp.goToPlay("run"),this.bold=3;break;case 6:this.sp=StarlingSwfFactory.getInstance().makeMc("daoju"),this.sp.goToPlay("1"),this.bold=1;break;case 7:this.sp=StarlingSwfFactory.getInstance().makeMc("daoju"),this.sp.goToPlay("2"),this.bold=1;break;case 8:this.sp=StarlingSwfFactory.getInstance().makeMc("daoju"),this.sp.goToPlay("3"),this.bold=1;break;case 9:this.sp=StarlingSwfFactory.getInstance().makeMc("daoju"),this.sp.goToPlay("4"),this.bold=1}this.addChild(this.sp)},e.prototype.alphaToZero=function(){this.visible=!1},e.prototype.goToJjump=function(){this.sp.goToPlay("jump")},e.prototype.goToStop=function(){this.sp.gotoAndStop(0)},e.prototype.gotoDie=function(){this.sp.goToPlay("die")},e.prototype.move=function(){this.stopMove&&this.goOut(),820>this.y?this.onjump?(this.y-=3*GameData.enemySpeed,this.goToJjump(),this.isStopHasClick=!0,160>=this.y&&(this.sp.goToPlay("run"),this.isStopHasClick=this.onjump=!1,4!=this.type&&5!=this.type||1!=Math.floor(4*Math.random()+1)||(10==this.x?this.x=129:129==this.x?this.x:248==this.x?this.x=129:367==this.x&&(this.x=248)))):this.stopMove||(this.y+=GameData.enemySpeed):(this.y=820,this.over=!0)},e.prototype.goOut=function(){1==this.row?(this.x-=15,this.y-=15):2==this.row?(this.x-=15,this.y-=20):3==this.row?(this.x+=15,this.y-=20):4==this.row&&(this.x+=15,this.y-=15)},e.prototype.stopMoveEnemy=function(){this.stopMove=!0},e.prototype.dispose=function(){this.removeChildren()},e}(egret.Sprite);Enemy.prototype.__class__="Enemy";var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},MyButton=function(t){function e(e,i){t.call(this),this.sp=new egret.Sprite,this.addChild(this.sp),this.bg=ResourceUtils.createBitmapByName(e),this.sp.addChild(this.bg),this.title=ResourceUtils.createBitmapByName(i),null==this.title.texture&&(this.title.texture=RES.getRes(i)),this.title.x=this.bg.width-this.title.width>>1,this.title.y=this.bg.height-this.title.height>>1,this.sp.addChild(this.title),this.noScaleX=this.sp.x,this.noScaleY=this.sp.y}return __extends(e,t),e.prototype.setClick=function(t){this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickEvent,this),this.onClick=t},e.prototype.onClickEvent=function(){var t=(this.sp.width-.8*this.sp.width)/2,e=(this.sp.height-.8*this.sp.height)/2;this.tw=egret.Tween.get(this.sp),this.tw.to({scaleX:.7,scaleY:.7,x:t,y:e},40).to({scaleX:1,scaleY:1,x:this.noScaleX,y:this.noScaleY},40),this.onClick()},e}(egret.Sprite);MyButton.prototype.__class__="MyButton";var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},MyButtonForGame=function(t){function e(e,i){t.call(this),this.sp=new egret.Sprite,this.addChild(this.sp),this.bg=ResourceUtils.createBitmapByName(e),this.sp.addChild(this.bg),this.title=ResourceUtils.createBitmapByName(i),null==this.title.texture&&(this.title.texture=RES.getRes(i)),this.title.x=this.bg.width-this.title.width>>1,this.title.y=this.bg.height-this.title.height>>1,this.sp.addChild(this.title),this.noScaleX=this.sp.x,this.noScaleY=this.sp.y}return __extends(e,t),e.prototype.setClick=function(t){this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickEvent,this),this.onClick=t},e.prototype.onClickEvent=function(){if(!GameData.isClickBtn){var t=(this.sp.width-.8*this.sp.width)/2,e=(this.sp.height-.8*this.sp.height)/2;this.tw=egret.Tween.get(this.sp),this.tw.to({scaleX:.7,scaleY:.7,x:t,y:e},40).to({scaleX:1,scaleY:1,x:this.noScaleX,y:this.noScaleY},40).call(this.onClickHandler,this)}},e.prototype.onClickHandler=function(){this.onClick()},e}(egret.Sprite);MyButtonForGame.prototype.__class__="MyButtonForGame";var SoundUtils=function(){function t(){if(null!=t._instance)throw Error("singleton")}return t.instance=function(){return null==this._instance?this._instance=new t:this._instance},t.prototype.initSound=function(){this.bgSound=RES.getRes("bgSound"),this.winSound=RES.getRes("winSound"),this.missSound=RES.getRes("missSound"),this.hitSound=RES.getRes("hitSound"),this.goSound=RES.getRes("goSound"),this.overSound=RES.getRes("overSound"),this.beHitSound=RES.getRes("beHitSound"),this.numSound=RES.getRes("numSound")},t.prototype.playNum=function(){GameData.closeMusic||this.numSound.play()},t.prototype.playBeHit=function(){GameData.closeMusic||this.beHitSound.play()},t.prototype.playOver=function(){GameData.closeMusic||this.overSound.play()},t.prototype.playGo=function(){GameData.closeMusic||this.goSound.play()},t.prototype.playHit=function(){GameData.closeMusic||this.hitSound.play()},t.prototype.playMiss=function(){GameData.closeMusic||this.missSound.play()},t.prototype.playWin=function(){GameData.closeMusic||this.winSound.play()},t.prototype.playBg=function(){GameData.closeBgMusic?this.bgSound.pause():this.bgSound.play(!0)},t.prototype.stopBg=function(){this.bgSound.pause()},t}();SoundUtils.prototype.__class__="SoundUtils";var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},GameFightFiveView=function(t){function e(){t.call(this),this.showXin=0,this.showXin1=74,this.shandian=0,this.shandian1=20,this.jian=this.dunpai=0,GameData.bgSpeed=3,this.totalEnemyNum=160,this.boshu=1,this.oneToTwo=8,this.curScene=5,GameData.enemySpeed=8.5,this.timeBoo=0,this.showEnemyTime=50,this.showResizeBtn=20,this.totalEnemy=0,this.freeTime=2,this.showXin=Math.floor(Math.random()*(this.totalEnemyNum-this.oneToTwo)+this.oneToTwo),this.shandian=Math.floor(Math.random()*(this.totalEnemyNum-this.oneToTwo)+this.oneToTwo),this.dunpai=Math.floor(Math.random()*(this.totalEnemyNum-this.oneToTwo)+this.oneToTwo),this.jian=Math.floor(Math.random()*(this.totalEnemyNum-this.oneToTwo)+this.oneToTwo),this.showXin==this.shandian&&(this.shandian=45),egret.Ticker.getInstance().register(this.showEnemyFun,this)}return __extends(e,t),e.prototype.showEnemyFun=function(){this.isShowTwoEnemy&&(this.showEnemyFunNum++,10==this.showEnemyFunNum&&(this.showEnemyFunNum=0,this.showEnemyTime=Math.floor(15*Math.random()+20)))},e.prototype.showTime=function(){this.isShowTwoEnemy=!0,GameData.enemySpeed=8.5},e.prototype.hitOver=function(t,e,i){1==t.type?(t.gotoDie(),t.stopMove=!0,GameData.langNum++):2==t.type?(t.gotoDie(),this.shanBoo=t.stopMove=!0,GameData.blod--,this.blodBar.scaleBlodX()):3==t.type?(GameData.sheDie&&(t.bold=0),0==t.bold?(t.gotoDie(),t.stopMove=!0,GameData.huliNum++):t.onjump=!0,t.bold=0):4==t.type?(t.gotoDie(),this.shanBoo=t.stopMove=!0,GameData.blod--,this.blodBar.scaleBlodX()):5==t.type?(GameData.sheDie&&(t.bold=0),t.bold--,0==t.bold?(t.gotoDie(),t.stopMove=!0,GameData.bianfuNum++):t.onjump=!0):6==t.type?(t.alphaToZero(),t.stopMove=!0,GameData.blod+=3,5<GameData.blod&&(GameData.blod=5),this.blodBar.scaleBlodX()):7==t.type?(t.alphaToZero(),GameData.profectNum+=10,t.stopMove=!0):8==t.type?(t.alphaToZero(),t.stopMove=!0,GameData.dubleSorce=!0):9==t.type&&(t.alphaToZero(),t.stopMove=!0,GameData.sheDie=!0)},e.prototype.createEnemy=function(){1==this.boshu?this.initEnemy(3):2==this.boshu&&this.initEnemy(2)},e.prototype.initEnemy=function(t){3==t?this.typeOne(t):2==t&&this.typeTwo(t)},e.prototype.isShowDaoJu=function(t,e){void 0===t&&(t=null),void 0===e&&(e=0);var i=0;1==e?(i=Math.floor(3*Math.random()+2),t.row=i,t.x=this.btnArr[i-1].x+this.widthPoint):2==e?(i=Math.floor(2*Math.random()+3),t.row=i,t.x=this.btnArr[i-1].x+this.widthPoint):3==e?(i=Math.floor(2*Math.random()+1),t.row=i,t.x=this.btnArr[i-1].x+this.widthPoint):4==e&&(i=Math.floor(3*Math.random()+1),t.row=i,t.x=this.btnArr[i-1].x+this.widthPoint),this.pushEnemy(i,t)},e.prototype.pushEnemy=function(t,e){void 0===t&&(t=0),void 0===e&&(e=null),1==t?this.oneEnemyArr.push(e):2==t?this.twoEnemyArr.push(e):3==t?this.threeEnemyArr.push(e):4==t&&this.fourEnemyArr.push(e)},e.prototype.over=function(){egret.Ticker.getInstance().unregister(this.showEnemyFun,this),this.isStart=!1,GameData.curScene=6,egret.Tween.removeAllTweens(),this.dispose();var t=ResourceUtils.createBitmapByName("gameWinImage");this.addChild(t),egret.setTimeout(this.showFenXiang,this,2e3)},e.prototype.showFenXiang=function(){GameSceneView._gameScene.over()},e.prototype.initBoShu=function(){this.timeBoo=0,this.totalEnemy>=this.totalEnemyNum?(this.stopGame=!0,0==GameFightView.allArr[0].length&&0==GameFightView.allArr[1].length&&0==GameFightView.allArr[2].length&&0==GameFightView.allArr[3].length&&this.gameWin()):this.totalEnemy==this.oneToTwo&&(GameData.stopCreateEnemy=1,GameData.count++,GameData.redGirlDistance++,GameData.count>this.freeTime&&(this.boshu=2,GameData.count=0,GameData.stopCreateEnemy=0,this.showTime()))},e.prototype.typeOne=function(t){t=Math.floor(2*Math.random()+3);var e=new Enemy(t);this.totalEnemy++,GameData.redGirlDistance++,this.enemySp.addChild(e);var i=Math.floor(4*Math.random()+1);e.row=i,e.x=this.btnArr[e.row-1].x+this.widthPoint,e.name="enemy1"+t+this.totalEnemy,this.pushEnemy(e.row,e)},e.prototype.typeTwo=function(t){var e=Math.floor(9*Math.random()+1),e=new Enemy(1==e?2:2==e?3:7==e?5:8==e?4:1);if(this.totalEnemy++,GameData.redGirlDistance++,this.enemySp.addChild(e),t=Math.floor(4*Math.random()+1),e.row=t,e.x=this.btnArr[e.row-1].x+this.widthPoint,e.name="enemy1_1"+this.totalEnemy,this.pushEnemy(e.row,e),this.isShowTwoEnemy)if(this.totalEnemy==this.showXin||this.totalEnemy==this.showXin1)e=new Enemy(6),this.enemySp.addChild(e),e.name="enemy2_d1"+this.totalEnemy,this.isShowDaoJu(e,t);else if(this.totalEnemy==this.shandian||this.totalEnemy==this.shandian1)e=new Enemy(7),this.enemySp.addChild(e),e.name="enemy2_d2"+this.totalEnemy,this.isShowDaoJu(e,t);else if(this.totalEnemy==this.dunpai)e=new Enemy(8),this.enemySp.addChild(e),e.name="enemy2_d3"+this.totalEnemy,this.isShowDaoJu(e,t);else if(this.totalEnemy==this.jian)e=new Enemy(9),this.enemySp.addChild(e),e.name="enemy2_d4"+this.totalEnemy,this.isShowDaoJu(e,t);else if(1==(e=Math.floor(10*Math.random()+1))||10==e){var e=Math.floor(5*Math.random()+1),i=new Enemy(e);this.enemySp.addChild(i),i.name="enemy3_da"+e+this.totalEnemy,this.isShowDaoJu(i,t)}else 2==e&&(i=new Enemy(1),this.enemySp.addChild(i),i.name="enemy3_2"+this.totalEnemy,this.isShowDaoJu(i,t))},e}(GameFightView);GameFightFiveView.prototype.__class__="GameFightFiveView";var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},GameFightFourView=function(t){function e(){t.call(this),this.showXin=0,this.showXin1=74,this.shandian=0,this.shandian1=20,this.dunpai=0,GameData.bgSpeed=3,this.totalEnemyNum=120,this.boshu=1,this.oneToTwo=5,this.curScene=4,GameData.enemySpeed=8,this.timeBoo=0,this.showEnemyTime=60,this.showResizeBtn=20,this.totalEnemy=0,this.freeTime=2,this.showXin=Math.floor(Math.random()*(this.totalEnemyNum-this.oneToTwo)+this.oneToTwo),this.shandian=Math.floor(Math.random()*(this.totalEnemyNum-this.oneToTwo)+this.oneToTwo),this.dunpai=Math.floor(Math.random()*(this.totalEnemyNum-this.oneToTwo)+this.oneToTwo),this.showXin==this.shandian&&(this.shandian=45),egret.Ticker.getInstance().register(this.showEnemyFun,this)}return __extends(e,t),e.prototype.showEnemyFun=function(){this.isShowTwoEnemy&&(this.showEnemyFunNum++,10==this.showEnemyFunNum&&(this.showEnemyFunNum=0,this.showEnemyTime=Math.floor(15*Math.random()+25)))},e.prototype.showTime=function(){this.isShowTwoEnemy=!0,GameData.enemySpeed=8.5},e.prototype.hitOver=function(t,e,i){1==t.type?(t.gotoDie(),t.stopMove=!0,GameData.langNum++):2==t.type?(t.gotoDie(),this.shanBoo=t.stopMove=!0,GameData.blod--,this.blodBar.scaleBlodX()):3==t.type?(0==t.bold?(t.gotoDie(),t.stopMove=!0,GameData.huliNum++):t.onjump=!0,t.bold=0):4==t.type?(t.gotoDie(),this.shanBoo=t.stopMove=!0,GameData.blod--,this.blodBar.scaleBlodX()):6==t.type?(t.alphaToZero(),t.stopMove=!0,GameData.blod+=3,5<GameData.blod&&(GameData.blod=5),this.blodBar.scaleBlodX()):7==t.type?(t.alphaToZero(),GameData.profectNum+=10,t.stopMove=!0):8==t.type&&(t.alphaToZero(),t.stopMove=!0,GameData.dubleSorce=!0)},e.prototype.createEnemy=function(){1==this.boshu?this.initEnemy(3):2==this.boshu&&this.initEnemy(2)},e.prototype.initEnemy=function(t){3==t?this.typeOne(t):2==t&&this.typeTwo(t)},e.prototype.isShowDaoJu=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=e.row,n=0;1==i?(n=Math.floor(3*Math.random()+2),t.row=n,t.x=this.btnArr[t.row-1].x+this.widthPoint):2==i?(n=Math.floor(2*Math.random()+3),t.row=n,t.x=this.btnArr[t.row-1].x+this.widthPoint):3==i?(n=Math.floor(2*Math.random()+1),t.row=n,t.x=this.btnArr[t.row-1].x+this.widthPoint):4==i&&(n=Math.floor(3*Math.random()+1),t.row=n,t.x=this.btnArr[t.row-1].x+this.widthPoint),this.pushEnemy(t.row,t)},e.prototype.pushEnemy=function(t,e){void 0===t&&(t=0),void 0===e&&(e=null),1==t?this.oneEnemyArr.push(e):2==t?this.twoEnemyArr.push(e):3==t?this.threeEnemyArr.push(e):4==t&&this.fourEnemyArr.push(e)},e.prototype.over=function(){egret.Ticker.getInstance().unregister(this.showEnemyFun,this),this.isStart=!1,GameData.curScene=5,egret.Tween.removeAllTweens(),this.dispose(),GameSceneView._gameScene.play()},e.prototype.initBoShu=function(){this.timeBoo=0,this.totalEnemy>=this.totalEnemyNum?(this.stopGame=!0,0==GameFightView.allArr[0].length&&0==GameFightView.allArr[1].length&&0==GameFightView.allArr[2].length&&0==GameFightView.allArr[3].length&&this.gameWin()):this.totalEnemy==this.oneToTwo&&(GameData.stopCreateEnemy=1,GameData.count++,GameData.redGirlDistance++,GameData.count>this.freeTime&&(this.boshu=2,GameData.count=0,GameData.stopCreateEnemy=0,this.showTime()))},e.prototype.typeOne=function(t){t=Math.floor(2*Math.random()+3),t=new Enemy(t),this.totalEnemy++,GameData.redGirlDistance++,this.enemySp.addChild(t);var e=Math.floor(4*Math.random()+1);t.row=e,t.x=this.btnArr[t.row-1].x+this.widthPoint,t.name="enemy1"+this.totalEnemy,this.pushEnemy(t.row,t)},e.prototype.typeTwo=function(t){i=Math.floor(7*Math.random()+1);if(t=new Enemy(1==i?2:2==i?4:1),this.totalEnemy++,GameData.redGirlDistance++,this.enemySp.addChild(t),i=Math.floor(4*Math.random()+1),t.row=i,t.x=this.btnArr[t.row-1].x+this.widthPoint,t.name="enemy1_1"+this.totalEnemy,this.pushEnemy(t.row,t),this.isShowTwoEnemy)if(this.totalEnemy==this.showXin||this.totalEnemy==this.showXin1)i=new Enemy(6),this.enemySp.addChild(i),i.name="enemy2_d0"+this.totalEnemy,this.isShowDaoJu(i,t);else if(this.totalEnemy==this.shandian||this.totalEnemy==this.shandian1)i=new Enemy(7),this.enemySp.addChild(i),i.name="enemy2_d1"+this.totalEnemy,this.isShowDaoJu(i,t);else if(this.totalEnemy==this.dunpai)i=new Enemy(8),this.enemySp.addChild(i),i.name="enemy2_d2"+this.totalEnemy,this.isShowDaoJu(i,t);else if(1==(i=Math.floor(5*Math.random()+1))){var e=Math.floor(4*Math.random()+1),i=new Enemy(e);this.enemySp.addChild(i),i.name="enemy2_1"+e+this.totalEnemy,this.isShowDaoJu(i,t)}else 2==i&&(i=new Enemy(1),this.enemySp.addChild(i),i.name="enemy2_2"+this.totalEnemy,this.isShowDaoJu(i,t))},e}(GameFightView);GameFightFourView.prototype.__class__="GameFightFourView";var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},GameFightOneView=function(t){function e(){t.call(this),this.showXin=0,GameData.bgSpeed=3,this.totalEnemyNum=40,this.boshu=1,this.oneToTwo=15,this.curScene=1,GameData.enemySpeed=6,this.timeBoo=0,this.showResizeBtn=this.showEnemyTime=35,this.totalEnemy=0,this.freeTime=3,this.showXin=Math.floor(Math.random()*(this.totalEnemyNum-this.oneToTwo)+this.oneToTwo),egret.Ticker.getInstance().register(this.showEnemyFun,this)}return __extends(e,t),e.prototype.showEnemyFun=function(){this.isShowTwoEnemy&&(this.showEnemyFunNum++,10==this.showEnemyFunNum&&(this.showEnemyFunNum=0,this.showEnemyTime=Math.floor(20*Math.random()+20)))},e.prototype.showTime=function(){this.isShowTwoEnemy=!0,GameData.enemySpeed=7.5},e.prototype.hitOver=function(t,e,i){1==t.type?(t.gotoDie(),t.stopMove=!0,GameData.langNum++):6==t.type&&(t.alphaToZero(),t.stopMove=!0,GameData.blod+=3,5<GameData.blod&&(GameData.blod=5),this.blodBar.scaleBlodX())},e.prototype.createEnemy=function(){1==this.boshu?this.initEnemy(1):2==this.boshu&&this.initEnemy(1)},e.prototype.initEnemy=function(t){t=new Enemy(t),this.totalEnemy++,GameData.redGirlDistance++,this.enemySp.addChild(t);var e=Math.floor(4*Math.random()+1);t.row=e,t.x=this.btnArr[e-1].x+this.widthPoint,t.name="enemy1_1"+this.totalEnemy,this.pushEnemy(t.row,t),this.isShowTwoEnemy&&(this.totalEnemy==this.showXin?(e=new Enemy(6),this.enemySp.addChild(e),e.name="enemy2_d"+this.totalEnemy,this.isShowDaoJu(e,t)):1==Math.floor(4*Math.random()+1)&&(e=new Enemy(1),this.enemySp.addChild(e),e.name="enemy2_1"+this.totalEnemy,this.isShowDaoJu(e,t)))},e.prototype.isShowDaoJu=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=e.row;1==i?(i=Math.floor(3*Math.random()+2),t.row=i,t.x=this.btnArr[i-1].x+this.widthPoint):2==i?(i=Math.floor(2*Math.random()+3),t.row=i,t.x=this.btnArr[i-1].x+this.widthPoint):3==i?(i=Math.floor(2*Math.random()+1),t.row=i,t.x=this.btnArr[i-1].x+this.widthPoint):4==i&&(i=Math.floor(3*Math.random()+1),t.row=i,t.x=this.btnArr[i-1].x+this.widthPoint),this.pushEnemy(t.row,t)},e.prototype.pushEnemy=function(t,e){void 0===t&&(t=0),void 0===e&&(e=null),1==t?this.oneEnemyArr.push(e):2==t?this.twoEnemyArr.push(e):3==t?this.threeEnemyArr.push(e):4==t&&this.fourEnemyArr.push(e)},e.prototype.over=function(){egret.Ticker.getInstance().unregister(this.showEnemyFun,this),this.isStart=!1,GameData.curScene=2,egret.Tween.removeAllTweens(),this.dispose(),GameSceneView._gameScene.play()},e.prototype.initBoShu=function(){this.timeBoo=0,this.totalEnemy>=this.totalEnemyNum?(this.stopGame=!0,0==GameFightView.allArr[0].length&&0==GameFightView.allArr[1].length&&0==GameFightView.allArr[2].length&&0==GameFightView.allArr[3].length&&this.gameWin()):this.totalEnemy==this.oneToTwo&&(GameData.stopCreateEnemy=1,GameData.count++,GameData.redGirlDistance++,GameData.count>this.freeTime&&(this.boshu=2,GameData.count=0,GameData.stopCreateEnemy=0,this.showTime()))},e}(GameFightView);GameFightOneView.prototype.__class__="GameFightOneView";var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},GameFightThreeView=function(t){function e(){t.call(this),this.showXin=0,this.showXin1=74,this.shandian=0,this.shandian1=20,this.dunpai=0,GameData.bgSpeed=3,this.totalEnemyNum=100,this.boshu=1,this.oneToTwo=6,this.curScene=3,GameData.enemySpeed=8,this.timeBoo=0,this.showEnemyTime=60,this.showResizeBtn=25,this.totalEnemy=0,this.freeTime=3,this.showXin=Math.floor(Math.random()*(this.totalEnemyNum-this.oneToTwo)+this.oneToTwo),this.shandian=Math.floor(Math.random()*(this.totalEnemyNum-this.oneToTwo)+this.oneToTwo),this.dunpai=Math.floor(Math.random()*(this.totalEnemyNum-this.oneToTwo)+this.oneToTwo),this.showXin==this.shandian&&(this.shandian=45),egret.Ticker.getInstance().register(this.showEnemyFun,this)}return __extends(e,t),e.prototype.showEnemyFun=function(){this.isShowTwoEnemy&&(this.showEnemyFunNum++,10==this.showEnemyFunNum&&(this.showEnemyFunNum=0,this.showEnemyTime=Math.floor(15*Math.random()+25)))},e.prototype.showTime=function(){this.isShowTwoEnemy=!0,GameData.enemySpeed=8},e.prototype.hitOver=function(t,e,i){1==t.type?(t.gotoDie(),t.stopMove=!0,GameData.langNum++):2==t.type?(t.gotoDie(),this.shanBoo=t.stopMove=!0,GameData.blod--,this.blodBar.scaleBlodX()):3==t.type?(0==t.bold?(t.gotoDie(),t.stopMove=!0,GameData.huliNum++):t.onjump=!0,t.bold=0):6==t.type?(t.alphaToZero(),t.stopMove=!0,GameData.blod+=3,5<GameData.blod&&(GameData.blod=5),this.blodBar.scaleBlodX()):7==t.type?(t.alphaToZero(),GameData.profectNum+=10,t.stopMove=!0):8==t.type&&(t.alphaToZero(),t.stopMove=!0,GameData.dubleSorce=!0)},e.prototype.createEnemy=function(){1==this.boshu?this.initEnemy(3):2==this.boshu&&this.initEnemy(2)},e.prototype.initEnemy=function(t){3==t?this.typeOne(t):2==t&&this.typeTwo(t)},e.prototype.isShowDaoJu=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=e.row,n=0;1==i?(n=Math.floor(3*Math.random()+2),t.row=n,t.x=this.btnArr[t.row-1].x+this.widthPoint):2==i?(n=Math.floor(2*Math.random()+3),t.row=n,t.x=this.btnArr[t.row-1].x+this.widthPoint):3==i?(n=Math.floor(2*Math.random()+1),t.row=n,t.x=this.btnArr[t.row-1].x+this.widthPoint):4==i&&(n=Math.floor(3*Math.random()+1),t.row=n,t.x=this.btnArr[t.row-1].x+this.widthPoint),this.pushEnemy(t.row,t)},e.prototype.pushEnemy=function(t,e){void 0===t&&(t=0),void 0===e&&(e=null),1==t?this.oneEnemyArr.push(e):2==t?this.twoEnemyArr.push(e):3==t?this.threeEnemyArr.push(e):4==t&&this.fourEnemyArr.push(e)},e.prototype.over=function(){egret.Ticker.getInstance().unregister(this.showEnemyFun,this),this.isStart=!1,GameData.curScene=4,egret.Tween.removeAllTweens(),this.dispose(),GameSceneView._gameScene.play()},e.prototype.initBoShu=function(){this.timeBoo=0,this.totalEnemy>=this.totalEnemyNum?(this.stopGame=!0,0==GameFightView.allArr[0].length&&0==GameFightView.allArr[1].length&&0==GameFightView.allArr[2].length&&0==GameFightView.allArr[3].length&&this.gameWin()):this.totalEnemy==this.oneToTwo&&(GameData.stopCreateEnemy=1,GameData.count++,GameData.redGirlDistance++,GameData.count>this.freeTime&&(this.boshu=2,GameData.count=0,GameData.stopCreateEnemy=0,this.showTime()))},e.prototype.typeOne=function(t){void 0===t&&(t=0),t=new Enemy(t),this.totalEnemy++,GameData.redGirlDistance++,this.enemySp.addChild(t);var e=Math.floor(4*Math.random()+1);t.row=e,t.x=this.btnArr[t.row-1].x+this.widthPoint,t.name="enemy1"+this.totalEnemy,this.pushEnemy(t.row,t)},e.prototype.typeTwo=function(t){void 0===t&&(t=0);var e=Math.floor(7*Math.random()+1);1==e&&(t=new Enemy(t)),t=new Enemy(2==e?3:1),this.totalEnemy++,GameData.redGirlDistance++,this.enemySp.addChild(t),e=Math.floor(4*Math.random()+1),t.row=e,t.x=this.btnArr[t.row-1].x+this.widthPoint,t.name="enemy1_1"+this.totalEnemy,this.pushEnemy(t.row,t),this.isShowTwoEnemy&&(this.totalEnemy==this.showXin||this.totalEnemy==this.showXin1?(e=new Enemy(6),this.enemySp.addChild(e),e.name="enemy2_d1"+this.totalEnemy,this.isShowDaoJu(e,t)):this.totalEnemy==this.shandian||this.totalEnemy==this.shandian1?(e=new Enemy(7),this.enemySp.addChild(e),e.name="enemy2_d2"+this.totalEnemy,this.isShowDaoJu(e,t)):this.totalEnemy==this.dunpai?(e=new Enemy(8),this.enemySp.addChild(e),e.name="enemy2_d3"+this.totalEnemy,this.isShowDaoJu(e,t)):1==(e=Math.floor(6*Math.random()+1))?(e=new Enemy(2),this.enemySp.addChild(e),e.name="enemy2_2"+this.totalEnemy,this.isShowDaoJu(e,t)):6==e&&(e=new Enemy(1),this.enemySp.addChild(e),e.name="enemy2_1"+this.totalEnemy,this.isShowDaoJu(e,t)))},e}(GameFightView);GameFightThreeView.prototype.__class__="GameFightThreeView";var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},GameFightTwoView=function(t){function e(){t.call(this),this.shandian=this.showXin=0,GameData.bgSpeed=3,this.totalEnemyNum=80,this.boshu=1,this.oneToTwo=14,this.curScene=2,GameData.enemySpeed=8,this.timeBoo=0,this.showResizeBtn=this.showEnemyTime=30,this.totalEnemy=0,this.freeTime=3,this.showXin=Math.floor(Math.random()*(this.totalEnemyNum-this.oneToTwo)+this.oneToTwo),this.shandian=Math.floor(Math.random()*(this.totalEnemyNum-this.oneToTwo)+this.oneToTwo),this.showXin==this.shandian&&(this.shandian=Math.floor(Math.random()*(this.totalEnemyNum-this.oneToTwo)+this.oneToTwo)),egret.Ticker.getInstance().register(this.showEnemyFun,this)}return __extends(e,t),e.prototype.showEnemyFun=function(){this.isShowTwoEnemy&&(this.showEnemyFunNum++,10==this.showEnemyFunNum&&(this.showEnemyFunNum=0,GameData.enemySpeed=8,this.showEnemyTime=Math.floor(20*Math.random()+25)))},e.prototype.showTime=function(){this.isShowTwoEnemy=!0,GameData.enemySpeed=8},e.prototype.hitOver=function(t,e,i){1==t.type?(t.gotoDie(),t.stopMove=!0,GameData.langNum++):2==t.type?(t.gotoDie(),this.shanBoo=t.stopMove=!0,GameData.blod--,this.blodBar.scaleBlodX()):6==t.type?(t.alphaToZero(),t.stopMove=!0,GameData.blod+=3,5<GameData.blod&&(GameData.blod=5),this.blodBar.scaleBlodX()):7==t.type&&(t.alphaToZero(),GameData.profectNum+=10,t.stopMove=!0)},e.prototype.createEnemy=function(){1==this.boshu?this.initEnemy(2):2==this.boshu&&this.initEnemy(1)},e.prototype.initEnemy=function(t){1==t?this.typeOne(t):2==t&&this.typeTwo(t)},e.prototype.isShowDaoJu=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=e.row,n=0;1==i?(n=Math.floor(3*Math.random()+2),t.row=n,t.x=this.btnArr[n-1].x+this.widthPoint):2==i?(n=Math.floor(2*Math.random()+3),t.row=n,t.x=this.btnArr[n-1].x+this.widthPoint):3==i?(n=Math.floor(2*Math.random()+1),t.row=n,t.x=this.btnArr[n-1].x+this.widthPoint):4==i&&(n=Math.floor(3*Math.random()+1),t.row=n,t.x=this.btnArr[n-1].x+this.widthPoint),this.pushEnemy(n,t)},e.prototype.pushEnemy=function(t,e){void 0===t&&(t=0),void 0===e&&(e=null),1==t?this.oneEnemyArr.push(e):2==t?this.twoEnemyArr.push(e):3==t?this.threeEnemyArr.push(e):4==t&&this.fourEnemyArr.push(e)},e.prototype.over=function(){egret.Ticker.getInstance().unregister(this.showEnemyFun,this),this.isStart=!1,GameData.curScene=3,egret.Tween.removeAllTweens(),this.dispose(),GameSceneView._gameScene.play()},e.prototype.initBoShu=function(){this.timeBoo=0,this.totalEnemy>=this.totalEnemyNum?(this.stopGame=!0,0==GameFightView.allArr[0].length&&0==GameFightView.allArr[1].length&&0==GameFightView.allArr[2].length&&0==GameFightView.allArr[3].length&&this.gameWin()):this.totalEnemy==this.oneToTwo&&(GameData.stopCreateEnemy=1,GameData.count++,GameData.redGirlDistance++,GameData.count>this.freeTime&&(this.boshu=2,GameData.count=0,GameData.stopCreateEnemy=0,this.showTime()))},e.prototype.typeOne=function(t){void 0===t&&(t=0),t=new Enemy(t),this.totalEnemy++,GameData.redGirlDistance++,this.enemySp.addChild(t);var e=Math.floor(4*Math.random()+1);t.row=e,t.x=this.btnArr[t.row-1].x+this.widthPoint,t.name="enemy1_1"+this.totalEnemy,this.pushEnemy(e,t),this.isShowTwoEnemy&&(this.totalEnemy==this.showXin?(e=new Enemy(6),this.enemySp.addChild(e),e.name="enemy2_21"+this.totalEnemy,this.isShowDaoJu(e,t)):this.totalEnemy==this.shandian?(e=new Enemy(7),this.enemySp.addChild(e),e.name="enemy2_12"+this.totalEnemy,this.isShowDaoJu(e,t)):1==(e=Math.floor(6*Math.random()+1))||2==e||3==e||4==e?(e=new Enemy(2),this.enemySp.addChild(e),e.name="enemy2_23"+this.totalEnemy,this.isShowDaoJu(e,t)):6==e&&(e=new Enemy(1),this.enemySp.addChild(e),e.name="enemy2_14"+this.totalEnemy,this.isShowDaoJu(e,t)))},e.prototype.typeTwo=function(t){void 0===t&&(t=0);var e=Math.floor(2*Math.random()+1);if(t=new Enemy(1==e||4==e?t:1),this.enemySp.addChild(t),e=Math.floor(4*Math.random()+1),t.row=e,t.x=this.btnArr[e-1].x+this.widthPoint,t.name="enemy1_2"+this.totalEnemy,this.totalEnemy++,GameData.redGirlDistance++,this.pushEnemy(t.row,t),this.isShowTwoEnemy){var i;this.totalEnemy==this.showXin?(i=new Enemy(6),this.enemySp.addChild(i),i.name="enemy1_d_1"+this.totalEnemy,this.isShowDaoJu(i,t)):this.totalEnemy==this.shandian?(i=new Enemy(7),this.enemySp.addChild(i),i.name="enemy1_d_2"+this.totalEnemy,this.isShowDaoJu(i,t)):1==(e=Math.floor(6*Math.random()+1))||2==e||3==e||4==e?(t=new Enemy(2),this.enemySp.addChild(t),t.name="enemy2_2"+this.totalEnemy,this.isShowDaoJu(t,i)):6==e&&(t=new Enemy(1),this.enemySp.addChild(t),t.name="enemy2_1"+this.totalEnemy,this.isShowDaoJu(t,i))}},e}(GameFightView);GameFightTwoView.prototype.__class__="GameFightTwoView";var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},GameInfoView=function(t){function e(){t.call(this),this.initView()}return __extends(e,t),e.prototype.initView=function(){var t=ResourceUtils.createBitmapByName("gameinfoImage");this.addChild(t),t=new MyButtonForGame("startBtnImage","startBtnImage"),this.addChild(t),t.y=Const.SCENT_HEIGHT-t.height,t.x=Const.SCENT_WIDTH/2-t.width/2,t.setClick(this.onStartGameHandler.bind(this))},e.prototype.onStartGameHandler=function(){GameSceneView._gameScene.play(),this.removeChildren()},e.prototype.onClickMoreGame=function(){alert("点击了")},e}(egret.Sprite);GameInfoView.prototype.__class__="GameInfoView";var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},MusicView=function(t){function e(){t.call(this),this.initView()}return __extends(e,t),e.prototype.initView=function(){var t=new egret.Sprite;this.addChild(t);var e=ResourceUtils.createBitmapByName("maskImage");t.addChild(e),t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchThis,this),this.spContainer=new egret.Sprite,this.addChild(this.spContainer),t=Const.SCENT_HEIGHT/4,this.spContainer.x=Const.SCENT_WIDTH/8,this.spContainer.y=t,t=ResourceUtils.createBitmapByName("optionMusicBgImage"),this.spContainer.addChild(t),t=new egret.Sprite,this.spContainer.addChild(t),e=ResourceUtils.createBitmapByName("option7Image"),t.addChild(e),t.touchEnabled=!0,t.x=this.spContainer.width-.7*t.width,t.y=.4*-t.height,t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePop,this),t=new egret.Sprite,this.spContainer.addChild(t),this.spguanbg=ResourceUtils.createBitmapByName("option5Image"),t.addChild(this.spguanbg),this.spkaibg=ResourceUtils.createBitmapByName("option6Image"),t.addChild(this.spkaibg),this.spguanbg.x=0,this.spkaibg.x=30,t.x=182,t.y=84,t.touchEnabled=!0,t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickBgHandler,this),t=new egret.Sprite,this.spContainer.addChild(t),this.spguan=ResourceUtils.createBitmapByName("option5Image"),t.addChild(this.spguan),this.spkai=ResourceUtils.createBitmapByName("option6Image"),t.addChild(this.spkai),this.spguan.x=0,this.spkai.x=30,t.x=182,t.y=148,t.touchEnabled=!0,t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickHandler,this),this.spguanbg.visible=!1,this.spkaibg.visible=!0,this.spguan.visible=!1,this.spkai.visible=!0},e.prototype.onTouchThis=function(t){t.stopImmediatePropagation(),t.stopPropagation()},e.prototype.clickHandler=function(t){GameData.closeMusic?(this.spkai.visible=!0,this.spguan.visible=!1,GameData.closeMusic=!1):(this.spkai.visible=!1,this.spguan.visible=!0,GameData.closeMusic=!0)},e.prototype.clickBgHandler=function(t){GameData.closeBgMusic?(this.spguanbg.visible=!1,this.spkaibg.visible=!0,GameData.closeBgMusic=!1):(this.spguanbg.visible=!0,this.spkaibg.visible=!1,GameData.closeBgMusic=!0)},e.prototype.closePop=function(t){this.parent&&(GameData.isClickBtn=!1),this.visible=!1},e.prototype.removeAll=function(){this.removeChildren()},e}(egret.Sprite);MusicView.prototype.__class__="MusicView";var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},OptionView=function(t){function e(){t.call(this),this.initView()}return __extends(e,t),e.prototype.initView=function(){var t=new egret.Sprite;this.addChild(t);var e=ResourceUtils.createBitmapByName("maskImage");t.addChild(e),t.touchEnabled=!0,t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHandler,this),this.spContainer=new egret.Sprite,this.addChild(this.spContainer),t=ResourceUtils.createBitmapByName("optionBgImage"),this.spContainer.addChild(t),t=Const.SCENT_HEIGHT/4,this.spContainer.x=Const.SCENT_WIDTH/8,this.spContainer.y=t,t=new egret.Sprite,this.spContainer.addChild(t),e=ResourceUtils.createBitmapByName("zhinanImage"),t.addChild(e),t.x=this.spContainer.width/2-t.width/2,t.y=200,t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHelp,this),t.touchEnabled=!0,this.helpSp=new egret.Sprite,this.addChild(this.helpSp),t=new egret.Sprite,this.spContainer.addChild(t),e=ResourceUtils.createBitmapByName("option7Image"),t.addChild(e),t.touchEnabled=!0,t.x=this.spContainer.width-.7*t.width,t.y=.4*-t.height,t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePop,this),t=new egret.Sprite,this.spContainer.addChild(t),this.spguanbg=ResourceUtils.createBitmapByName("option5Image"),t.addChild(this.spguanbg),this.spkaibg=ResourceUtils.createBitmapByName("option6Image"),t.addChild(this.spkaibg),this.spguanbg.x=0,this.spkaibg.x=30,t.x=182,t.y=84,t.touchEnabled=!0,t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickBgHandler,this),t=new egret.Sprite,this.spContainer.addChild(t),this.spguan=ResourceUtils.createBitmapByName("option5Image"),t.addChild(this.spguan),this.spkai=ResourceUtils.createBitmapByName("option6Image"),t.addChild(this.spkai),this.spguan.x=0,this.spkai.x=30,t.x=182,t.y=148,t.touchEnabled=!0,t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickHandler,this),this.spguanbg.visible=!1,this.spkaibg.visible=!0,this.spguan.visible=!1,this.spkai.visible=!0},e.prototype.onClickHandler=function(t){t.stopPropagation(),t.stopImmediatePropagation()},e.prototype.touchHelp=function(t){if(0==this.helpSp.visible)this.helpSp.visible=!0;else{(t=ResourceUtils.createBitmapByName("gameinfoImage")).width=Const.SCENT_WIDTH,t.height=Const.SCENT_HEIGHT,this.helpSp.addChild(t),t=new MyButton("closeGameBtnImage","closeGameBtnImage"),this.helpSp.addChild(t);var e=Const.SCENT_HEIGHT-t.height;t.x=Const.SCENT_WIDTH/2-t.width/2,t.y=e,t.setClick(this.showStartView.bind(this))}},e.prototype.showStartView=function(){this.helpSp.visible=!1},e.prototype.clickHandler=function(t){GameData.closeMusic?(this.spkai.visible=!0,this.spguan.visible=!1,GameData.closeMusic=!1):(this.spkai.visible=!1,this.spguan.visible=!0,GameData.closeMusic=!0)},e.prototype.clickBgHandler=function(t){GameData.closeBgMusic?(this.spguanbg.visible=!1,this.spkaibg.visible=!0,GameData.closeBgMusic=!1,SoundUtils.instance().playBg()):(this.spguanbg.visible=!0,this.spkaibg.visible=!1,GameData.closeBgMusic=!0,SoundUtils.instance().stopBg())},e.prototype.closePop=function(t){this.visible=!1,GameData.isStart&&(GameData.isPause=!1)},e}(egret.Sprite);OptionView.prototype.__class__="OptionView";var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},SpecialNumber=function(t){function e(e){t.call(this),this.charName=e}return __extends(e,t),e.prototype.setValue=function(t){if(this.removeChildren(),""!=t&&null!=t)for(var e=(t=(t+"").split("")).length,i=0,n=0;n<e;n++){var o=t[n];if(","==o&&(o="dot"),"/"==o&&(o="gang"),"number-"==this.charName){var s;s=ResourceUtils.createBitmapFromSheet(this.charName+o,"sourceNum")}else"number-0"==this.charName&&(s=ResourceUtils.createBitmapFromSheet(this.charName+o,"streakNum"));s&&(s.x=i,i+=s.width,this.addChild(s))}},e}(egret.Sprite);SpecialNumber.prototype.__class__="SpecialNumber";var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},GamePlayView=function(t){function e(){t.call(this),this.sp=new egret.Sprite,this.sp.touchEnabled=!0,this.addChild(this.sp)}return __extends(e,t),e.prototype.showGame=function(t){GameData.isStartClickOption=!0,GameData.isStart=!1;var e=new egret.Sprite,i=ResourceUtils.createBitmapByName("optionBtnImage");switch(e.addChild(i),e.touchEnabled=!0,e.x=Const.SCENT_WIDTH-e.width,e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showOptionView,this),this.sp.removeChildren(),t){case 1:t=new GameFightOneView,this.sp.addChild(t),this.target=t,this.thisContainer=ResourceUtils.createBitmapByName("gameinfo_1_Image"),this.sp.addChild(this.thisContainer);break;case 2:t=new GameFightTwoView,this.sp.addChild(t),this.target=t,this.thisContainer=ResourceUtils.createBitmapByName("gameinfo_2_Image"),this.sp.addChild(this.thisContainer);break;case 3:t=new GameFightThreeView,this.sp.addChild(t),this.target=t,this.thisContainer=ResourceUtils.createBitmapByName("gameinfo_3_Image"),this.sp.addChild(this.thisContainer);break;case 4:t=new GameFightFourView,this.sp.addChild(t),this.target=t,this.thisContainer=ResourceUtils.createBitmapByName("gameinfo_4_Image"),this.sp.addChild(this.thisContainer);break;case 5:t=new GameFightFiveView,this.sp.addChild(t),this.target=t,this.thisContainer=ResourceUtils.createBitmapByName("gameinfo_5_Image"),this.sp.addChild(this.thisContainer)}this.addChild(e),this.optionView=new OptionView,this.addChild(this.optionView),this.optionView.visible=!1,this.sp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startHandler,this)},e.prototype.startHandler=function(t){1==this.optionView.visible||GameData.isClickBtn||(GameData.isStart=!0,this.sp.removeChild(this.thisContainer),this.sp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startHandler,this),this.thisContainer=null,this.sp.touchEnabled=!1,this.ready=StarlingSwfFactory.getInstance().makeMc("go"),this.ready.x=Const.SCENT_WIDTH/2,this.ready.y=Const.SCENT_HEIGHT/2,this.addChild(this.ready),this.ready.goToPlay("1"),SoundUtils.instance().playNum(),GameData.isStartClickOption=!1,this.ready.setCompleteAction(this.complete1,this))},e.prototype.showOptionView=function(){GameData.isStartClickOption&&(this.optionView.visible=!0,GameData.isPause=!0)},e.prototype.complete1=function(){this.ready.goToPlay("2"),SoundUtils.instance().playGo(),egret.setTimeout(this.complete2.bind(this),this,300)},e.prototype.complete2=function(){GameData.isStartClickOption=!0,GameData.isStart=!0,GameData.isPause=!1,SoundUtils.instance().playBg(),this.target.redGirl.run(),this.removeChild(this.ready)},e}(egret.Sprite);GamePlayView.prototype.__class__="GamePlayView";var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},GameStartView=function(t){function e(){t.call(this),this.initView()}return __extends(e,t),e.prototype.initView=function(){var t=ResourceUtils.createBitmapByName("bgImage");t.width=Const.SCENT_WIDTH,t.height=Const.SCENT_HEIGHT,this.addChild(t),t=new MyButtonForGame("startBtnImage","startBtnImage"),this.addChild(t),t.y=Const.SCENT_HEIGHT-t.height-30,t.x=Const.SCENT_WIDTH/2-t.width/2,t.setClick(this.onStartGameHandler.bind(this));var e=new MyButtonForGame("ddlogo","ddlogo");this.addChild(e),e.scaleX=e.scaleY=.5,e.y=15,e.x=10,e.setClick(this.onClickMoreGame.bind(this));var i=new MyButtonForGame("musicBtnImage","musicBtnImage");this.addChild(i),i.x=t.x+t.width+10,i.y=t.y+10,i.setClick(this.showGameSoundHandler.bind(this)),i=new MyButtonForGame("helpBtnImage","helpBtnImage"),this.addChild(i),i.x=t.x-10-i.width,i.y=t.y+10,i.setClick(this.showGameInfoHandler.bind(this)),this.gameSoundPop=new MusicView,this.addChild(this.gameSoundPop),this.gameSoundPop.visible=!1},e.prototype.showGameSoundHandler=function(t){this.gameSoundPop.visible=!0,GameData.isClickBtn=!0},e.prototype.showGameInfoHandler=function(t){this.removeAll(),t=new GameInfoView,this.addChild(t)},e.prototype.onStartGameHandler=function(){GameSceneView._gameScene.play(),this.removeAll()},e.prototype.removeAll=function(){this.removeChildren(),this.gameSoundPop=null},e.prototype.onClickMoreGame=function(){top.location.href=btGame.URL.getMoreGame()},e}(egret.Sprite);GameStartView.prototype.__class__="GameStartView";var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},Hinder=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype.initView=function(t,e){var i;switch(t){case 1:i=1==e?ResourceUtils.createBitmapByName("wall1_1Image"):ResourceUtils.createBitmapByName("wall1_2Image"),this.addChild(i);break;case 2:i=1==e?ResourceUtils.createBitmapByName("wall2_1Image"):ResourceUtils.createBitmapByName("wall2_2Image"),this.addChild(i);break;case 3:i=1==e?ResourceUtils.createBitmapByName("wall3_1Image"):ResourceUtils.createBitmapByName("wall3_2Image"),this.addChild(i);break;case 4:i=1==e?ResourceUtils.createBitmapByName("wall4_1Image"):ResourceUtils.createBitmapByName("wall4_2Image"),this.addChild(i);break;case 5:i=1==e?ResourceUtils.createBitmapByName("wall5_1Image"):ResourceUtils.createBitmapByName("wall5_2Image"),this.addChild(i)}},e}(egret.Sprite);Hinder.prototype.__class__="Hinder";var ddTimer,__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},GameOverView=function(t){function e(){t.call(this),this.tNum=this.ttNum=this.bianfuW=this.langW=this.huliW=this.t3Num=this.t2Num=this.t1Num=this.num=this.thisNum=0,this.boo2=this.boo3=this.boo1=!1,this.initView()}return __extends(e,t),e.prototype.initView=function(){this.thisContainer=new egret.Sprite,this.addChild(this.thisContainer),this.bg=ResourceUtils.createBitmapByName("overBgImage"),this.thisContainer.addChild(this.bg),this.initEnemy(GameData.curScene),this.sorce=new SpecialNumber("number-0"),this.thisContainer.addChild(this.sorce),this.sorce.setValue("0"),this.sorce.x=Const.SCENT_WIDTH/2-this.sorce.width/2,this.sorce.y=Const.SCENT_HEIGHT/6,egret.Ticker.getInstance().register(this.showSorce,this),this.tt=new egret.TextField,this.addChild(this.tt);var t=GameData.isWin?Math.floor(15*Math.random()+80):Math.floor(40*Math.random()+40);this.ttNum=t,this.tt.text="超越了丛林中0%的小伙伴",this.tt.textColor=0,this.tt.bold=!0,this.tt.size=32,this.tt.x=this.thisContainer.width/2-this.tt.width/2-10,this.tt.y=505,this.spGengduo=new egret.Sprite,this.thisContainer.addChild(this.spGengduo);var e=ResourceUtils.createBitmapByName("btngengduoyouxi");this.spGengduo.addChild(e),this.spGengduo.touchEnabled=!0,this.spGengduo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toGengDuoView,this);var i=new MyButtonForGame("ddlogo","ddlogo");this.addChild(i),i.scaleX=i.scaleY=.5,i.y=Const.SCENT_HEIGHT-i.height/2-10,i.x=Const.SCENT_WIDTH/2-i.width/4+12,i.setClick(this.onClickMoreGame.bind(this));var n=GameData.sorce;clearTimeout(ddTimer),window.myScore=n,window.myLang=GameData.langNum+GameData.huliNum+GameData.bianfuNum,updateShare(GameData.langNum+GameData.huliNum+GameData.bianfuNum,n),Play68.setRankingLevelScoreDesc(GameData.langNum+GameData.huliNum+GameData.bianfuNum,n,Play68.rankingShowType.RANKING_SHOW),this.spZaiLai=new egret.Sprite,this.thisContainer.addChild(this.spZaiLai),t=ResourceUtils.createBitmapByName("btnzailaiyici"),this.spZaiLai.addChild(t),this.spZaiLai.touchEnabled=!0,this.spZaiLai.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toGameStartView,this),this.spFenXiang=new egret.Sprite,this.thisContainer.addChild(this.spFenXiang),t=ResourceUtils.createBitmapByName("btnfenxiang"),this.spFenXiang.addChild(t),this.spFenXiang.touchEnabled=!0,this.spFenXiang.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){play68_submitScore(window.myLang,window.myScore)},this),this.spGengduo.y=this.spFenXiang.y=this.spZaiLai.y=600,this.spGengduo.x=12,this.spZaiLai.x=170,this.spFenXiang.x=330,this.sp=new egret.Sprite,this.addChild(this.sp),(t=ResourceUtils.createBitmapByName("shareImage")).width=Const.SCENT_WIDTH,t.height=Const.SCENT_HEIGHT,this.sp.addChild(t),this.sp.visible=!1,this.sp.touchEnabled=!0,this.sp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchShare,this),this.thisContainer.scaleX=this.thisContainer.scaleY=.9,this.thisContainer.x=Const.SCENT_WIDTH/2-this.thisContainer.width/2+30,this.thisContainer.y=Const.SCENT_HEIGHT/2-this.thisContainer.height/2+30},e.prototype.showSorce=function(t){this.num++,this.thisNum<GameData.sorce&&(this.thisNum+=this.num,this.thisNum>GameData.sorce&&(this.thisNum=GameData.sorce),this.sorce.setValue(this.thisNum+""),this.sorce.x=Const.SCENT_WIDTH/2-this.sorce.width/2),this.boo1&&this.t1Num<GameData.langNum&&(this.t1Num+=3,this.t1Num>GameData.langNum&&(this.t1Num=GameData.langNum),this.t1.setValue(this.t1Num+""),this.t1.x=this.langW-this.t1.width/2),this.boo2&&this.t2Num<GameData.huliNum&&(this.t2Num+=3,this.t2Num>GameData.huliNum&&(this.t2Num=GameData.huliNum),this.t2.setValue(this.t2Num+""),this.t2.x=this.huliW-this.t2.width/2),this.boo3&&this.t3Num<GameData.bianfuNum&&(this.t3Num+=3,this.t3Num>GameData.bianfuNum&&(this.t3Num=GameData.bianfuNum),this.t3.setValue(this.t3Num+""),this.t3.x=this.bianfuW-this.t3.width/2),this.tNum<this.ttNum&&(this.tNum+=2,this.tNum>this.ttNum&&(this.tNum=this.ttNum),this.tt.text="超越了丛林中"+this.tNum+"%的小伙伴",this.tt.x=this.thisContainer.width/2-this.tt.width/2-10)},e.prototype.onClickMoreGame=function(t){top.location.href=btGame.URL.getMoreGame()},e.prototype.toShareView=function(t){top.location.href=btGame.URL.getMoreGame()},e.prototype.toGengDuoView=function(t){Play68.goHome()},e.prototype.toGameStartView=function(t){GameData.curScene=1,GameData.sorce=0,GameData.isPause=!0,GameData.count=0,GameData.profectNum=0,GameData.stopCreateEnemy=0,GameData.redGirlDistance=0,GameData.blod=5,this.spGengduo.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.toGengDuoView,this),this.spFenXiang.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.toShareView,this),this.spZaiLai.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.toGameStartView,this),this.removeChildren(),this.parent&&this.parent.removeChild(this),GameSceneView._gameScene.start()},e.prototype.touchShare=function(t){this.sp.visible=!1},e.prototype.initEnemy=function(t){if(void 0===t&&(t=0),1==t||2==t)this.boo1=!0,t=StarlingSwfFactory.getInstance().makeMc("lang"),this.thisContainer.addChild(t),t.goToPlay("run"),t.y=340,t.x=140+t.width,this.langW=t.x,this.t1=new SpecialNumber("number-"),this.thisContainer.addChild(this.t1),this.t1.setValue("0"),this.t1.x=t.x-this.t1.width/2,this.t1.y=t.y+.6*t.height-20;else if(3==t||4==t){this.boo2=this.boo1=!0,t=StarlingSwfFactory.getInstance().makeMc("lang");e=StarlingSwfFactory.getInstance().makeMc("huli");this.thisContainer.addChild(t),this.thisContainer.addChild(e),t.goToPlay("run"),e.goToPlay("run"),e.y=320,t.y=340,t.x=(220+t.width)/2,e.x=t.x+t.width+60,this.langW=t.x,this.huliW=e.x,this.t1=new SpecialNumber("number-"),this.thisContainer.addChild(this.t1),this.t1.setValue("0"),this.t1.x=t.x-this.t1.width/2,this.t1.y=t.y+.6*t.height-20,this.t2=new SpecialNumber("number-"),this.thisContainer.addChild(this.t2),this.t2.setValue("0"),this.t2.x=e.x-this.t2.width/2,this.t2.y=e.y+.6*t.height}else if(5==t||6==t){this.boo3=this.boo2=this.boo1=!0,t=StarlingSwfFactory.getInstance().makeMc("lang");var e=StarlingSwfFactory.getInstance().makeMc("huli"),i=StarlingSwfFactory.getInstance().makeMc("bianfu");this.thisContainer.addChild(t),this.thisContainer.addChild(e),this.thisContainer.addChild(i),t.goToPlay("run"),e.goToPlay("run"),i.goToPlay("run"),e.y=320,i.y=335,t.y=340,t.x=90,e.x=t.x+t.width+60,this.huliW=e.x,this.langW=t.x,i.x=e.x+e.width+70,this.bianfuW=i.x,this.t1=new SpecialNumber("number-"),this.thisContainer.addChild(this.t1),this.t1.setValue("0"),this.t1.x=t.x-this.t1.width/2,this.t1.y=t.y+.6*t.height-20,this.t2=new SpecialNumber("number-"),this.thisContainer.addChild(this.t2),this.t2.setValue("0"),this.t2.x=e.x-this.t2.width/2,this.t2.y=e.y+.6*t.height,this.t3=new SpecialNumber("number-"),this.thisContainer.addChild(this.t3),this.t3.setValue("0"),this.t3.x=i.x-this.t3.width/2,this.t3.y=i.y+.6*t.height-15}},e}(egret.Sprite);GameOverView.prototype.__class__="GameOverView";var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},LoadingUI=function(t){function e(){t.call(this),this.logoUrl="resource/assets/ddlogo.png",this.bgUrl="resource/assets/loading_bg.jpg",this.createView()}return __extends(e,t),e.prototype.createView=function(){this.w=Const.SCENT_WIDTH,this.h=Const.SCENT_HEIGHT,this.textField=new egret.TextField,this.textField.y=500,this.textField.textColor=3355443,this.textField.size=23,this.textField.width=this.w,this.textField.height=100,this.textField.fontFamily="Black",this.textField.textAlign="center";var t=new egret.URLLoader;t.addEventListener(egret.Event.COMPLETE,this.onComplete,this),t.dataFormat=egret.URLLoaderDataFormat.TEXTURE,t.load(new egret.URLRequest(this.logoUrl)),(t=new egret.URLLoader).addEventListener(egret.Event.COMPLETE,this.onComplete,this),t.dataFormat=egret.URLLoaderDataFormat.TEXTURE,t.load(new egret.URLRequest(this.bgUrl)),this.bg=new egret.Bitmap,this.logo=new egret.Bitmap,this.ddLogo=new egret.Bitmap,this.uiContainer=new egret.DisplayObjectContainer,this.addChild(this.uiContainer),this.addChild(this.logo),this.addChild(this.ddLogo),this.addChildAt(this.bg,0),this.addChild(this.textField)},e.prototype.onComplete=function(t){var e=(t=t.target).data;t._request.url==this.bgUrl?(this.bg.texture=e,this.bg.scaleX=this.w/640,this.bg.scaleY=this.h/960):t._request.url==this.logoUrl&&(this.logo.texture=e,this.logo.anchorX=this.logo.anchorY=.5,this.logo.x=this.w/2+10,this.logo.y=this.h/2-60,this.logo.scaleX=this.logo.scaleY=this.h/960,this.textField.y=this.logo.y+100)},e.prototype.setProgress=function(t,e){this.textField.text="游戏加载中…"+Math.floor(t/e*100)+"%"},e.prototype.onLoadComplete=function(t,e){t.call(e)},e}(egret.Sprite);LoadingUI.prototype.__class__="LoadingUI";var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},GameSceneView=function(t){function e(){t.call(this),e._gameScene=this,this.initView()}return __extends(e,t),e.prototype.initView=function(){this.thisContainer=new egret.Sprite,this.addChild(this.thisContainer),this.start()},e.prototype.start=function(){this.removeAll();var t=new GameStartView;this.thisContainer.addChild(t)},e.prototype.play=function(){this.removeAll();var t=new GamePlayView;this.thisContainer.addChild(t),t.showGame(GameData.curScene)},e.prototype.over=function(){this.removeAll();var t=new GameOverView;this.thisContainer.addChild(t)},e.prototype.removeAll=function(){this.thisContainer.removeChildren()},e}(egret.Sprite);GameSceneView.prototype.__class__="GameSceneView";var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},BackGroundView=function(t){function e(e){t.call(this),this.initView(e)}return __extends(e,t),e.prototype.initView=function(t){var e=new Hinder,i=new Hinder;switch(t){case 1:t=ResourceUtils.createBitmapByName("fight1BgImage"),this.addChild(t),e.initView(1,1),i.initView(1,2);break;case 2:t=ResourceUtils.createBitmapByName("fight2BgImage"),this.addChild(t),e.initView(2,1),i.initView(2,2);break;case 3:t=ResourceUtils.createBitmapByName("fight3BgImage"),this.addChild(t),e.initView(3,1),i.initView(3,2);break;case 4:t=ResourceUtils.createBitmapByName("fight4BgImage"),this.addChild(t),e.initView(4,1),i.initView(4,2);break;case 5:t=ResourceUtils.createBitmapByName("fight5BgImage"),this.addChild(t),e.initView(5,1),i.initView(5,2)}this.addChild(i),this.addChild(e),i.x=Const.SCENT_WIDTH-i.width},e}(egret.Sprite);BackGroundView.prototype.__class__="BackGroundView";var ShareUtils=function(){function t(){}return t.moreGame=function(){if(t.isInU9())location.href="u9time://gamelist";else t.findLocationProperty("app_id")},t.shareToWeChat=function(){window.hasOwnProperty("location")&&WeixinApi&&WeixinApi.ready(function(e){var i=new WeixinShareInfo;i.title=t.shareTitle,i.desc=t.shareDesc,i.link=window.location.href,i.imgUrl=t.IconPath,e.shareToFriend(i),e.shareToTimeline(i)})},t.isSetSwfFrame=function(){for(var t=0,e="",i=GameData.num.length;t<i;t++)e+=GameData.num[t]+"";return e},t.shareOther=function(){window.hasOwnProperty("location")&&WeixinApi.ready(function(e){(e=new WeixinShareInfo).title=t.shareTitle,e.desc=t.shareDesc,e.link=window.location.href,e.imgUrl=t.IconPath})},t.shareToU9=function(){if(window.hasOwnProperty("location")){var e=location.href,e=""==location.search?e+"?channel=weixin":e+"&channel=weixin",e=encodeURIComponent(e),i=encodeURIComponent(t.shareDesc),n=t.getUid(),o="u9time://share?uid="+n+"&game_url="+e+"&a=123&msg="+i;n||(o="u9time://share?&game_url="+e+"&a=123&msg="+i),location.href=o}},t.shareToBaidu=function(){BaiduAPI.setShareContent(t.shareTitle,t.shareDesc),BaiduAPI.showShareView()},t.setUserScore=function(e){t.isInBaidu()&&BaiduAPI.setUserScore(e)},t.rank=function(){t.isInBaidu()&&BaiduAPI.showRankList()},t.setShareInfo=function(e,i){t.shareTitle=e,t.shareDesc=i,t.isInWeChat()?t.shareToWeChat():t.shareOther()},t.isInWeChat=function(){return!!window.hasOwnProperty("navigator")&&-1!=window.navigator.userAgent.indexOf("MicroMessenger")},t.isInU9=function(){if(!window.hasOwnProperty("navigator"))return!1;var t=window.navigator.userAgent;return-1!=t.indexOf("EgretRuntime")&&-1!=t.indexOf("yoyo")},t.isInBaidu=function(){return!!window.hasOwnProperty("location")&&-1!=location.href.indexOf("release_baidu")},t.findLocationProperty=function(t){if(!window.hasOwnProperty("location"))return null;e=location.search;if(""==e)return null;for(var e,i=(e=(e=e.slice(1)).split("&")).length,n=0;n<i;n++){var o=e[n].split("=");if(o[0]==t)return o[1]}return null},t.getUid=function(){return t.findLocationProperty("uid")},t.onEnterGame=function(){if(!t.isInBaidu()){var e=t.findLocationProperty("app_id"),i=t.findLocationProperty("game_id"),n=t.findLocationProperty("device_id");e&&i&&(n||(n=egret.localStorage.getItem("device_id"))||(n=Math.random()),egret.localStorage.setItem("device_id",n),e="",(i=t.findLocationProperty("channel"))&&t.isInWeChat()&&(e+="&channel="+i),e&&(new egret.URLLoader).load(new egret.URLRequest(e)))}},t.IconPath="",t.shareSwfInfo=Const.setSwfArr.join(""),t}();ShareUtils.prototype.__class__="ShareUtils",__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.parseSpriteSheet=function(t,e){var i=e.frames;if(i){var n,o=new egret.SpriteSheet(t);for(n in i){var s=i[n];o.createTexture(n,s.x,s.y,s.w,s.h,-s.offX,-s.offY)}return o}},e}(RES.SheetAnalyzer);t.StarlingSwfSheetAnalyzer=e,e.prototype.__class__="starlingswf.StarlingSwfSheetAnalyzer"}(starlingswf||(starlingswf={}));var StarlingswfMovieClip=function(){function t(){}return t.swfFrame=egret.getDefinitionByName(SwfFrameInfo.swfNum),t}();StarlingswfMovieClip.prototype.__class__="StarlingswfMovieClip";var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},Main=function(t){function e(){t.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),egret.Injector.mapClass(RES.AnalyzerBase,starlingswf.StarlingSwfSheetAnalyzer,"starlingswf_sheet")}return __extends(e,t),e.prototype.onAddToStage=function(t){egret.MainContext.runtimeType!=egret.MainContext.RUNTIME_HTML5||window.hasOwnProperty("EgretShare")?EgretShare.setShareData("愤怒的小红帽","是时候给灰狼哥来一发了! 要来么？不要掉队哟~","",""):document.addEventListener("EgretShareLoaded",function(){ih5game.setShare("desc","愤怒的小红帽","是时候给灰狼哥来一发了! 要来么？不要掉队哟~")}),Const.SCENT_WIDTH=this.stage.stageWidth,Const.SCENT_HEIGHT=this.stage.stageHeight,this.swfFrame=StarlingswfMovieClip.swfFrame.href,this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),egret.MainContext.instance.touchContext.maxTouches=4,RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/resource.json","resource/")},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.createGroup("initLoad",["preload","bgPic","animation","sound"]),RES.loadGroup("initLoad")},e.prototype.onResourceLoadComplete=function(t){"initLoad"==t.groupName&&this.loadingView.onLoadComplete(this.onStartGame,this)},e.prototype.onResourceProgress=function(t){"initLoad"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},e.prototype.onStartGame=function(){this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.initAnimationData(),this.createGameScene()},e.prototype.createGameScene=function(){Const.GamePoxY=0,GameData.curScene=1;var t=new egret.Rectangle;t.width=Const.SCENT_WIDTH,t.height=Const.SCENT_HEIGHT,t.y=Const.GamePoxY,SoundUtils.instance().initSound(),this._scene=new GameSceneView,this._scene.y=Const.GamePoxY,this._scene.width=Const.SCENT_WIDTH,this._scene.height=Const.SCENT_HEIGHT,this._scene.mask=t,this.addChild(this._scene)},e.prototype.initAnimationData=function(){for(var t="redNu promptPop lang go xiaohongmao daoju lieren huli bianfu niao".split(" "),e=0,i=t.length;e<i;e++){var n=t[e];StarlingSwfFactory.getInstance().addSwf(n,RES.getRes(n+"_swf"),RES.getRes(n))}},e}(egret.DisplayObjectContainer);Main.prototype.__class__="Main";var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},BgView=function(t){function e(){t.call(this),this.bg2Height=this.bg1Height=0}return __extends(e,t),e.prototype.initView=function(t){this.bg2=new BackGroundView(t),this.addChild(this.bg2),this.bg1=new BackGroundView(t),this.addChild(this.bg1),this.bg1Height=this.bg1.height,this.bg1.y=-this.bg1Height+Const.SCENT_HEIGHT,this.bg2Height=this.bg2.height,this.bg2.y=this.bg1.y-this.bg2Height},e.prototype.updata=function(){this.bg1.y>=Const.SCENT_HEIGHT&&(this.bg1.y=this.bg2.y-this.bg1Height),this.bg2.y>=Const.SCENT_HEIGHT&&(this.bg2.y=this.bg1.y-this.bg2Height),this.bg1.y+=GameData.bgSpeed,this.bg2.y+=GameData.bgSpeed},e.prototype.dispose=function(){this.removeChildren(),this.bg2=this.bg1=null},e}(egret.Sprite);BgView.prototype.__class__="BgView";var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},BoldBar=function(t){function e(){t.call(this),this.w=0,this.initView()}return __extends(e,t),e.prototype.initView=function(){var t=ResourceUtils.createBitmapByName("blodBarBgImage");this.addChild(t),t=ResourceUtils.createBitmapByName("blodBarImage"),this.addChild(t),t.x=38,t.y=8,this.w=t.width,this.r=new egret.Rectangle,this.r.x=0,this.r.y=0,this.r.width=t.width,this.r.height=t.height,t.mask=this.r},e.prototype.scaleBlodX=function(){this.r.x=-(this.w-GameData.blod/5*this.w)},e}(egret.Sprite);BoldBar.prototype.__class__="BoldBar";var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},Bomb=function(t){function e(){t.call(this),this.lastY=this.lastX=this.angle=this.speed=0,this.sp=ResourceUtils.createBitmapByName("bombImage"),this.addChild(this.sp),this.sp.x=this.sp.width/2,this.sp.rotation=90,this.speed=30,egret.Ticker.getInstance().register(this.onFrame,this)}return __extends(e,t),e.prototype.move=function(){this.angle=this.rotation=180*Math.atan2(this.lastY-this.y,this.lastX-this.x)/Math.PI},e.prototype.onFrame=function(){if(this.visible){this.x+=this.speed*Math.cos(this.angle/180*Math.PI),this.y+=this.speed*Math.sin(this.angle/180*Math.PI);15>Math.sqrt(Math.pow(this.x-this.lastX,2)+Math.pow(this.y-this.lastY,2))&&(this.visible=!1)}},e.prototype.dispose=function(){egret.Ticker.getInstance().unregister(this.onFrame,this),this.removeChildren(),this.sp=null},e}(egret.Sprite);Bomb.prototype.__class__="Bomb";var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},DaZhaoBar=function(t){function e(){t.call(this),this.b=this.w=0,this.rx=1,this.boo=!1}return __extends(e,t),e.prototype.initView=function(){var t=ResourceUtils.createBitmapByName("dazhaoBarBg");this.addChild(t);var e=ResourceUtils.createBitmapByName("dazhaoImage");this.addChild(e),t.x=-2,t.y=2,e.y=t.y+2,this.w=e.width,this.r=new egret.Rectangle,this.b=e.x-e.width,this.r.x=this.b,this.r.y=0,this.r.width=e.width,this.r.height=e.height,e.mask=this.r,egret.Ticker.getInstance().register(this.onFrameHandler,this)},e.prototype.onFrameHandler=function(){this.boo&&(this.r.x=this.rx)},e.prototype.setValue=function(){this.boo||(GameData.profectNum>GameData.dazhaoTime&&(GameData.profectNum=GameData.dazhaoTime),this.r.x=-(this.w-GameData.profectNum/GameData.dazhaoTime*this.w))},e}(egret.Sprite);DaZhaoBar.prototype.__class__="DaZhaoBar";var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},FightButton=function(t){function e(){t.call(this),this.initView()}return __extends(e,t),e.prototype.initView=function(){this.button=StarlingSwfFactory.getInstance().makeMc("bazi"),this.addChild(this.button),this.button.gotoAndStop(0)},e.prototype.goPlay=function(t){this.button.gotoAndStop(t)},e}(egret.Sprite);FightButton.prototype.__class__="FightButton";var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},GirlDistanceBar=function(t){function e(){t.call(this),this._heightBar=0,this.initView()}return __extends(e,t),e.prototype.initView=function(){var t=ResourceUtils.createBitmapByName("distanceBarImage");this.addChild(t),this.head=ResourceUtils.createBitmapByName("redGirlHeadImage"),this.addChild(this.head),t.x=this.head.width/2,this._heightBar=t.height,this.head.y=this._heightBar},e.prototype.moveHead=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.head.y=this._heightBar-GameData.redGirlDistance/(t+e)*this._heightBar},e}(egret.Sprite);GirlDistanceBar.prototype.__class__="GirlDistanceBar";var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},House=function(t){function e(){t.call(this),this.initView()}return __extends(e,t),e.prototype.initView=function(){var t=ResourceUtils.createBitmapByName("houseImage");this.addChild(t)},e}(egret.Sprite);House.prototype.__class__="House";var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},Line=function(t){function e(){t.call(this),this.boo=!1,this.sp=ResourceUtils.createBitmapByName("lineImage"),this.addChild(this.sp),this.sp.x=this.sp.width/2,egret.Ticker.getInstance().register(this.onFrame,this)}return __extends(e,t),e.prototype.move=function(){this.boo=this.visible=!0},e.prototype.onFrame=function(t){this.boo&&(this.y+=3*GameData.enemySpeed,this.y>Const.SCENT_HEIGHT&&(this.boo=this.visible=!1))},e}(egret.Sprite);Line.prototype.__class__="Line";var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},RedGirl=function(t){function e(){t.call(this),this.initView()}return __extends(e,t),e.prototype.initView=function(){this.girl=StarlingSwfFactory.getInstance().makeMc("xiaohongmao"),this.addChild(this.girl),this.girl.gotoAndStop(0)},e.prototype.run=function(){this.girl.goToPlay("1")},e.prototype.gotoDie=function(){this.girl.goToPlay("2")},e.prototype.gotoWin=function(){this.girl.goToPlay("3")},e.prototype.dispose=function(){this.removeChildren()},e}(egret.Sprite);RedGirl.prototype.__class__="RedGirl";var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},SourceView=function(t){function e(){t.call(this),this.initView()}return __extends(e,t),e.prototype.initView=function(){var t=ResourceUtils.createBitmapByName("sorceMcImage");this.addChild(t),this.showSorce=new SpecialNumber("number-"),this.showSorce.x=t.width+10,this.addChild(this.showSorce)},e.prototype.setValue=function(t){void 0===t&&(t=0),this.showSorce.setValue(t+"")},e}(egret.Sprite);SourceView.prototype.__class__="SourceView";var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},StreakNum=function(t){function e(){t.call(this),this.conboW=0,this.initView()}return __extends(e,t),e.prototype.initView=function(){var t=ResourceUtils.createBitmapByName("comboImage");this.addChild(t),this.conboW=t.width,this.showSorce=new SpecialNumber("number-0"),this.showSorce.x=this.conboW/2-this.showSorce.width/2,this.showSorce.y=t.height+5,this.addChild(this.showSorce)},e.prototype.setValue=function(t){void 0===t&&(t=0),this.showSorce.x=this.conboW/2-this.showSorce.width/2,this.showSorce.setValue(t+"")},e}(egret.Sprite);StreakNum.prototype.__class__="StreakNum";var GS=function(){function t(){}return t.bb=0x396ae77e3688a,t}();GS.prototype.__class__="GS";var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},PromptPop=function(t){function e(){t.call(this),this.isHide=this.isAway=this.isInto=this.isShow=!1,this.tY=this.tX=this.stay=0,this.config={isHide:!0,stayTime:800,tx:0,ty:0}}return __extends(e,t),e.prototype.activate=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=null),this.config.tx=t,this.config.ty=e,this.settings(i),this.targetMc=StarlingSwfFactory.getInstance().makeMc("tip"),this.addChild(this.targetMc),this.targetMc.x=this.tX,this.targetMc.y=this.tY,this.targetMc.visible=!1},e.prototype.show=function(t,e){void 0===e&&(e=null),null!=this.targetMc&&(e&&(null!=e.isHide&&(this.isHide=e.isHide),null!=e.stayTime&&(this.stay=e.stayTime),null!=e.tx&&(this.tX=e.tx),null!=e.ty&&(this.tY=e.ty)),this.setMc(t),this.tweenStar())},e.prototype.tweenStar=function(){this.isShow=this.isInto=!0,this.isAway=!1,this.targetMc.x=this.tX,this.targetMc.y=this.tY,this.targetMc.alpha=1,this.targetMc.visible=!0,this.tw=egret.Tween.get(this.targetMc).call(this.tweenStop,this),this.tw.to({y:this.tY-200,alpha:1},200)},e.prototype.tweenStop=function(){this.isInto=!1,this.isHide&&(this.isAway=!0,this.tw=egret.Tween.get(this.targetMc).call(this.tweenOver,this),this.tw.to({alpha:0,delay:1,visible:!1},this.stay)),this.settings()},e.prototype.tweenOver=function(){this.isAway=this.isShow=!1},e.prototype.hide=function(t){void 0===t&&(t=0),this.isHide=!0,this.stay=t,this.tweenStop()},e.prototype.settings=function(t){if(void 0===t&&(t=null),null!=t)for(var e in this.config)this.config[e]=null!=t[e]?t[e]:this.config[e];this.isHide=this.config.isHide,this.stay=this.config.stayTime,this.tX=this.config.tx,this.tY=this.config.ty},e.prototype.setMc=function(t){this.targetMc.goToPlay(t)},Object.defineProperty(e.prototype,"isSHOW",{get:function(){return this.isShow},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isINTO",{get:function(){return this.isInto},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAWAY",{get:function(){return this.isAway},enumerable:!0,configurable:!0}),e.prototype.removeAll=function(){},e}(egret.Sprite);PromptPop.prototype.__class__="PromptPop";