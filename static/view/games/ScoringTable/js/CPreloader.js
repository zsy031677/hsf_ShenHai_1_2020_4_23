function CPreloader(){var e,t,i,a,r,n,s,d;this._init=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this),s_oSpriteLibrary.addSprite("bg_menu","./sprites/bg_menu.jpg"),s_oSpriteLibrary.addSprite("progress_bar","./sprites/progress_bar.png"),s_oSpriteLibrary.loadSprites(),d=new createjs.Container,s_oStage.addChild(d)},this.unload=function(){d.removeAllChildren()},this.hide=function(){var e=this;setTimeout(function(){createjs.Tween.get(s).to({alpha:1},500).call(function(){e.unload(),s_oMain.gotoMenu()})},1e3)},this._onImagesLoaded=function(){},this._onAllImagesLoaded=function(){this.attachSprites(),s_oMain.preloaderReady()},this.attachSprites=function(){var o=createBitmap(s_oSpriteLibrary.getSprite("bg_menu"));d.addChild(o);var h=s_oSpriteLibrary.getSprite("progress_bar");(r=createBitmap(h)).x=CANVAS_WIDTH/2-h.width/2,r.y=CANVAS_HEIGHT-330,d.addChild(r),e=h.width,t=h.height,(n=new createjs.Shape).graphics.beginFill("rgba(255,255,255,0.01)").drawRect(r.x,r.y,1,t),d.addChild(n),r.mask=n,(i=new createjs.Text("","30px "+FONT_GAME,"#ffffff")).x=CANVAS_WIDTH/2,i.y=CANVAS_HEIGHT-280,i.textBaseline="alphabetic",i.textAlign="center",d.addChild(i),(a=new createjs.Text("","30px "+SECONDARY_FONT,"#ffffff")).x=CANVAS_WIDTH+200,a.y=CANVAS_HEIGHT+200,a.textBaseline="alphabetic",a.textAlign="center",d.addChild(a),(s=new createjs.Shape).graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT),s.alpha=0,d.addChild(s)},this.refreshLoader=function(s){i.text=s+"%",a.text=s+"%",n.graphics.clear();var d=Math.floor(s*e/100);n.graphics.beginFill("rgba(255,255,255,0.01)").drawRect(r.x,r.y,d,t)},this._init()}