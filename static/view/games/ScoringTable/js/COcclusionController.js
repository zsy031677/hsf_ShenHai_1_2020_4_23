function COcclusionController(e,O,_){var C,c;this._init=function(e,O,_){C=new Array,this._setDepthCollidersCage(),c=new Array,this._setOccludersSystem()},this._setOccludersSystem=function(){this._createOccluder("bottom_area",229,499,OCCLUDER_BOTTOM_AREA),this._createOccluder("center_area",294,515,OCCLUDER_CENTER_AREA),this._createOccluder("top_area",311,450,OCCLUDER_TOP_AREA),this._createOccluder("bot_occluder_30",364,528,OCCLUDER_30_HOLE_BOT),this._createOccluder("bot_occluder_40",365,477,OCCLUDER_40_HOLE_BOT),this._createOccluder("bot_occluder_50",365,421,OCCLUDER_50_HOLE_BOT),this._createOccluder("bot_occluder_100l",239,421,OCCLUDER_100L_HOLE_BOT),this._createOccluder("bot_occluder_100r",489,422,OCCLUDER_100R_HOLE_BOT),this._createOccluder("top_occluder_30",376,505,OCCLUDER_30_HOLE_TOP),this._createOccluder("top_occluder_40",377,456,OCCLUDER_40_HOLE_TOP),this._createOccluder("top_occluder_50",378,404,OCCLUDER_50_HOLE_TOP),this._createOccluder("top_occluder_100l",251,404,OCCLUDER_100L_HOLE_TOP),this._createOccluder("top_occluder_100r",501,404,OCCLUDER_100R_HOLE_TOP)},this._createOccluder=function(e,O,C,N){var e=s_oSpriteLibrary.getSprite(e),o=createBitmap(e);o.x=O,o.y=C,_.addChild(o),c[N]=o},this._setDepthCollidersCage=function(){this._createCollisionBox(new CANNON.Vec3(20,8,20),new CANNON.Vec3(0,10,0),OCCLUDER_30_HOLE_TOP),this._createCollisionBox(new CANNON.Vec3(20,8,20),new CANNON.Vec3(0,38,0),OCCLUDER_40_HOLE_TOP),this._createCollisionBox(new CANNON.Vec3(20,14,20),new CANNON.Vec3(0,75,0),OCCLUDER_50_HOLE_TOP),this._createCollisionBox(new CANNON.Vec3(10,14,20),new CANNON.Vec3(68,75,0),OCCLUDER_100R_HOLE_TOP),this._createCollisionBox(new CANNON.Vec3(10,14,20),new CANNON.Vec3(-68,75,0),OCCLUDER_100L_HOLE_TOP),this._createCollisionBox(new CANNON.Vec3(45,10,20),new CANNON.Vec3(0,-23,0),OCCLUDER_CENTER_AREA),this._createCollisionBox(new CANNON.Vec3(30,6,20),new CANNON.Vec3(0,-35,0),OCCLUDER_CENTER_AREA),this._createCollisionBox(new CANNON.Vec3(94,7,22),new CANNON.Vec3(0,-20,0),OCCLUDER_BOTTOM_AREA),this._createCollisionBox(new CANNON.Vec3(86,7,22),new CANNON.Vec3(0,-32,0),OCCLUDER_BOTTOM_AREA),this._createCollisionBox(new CANNON.Vec3(66,8,22),new CANNON.Vec3(0,-44,0),OCCLUDER_BOTTOM_AREA),this._createCollisionBox(new CANNON.Vec3(48,4,22),new CANNON.Vec3(0,-54,0),OCCLUDER_BOTTOM_AREA),this._createCollisionBox(new CANNON.Vec3(34,4,22),new CANNON.Vec3(0,-60,0),OCCLUDER_BOTTOM_AREA),this._createCollisionBox(new CANNON.Vec3(50,8,22),new CANNON.Vec3(0,40,0),OCCLUDER_TOP_AREA),this._createCollisionBox(new CANNON.Vec3(10,10,22),new CANNON.Vec3(-40,40,0),OCCLUDER_TOP_AREA),this._createCollisionBox(new CANNON.Vec3(10,10,22),new CANNON.Vec3(40,40,0),OCCLUDER_TOP_AREA),this._createCollisionBox(new CANNON.Vec3(8,10,22),new CANNON.Vec3(-51,30,0),OCCLUDER_TOP_AREA),this._createCollisionBox(new CANNON.Vec3(8,10,22),new CANNON.Vec3(51,30,0),OCCLUDER_TOP_AREA),this._createCollisionBox(new CANNON.Vec3(8,10,22),new CANNON.Vec3(-61,20,0),OCCLUDER_TOP_AREA),this._createCollisionBox(new CANNON.Vec3(8,10,22),new CANNON.Vec3(61,20,0),OCCLUDER_TOP_AREA),this._createCollisionBox(new CANNON.Vec3(6,10,22),new CANNON.Vec3(-63,8,0),OCCLUDER_TOP_AREA),this._createCollisionBox(new CANNON.Vec3(6,10,22),new CANNON.Vec3(63,8,0),OCCLUDER_TOP_AREA),this._createCollisionBox(new CANNON.Vec3(11,11,36),new CANNON.Vec3(0,-10,-10),OCCLUDER_30_HOLE_BOT),this._createCollisionBox(new CANNON.Vec3(11,11,36),new CANNON.Vec3(0,19,-10),OCCLUDER_40_HOLE_BOT),this._createCollisionBox(new CANNON.Vec3(11,11,36),new CANNON.Vec3(0,52,-10),OCCLUDER_50_HOLE_BOT),this._createCollisionBox(new CANNON.Vec3(11,11,36),new CANNON.Vec3(83,52,-10),OCCLUDER_100R_HOLE_BOT),this._createCollisionBox(new CANNON.Vec3(11,11,36),new CANNON.Vec3(-83,52,-10),OCCLUDER_100L_HOLE_BOT),this._createCollisionBox(new CANNON.Vec3(6,10,38),new CANNON.Vec3(0,-35,-28),OCCLUDER_CENTER_AREA),this._createCollisionBox(new CANNON.Vec3(6,10,38),new CANNON.Vec3(0,-57,-28),OCCLUDER_BOTTOM_AREA)},this._createCollisionBox=function(O,_,c){var N=new CANNON.Box(O),o=new CANNON.Body({mass:0});o.quaternion.setFromEuler(Math.PI/180*44,0,0),o.addShape(N),o.collisionResponse=0;var i=_.z,t={x:0,y:245-i,z:167+i};if(o.position.set(_.x+t.x,_.y+t.y,_.y+t.z),o.ID=c,C.push(o),e.addBody(o),SHOW_3D_RENDER){var n=new THREE.MeshPhongMaterial({wireframe:!0});s_oScenario.getDemo().addVisual(o,n)}return o},this.checkCollision=function(){for(var _=new Array,c=0;c<C.length;c++)for(var N=0;N<e.contacts.length;N++){var o=e.contacts[N];(o.bi===C[c]&&o.bj===O||o.bi===O&&o.bj===C[c])&&_.push(C[c].ID)}s_oOcclusionController.setOccluderVisible(_)},this.setOccluderVisible=function(e){for(var O=0;O<c.length;O++){c[O].visible=!1;for(var _=0;_<e.length;_++)O===e[_]&&(c[O].visible=!0)}},this._init(e,O,_),s_oOcclusionController=this}var s_oOcclusionController,OCCLUDER_TOP_AREA=0,OCCLUDER_CENTER_AREA=1,OCCLUDER_BOTTOM_AREA=2,OCCLUDER_30_HOLE_TOP=3,OCCLUDER_40_HOLE_TOP=4,OCCLUDER_50_HOLE_TOP=5,OCCLUDER_100R_HOLE_TOP=6,OCCLUDER_100L_HOLE_TOP=7,OCCLUDER_30_HOLE_BOT=8,OCCLUDER_40_HOLE_BOT=9,OCCLUDER_50_HOLE_BOT=10,OCCLUDER_100R_HOLE_BOT=11,OCCLUDER_100L_HOLE_BOT=12;