function CMain(e){var r,i,t,s,o,a,_=0,p=0,n=STATE_LOADING;this.initContainer=function(){var e=document.getElementById("canvas");s_oStage=new createjs.Stage(e),createjs.Touch.enable(s_oStage),s_oStage.preventSelection=!1,!1===(s_bMobile=jQuery.browser.mobile)&&(s_oStage.enableMouseOver(20),$("body").on("contextmenu","#canvas",function(e){return!1})),s_iPrevTime=(new Date).getTime(),createjs.Ticker.addEventListener("tick",this._update),createjs.Ticker.setFPS(FPS),navigator.userAgent.match(/Windows Phone/i)&&(DISABLE_SOUND_MOBILE=!0),s_oSpriteLibrary=new CSpriteLibrary,t=new CPreloader,r=!0},this.soundLoaded=function(){_++;var e=Math.floor(_/p*100);t.refreshLoader(e),_===p&&s_oMain._onRemovePreloader()},this._initSounds=function(){var e=new Array;e.push({path:"./sounds/",filename:"click",loop:!1,volume:1,ingamename:"click"}),e.push({path:"./sounds/",filename:"ball_launch",loop:!1,volume:1,ingamename:"shot"}),e.push({path:"./sounds/",filename:"soundtrack",loop:!0,volume:1,ingamename:"soundtrack"}),e.push({path:"./sounds/",filename:"sound_10_20",loop:!1,volume:1,ingamename:"sound_10_20"}),e.push({path:"./sounds/",filename:"sound_30_40",loop:!1,volume:1,ingamename:"sound_30_40"}),e.push({path:"./sounds/",filename:"sound_50_100",loop:!1,volume:1,ingamename:"sound_50_100"}),e.push({path:"./sounds/",filename:"start_game",loop:!1,volume:1,ingamename:"start_game"}),e.push({path:"./sounds/",filename:"ambience",loop:!0,volume:1,ingamename:"ambience"}),e.push({path:"./sounds/",filename:"game_over",loop:!0,volume:1,ingamename:"game_over"}),p+=e.length,s_aSounds=new Array;for(var r=0;r<e.length;r++)s_aSounds[e[r].ingamename]=new Howl({src:[e[r].path+e[r].filename+".mp3",e[r].path+e[r].filename+".ogg"],autoplay:!1,preload:!0,loop:e[r].loop,volume:e[r].volume,onload:s_oMain.soundLoaded})},this._loadImages=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this),s_oSpriteLibrary.addSprite("but_play","./sprites/but_play.png"),s_oSpriteLibrary.addSprite("but_exit","./sprites/but_exit.png"),s_oSpriteLibrary.addSprite("bg_menu","./sprites/bg_menu.jpg"),s_oSpriteLibrary.addSprite("msg_box","./sprites/msg_box.png"),s_oSpriteLibrary.addSprite("audio_icon","./sprites/audio_icon.png"),s_oSpriteLibrary.addSprite("but_home","./sprites/but_home.png"),s_oSpriteLibrary.addSprite("but_restart","./sprites/but_restart.png"),s_oSpriteLibrary.addSprite("but_fullscreen","./sprites/but_fullscreen.png"),s_oSpriteLibrary.addSprite("bg_game","./sprites/bg_game.jpg"),s_oSpriteLibrary.addSprite("but_continue","./sprites/but_continue.png"),s_oSpriteLibrary.addSprite("but_yes","./sprites/but_yes.png"),s_oSpriteLibrary.addSprite("but_no","./sprites/but_no.png"),s_oSpriteLibrary.addSprite("but_info","./sprites/but_info.png"),s_oSpriteLibrary.addSprite("logo_ctl","./sprites/logo_ctl.png"),s_oSpriteLibrary.addSprite("cursor","./sprites/cursor.png"),s_oSpriteLibrary.addSprite("lettering_menu","./sprites/lettering_menu.png"),s_oSpriteLibrary.addSprite("lettering","./sprites/lettering.png"),s_oSpriteLibrary.addSprite("arrow_left","./sprites/arrow_left.png"),s_oSpriteLibrary.addSprite("arrow_right","./sprites/arrow_right.png"),s_oSpriteLibrary.addSprite("power_bar_bg","./sprites/power_bar_bg.png"),s_oSpriteLibrary.addSprite("power_bar_fill","./sprites/power_bar_fill.png"),s_oSpriteLibrary.addSprite("power_bar_frame","./sprites/power_bar_frame.png");for(e=0;e<99;e++)s_oSpriteLibrary.addSprite("rolling_balls_"+e,"./sprites/rolling_balls/rolling_balls_"+e+".jpg");for(var e=0;e<NUM_SKIN_BALL;e++)s_oSpriteLibrary.addSprite("ball_"+e,"./sprites/ball_"+e+".png");s_oSpriteLibrary.addSprite("bottom_area","./sprites/occluders/bottom_area.png"),s_oSpriteLibrary.addSprite("center_area","./sprites/occluders/center_area.png"),s_oSpriteLibrary.addSprite("top_area","./sprites/occluders/top_area.png"),s_oSpriteLibrary.addSprite("top_occluder_30","./sprites/occluders/top_occluder_30.png"),s_oSpriteLibrary.addSprite("top_occluder_40","./sprites/occluders/top_occluder_40.png"),s_oSpriteLibrary.addSprite("top_occluder_50","./sprites/occluders/top_occluder_50.png"),s_oSpriteLibrary.addSprite("top_occluder_100l","./sprites/occluders/top_occluder_100l.png"),s_oSpriteLibrary.addSprite("top_occluder_100r","./sprites/occluders/top_occluder_100r.png"),s_oSpriteLibrary.addSprite("bot_occluder_30","./sprites/occluders/bot_occluder_30.png"),s_oSpriteLibrary.addSprite("bot_occluder_40","./sprites/occluders/bot_occluder_40.png"),s_oSpriteLibrary.addSprite("bot_occluder_50","./sprites/occluders/bot_occluder_50.png"),s_oSpriteLibrary.addSprite("bot_occluder_100l","./sprites/occluders/bot_occluder_100l.png"),s_oSpriteLibrary.addSprite("bot_occluder_100r","./sprites/occluders/bot_occluder_100r.png"),p+=s_oSpriteLibrary.getNumSprites(),s_oSpriteLibrary.loadSprites()},this._onImagesLoaded=function(){_++;var e=Math.floor(_/p*100);t.refreshLoader(e),_===p&&s_oMain._onRemovePreloader()},this._onAllImagesLoaded=function(){},this.preloaderReady=function(){this._loadImages(),!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||this._initSounds(),r=!0},this._onRemovePreloader=function(){t.unload(),isIOS()||(s_oSoundTrack=playSound("ambience",1,!0)),this.gotoMenu()},this.gotoMenu=function(){s=new CMenu,n=STATE_MENU},this.gotoGame=function(){a=new CGame(i),n=STATE_GAME},this.gotoHelp=function(){o=new CHelp,n=STATE_HELP},this.stopUpdate=function(){r=!1,createjs.Ticker.paused=!0,$("#block_game").css("display","block"),!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||Howler.mute(!0)},this.startUpdate=function(){s_iPrevTime=(new Date).getTime(),r=!0,createjs.Ticker.paused=!1,$("#block_game").css("display","none"),!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_bAudioActive&&Howler.mute(!1)},this._update=function(e){if(!1!==r){var i=(new Date).getTime();s_iTimeElaps=i-s_iPrevTime,s_iCntFps++,s_iPrevTime=i,(s_iCntTime+=s_iTimeElaps)>=1e3&&(s_iCurFps=s_iCntFps,s_iCntTime-=1e3,s_iCntFps=0),n===STATE_GAME&&a.update(),s_oStage.update(e)}},s_oMain=this,i=e,ENABLE_CHECK_ORIENTATION=e.check_orientation,ENABLE_FULLSCREEN=e.fullscreen,this.initContainer()}var s_bMobile,s_oPhysicsController,s_iCanvasResizeHeight,s_iCanvasResizeWidth,s_iCanvasOffsetHeight,s_iCanvasOffsetWidth,s_oDrawLayer,s_oStage,s_oMain,s_oSpriteLibrary,s_aSounds,s_bAudioActive=!0,s_bFullscreen=!1,s_iCntTime=0,s_iTimeElaps=0,s_iPrevTime=0,s_iCntFps=0,s_iCurFps=0,s_iAdsLevel=1,s_iBestScore=0,s_oSoundTrack=null;